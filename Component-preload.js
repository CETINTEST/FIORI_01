/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "ui/s2p/mm/requisition/maintain/s1/Component-preload",
	"modules": {
		"ui/s2p/mm/requisition/maintain/s1/Component-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n//jQuery.sap.declare(\"se.mi.plm.attachmenttestapp.Component\");\r\n\r\nsap.ui.define([\r\n  \"sap/ui/core/UIComponent\",\r\n  \"sap/ui/model/resource/ResourceModel\",\r\n  \"ui/s2p/mm/requisition/maintain/s1/model/models\",\r\n  \"sap/ui/Device\",\r\n  \"ui/s2p/mm/requisition/maintain/s1/controller/ErrorHandler\",\r\n  \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n  \"ui/s2p/mm/requisition/maintain/s1/localService/mockserver\"\r\n  // \"sap/ca/scfld/md/ComponentBase\"\r\n\r\n ],\r\n\r\n function(UIComponent, ResourceModel, models, Device, ErrorHandler, BaseController, Mockserver) {\r\n  \"use strict\";\r\n\r\n  return UIComponent.extend(\"ui.s2p.mm.requisition.maintain.s1.Component\", {\r\n\r\n   metadata: {\r\n    manifest: \"json\",\r\n    config: {\r\n     fullWidth: true\r\n    }\r\n   },\r\n\r\n   /**\r\n    * The component is initialized by UI5 automatically during the startup of the app and calls the init method once.\r\n    * In this function, the resource and application models are set and the router is initialized.\r\n    * @public\r\n    * @override\r\n    */\r\n   init: function() {\r\n\r\n    try {\r\n\r\n     var productDetailsUrl = window.location;\r\n\r\n     // call the base component's init function\r\n     UIComponent.prototype.init.apply(this, arguments);\r\n\r\n     // initialize the error handler with the component\r\n     this._oErrorHandler = new ErrorHandler(this);\r\n     // this._oBaseController = new BaseController(this);\r\n     // set the device model\r\n     this.setModel(models.createDeviceModel(), \"device\");\r\n     // set the FLP model\r\n     this.setModel(models.createFLPModel(), \"FLP\");\r\n     // create the views based on the url/hash\r\n     this.getRouter().initialize();\r\n     this.getComponentData().changingSourcePageAllowed = true;\r\n     // var urlParameter = window.location.href.toString();\r\n     // if(urlParameter.search(\"create\") === 0) {\r\n     var urlParameter = this.getComponentData();\r\n\r\n     if (urlParameter.startupParameters[\"page\"]) {\r\n      this.getComponentData().sourcePage = urlParameter.startupParameters[\"page\"][0];\r\n      this.getComponentData().changingSourcePageAllowed = false;\r\n     }\r\n\r\n     if (urlParameter.startupParameters[\"draftKey\"]) {\r\n      this.getComponentData().draftKey = urlParameter.startupParameters[\"draftKey\"][0];\r\n     }\r\n     if (urlParameter.startupParameters[\"DocumentNo\"]) {\r\n      this.getComponentData().purchaseRequisition = urlParameter.startupParameters[\"DocumentNo\"][0];\r\n     }\r\n     if (urlParameter.startupParameters[\"DocumentItemNo\"]) {\r\n      this.getComponentData().purReqnItem = urlParameter.startupParameters[\"DocumentItemNo\"][0];\r\n     }\r\n     if (urlParameter.startupParameters[\"DocumentItemDraft\"]) {\r\n      this.getComponentData().purReqnItemDraft = urlParameter.startupParameters[\"DocumentItemDraft\"][0];\r\n     }\r\n     if (urlParameter.startupParameters[\"ItemPath\"]) {\r\n      this.getComponentData().PRitemPath = urlParameter.startupParameters[\"ItemPath\"][0];\r\n     }\r\n     if(urlParameter.startupParameters[\"IsExtPurgScenario\"]){\r\n      this.getComponentData().isExtPurgScenario = urlParameter.startupParameters[\"IsExtPurgScenario\"][0];\r\n     }\r\n     if (Mockserver.MockServerMode) {\r\n      this.getRouter().navTo(\"Search\");\r\n     } else {\r\n      window.decodeURIComponent(productDetailsUrl);\r\n      productDetailsUrl += \" \";\r\n\r\n      if (productDetailsUrl.search(\"searchTerm\") < 0) {\r\n       if (productDetailsUrl.search(\"CartOverview\") >= 0) {\r\n        this.getRouter().navTo(\"CartOverview\", {\r\n         DraftKey: urlParameter.draftKey,\r\n         PurchaseRequisition: urlParameter.purchaseRequisition\r\n        });\r\n       } else {\r\n        if (urlParameter.startupParameters[\"mode\"] == \"create\") {\r\n         // this._oBaseController.setKeys(urlParameter);\r\n         if (productDetailsUrl.search('Freetext') > 0) {\r\n          // this.getRouter().navTo(\"Freetext\");\r\n         } else {\r\n          this.getRouter().navTo(\"Search\");\r\n         }\r\n        } else {\r\n         // this._oBaseController.setKeys(urlParameter);\r\n         if (productDetailsUrl.search('Freetext') > 0) {\r\n          // this.getRouter().navTo(\"Freetext\");\r\n         } else {\r\n          this.getRouter().navTo(\"PurReqList\");\r\n         }\r\n        }\r\n       }\r\n      }\r\n     }\r\n     // Adding user defaults in applications buttons\r\n     var button = new sap.m.Button({\r\n      text: this.getModel(\"i18n\").getResourceBundle().getText(\"usersettings\"),\r\n      tooltip: this.getModel(\"i18n\").getResourceBundle().getText(\"usersettings\"),\r\n      press: jQuery.proxy(function() {\r\n       this.showSettingsDialog({});\r\n      }, this)\r\n     });\r\n     button.addStyleClass(\"sapUshellActionItem\");\r\n     sap.ushell.services.AppConfiguration.addApplicationSettingsButtons([button]);\r\n\r\n    } catch (e) {\r\n\r\n    }\r\n\r\n   },\r\n\r\n   showSettingsDialog: function() {\r\n\r\n    var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n    var mode = this.getComponentData().startupParameters[\"mode\"];\r\n    var intent;\r\n    var srcpage;\r\n    if (this.getComponentData().startupParameters[\"page\"]) {\r\n     srcpage = this.getComponentData().startupParameters[\"page\"][0];\r\n    } else {\r\n     srcpage = this.getComponentData().sourcePage;\r\n    }\r\n    if (mode[0] === \"create\") {\r\n     intent = \"create\";\r\n    } else {\r\n     intent = \"manageLineItems\";\r\n    }\r\n    oCrossAppNavigator.toExternal({\r\n     target: {\r\n      semanticObject: \"UserDefaults\",\r\n      action: \"manage\"\r\n     },\r\n\r\n     params: {\r\n      BusinessObject: [\"PurchaseRequisition\"],\r\n      Intent: [intent],\r\n      Mode: [mode],\r\n      page: [srcpage],\r\n      draftKey: [this.getComponentData().draftKey],\r\n      DocumentNo: [this.getComponentData().purchaseRequisition],\r\n      DocumentItemNo: [this.getComponentData().purReqnItem],\r\n      DocumentItemDraft: [this.getComponentData().purReqnItemDraft],\r\n      ItemPath: [this.getComponentData().PRitemPath],\r\n      IsExtPurgScenario: [this.getComponentData().isExtPurgScenario]\r\n       //  PurchaseRequisitionItem: [selectedLine.Purchaserequisitionitem]\r\n     }\r\n\r\n    });\r\n   },\r\n   getQueryVariable: function(variable) {\r\n    var query = window.location.search.substring(1);\r\n    var vars = query.split(\"&\");\r\n    for (var i = 0; i < vars.length; i++) {\r\n     var pair = vars[i].split(\"=\");\r\n     if (pair[0] === variable) {\r\n      return pair[1];\r\n     }\r\n    }\r\n    return (false);\r\n   },\r\n\r\n   /**\r\n    * In this function, the rootView is initialized and stored.\r\n    * @public\r\n    * @override\r\n    * @returns {sap.ui.mvc.View} the root view of the component\r\n    */\r\n   createContent: function() {\r\n    // call the base component's createContent function\r\n    var oRootView = UIComponent.prototype.createContent.apply(this, arguments);\r\n    oRootView.addStyleClass(this.getContentDensityClass());\r\n    return oRootView;\r\n   },\r\n\r\n   /**\r\n    * This method can be called to determine whether the sapUiSizeCompact or sapUiSizeCozy design mode class should be set, which influences the size appearance of some controls.\r\n    * @public\r\n    * @return {string} css class, either 'sapUiSizeCompact' or 'sapUiSizeCozy'\r\n    */\r\n   getContentDensityClass: function() {\r\n    if (!this._sContentDensityClass) {\r\n     if (Device.system.desktop) { // apply compact mode if touch is not supported; this could me made configurable for the user on \"combi\" devices with touch AND mouse\r\n      this._sContentDensityClass = \"sapUiSizeCompact\";\r\n     } else {\r\n      this._sContentDensityClass = \"sapUiSizeCozy\"; //sapUiSizeCompact needed for desktop-first controls like sap.ui.table.Table\r\n     }\r\n    }\r\n    return this._sContentDensityClass;\r\n   }\r\n\r\n  });\r\n\r\n });",
		"ui/s2p/mm/requisition/maintain/s1/model/formatter.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/core/format/DateFormat\"],function(){\"use strict\";return{numberUnit:function(v){if(!v){return\"\";}return parseFloat(v).toFixed(2);},quantity:function(v,a,b){return v+\":\"+a+\" \"+b;},price:function(v,a){if(v!==\"0.0000\"){return v;}else if(a!==\"0.0000\"){return a;}else{return v;}},priceformat:function(v,a){return parseFloat(v).toFixed(a);},orderunit:function(v,a,b,c,d){var p=\"\";var o=\"\";if(a!==\"0\"){p=a;}else if(b!==\"0\"){p=b;}else{p=a;}if(c){o=c;}else if(d){o=d;}return v+\" \"+p+\" \"+o;},totalText:function(v){return v+\":\";},Supplier:function(f,p,e,a,b,c){if(f){return f;}else if(p){return p;}else if(e){return e;}else if(a){return a;}else if(b){return b;}else if(c){return c;}},SourceOfSupply:function(i,a,b){if(i){return this.getResourceBundle().getText(\"InfoRecord\")+\":\"+i;}else{return this.getResourceBundle().getText(\"agreementNumber\")+\"/\"+this.getResourceBundle().getText(\"item\")+\":\"+a+\"/\"+b;}},date:function(v){if(v){var Y=v.substr(0,4);var M=v.substr(4,2);var d=v.substr(6,2);return d+\".\"+M+\".\"+Y;}else{return v;}},setTitle:function(v){if(v){return(this.getResourceBundle().getText(\"PurReqfor\"))+\" \"+v;}else{return(this.getResourceBundle().getText(\"PurReqfor\"));}},netPrice:function(v,a){return v+\" \"+a;},ItemPrice:function(v,a,b,c){var d=\"per\";return v+\" \"+a+\" \"+d+\" \"+b+\" \"+c;},rating:function(v){if(v){return parseFloat(v);}else{return 0;}},setTotal:function(v){var t=this.getResourceBundle().getText(\"totalMiniCart\");return t+\": \"+v;},tax:function(v){if(v===0){return\"Data is not maintained\";}else{return v;}},totalValue:function(v){if(v){var n=parseFloat(v);var a=n.toFixed(2);return a;}else{return 0;}},convertInt:function(v){if(v){return parseInt(v);}else{return 0;}},imgnotfound:function(v){if(v){return v;}else{try{return this.getOwnerComponent().getManifest()[\"sap.platform.abap\"].uri+\"/images/dummyImg.png\";}catch(e){return\"./images/dummyImg.png\";}}},supplierImage:function(v){if(v){return v;}else{try{return this.getOwnerComponent().getManifest()[\"sap.platform.abap\"].uri+\"/images/Capture.JPG\";}catch(e){return\"./images/Capture.JPG\";}}},currency:function(v,a){if(v){if(a){return v+\" \"+a;}}},formatCreatedDate:function(d){if(d){var s=sap.ui.getCore().getConfiguration().getLanguage();var l=new sap.ui.core.Locale(s);var f=sap.ui.core.format.DateFormat.getDateInstance({style:\"medium\"},l).format(new Date(d),true);return f;}else{return\"\";}},formatTotalValue:function(v,a){var n=sap.ui.core.format.NumberFormat.getCurrencyInstance();return n.format(v);},reviewDate:function(v){if(v){var Y=v.substr(0,4);var M=v.substr(4,2);var d=v.substr(6,2);var h=v.substr(8,2);var m=v.substr(10,2);var c=Y+\"/\"+M+\"/\"+d+\",\"+h+\":\"+m;c=new Date(c);var D=sap.ui.core.format.DateFormat.getDateInstance({style:\"medium\"});return\": \"+D.format(c);}else{return\": \"+this.getResourceBundle().getText(\"dataNotMaintained\");}},getGroupHeader:function(g){if(g.key===\"MANUFACTNAME\"){g.key=this.getResourceBundle().getText(\"Manufacturer\");}if(g.key===\"VENDOR\"){g.key=this.getResourceBundle().getText(\"Supplier\");}if(g.key===\"INTCATALOGNAME\"){g.key=this.getResourceBundle().getText(\"Catalog\");}if(g.key===\"Z-Price Range\"){g.key=this.getResourceBundle().getText(\"PriceRange\");}return new sap.m.GroupHeaderListItem({title:g.key,upperCase:false});},formatMiniCart:function(v,a){return v+\": \"+a;},formatMiniCartQuantity:function(v,a,b){return v+\": \"+a+\" \"+b;},formatWelcomeText:function(v,a){return v+\",  \"+a;},formatPer:function(v,a,b){if(a){return v+\" \"+a+\" \"+b;}},formatDeliveryDate:function(v,a){if(a){a=a.toDateString().substr(4);return v+\": \"+a;}},formatDeliveryDays:function(v){if(v){return this.getResourceBundle().getText(\"DeliveryDateText\")+\" \"+v+\" \"+this.getResourceBundle().getText(\"Days\");}},concat:function(t,e){return t+\" \"+e;},formatEditDeleteLink:function(v){if(v){return true;}else{return false;}},reviewID:function(v){if(v){return v+\":\";}else{return\" : \";}},reviewText:function(v){if(v){v=\" \"+v;return v;}else{return\" \";}},priceRange:function(v){if(v===\"X\"){return this.getResourceBundle().getText(\"pricescale\");}},pricerangelimit:function(v,a){if(a>0){return v+\" - \"+a;}else{return v+\" \"+this.getResourceBundle().getText(\"andAbove\");}},appendCurrency:function(v,a){return v+\" \"+a;},formartOnMaterialVisibility:function(p){var i=true;if(p!==undefined){if(p==\"2\"){i=false;}}return i;},formartOnServiceVisibility:function(p){var i=false;if(p!==undefined){if(p==\"2\"){i=true;}}return i;},materialFieldVisibilitySwitch:function(s){if(s===\"\"){return true;}else{return false;}},serviceFieldVisibilitySwitch:function(s){if(s===\"\"){return false;}else{return true;}},miniCartDateRangeFormartting:function(f,t){var a=\"\";var s=sap.ui.getCore().getConfiguration().getLanguage();var l=new sap.ui.core.Locale(s);if(f!=null&&t!=null){var F=sap.ui.core.format.DateFormat.getDateInstance({style:\"medium\"},l).format(f,true);var T=sap.ui.core.format.DateFormat.getDateInstance({style:\"medium\"},l).format(t,true);a=F+\" - \"+T;}return a;},deliveryDateFormartting:function(d){var f=\"\";var s=sap.ui.getCore().getConfiguration().getLanguage();var l=new sap.ui.core.Locale(s);if(d!=null){var F=sap.ui.core.format.DateFormat.getDateInstance({style:\"medium\"},l).format(d,true);f=F;}return f;},formatStatusLink:function(v){if(v==='Follow on Document Created')return true;else return false;},formatNumberOfItems:function(v){if(v===1){return v+\" \"+this.getResourceBundle().getText(\"item\");}else{return v+\" \"+this.getResourceBundle().getText(\"ITEMS\");}},approvalText:function(v,a){if(a===null){return v;}else{return v+\" - \"+a;}},companycode:function(v){if(v){return\":\"+\" \"+\"  Code(\"+v+\")\";}else{return\"\";}},supplierType:function(v,a){if(a){return\":\"+\" \"+a+\" (Fixed)\";}else if(v){return\":\"+\" \"+v+\" (Preferred)\";}else{return\"\";}},fieldVisiblity:function(v,a,b){if(v||a||b){return true;}else{return false;}},totalTextApplyChange:function(v){return\":\"+\" \"+v;},AddressFormatter:function(v,a,b){var t=\"\";var c=\"\";if(v){t=v+\" \";}if(a){c=a+\", \";}if(b){return t+c+b;}else{return t+c;}return t+c+b;}};});",
		"ui/s2p/mm/requisition/maintain/s1/misc/MassChange.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\",\"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\",\"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\",\"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\",\"sap/ui/model/Filter\"],function(O,E,U,D,a,F){\"use strict\";var A=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.MassChange\");A.onPressApplyChangeMass=function(P){var d=\"ui.s2p.mm.requisition.maintain.s1.view.MassChange\";if(!P.dialog){P.dialog=sap.ui.xmlfragment(d,P);P.getView().addDependent(P.dialog);}this.dialog=P.dialog;this.oModelItemDetails=A.createItemModel(P);this.oParentController=P;A.setCountryTexts(P);};A.setCountryTexts=function(P){var o=P.getView().byId(\"smartForm1\").getBindingContext().getObject();var s='/I_CountryText';var m=P.getAppModel();if(o.Language==''){o.Language='EN';}m.read(s,{urlParameters:{\"$filter\":\"Country eq '\"+o.AddressCountry+\"'\"+\"  and Language eq '\"+o.Language+\"'\"},success:jQuery.proxy(A.textReadSuccess,this),error:jQuery.proxy(A.textReadFailure,this)});};A.textReadSuccess=function(d){if(d.results.length){var c=d.results[0];var b=c.CountryName;this.oModelItemDetails.getData().countryName=b;}A.setRegionTexts(this.oParentController);};A.textReadFailure=function(){A.setRegionTexts(this.oParentController);};A.setRegionTexts=function(P){var o=P.getView().byId(\"smartForm1\").getBindingContext().getObject();var s='/I_Region';var m=P.getAppModel();m.read(s,{urlParameters:{\"$filter\":\"Region eq '\"+o.AddressRegion+\"'\"+\"  and Country eq '\"+o.AddressCountry+\"'\"},success:jQuery.proxy(A.textRegionReadSuccess,this),error:jQuery.proxy(A.textRegionReadFailure,this)});};A.textRegionReadSuccess=function(d){if(d.results.length){var r=d.results[0];var b=r.Region_Text;this.oModelItemDetails.getData().regionText=b;}A.setSalutationTexts(this.oParentController);};A.textRegionReadFailure=function(){A.setSalutationTexts(this.oParentController);};A.setSalutationTexts=function(P){var o=P.getView().byId(\"smartForm1\").getBindingContext().getObject();var s='/SalutationTitleSet';var m=P.getAppModel();m.read(s,{urlParameters:{\"$filter\":\"Title eq '\"+o.FormOfAddress+\"'\"},success:jQuery.proxy(A.saluReadSuccess,this),error:jQuery.proxy(A.saluReadFailure,this)});};A.saluReadSuccess=function(d){if(d.results.length){var s=d.results[0];var b=s.TitleMedi;this.oModelItemDetails.getData().salutationName=b;}A.setSectionsData(this.oModelItemDetails);this.dialog.open();};A.saluReadFailure=function(){A.setSectionsData(this.oModelItemDetails);this.dialog.open();};A.createItemModel=function(P){var o=P.getView().byId(\"smartForm1\").getBindingContext().getObject();this.oModelItemDetails=new sap.ui.model.json.JSONModel(o);return this.oModelItemDetails;};A.setSectionsData=function(m){var L=sap.ui.getCore().byId(\"selectedItemsSections\");L.setModel(m);};A.onCancelChanges=function(){var l=sap.ui.getCore().byId(\"selectedItemsSections\").getItems();var b=sap.ui.getCore().byId(\"otherItemsList\").getItems();for(var i=0;i<l.length;i++){l[i].setSelected(false);}for(var i=0;i<b.length;i++){b[i].setSelected(false);}this.dialog.close();sap.ui.getCore().byId(\"selSectionsToolbar\").setVisible(false);sap.ui.getCore().byId(\"selItemsToolbar\").setVisible(false);sap.ui.getCore().byId(\"onSelectBtnPG1\").setEnabled(false);sap.ui.getCore().byId(\"onSelectBtnPG2\").setEnabled(false);A.goBacktoSectionsPage();};A.onSelectItems=function(p,H,P){sap.ui.getCore().byId(\"otherItemsList\").setModel(P.oItemsList,\"b\");this.navCon=sap.ui.getCore().byId(\"Dialog_Nc_ApplyChange\");this.navCon.to(\"p2\");};A.goBacktoSectionsPage=function(){sap.ui.getCore().byId(\"searchinput\").setValue(\" \");sap.ui.getCore().byId(\"Dialog_Nc_ApplyChange\").to(\"p1\");};A.onUpdateSelectedItemsCount=function(e){var l=e.getSource();var c=l.getSelectedItems();var s=(c&&c.length>0);var L;var i;var b;if(e.getParameter(\"id\")===\"selectedItemsSections\"){L=sap.ui.getCore().byId(\"selChangesPage1\");i=sap.ui.getCore().byId(\"selSectionsToolbar\");b=sap.ui.getCore().byId(\"onSelectBtnPG1\");}else{L=sap.ui.getCore().byId(\"selChangesPage2\");i=sap.ui.getCore().byId(\"selItemsToolbar\");b=sap.ui.getCore().byId(\"onSelectBtnPG2\");}var t=(s)?c.length+\" selected\":null;if(s){b.setEnabled(true);}else{b.setEnabled(false);}i.setVisible(s);L.setText(t);};A.getSmartfields=function(P,s){var d=P.getView().byId(s).getModel().getData(\"/\"+P.itemPath);var b=P.getView().byId(s).getSmartFields();return b;};A.preparecopySelectedData=function(b,s,c){for(var i=0;i<s.length;i++){var k=s[i].getDataProperty().typePath;var v=s[i].getValue();var o=this.fieldsForCopy;if(c.indexOf(k)!=-1){if(k===\"DeliveryDate\"){o[k]=b.DeliveryDate;}else{o[k]=v;}}}};A.belongstoStandard=function(p){var f=[\"PurchaseRequisitionPrice\",\"MaterialGroup\",\"NetPriceQuantity\",\"AccountAssignmentCategory\",\"Plant\",\"CompanyCode\",\"PurchasingOrganization\",\"PurchasingGroup\",\"ServicePerformer\",\"DeliveryDate\",\"RequestedQuantity\",\"Material\",\"PurchaseRequisitionItemText\",\"FormOfAddress\",\"FullName\",\"PhoneNumber1\",\"FaxNumber\",\"EmailAddress\",\"AddressStreetName\",\"AddressHouseNumber\",\"AddressCityName\",\"AddressPostalCode\",\"AddressCountry\",\"AddressRegion\"];if(f.find(p)==undefined){return false;}else{return true;}};A.getExtensibilityfields=function(I,s){var e={};var b=I.getView().byId(s).getSmartFields();for(var j=0;j<b.length;j++){var c=b[j].getBindingInfo(\"text\");for(var p=0;p<c.parts.length;p++){var d=c.parts[p].path;d=d.slice(1,d.length);if(!this.belongstoStandard(d)){e.push(d);}}}return e;};A.onSaveChanges=function(P){this.fieldsForCopy={};var o={};var f=this.fieldsForCopy;var b=this.oModelItemDetails.getData();var s=[];var c=[];var d={};var g={};var h=sap.ui.getCore().byId(\"selectedItemsSections\");var m=h.getSelectedItems();for(var i=0;i<m.length;i++){var n=h.indexOfItem(m[i]);if(n===0){s=A.getSmartfields(P,\"smartForm1\");try{d=A.getExtensibilityfields(P,\"smartForm1\");}catch(e){}var q=sap.ui.getCore().byId(\"generalDataSection\").getControlsByFieldGroupId(\"generalData\");for(var j=0;j<q.length;j++){var r=q[j].getBindingInfo(\"text\");for(var p=0;p<r.parts.length;p++){var t=r.parts[p].path;t=t.slice(1,t.length);c.push(t);}}try{for(var e=0;e<d.length;e++){c.push(d[e]);}}catch(e){}if(b.ProductType===\"2\"){this.fieldsForCopy.PerformancePeriodStartDate=b.PerformancePeriodStartDate;this.fieldsForCopy.PerformancePeriodEndDate=b.PerformancePeriodEndDate;}}if(n===1){s=A.getSmartfields(P,\"smartForm2\");try{g=A.getExtensibilityfields(P,\"smartForm2\");}catch(e){}var u=sap.ui.getCore().byId(\"Applychangedeliveryaddress\").getControlsByFieldGroupId(\"delvAddress\");for(var k=0;k<u.length;k++){var r=u[k].getBindingInfo(\"text\");for(var l=0;l<r.parts.length;l++){var t=r.parts[l].path;t=t.slice(1,t.length);c.push(t);}}this.fieldsForCopy.AddressCountry=b.AddressCountry;this.fieldsForCopy.FormOfAddress=b.FormOfAddress;this.fieldsForCopy.AddressRegion=b.AddressRegion;try{for(var e=0;e<g.length;e++){c.push(g[e]);}}catch(e){}}if(n===2){if(b.Supplier!=\"\"){this.fieldsForCopy.Supplier=b.Supplier;}else if(b.FixedSupplier!=\"\"){this.fieldsForCopy.FixedSupplier=b.FixedSupplier;}}if(n!=2){A.preparecopySelectedData(b,s,c);}}var L=sap.ui.getCore().byId(\"otherItemsList\");var S=L.getSelectedItems();for(var j=0;j<S.length;j++){var v=L.getSelectedContexts()[j].getModel().getData().items[j];A.copyToItem(P,this.fieldsForCopy,v.DraftUUID,v.PurchaseRequisitionItem,v.PurchaseRequisition);}P.onPressSave();this.dialog.close();A.onCancelChanges();};A.copyToItem=function(P,f,i,b,p){a.updateItemDetails(P.getServiceCallParameter(A.successItemCopy,A.itemCopyFail),i,p,f,b);};A.successItemCopy=function(){sap.m.MessageToast.show(this.getResourceBundle().getText(\"sucessMessageApplyChange\"));window.history.go(-1);};A.itemCopyFail=function(d){sap.m.MessageToast.show(this.getResourceBundle().getText(\"failMessageApplyChange\"));window.history.go(-1);};A.onSearchMassChange=function(e){var f=[];var q=e.getSource().getValue();if(q&&q.length>0){var b=new F(\"PurchaseRequisitionItemText\",sap.ui.model.FilterOperator.Contains,q);f.push(b);}var l=sap.ui.getCore().byId(\"otherItemsList\");var c=l.getBinding(\"items\");c.filter(f,\"Application\");};return A;});",
		"ui/s2p/mm/requisition/maintain/s1/misc/DataManager.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\", \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\r\n\t\"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\", \"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\"\r\n], function(O, E, U, D) {\r\n\t\"use strict\";\r\n\tvar a = O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.DataManager\");\r\n\ta._oPopOver = null;\r\n\ta.EntityConstants = E;\r\n\ta.getCurrentDraft = function(p, b) {\r\n\t\tvar o = U.prototype.getHeaderWorkingDraft(b);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getItemsforProductType = function(p, b, d, c, P) {\r\n\t\tvar o = U.prototype.getItemsforProductType(d, b, c, P);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.deleteAndCreateNewDraft = function(p, d, b) {\r\n\t\tvar o = U.prototype.deleteWorkingDraft(d, b);\r\n\t\tvar c = U.prototype.createNewDraft();\r\n\t\tD.prototype.deleteAndCreateNewDraft(o.returnURL, c.returnURL, p);\r\n\t};\r\n\ta.deleteDraft = function(p, d, b) {\r\n\t\tvar o = U.prototype.deleteWorkingDraft(d, b);\r\n\t\tD.prototype.deleteCurrentDraft(o.returnURL, p);\r\n\t};\r\n\ta.createNewDraft = function(p) {\r\n\t\tvar o = U.prototype.createNewDraft();\r\n\t\tD.prototype.create(o.returnURL, null, p);\r\n\t};\r\n\ta.getItemDetails = function(p, d, b, c, e, f) {\r\n\t\tvar o = U.prototype.getItemDetails(d, b, c, e, f);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getAccounting = function(p, d, b, c, e, f) {\r\n\t\tvar o = U.prototype.getAccounting(d, b, c, e, f);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getHeader = function(p, d, b, c) {\r\n\t\tvar o = U.prototype.getHeaderData(d, b, c);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getAccAssignmentValue = function(p, b) {\r\n\t\tvar o = U.prototype.getAccAssignmentValue(b);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getSupplierName = function(p, s) {\r\n\t\tvar o = U.prototype.getSupplierName(s);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.checkSupplierName = function(p, s) {\r\n\t\tvar o = U.prototype.checkSupplierName(s);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getMaterialDescription = function(p, m) {\r\n\t\tvar o = U.prototype.getMaterialDescription(m);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getMaterialGroupDescription = function(p, m) {\r\n\t\tvar o = U.prototype.getMatGrpDesc(m);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getGLAccountDescription = function(p, g, c) {\r\n\t\tvar s = \"/I_GLAccount\" + \"(CompanyCode=\" + \"'\" + c + \"'\" + \",GLAccount=\" + \"'\" + g + \"'\" + \")\";\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tm.read(s, {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject)\r\n\t\t});\r\n\t};\r\n\ta.getCostCentreDescription = function(p, c) {\r\n\t\tvar o = U.prototype.getCostCentreDescription(c);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getSupplierDescription = function(p, s) {\r\n\t\tvar b = \"/C_MM_SupplierValueHelp\" + \"('\" + s + \"')\";\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tm.read(b, {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject)\r\n\t\t});\r\n\t};\r\n\ta.getCostCentreDescByControllingArea = function(p, c, b) {\r\n\t\tvar o = U.prototype.getCostCentreDescByControllingArea(c, b);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.createNewItem = function(p, d, b, o) {\r\n\t\tvar c = U.prototype.createNewItem(d, b, false);\r\n\t\tD.prototype.create(c.returnURL, o, p);\r\n\t};\r\n\ta.deleteItem = function(p, i, b, c) {\r\n\t\tvar o = U.prototype.deleteItem(b, c, i);\r\n\t\tD.prototype.deleteCurrentDraft(o.returnURL, p);\r\n\t};\r\n\ta.activateDocument = function(p, d, b) {\r\n\t\tvar c = {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject),\r\n\t\t\turlParameters: {\r\n\t\t\t\tPurchaseRequisition: b,\r\n\t\t\t\tDraftUUID: d,\r\n\t\t\t\tIsActiveEntity: false\r\n\t\t\t},\r\n\t\t\tmethod: \"POST\"\r\n\t\t};\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tm.callFunction(\"/\" + E.getFunctionName('orderFunc'), c);\r\n\t};\r\n\ta.editDocument = function(p, d, b) {\r\n\t\tvar c = {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject),\r\n\t\t\turlParameters: {\r\n\t\t\t\tPurchaseRequisition: b,\r\n\t\t\t\tDraftUUID: d,\r\n\t\t\t\tIsActiveEntity: true\r\n\t\t\t},\r\n\t\t\tmethod: \"POST\"\r\n\t\t};\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tm.callFunction(\"/\" + E.getFunctionName('editDraft'), c);\r\n\t};\r\n\ta.updateHeader = function(p, d, b, o) {\r\n\t\tvar c = U.prototype.updateHeader(d, b);\r\n\t\tD.prototype.update(c.returnURL, o, p);\r\n\t};\r\n\ta.updateItemDetails = function(p, d, b, o, c) {\r\n\t\tdelete o.HasActiveEntity;\r\n\t\tvar e = U.prototype.updateItemDetails(d, b, c, false);\r\n\t\tD.prototype.update(e.returnURL, o, p);\r\n\t};\r\n\ta.updateAccountAssignment = function(p, d, b, o, c, u) {\r\n\t\tvar e = U.prototype.updateAccountAssignment(u);\r\n\t\tD.prototype.update(e.returnUrl, o, p);\r\n\t};\r\n\ta.getDraftAccountID = function(p, d, b, c) {\r\n\t\tvar o = U.prototype.getDraftAccountID(b, c, d);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getApprovalPreviewSet = function(p, b, c) {\r\n\t\tvar o = U.prototype.getApprovalPreviewSet(b, c);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getApproverDetails = function(p, A, b, c) {\r\n\t\tvar o = U.prototype.getApproverDetails(b, c, A);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getNotes = function(p, i, b, c) {\r\n\t\tvar o = U.prototype.getNotes(i, b, c);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.getAttributeDetails = function(p, f, l) {\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tvar u = \"/\" + E.getEntityName(\"attributeEntity\");\r\n\t\tm.read(u, {\r\n\t\t\turlParameters: {\r\n\t\t\t\t\"$filter\": f + l\r\n\t\t\t},\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject)\r\n\t\t});\r\n\t};\r\n\ta.addToCart = function(p, d, b) {\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tvar u = \"/\" + E.getEntityName('headerEntity') + \"(PurchaseRequisition='',DraftUUID=guid'\" + b + \"'\" + \",IsActiveEntity=false\" + \")/\" +\r\n\t\t\tE.getEntityNavigationName('item');\r\n\t\tm.create(u, d, {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject)\r\n\t\t});\r\n\t};\r\n\ta.updateNotes = function(p, m, d, b, o, c, e) {\r\n\t\tvar f = U.prototype.updateNotes(b, c, d, e);\r\n\t\tif (!o.HasActiveEntity) {\r\n\t\t\tif (o.PurReqnItemLongtext !== \"\") {\r\n\t\t\t\tD.prototype.update(f.returnURL, o, p);\r\n\t\t\t} else {\r\n\t\t\t\tD.prototype.deleteItemNoteText(f.returnURL, p);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tdelete o.HasActiveEntity;\r\n\t\t\tif (o.PurReqnItemLongtext !== \"\") {\r\n\t\t\t\tD.prototype.update(f.returnURL, o, p);\r\n\t\t\t} else {\r\n\t\t\t\tD.prototype.deleteItemNoteText(f.returnURL, p);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\ta.createNotes = function(p, m, d, b, o, c) {\r\n\t\tvar e = U.prototype.createNotes(d, c, b);\r\n\t\tD.prototype.create(e.returnURL, o, p, m);\r\n\t};\r\n\ta.catalogBind = function(p, S, d) {\r\n\t\tvar o = U.prototype.getCatalogBindUrl(S, d);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\ta.searchResultsBinding = function(p, f) {\r\n\t\tvar o = U.prototype.getSearchResultsUrl(f);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.submitReview = function(p, d) {\r\n\t\tvar m = p.oParentObject.getAppModel();\r\n\t\tvar u = \"/\" + E.getEntityName('reviewEntity');\r\n\t\tm.create(u, d, {\r\n\t\t\tsuccess: jQuery.proxy(p.successHandler, p.oParentObject),\r\n\t\t\terror: jQuery.proxy(p.errorHandler, p.oParentObject)\r\n\t\t});\r\n\t};\r\n\ta.filterResultsBinding = function(p, f) {\r\n\t\tvar o = U.prototype.getfilterResultsUrl(f);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.priceScalefind = function(p, f) {\r\n\t\tvar o = U.prototype.getPriceScaleUrl(f);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.getMaterialPrice = function(p, m) {\r\n\t\tvar o = U.prototype.getMaterialPrice(m);\r\n\t\tD.prototype.read(o.returnURL, o.urlParameters, p);\r\n\t};\r\n\ta.headerSuccess = function(c, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"headersuccess\", v);\r\n\t\tD.prototype.bindElement(c, o.returnURL);\r\n\t};\r\n\ta.updateMiniCartTotal = function(c, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"updateMiniCart\", v);\r\n\t\tD.prototype.bindElement(c, o.returnURL);\r\n\t};\r\n\ta.prepareMiniCart = function(c, t, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"prepareMiniCart\", v);\r\n\t\tD.prototype.bindItems(c, o.returnURL, t);\r\n\t};\r\n\ta.cartService = function(c, t, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"cartService\", v);\r\n\t\tD.prototype.bindItems(c, o.returnURL, t);\r\n\t};\r\n\ta.genInfoCartView = function(c, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"genInfoCart\", v);\r\n\t\tD.prototype.bindElement(c, o.returnURL);\r\n\t};\r\n\ta.genInfoCartButton = function(c, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"genInfoCart\", v);\r\n\t\tD.prototype.bindElement(c, o.returnURL);\r\n\t};\r\n\ta.updateHeaderSuccess = function(c, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"updateHeaderSuccess\", v);\r\n\t\tD.prototype.bindElement(c, o.returnURL);\r\n\t};\r\n\ta.readDummy = function(p, v) {\r\n\t\tvar o = U.prototype.getURLForBinding(\"dummyItem\", v);\r\n\t\tD.prototype.read(o.returnURL, [], p);\r\n\t};\r\n\treturn a;\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/misc/ExternalPurchasing.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\",\"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\",\"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\",\"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\",\"sap/ui/model/Filter\"],function(O,E,U,D,a,F){\"use strict\";var d=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.ExternalPurchasing\");d.validateMatAndText=function(t){var e=t.getView().byId(\"idExtMaterial\").getValue();var s=t.getView().byId(\"idMaterialDescription\").getValue();if((e.trim()===\"\"||e===null)&&(s.trim()===\"\"||s===null)){return false;}else{t.getView().byId(\"idExtMaterial\").setValueState(sap.ui.core.ValueState.None);t.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);return true;}};d.getExtMaterialDetails=function(t){var e=t.getView().byId(\"idExtMaterial\").getValue();t.getView().setBusy(true);a.getMaterialPrice(t.getServiceCallParameter(function(b){t.getView().byId(\"idMaterialDescription\").setValue(b.PurchaseRequisitionItemText);t.getView().setBusy(false);},d.serviceFail),e);};d.addSupplier=function(t,e){var s=sap.ui.getCore().byId(\"supplier\").getValue();if(s===\"\"||s===null){sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);sap.ui.getCore().byId(\"supplier\").setValueStateText(t.getResourceBundle().getText(\"invalidSupplier\"));}else{var p=sap.ui.getCore().byId(\"preferred\").getSelected();var f=sap.ui.getCore().byId(\"fixed\").getSelected();if(p===true){t.text=\"Preferred\";t.ExtDesiredSupplierForPurg=s;t.ExtFixedSupplierForPurg=\"\";}else{t.text=\"Fixed\";t.ExtDesiredSupplierForPurg=\"\";t.ExtFixedSupplierForPurg=s;}if(!t.productList){t.productList=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\",t);t.getView().addDependent(t.productList);}t.getView().byId(\"sourceOfSupply\").removeAllContent();if(t.getSourcePage()===\"ItemDetails\"){t.getView().byId(\"addSupplier\").setVisible(false);}else{t.getView().byId(\"addSupplier1\").setVisible(false);}t.getView().byId(\"sourceOfSupply\").addContent(t.productList);t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(s);t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(s);t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(t.text);t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");e.getSource().getParent().close();}};d.updateModel=function(t,o){var b=t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].getText();var s=t.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].getText();if(b===\"Preferred\"){o.ExtDesiredSupplierForPurg=s;o.ExtFixedSupplierForPurg=\"\";o.FixedSupplier=\"\";o.Supplier=\"\";}else if(b===\"Fixed\"){o.ExtDesiredSupplierForPurg=\"\";o.ExtFixedSupplierForPurg=s;o.FixedSupplier=\"\";o.Supplier=\"\";}else if(t.ExtInfoRecord){o.ExtDesiredSupplierForPurg=\"\";o.ExtFixedSupplierForPurg=\"\";o.FixedSupplier=\"\";o.Supplier=\"\";o.ExtInfoRecordForPurg=t.ExtInfoRecord;}else if(t.ExtContract){o.ExtDesiredSupplierForPurg=\"\";o.ExtFixedSupplierForPurg=\"\";o.FixedSupplier=\"\";o.Supplier=\"\";o.ExtContractForPurg=t.ExtContract;o.ExtContractItemForPurg=t.ExtContractItem;}else if(t.ExtContract===\"\"&&t.ExtContractItem===\"\"&&t.ExtInfoRecord===\"\"){o.ExtContractForPurg=\"\";o.ExtContractItemForPurg=\"\";o.ExtInfoRecordForPurg=\"\";}return o;};d.updateExtSupplierInfo=function(e,t){var s=e.getSource().getParent().getCells()[1].getItems()[\"0\"].getAttributes()[3].getText();var f=s.split(\":\")[1];var b=f.split(\"/\")[0];var c=f.split(\"/\")[1];var g=[];if(c===undefined||c===\"\"||c===\" \"){g[\"ExtInfoRecord\"]=b;}else{g[\"ExtContract\"]=b;g[\"ExtContractItem\"]=c;}return g;};d.assignSupplier=function(t,o){o.ExtDesiredSupplierForPurg=t.Supplier1;o.ExtFixedSupplierForPurg=t.Fixedsupplier1;return o;};return d;});",
		"ui/s2p/mm/requisition/maintain/s1/controller/BaseController.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nvar oMessagePopover;\r\nvar oSearchterm, callInitAfterDeleteOrder;\r\nsap.ui.define([\"sap/ui/core/mvc/Controller\", \"sap/ui/core/routing/History\", \"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\r\n\t\"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\", \"ui/s2p/mm/requisition/maintain/s1/misc/MassChange\",\r\n\t\"ui/s2p/mm/requisition/maintain/s1/misc/ExternalPurchasing\", \"sap/ui/model/json/JSONModel\", \"sap/m/MessageBox\", \"sap/m/Button\"\r\n], function(C, H, f, D, A, E, J, M, B) {\r\n\t\"use strict\";\r\n\treturn C.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.BaseController\", {\r\n\t\tdataManager: D,\r\n\t\tentityConstants: D.EntityConstants,\r\n\t\tformatter: f,\r\n\t\tApplyChange: A,\r\n\t\tExternalPurchasing: E,\r\n\t\tgetRouter: function() {\r\n\t\t\treturn sap.ui.core.UIComponent.getRouterFor(this);\r\n\t\t},\r\n\t\tsetTestMode: function(b) {\r\n\t\t\tthis.getOwnerComponent().getComponentData().testMode = b;\r\n\t\t},\r\n\t\tgetTestMode: function() {\r\n\t\t\treturn this.getOwnerComponent().getComponentData().testMode;\r\n\t\t},\r\n\t\tsetSearchterm: function(s) {\r\n\t\t\toSearchterm = s;\r\n\t\t},\r\n\t\tgetSearchterm: function() {\r\n\t\t\treturn oSearchterm;\r\n\t\t},\r\n\t\tlistUpdated: function() {\r\n\t\t\tif (this.getView().byId(\"btnCart\").getText() > 0) {\r\n\t\t\t\tsap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].focus();\r\n\t\t\t\tsap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].setEnabled(true);\r\n\t\t\t\tsap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[2].setEnabled(true);\r\n\t\t\t\tthis.retrieveMessages();\r\n\t\t\t} else {\r\n\t\t\t\tsap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].setEnabled(false);\r\n\t\t\t\tsap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[2].setEnabled(false);\r\n\t\t\t}\r\n\t\t\tif (!(this.sourcePage === \"FreeText\" && this.isMaterial())) {\r\n\t\t\t\tif (this.getView().byId(\"price\")) {\r\n\t\t\t\t\tthis.getView().byId(\"price\").setValue(\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tstoreMessages: function(d, h) {\r\n\t\t\tthis.headers = h;\r\n\t\t},\r\n\t\tretrieveMessages: function() {\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tif (!(this.getView().byId(\"btnCart\").getText() === \"0\")) {\r\n\t\t\t\tif (this.headers) {\r\n\t\t\t\t\tif (this.headers.headers[\"sap-message\"]) {\r\n\t\t\t\t\t\tvar o = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\t\t\t\tvar a = [];\r\n\t\t\t\t\t\ta.push(JSON.parse(this.headers.headers[\"sap-message\"]).message);\r\n\t\t\t\t\t\tif (this.headers.headers[\"sap-message\"].search(\"details\")) {\r\n\t\t\t\t\t\t\tvar e = JSON.parse(this.headers.headers[\"sap-message\"]);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < e.details.length; i++) {\r\n\t\t\t\t\t\t\t\ta.push(e.details[i].message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (i = 0; i < a.length; i++) {\r\n\t\t\t\t\t\t\tvar c = \"\";\r\n\t\t\t\t\t\t\tif (e.details.length > 1 && i < e.details.length) {\r\n\t\t\t\t\t\t\t\tc = e.details[i][\"code\"];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar b = new sap.ui.core.message.Message({\r\n\t\t\t\t\t\t\t\tmessage: a[i],\r\n\t\t\t\t\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\t\t\t\t\tid: \"1\",\r\n\t\t\t\t\t\t\t\tcode: c,\r\n\t\t\t\t\t\t\t\tpersistent: true,\r\n\t\t\t\t\t\t\t\tprocessor: o\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tm.addMessages(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetModel: function(n) {\r\n\t\t\treturn this.getView().getModel(n);\r\n\t\t},\r\n\t\tsetModel: function(m, n) {\r\n\t\t\treturn this.getView().setModel(m, n);\r\n\t\t},\r\n\t\tgetResourceBundle: function() {\r\n\t\t\treturn this.getOwnerComponent().getModel(\"i18n\").getResourceBundle();\r\n\t\t},\r\n\t\tmyNavBack: function(r, d) {\r\n\t\t\tvar h = H.getInstance();\r\n\t\t\tvar p = h.getPreviousHash();\r\n\t\t\tif (p !== undefined) {\r\n\t\t\t\thistory.go(-1);\r\n\t\t\t} else {\r\n\t\t\t\tvar R = true;\r\n\t\t\t\tthis.getRouter().navTo(r, d, R);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareEmailPress: function() {\r\n\t\t\tvar v = (this.getModel(\"objectView\") || this.getModel(\"worklistView\"));\r\n\t\t\tsap.m.URLHelper.triggerEmail(null, v.getProperty(\"/shareSendEmailSubject\"), v.getProperty(\"/shareSendEmailMessage\"));\r\n\t\t},\r\n\t\tsetHeaderDraftKey: function(d) {\r\n\t\t\tthis.draftKey = d;\r\n\t\t\tthis.getOwnerComponent().getComponentData().draftKey = d;\r\n\t\t},\r\n\t\tgetHeaderDraftKey: function() {\r\n\t\t\tif (this.getOwnerComponent().getComponentData().draftKey) {\r\n\t\t\t\treturn this.getOwnerComponent().getComponentData().draftKey;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.draftKey;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetKeys: function(p) {\r\n\t\t\tvar k = p.startupParameters[\"Keys\"];\r\n\t\t\tif (k) {\r\n\t\t\t\tthis.sourcePage = k[0];\r\n\t\t\t\tthis.draftKey = k[1];\r\n\t\t\t\tthis.purchaseRequisition = k[2];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetSourcePage: function(p) {\r\n\t\t\tthis.sourcePage = p;\r\n\t\t\tthis.getOwnerComponent().getComponentData().sourcePage = p;\r\n\t\t},\r\n\t\tgetSourcePage: function() {\r\n\t\t\tif (this.getOwnerComponent().getComponentData().sourcePage) {\r\n\t\t\t\treturn this.getOwnerComponent().getComponentData().sourcePage;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.sourcePage;\r\n\t\t\t}\r\n\t\t},\r\n\t\tnavToSourcePage: function() {\r\n\t\t\tif (this.getSourcePage() === \"FreeText\") {\r\n\t\t\t\tthis.goToFreetext();\r\n\t\t\t} else if (this.getSourcePage() === \"CartOverview\" || this.getSourcePage() === \"ItemDetails\") {\r\n\t\t\t\tthis.handleViewCartPress();\r\n\t\t\t} else if (this.getSourcePage() === \"PurReqList\") {\r\n\t\t\t\tthis.getRouter().navTo(\"PurReqList\");\r\n\t\t\t} else if (this.getSourcePage() === \"Search\") {\r\n\t\t\t\tthis.getRouter().navTo(\"Search\");\r\n\t\t\t\tthis.getView().setVisible(true);\r\n\t\t\t}\r\n\t\t\tthis.setSourcePage('');\r\n\t\t\tthis.getOwnerComponent().getComponentData().changingSourcePageAllowed = true;\r\n\t\t},\r\n\t\tgoToFreetext: function() {\r\n\t\t\tvar s = this.getView().byId(\"searchItems\").getValue();\r\n\t\t\tif (s.length === 0) {\r\n\t\t\t\ts = \" \";\r\n\t\t\t}\r\n\t\t\tif (this._oMiniCart) {\r\n\t\t\t\tthis._oMiniCart.destroy();\r\n\t\t\t\tthis._oMiniCart = null;\r\n\t\t\t}\r\n\t\t\tif (this._oPopover) {\r\n\t\t\t\tthis._oPopover.destroy();\r\n\t\t\t\tthis._oPopover.destroyContent();\r\n\t\t\t\tthis._oPopover = null;\r\n\t\t\t}\r\n\t\t\tvar p = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.dataManager.EntityConstants.DUMMY_PR_KEY;\r\n\t\t\tthis.getRouter().navTo(\"Freetext\", {\r\n\t\t\t\tDraftKey: this.getHeaderDraftKey(),\r\n\t\t\t\tPurchaseRequisition: p,\r\n\t\t\t\tSearchValue: s\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetPurchaseRequisition: function(p) {\r\n\t\t\tif (p === this.entityConstants.DUMMY_PR_KEY) {\r\n\t\t\t\tthis.purchaseRequisition = '';\r\n\t\t\t} else {\r\n\t\t\t\tthis.purchaseRequisition = p;\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getComponentData().purchaseRequisition = this.purchaseRequisition;\r\n\t\t},\r\n\t\tgetPurchaseRequisition: function() {\r\n\t\t\tif (this.getOwnerComponent().getComponentData().purchaseRequisition) {\r\n\t\t\t\treturn this.getOwnerComponent().getComponentData().purchaseRequisition;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.purchaseRequisition === undefined) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.purchaseRequisition;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetUserID: function(u) {\r\n\t\t\tthis.userId = u;\r\n\t\t},\r\n\t\tgetUserID: function() {\r\n\t\t\treturn this.userId;\r\n\t\t},\r\n\t\tgetServiceCallParameter: function(s, e) {\r\n\t\t\treturn {\r\n\t\t\t\toParentObject: this,\r\n\t\t\t\tsuccessHandler: s,\r\n\t\t\t\terrorHandler: e\r\n\t\t\t};\r\n\t\t},\r\n\t\thandleViewCartPress: function() {\r\n\t\t\tif (this._oMiniCart) {\r\n\t\t\t\tthis._oMiniCart.destroy();\r\n\t\t\t\tthis._oMiniCart = null;\r\n\t\t\t}\r\n\t\t\tif (this._oContent) {\r\n\t\t\t\tthis._oContent.destroy();\r\n\t\t\t\tthis._oContent = null;\r\n\t\t\t}\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tvar p = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n\t\t\tthis.getRouter().navTo(\"CartOverview\", {\r\n\t\t\t\tDraftKey: this.getHeaderDraftKey(),\r\n\t\t\t\tPurchaseRequisition: p\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetAppModel: function() {\r\n\t\t\tvar m = this.getOwnerComponent().getModel();\r\n\t\t\tm.setDefaultBindingMode(\"TwoWay\");\r\n\t\t\treturn m;\r\n\t\t},\r\n\t\tsetOrderDelete: function(u) {\r\n\t\t\tcallInitAfterDeleteOrder = u;\r\n\t\t},\r\n\t\tgetOrderDelete: function() {\r\n\t\t\treturn callInitAfterDeleteOrder;\r\n\t\t},\r\n\t\tdeleteItem: function(e) {\r\n\t\t\tvar i = e.getParameter('listItem');\r\n\t\t\tvar l = e.getSource();\r\n\t\t\tvar p;\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tp =\r\n\t\t\t\t\t\"/C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.deleteItemId = e.getParameter('listItem').getId();\r\n\t\t\t\tp = i.getBindingContext().getPath();\r\n\t\t\t}\r\n\t\t\tl.getModel().remove(p);\r\n\t\t\tl.attachEventOnce('updateFinished', l.focus, l);\r\n\t\t\tthis.refreshMinicart();\r\n\t\t},\r\n\t\trefreshMinicart: function() {\r\n\t\t\tvar p = this.getServiceCallParameter(this.headerSuccess, this.serviceFail);\r\n\t\t\tthis.dataManager.getHeader(p, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\t\t},\r\n\t\tfirstMiniCartOpen: function() {\r\n\t\t\tvar c = this.getView().byId(\"btnCart\");\r\n\t\t\tif (c.getText() === \"1\") {\r\n\t\t\t\tc.firePress();\r\n\t\t\t\tc.setType(\"Emphasized\");\r\n\t\t\t}\r\n\t\t},\r\n\t\theaderSuccess: function(d) {\r\n\t\t\tvar v = this.getView().getId().toString();\r\n\t\t\tif (v.search(\"Search\") > 0) {\r\n\t\t\t\tvar j = new sap.ui.model.json.JSONModel(d);\r\n\t\t\t\tthis.getView().byId(\"btnCart\").setModel(j);\r\n\t\t\t\tthis.getView().byId(\"btnCart\").bindElement(\"/\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.dataManager.headerSuccess(this.getView().byId(\"btnCart\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n\t\t\t\t\t\"'\", false\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\tif (v.search(\"Freetext\") > 0) {\r\n\t\t\t\tvar p = d;\r\n\t\t\t\tif (p.NumberOfItems > 1) {\r\n\t\t\t\t\tvar t = p.NumberOfItems + \" \" + this.getResourceBundle().getText(\"items\") + \" \" + this.getResourceBundle().getText(\"itemcount\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar t = p.NumberOfItems + \" \" + this.getResourceBundle().getText(\"item\") + \" \" + this.getResourceBundle().getText(\"itemcount\");\r\n\t\t\t\t}\r\n\t\t\t\tvar i = this.getView().byId(\"numberofitems\");\r\n\t\t\t\ti.setText(t);\r\n\t\t\t}\r\n\t\t\tif (Number(this.getView().byId('btnCart').getText()) > 0) {\r\n\t\t\t\tthis.getView().byId('btnCart').setType(\"Emphasized\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId('btnCart').setType(\"Default\");\r\n\t\t\t}\r\n\t\t\tvar a = d.results ? d.results[0] : d;\r\n\t\t\tthis.setUserID(a.PurReqnSSPAuthor);\r\n\t\t},\r\n\t\tdeleteSuccess: function() {\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n\t\t\tthis.deleteItemId = null;\r\n\t\t\tthis.refreshMinicart();\r\n\t\t},\r\n\t\tvalidateQuantity: function() {\r\n\t\t\tvar q;\r\n\t\t\tvar a = this.getView().byId(\"productsTable\").getItems().length;\r\n\t\t\tfor (var i = 0; i < a; i++) {\r\n\t\t\t\tq = this.getView().byId(\"productsTable\").getItems()[i].getCells()[3].getItems()[0].getValue();\r\n\t\t\t\tq = q.split('.').join('');\r\n\t\t\t\tq = q.split(',').join('');\r\n\t\t\t\tq = Number(q);\r\n\t\t\t\tif (q <= 0 || isNaN(q)) {\r\n\t\t\t\t\tthis.getView().byId(\"productsTable\").getItems()[i].getCells()[3].getItems()[0].setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\thandleOrderCartPress: function() {\r\n\t\t\tvar c = true;\r\n\t\t\tif (this.getView().getId().search(\"CartOverview\") > 0) {\r\n\t\t\t\tc = this.validateQuantity();\r\n\t\t\t}\r\n\t\t\tif (c) {\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\tif (this.getTestMode()) {\r\n\t\t\t\t\tvar a, b;\r\n\t\t\t\t\tthis.orderCartSuccessCallback(a, b);\r\n\t\t\t\t}\r\n\t\t\t\tvar p = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n\t\t\t\tthis.prNumber = p;\r\n\t\t\t\tvar P = this.getServiceCallParameter(this.orderCartSuccessCallback, this.serviceFail);\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tt.dataManager.activateDocument(P, t.getHeaderDraftKey(), t.getPurchaseRequisition());\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t},\r\n\t\torderCartSuccessCallback: function(d, h) {\r\n\t\t\tvar t = this;\r\n\t\t\tvar a;\r\n\t\t\tvar v = this.getView().getId().toString();\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tif (!this.getTestMode()) {\r\n\t\t\t\tif (h.headers['sap-message']) {\r\n\t\t\t\t\tvar s = JSON.parse(h.headers['sap-message']);\r\n\t\t\t\t\tif (((s['code'])) && ((s['code'] == '06/402') || (s['code'] == '06/403'))) {\r\n\t\t\t\t\t\ta = JSON.parse(h.headers['sap-message']).message;\r\n\t\t\t\t\t} else if (JSON.parse(h.headers['sap-message']).details[0].code === '06/402') {\r\n\t\t\t\t\t\ta = JSON.parse(h.headers['sap-message']).details[0].message;\r\n\t\t\t\t\t} else if (JSON.parse(h.headers['sap-message']).details[0].code === '06/403') {\r\n\t\t\t\t\t\ta = JSON.parse(h.headers['sap-message']).details[0].message;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta = t.getResourceBundle().getText(\"MSG_SuccessOrder\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\ta = \"Purchase Requisition 10133876 Created\";\r\n\t\t\t}\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tM.show(a, {\r\n\t\t\t\ticon: M.Icon.INFORMATION,\r\n\t\t\t\ttitle: t.getResourceBundle().getText(\"orderCart\"),\r\n\t\t\t\tactions: [t.getResourceBundle().getText(\"ok\")],\r\n\t\t\t\tonClose: function(o) {\r\n\t\t\t\t\tif (o === t.getResourceBundle().getText(\"ok\")) {\r\n\t\t\t\t\t\tt.refreshView();\r\n\t\t\t\t\t\tt.setOrderDelete(true);\r\n\t\t\t\t\t\tif (v.search(\"Search\") > 0) {\r\n\t\t\t\t\t\t\tt._handleRouteMatched();\r\n\t\t\t\t\t\t} else {}\r\n\t\t\t\t\t\tif (t.getPurchaseRequisition() === '') {\r\n\t\t\t\t\t\t\tt.getRouter().navTo(\"Search\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tt.getRouter().navTo(\"PurReqList\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {}\r\n\t\t\t\t},\r\n\t\t\t\tinitialFocus: t.getResourceBundle().getText(\"ok\")\r\n\t\t\t});\r\n\t\t},\r\n\t\trefreshView: function() {\r\n\t\t\tif (this._oPopover) {\r\n\t\t\t\tthis._oPopover.destroy();\r\n\t\t\t\tthis._oPopover.destroyContent();\r\n\t\t\t\tthis._oPopover = null;\r\n\t\t\t}\r\n\t\t\tif (this._oMiniCart) {\r\n\t\t\t\tthis._oMiniCart.destroy();\r\n\t\t\t\tthis._oMiniCart.destroyContent();\r\n\t\t\t\tthis._oMiniCart = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateMiniCartTotal: function() {\r\n\t\t\tthis.dataManager.updateMiniCartTotal(sap.ui.getCore().byId(\"minicartTotal\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n\t\t\t\t\"'\", false\r\n\t\t\t]);\r\n\t\t},\r\n\t\tprepareMiniCart: function() {\r\n\t\t\tthis._oMiniCart = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PopoverCart\", this);\r\n\t\t\tthis.getView().addDependent(this._oMiniCart);\r\n\t\t\tthis._oMiniCart.setContentHeight(\"auto\");\r\n\t\t\tthis._oItemTemplate = this._oMiniCart.getContent()[0].getAggregation('items')[0].getItems()[0].clone();\r\n\t\t\tthis.getView().addDependent(this._oMiniCart);\r\n\t\t\tthis._oMiniCart.getContent()[0].getAggregation('items')[0].destroyItems();\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.setPurchaseRequisition(\"PurchaseRequisition 8\");\r\n\t\t\t}\r\n\t\t\tthis.dataManager.prepareMiniCart(this._oMiniCart.getContent()[0].getAggregation('items')[0], this._oItemTemplate, [this.getPurchaseRequisition(),\r\n\t\t\t\t\"guid'\" + this.getHeaderDraftKey() + \"'\", false\r\n\t\t\t]);\r\n\t\t},\r\n\t\topenMiniCart: function(e) {\r\n\t\t\tvar o = e.getSource();\r\n\t\t\tthis._oMiniCart.openBy(o);\r\n\t\t},\r\n\t\topenMiniCart_V2: function(e) {\r\n\t\t\tthis._oMiniCart.openBy(e);\r\n\t\t},\r\n\t\tgetMiniCartData: function() {\r\n\t\t\tsap.ui.getCore().byId(\"minicartList\").getBinding(\"items\").refresh();\r\n\t\t\tvar v = this.getView().getId().toString();\r\n\t\t\tif (v.search(\"Freetext\") > 0) {\r\n\t\t\t\tthis.oModel.resetChanges();\r\n\t\t\t\tthis.getView().byId(\"idMaterial\").setValue(this.dummy.Material);\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValue(this.dummy.PurchaseRequisitionItemText);\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setEditable(true);\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroup\").setValue(this.dummy.MaterialGroup);\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroup\").setEditable(true);\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroupText\").setValue(this.dummy.MaterialGroup_Text);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgenInfoCart1: function() {},\r\n\t\terrorServiceFail1: function() {},\r\n\t\tonPressCart: function(e) {\r\n\t\t\tif (this.getView().byId(\"btnCart\").getText() > 0) {\r\n\t\t\t\tif (!this._oMiniCart) {\r\n\t\t\t\t\tthis.prepareMiniCart();\r\n\t\t\t\t}\r\n\t\t\t\tthis.eventSource = e.getSource();\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tvar n = true;\r\n\t\t\t\tif (this.getSourcePage() === \"FreeText\") {\r\n\t\t\t\t\tn = this.checkPendingChanges();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tn = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tvar c = !!this.getView().$().closest(\".sapUiSizeCompact\").length;\r\n\t\t\t\t\tsap.m.MessageBox.show(this.getResourceBundle().getText(\"MESSAGE_DATA_LOST_POPUP_1\"), {\r\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n\t\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tt.oModel.resetChanges();\r\n\t\t\t\t\t\t\t\tt.getMiniCartData();\r\n\t\t\t\t\t\t\t\tt.updateMiniCartTotal();\r\n\t\t\t\t\t\t\t\tt.openMiniCart_V2(t.eventSource);\r\n\t\t\t\t\t\t\t\tt.makeJSONModel(t.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstyleClass: c ? \"sapUiSizeCompact\" : \"\"\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getMiniCartData();\r\n\t\t\t\t\tthis.updateMiniCartTotal();\r\n\t\t\t\t\tthis.openMiniCart(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"noItemsText\"));\r\n\t\t\t}\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.getView().byId(\"btnCart\").setText(\"1\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPressCart1: function(e) {\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"noItemsText\"));\r\n\t\t},\r\n\t\tbeforeDialogOpen: function() {\r\n\t\t\tsap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n\t\t\tthis.supplierValid = false;\r\n\t\t},\r\n\t\tonSupplierChange: function(e) {\r\n\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\tE.addSupplier(this, e);\r\n\t\t\t} else {\r\n\t\t\t\tthis.supplierValid = false;\r\n\t\t\t\tvar s = sap.ui.getCore().byId(\"supplier\").getValue();\r\n\t\t\t\tvar a = sap.ui.getCore().byId(\"supplier\");\r\n\t\t\t\tthis.supplierNameoData = a.getBindingContext().getModel().oData;\r\n\t\t\t\tthis.supplierEntity = s;\r\n\t\t\t\tif (!(s === '' || s === \" \" || s.toString().trim().length === 0)) {\r\n\t\t\t\t\tsap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(false);\r\n\t\t\t\t\tthis.dataManager.getSupplierName(this.getServiceCallParameter(this.intrimSupplierCheckSuccess, this.supplierCheckFailure), s);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.supplierValid = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfindCorrectSupplier: function(s, d) {\r\n\t\t\tfor (var t in d.results) {\r\n\t\t\t\tif (d.results[t].Supplier === s) {\r\n\t\t\t\t\treturn s;\r\n\t\t\t\t}\r\n\t\t\t\tif (d.results[t].Supplier.toUpperCase() === s) {\r\n\t\t\t\t\treturn s.toLowerCase();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tintrimSupplierCheckSuccess: function(d) {\r\n\t\t\tvar s = this.findCorrectSupplier(this.supplierEntity, d);\r\n\t\t\tif (d && s) {\r\n\t\t\t\tthis.supplierCheckSuccess(d);\r\n\t\t\t} else {\r\n\t\t\t\tthis.dataManager.checkSupplierName(this.getServiceCallParameter(this.supplierCheckSuccess, this.supplierCheckFailure), this.supplierEntity);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupplierCheckSuccess: function(d) {\r\n\t\t\tvar s = this.findCorrectSupplier(this.supplierEntity, d);\r\n\t\t\tthis.supplierEntity = \"C_MM_SupplierValueHelp('\" + s + \"')\";\r\n\t\t\tsap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n\t\t\tif (d.results.length > 0) {\r\n\t\t\t\tif (this.supplierNameoData[d.results[0].__metadata.uri.split('SRV/')[1]]) {\r\n\t\t\t\t\tthis.supplierValid = true;\r\n\t\t\t\t\tfor (var o in this.supplierNameoData) {\r\n\t\t\t\t\t\tif (this.supplierNameoData[o].Supplier == s) {\r\n\t\t\t\t\t\t\tthis.supplierName = this.supplierNameoData[o].SupplierName;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onAddSupplier();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.supplierValid = false;\r\n\t\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.supplierValid = false;\r\n\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupplierCheckFailure: function(d) {\r\n\t\t\tsap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n\t\t},\r\n\t\tpopOverSuccessHandler: function() {\r\n\t\t\tthis._oMiniCart.openBy(this.oEventSrc);\r\n\t\t\tthis._oMiniCart.setContentHeight(\"auto\");\r\n\t\t\tthis.enableDisableBtnInCart();\r\n\t\t},\r\n\t\tonAddSupplier: function(o) {\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.supplierValid = true;\r\n\t\t\t}\r\n\t\t\tif (this.supplierValid) {\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeContent();\r\n\t\t\t\tthis.sText = sap.ui.getCore().byId(\"supplier\").getValue();\r\n\t\t\t\tif (this.getTestMode()) {\r\n\t\t\t\t\tthis.sText = \"SUPPLIER 1\";\r\n\t\t\t\t}\r\n\t\t\t\tvar p = sap.ui.getCore().byId(\"preferred\").getSelected();\r\n\t\t\t\tvar a = sap.ui.getCore().byId(\"fixed\").getSelected();\r\n\t\t\t\tif (p === true) {\r\n\t\t\t\t\tthis.text = sap.ui.getCore().byId(\"preferred\").getText();\r\n\t\t\t\t\tthis.Supplier = this.sText;\r\n\t\t\t\t\tthis.Fixedsupplier = \"\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.text = sap.ui.getCore().byId(\"fixed\").getText();\r\n\t\t\t\t\tthis.Fixedsupplier = this.sText;\r\n\t\t\t\t\tthis.Supplier = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.productList) {\r\n\t\t\t\t\tthis.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this.productList);\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\t\t\t\tvar s = sap.ui.getCore().byId(\"supplier\").getValue();\r\n\t\t\t\tvar b = sap.ui.getCore().byId(\"supplier\");\r\n\t\t\t\tif (!this.getTestMode()) var c = b.getBindingContext().getModel().oData;\r\n\t\t\t\tvar d = \"C_MM_SupplierValueHelp('\" + s + \"')\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (this.getTestMode()) {\r\n\t\t\t\t\t\tthis.supplierName = \"Test Supplier\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierName);\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n\t\t\t\t\t\t\"assigned\"));\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n\t\t\t\t\to.getSource().getParent().close();\r\n\t\t\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.dataManager.getSupplierDescription(this.getServiceCallParameter(this.supplierDescSuccess, this.supplierDescFailure), s, o);\r\n\t\t\t\t}\r\n\t\t\t\tthis.bFlag = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupplierDescSuccess: function(d) {\r\n\t\t\tvar s = d.results ? d.results[0] : d;\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(s.SupplierName);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n\t\t\t\t\"assigned\"));\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n\t\t\tthis._oContent.close();\r\n\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t},\r\n\t\tsupplierDescFailure: function(d) {\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierName);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n\t\t\t\t\"assigned\"));\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n\t\t\tthis._oContent.close();\r\n\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t},\r\n\t\tserviceFail: function(e) {\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t},\r\n\t\tcreateFragment: function(a, b) {\r\n\t\t\tthis.catalog = this.getView().byId(b);\r\n\t\t\tthis.catalog.removeAllContent();\r\n\t\t\tvar F = sap.ui.xmlfragment(a, this);\r\n\t\t\tthis.getView().addDependent(F);\r\n\t\t\tthis.catalog.addContent(F);\r\n\t\t},\r\n\t\tdestroyContent: function(a) {\r\n\t\t\tvar b = this.getView().byId(a).getContent();\r\n\t\t\tif (b.length) {\r\n\t\t\t\tthis.getView().byId(a).destroyContent();\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindCatalog: function(I) {\r\n\t\t\tvar c = this.getAppModel();\r\n\t\t\tthis.getView().byId(I).setModel(c);\r\n\t\t},\r\n\t\tgetMode: function() {\r\n\t\t\treturn \"read\";\r\n\t\t},\r\n\t\t_MessagePopoverInitialise: function() {\r\n\t\t\toMessagePopover = new sap.m.MessagePopover({\r\n\t\t\t\titems: {\r\n\t\t\t\t\tpath: \"message>/\",\r\n\t\t\t\t\ttemplate: new sap.m.MessagePopoverItem({\r\n\t\t\t\t\t\tdescription: \"{message>description}\",\r\n\t\t\t\t\t\ttype: \"{message>type}\",\r\n\t\t\t\t\t\ttitle: \"{message>message}\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tshowMessageLogPopover: function(e) {\r\n\t\t\tthis._MessagePopoverInitialise();\r\n\t\t\tvar v = new J();\r\n\t\t\tv.setData({\r\n\t\t\t\tmessagesLength: sap.ui.getCore().getMessageManager().getMessageModel().oData.length\r\n\t\t\t});\r\n\t\t\tsap.ui.getCore().byId(e.getSource().getId()).setModel(v);\r\n\t\t\toMessagePopover.setModel(sap.ui.getCore().getMessageManager().getMessageModel(), \"message\");\r\n\t\t\tif (!this.oMessagePopover) {\r\n\t\t\t\toMessagePopover.openBy(e.getSource());\r\n\t\t\t}\r\n\t\t},\r\n\t\tstatusFromCO_Cntrls: function() {\r\n\t\t\tif (!this._historyDialog) {\r\n\t\t\t\tthis._historyDialog = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.BusinessProcess\", this);\r\n\t\t\t\tvar b = new B({\r\n\t\t\t\t\ttext: 'Close',\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tthis.getParent().close();\r\n\t\t\t\t\t\tthis.getParent().getParent().setBusy(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis._historyDialog.setAggregation('endButton', b);\r\n\t\t\t}\r\n\t\t},\r\n\t\tstatusFromCO_DBind: function(P, a) {\r\n\t\t\tvar u = this.prepareJSONModelforStatus(P, a);\r\n\t\t\tthis._historyDialog.setModel(u, \"UIModel\");\r\n\t\t\tthis.getView().addDependent(this._historyDialog);\r\n\t\t\tu.refresh();\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tthis._historyDialog.open();\r\n\t\t},\r\n\t\tstatusFromMYPR_Cntrls: function() {},\r\n\t\tstatusFromMYPR_DBind: function(P, a, n) {\r\n\t\t\tvar u = this.prepareJSONModelforStatus(P, a);\r\n\t\t\tsap.ui.getCore().byId(\"BusProcessCompContainerMyPR\").setModel(u, \"UIModel\");\r\n\t\t\tn.to(\"p2\");\r\n\t\t},\r\n\t\tstatusFromID_Cntrls: function() {},\r\n\t\tstatusFromID_DBind: function() {\r\n\t\t\tvar u = this.prepareJSONModelforStatus(this.getPurchaseRequisition(), this.prItem);\r\n\t\t\tthis.getView().byId(\"BusProcessCompContainerID\").setModel(u, \"UIModel\");\r\n\t\t},\r\n\t\tprepareJSONModelforStatus: function(P, a) {\r\n\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\tvar d = \"PR_HISTORYSet\";\r\n\t\t\t\tvar b = P;\r\n\t\t\t\tvar c = a;\r\n\t\t\t\tvar e = \"MM_PUR_REQ_HISTORY\";\r\n\t\t\t\tvar g = {\r\n\t\t\t\t\tserviceField: e,\r\n\t\t\t\t\tkey: d,\r\n\t\t\t\t\tkey2: b,\r\n\t\t\t\t\tItem: c,\r\n\t\t\t\t\tKeyName: \"PurchaseRequisition\",\r\n\t\t\t\t\tItemKeyName: \"PurchaseRequisitionItem\"\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tvar d = \"C_PurReqnProcessFlow\";\r\n\t\t\t\tvar b = P;\r\n\t\t\t\tvar c = a;\r\n\t\t\t\tvar g = {\r\n\t\t\t\t\tkey: d,\r\n\t\t\t\t\tkey2: b,\r\n\t\t\t\t\tItem: c,\r\n\t\t\t\t\tKeyName: \"PurchaseRequisition\",\r\n\t\t\t\t\tItemKeyName: \"PurchaseRequisitionItem\"\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tvar u = new J(g);\r\n\t\t\treturn u;\r\n\t\t},\r\n\t\tstatusData: function(P, a, n) {},\r\n\t\tstatusSuccessHandler: function(d) {},\r\n\t\tgetStatusModel: function() {\r\n\t\t\treturn this.statusModel;\r\n\t\t},\r\n\t\tprepareStatusData: function(s) {\r\n\t\t\tvar a = {};\r\n\t\t\tvar n = [];\r\n\t\t\tvar l = [];\r\n\t\t\tvar d = s.results;\r\n\t\t\tfor (var i = 0; i < d.length; i++) {\r\n\t\t\t\tvar b = {};\r\n\t\t\t\tvar c = {};\r\n\t\t\t\tb.id = i + 1;\r\n\t\t\t\tb.lane = i;\r\n\t\t\t\tb.title = d[i].Documentnumber;\r\n\t\t\t\tb.state = sap.suite.ui.commons.ProcessFlowNodeState.Positive;\r\n\t\t\t\tb.stateText = this.getResourceBundle().getText(\"created\");\r\n\t\t\t\tb.children = this.getChildren(i + 1, d.length);\r\n\t\t\t\td[i].Documentcreationdate = new Date(d[i].Documentcreationdate);\r\n\t\t\t\tb.texts = [(d[i].Documentcreationdate).toDateString()];\r\n\t\t\t\tn.push(b);\r\n\t\t\t\tc.id = i;\r\n\t\t\t\tc.icon = this.getIcon(d[i].Documenttype);\r\n\t\t\t\tc.label = this.getLabel(d[i].Documenttype);\r\n\t\t\t\tc.position = i;\r\n\t\t\t\tl.push(c);\r\n\t\t\t}\r\n\t\t\tif (l[i - 1].label === \"Invoice\" || l[i - 1].label === \"Goods Issue\") {\r\n\t\t\t\tdelete n[i - 1].children;\r\n\t\t\t} else {\r\n\t\t\t\tvar e = {};\r\n\t\t\t\te.id = i + 1;\r\n\t\t\t\te.lane = i;\r\n\t\t\t\te.state = sap.suite.ui.commons.ProcessFlowNodeState.Neutral;\r\n\t\t\t\te.stateText = this.getResourceBundle().getText(\"inProcess\");\r\n\t\t\t\tvar g = {};\r\n\t\t\t\tg.id = i;\r\n\t\t\t\tg.icon = this.getIcon(parseInt(d[i - 1].Documenttype) + 1);\r\n\t\t\t\tg.label = this.getLabel(parseInt(d[i - 1].Documenttype) + 1);\r\n\t\t\t\tg.position = i;\r\n\t\t\t\tn.push(e);\r\n\t\t\t\tl.push(g);\r\n\t\t\t}\r\n\t\t\ta.nodes = n;\r\n\t\t\ta.lanes = l;\r\n\t\t\tvar h = new sap.ui.model.json.JSONModel();\r\n\t\t\th.setData(a);\r\n\t\t\treturn h;\r\n\t\t},\r\n\t\tgetChildren: function(n, l) {\r\n\t\t\tif (n <= l) {\r\n\t\t\t\tn++;\r\n\t\t\t\treturn [n.toString()];\r\n\t\t\t} else {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetIcon: function(d) {\r\n\t\t\tswitch (d) {\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\treturn \"sap-icon://sales-document\";\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\treturn \"sap-icon://receipt\";\r\n\t\t\t\tcase \"2\":\r\n\t\t\t\t\treturn \"sap-icon://sales-order\";\r\n\t\t\t\tcase \"*\":\r\n\t\t\t\t\treturn \"sap-icon://sales-order-item\";\r\n\t\t\t\tcase \"+\":\r\n\t\t\t\t\treturn \"sap-icon://order-status\";\r\n\t\t\t\tcase \"-\":\r\n\t\t\t\t\treturn \"sap-icon://sales-quote\";\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn \"sap-icon://documents\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLabel: function(d) {\r\n\t\t\tswitch (d) {\r\n\t\t\t\tcase \"0\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"appTitle\");\r\n\t\t\t\tcase \"1\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"GoodsReceipt\");\r\n\t\t\t\tcase \"2\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"Invoice\");\r\n\t\t\t\tcase \"*\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"PurchaseOrder\");\r\n\t\t\t\tcase \"+\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"Reservation\");\r\n\t\t\t\tcase \"-\":\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"GoodsIssue\");\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this.getResourceBundle().getText(\"FollowOn\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessFlowZoomIn: function() {\r\n\t\t\tsap.ui.getCore().byId(\"processflow\").zoomIn();\r\n\t\t},\r\n\t\tprocessFlowZoomOut: function() {\r\n\t\t\tsap.ui.getCore().byId(\"processflow\").zoomOut();\r\n\t\t},\r\n\t\tonNodePress: function(e) {\r\n\t\t\tvar n = e.getParameters().getNodeId();\r\n\t\t\tn = Number(n);\r\n\t\t\tvar s = this.sourcePage;\r\n\t\t\tvar a = \"displayFactSheet\";\r\n\t\t\tif (s === \"ItemDetails\") {\r\n\t\t\t\tvar d = e.getParameters().getBindingContext(\"pf3\").getModel().getData().lanes[n - 1].label;\r\n\t\t\t} else {\r\n\t\t\t\td = e.getParameters().getBindingContext(\"pf1\").getModel().getData().lanes[n - 1].label;\r\n\t\t\t}\r\n\t\t\tswitch (d) {\r\n\t\t\t\tcase \"Invoice\":\r\n\t\t\t\t\td = \"SupplierInvoice\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Reservation\":\r\n\t\t\t\t\ta = \"display\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Goods Issue\":\r\n\t\t\t\tcase \"Goods Receipt\":\r\n\t\t\t\t\td = \"MaterialMovement\";\r\n\t\t\t\t\ta = \"displayFactSheet\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\td = d.replace(/ /g, \"\");\r\n\t\t\tvar b = e.getParameters().getTitle();\r\n\t\t\tvar c = new Date(e.getParameters().getTexts()[0]);\r\n\t\t\tc = (new Date(e.getParameters().getTexts()[0])).getFullYear();\r\n\t\t\tvar o = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\t\t\tvar g = {};\r\n\t\t\tg.target = {\r\n\t\t\t\tsemanticObject: d,\r\n\t\t\t\taction: a\r\n\t\t\t};\r\n\t\t\tg.params = new Object();\r\n\t\t\tif (d === \"MaterialMovement\") {\r\n\t\t\t\tg.params[\"MaterialDocument\"] = [b];\r\n\t\t\t\tg.params[\"MaterialDocumentYear\"] = [c];\r\n\t\t\t} else if (d === \"SupplierInvoice\") {\r\n\t\t\t\tg.params[d] = [b];\r\n\t\t\t\tg.params[\"FiscalYear\"] = [c];\r\n\t\t\t} else {\r\n\t\t\t\tg.params[d] = [b];\r\n\t\t\t}\r\n\t\t\tif (!isNaN(c)) {\r\n\t\t\t\to.toExternal(g);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDraftKey: function(o, h) {\r\n\t\t\tif (o && h) {\r\n\t\t\t\tvar k = this.entityConstants.getKeys(\"headerEntity\");\r\n\t\t\t\tfor (var i = 0; i < k.length; i++) {\r\n\t\t\t\t\tif (this.getView().getId().search(\"PurReqList\") >= 0) {\r\n\t\t\t\t\t\tif (o[k[i]].length > 10) {\r\n\t\t\t\t\t\t\treturn o[k[i]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (o[k[i]]) {\r\n\t\t\t\t\t\t\treturn o[k[i]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetLifeCycleStatus: function(o) {\r\n\t\t\tvar m = this.getAppModel();\r\n\t\t\tvar p = o.getProperty(\"PurchaseRequisition\");\r\n\t\t\tm.read(\"/C_Sspprmaint_Hdr\", {\r\n\t\t\t\turlParameters: {\r\n\t\t\t\t\t\"$filter\": \"IsActiveEntity eq true and PurchaseRequisition eq '\" + p + \"'\",\r\n\t\t\t\t\t\"$expand\": \"to_Purchaserequisitionitem_Wd\"\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: jQuery.proxy(this.itemsSuccessHandler, this),\r\n\t\t\t\terror: jQuery.proxy(this.statusErrorHandler, this)\r\n\t\t\t});\r\n\t\t},\r\n\t\titemsSuccessHandler: function(d) {\r\n\t\t\ttry {\r\n\t\t\t\tsap.ui.getCore().LifeCycleStatus = [];\r\n\t\t\t\tvar a = d.results[0].to_Purchaserequisitionitem_Wd.results;\r\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\t\tvar s = a[i].PurReqnItemLifeCycleStatus;\r\n\t\t\t\t\tvar b = a[i].PurchaseRequisitionItem;\r\n\t\t\t\t\tsap.ui.getCore().LifeCycleStatus[b] = s;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t},\r\n\t\tgetLifeCycleStatus: function(i) {\r\n\t\t\treturn sap.ui.getCore().LifeCycleStatus[i];\r\n\t\t},\r\n\t\tsetItemStatus: function(d) {\r\n\t\t\tsap.ui.getCore().ItemStatus = d;\r\n\t\t},\r\n\t\tgetItemStatus: function() {\r\n\t\t\treturn sap.ui.getCore().ItemStatus;\r\n\t\t},\r\n\t\tmakeJSONModel: function(d) {\r\n\t\t\tif (d) {\r\n\t\t\t\tthis.backUpData = d;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckPendingChanges: function() {\r\n\t\t\tvar p = false;\r\n\t\t\tvar d = this.getView().byId(\"simpleForm\").getBindingContext().getObject();\r\n\t\t\tvar a = [\"PurchaseRequisitionItemText\", \"Material\", \"MaterialGroup\", \"RequestedQuantity\", \"BaseUnit\", \"PurchaseRequisitionPrice\",\r\n\t\t\t\t\"Currency\", \"DeliveryDate\", \"ServicePerformer\", \"PerformancePeriodStartDate\", \"PerformancePeriodEndDate\"\r\n\t\t\t];\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tif (d[a[i]] != this.backUpData[a[i]]) {\r\n\t\t\t\t\tp = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\tafterMiniCartOpen: function() {\r\n\t\t\tthis.makeJSONModel(this.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n\t\t},\r\n\t\tsetExtScenarioFlag: function(i) {\r\n\t\t\tthis.getOwnerComponent().getComponentData().isExtPurgScenario = i;\r\n\t\t\tthis.isExtPurgScenario = i;\r\n\t\t},\r\n\t\tgetExtScenarioFlag: function() {\r\n\t\t\t\tif (this.getOwnerComponent().getComponentData().isExtPurgScenario) {\r\n\t\t\t\t\treturn this.getOwnerComponent().getComponentData().isExtPurgScenario;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.isExtPurgScenario;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t//< Added by con4PAS - Attachments\r\n\t\t\t,\r\n\t\tonNewAttachment: function(oEvent) {\r\n\t\t\tthis.openNewAttachDialog();\r\n\t\t},\r\n\t\topenNewAttachDialog: function() {\r\n\t\t\tif (!this.oI18n) {\r\n\t\t\t\tthis.oI18n = this.getView().getModel(\"i18n\").getResourceBundle();\r\n\t\t\t}\r\n\t\t\tif (this.attachDialog) {\r\n\t\t\t\tthis.attachDialog.destroy();\r\n\t\t\t\tthis.attachDialog = null;\r\n\t\t\t}\r\n\t\t\tif (!this.attachDialog) {\r\n\t\t\t\tthis.attachDialog = new sap.m.Dialog({\r\n\t\t\t\t\ttitle: this.oI18n.getText(\"NewAttachment\"),\r\n\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\ttext: this.oI18n.getText(\"AddAttachment\"),\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\tthis.addNewAttach();\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\ttext: this.oI18n.getText(\"Close\"),\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\tthis.attachDialog.close();\r\n\t\t\t\t\t\t\t\t//this.attachDialog.destroy();\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\tnew sap.ui.layout.form.SimpleForm({\r\n\t\t\t\t\t\t\tcontent: [\r\n\t\t\t\t\t\t\t\tnew sap.m.Label({\r\n\t\t\t\t\t\t\t\t\tid: \"lbl_filename\",\r\n\t\t\t\t\t\t\t\t\ttext: this.oI18n.getText(\"AttFileName\"),\r\n\t\t\t\t\t\t\t\t\trequired: true\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tnew sap.ui.unified.FileUploader({\r\n\t\t\t\t\t\t\t\t\tid: \"fup_attach\",\r\n\t\t\t\t\t\t\t\t\tname: \"fileUploader\",\r\n\t\t\t\t\t\t\t\t\tuploadUrl: \"upload/\",\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tuploadComplete: function() {\r\n\t\t\t\t\t\t\t\t\t\tthis.attachUploadComplete();\r\n\t\t\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tnew sap.m.Label({\r\n\t\t\t\t\t\t\t\t\tid: \"lbl_filedesc\",\r\n\t\t\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\t\t\ttext: this.oI18n.getText(\"AttFileDescr\")\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\t\t\t\tid: \"inp_filedesc\"\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tnew sap.m.Label({\r\n\t\t\t\t\t\t\t\t\tid: \"lbl_xcontract\",\r\n\t\t\t\t\t\t\t\t\ttext: this.oI18n.getText(\"AttFileInt\")\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tnew sap.m.CheckBox({\r\n\t\t\t\t\t\t\t\t\tid: \"chb_xcontract\",\r\n\t\t\t\t\t\t\t\t\tselected: \"true\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.attachDialog.open();\r\n\t\t},\r\n\t\taddNewAttach: function(oEvent) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar oFileUploader = sap.ui.getCore().byId(\"fup_attach\");\r\n\t\t\tvar vFileName = oFileUploader.getValue();\r\n\t\t\tvar domRef = oFileUploader.getFocusDomRef();\r\n\t\t\tvar file = domRef.files[0];\r\n\t\t\tconsole.log(file);\r\n\t\t\tvar fileToLoad = file;\r\n\t\t\tvar oReader = new FileReader();\r\n\t\t\toReader.XContract = this.getFormValue(\"chb_xcontract\");\r\n\t\t\toReader.FileDescription = this.getFormValue(\"inp_filedesc\");\r\n\r\n\t\t\toReader.onload = function(oEvent) {\r\n\t\t\t\tvar base64marker = 'data:' + file.type + ';base64,';\r\n\t\t\t\tvar base64index = oEvent.target.result.indexOf(base64marker) + base64marker.length;\r\n\t\t\t\tvar contentString = oEvent.target.result.substring(base64index);\r\n\r\n\t\t\t\tvar oEntry = {};\r\n\t\t\t\ttry {\r\n\t\t\t\t\toEntry.GUID = that.getItemDraftKey().replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\toEntry.GUID = that.itemDraftUUID.replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\t}\r\n\t\t\t\tif (!oEntry.GUID || oEntry.GUID === \"00000000000000000000000000000000\") {\r\n\t\t\t\t\toEntry.GUID = that.getHeaderDraftKey().replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\t}\r\n\t\t\t\toEntry.DocObjid = that.purchaseRequisition;\r\n\t\t\t\toEntry.DocItem = that.prItem;\r\n\r\n\t\t\t\toEntry.AttachName = file.name;\r\n\t\t\t\toEntry.AttachType = file.type;\r\n\t\t\t\toEntry.AttInternal = this.XContract;\r\n\t\t\t\toEntry.Content = contentString;\r\n\t\t\t\toEntry.AttDescription = this.FileDescription;\r\n\t\t\t\t//oEntry.FileMimetype = file.type;\r\n\t\t\t\t//oEntry.FileLength = file.size;\r\n\r\n\t\t\t\tthat.sendData(that, \"/AttachmentSet\", oEntry, \"Empty\", \"UploadErrorMsg\", that.afterUploadFunction);\r\n\r\n\t\t\t};\r\n\t\t\toReader.readAsDataURL(fileToLoad);\r\n\r\n\t\t\tthis.attachDialog.close();\r\n\t\t\tthis.attachDialog.destroy();\r\n\t\t},\r\n\t\tattachUploadComplete: function() {\r\n\t\t\tconsole.log(\"Upload Complete\");\r\n\t\t},\r\n\t\tafterUploadFunction: function(oData, oModel, that) {\r\n\t\t\tvar uri = \"/AttachmentSet\";\r\n\t\t\tif(that.itemDraftUUID){\r\n\t\t\t\tvar i = that.itemDraftUUID.replace(/-/g, \"\").toUpperCase();\r\n\t\t\t}else{\r\n\t\t\t\ti = that.getHeaderDraftKey().replace(/-/g, \"\").toUpperCase();\r\n\t\t\t}\r\n\t\t\tvar params = {\r\n\t\t\t\t\"$filter\": \"GUID eq '\" + i + \"'\"\r\n\t\t\t};\r\n\t\t\tthat.readData(that, uri, params, null, that.setAttachsAfterUpload);\r\n\t\t},\r\n\t\tsetAttachsAfterUpload: function(that, oModel) {\r\n\t\t\t/*for(var i=0;i<oModel.oData.results.length;i++){\r\n\t\t\t  oModel.oData.results[i].AttInternal = this.parseBoolean(oModel.oData.results[i].AttInternal);\r\n\t\t\t}*/\r\n\t\t\tthat.setModel(oModel, \"Attachment\");\r\n\t\t},\r\n\t\tonAttachDelete: function(oEvent) {\r\n\t\t\tthis.sItemIndex = oEvent.getParameter(\"listItem\").oBindingContexts.Attachment.sPath.split(\"/\")[2];\r\n\t\t\tvar dialog = new sap.m.Dialog({\r\n\t\t\t\ttitle: this.oI18n.getText(\"Confirm\"),\r\n\t\t\t\ttype: \"Message\",\r\n\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\ttext: this.oI18n.getText(\"ConfirmDeleteSureAtt\")\r\n\t\t\t\t}),\r\n\t\t\t\tbeginButton: new sap.m.Button({\r\n\t\t\t\t\ttext: this.oI18n.getText(\"Yes\"),\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tthis.AttachDelete(oEvent);\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tendButton: new sap.m.Button({\r\n\t\t\t\t\ttext: this.oI18n.getText(\"No\"),\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tafterClose: function() {\r\n\t\t\t\t\tdialog.destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdialog.open();\r\n\t\t},\r\n\t\tAttachDelete: function() {\r\n\t\t\tvar oModel = this.getModel(\"Attachment\");\r\n\t\t\tvar oItem = oModel.oData.results[this.sItemIndex];\r\n\t\t\tvar uri = \"/AttachmentSet(GUID='\" + this.getHeaderDraftKey().replace(/-/g, \"\").toUpperCase() + \"',GUIDA='\" + oItem.GUIDA +\r\n\t\t\t\t\"')\";\r\n\t\t\tthis.deleteData(this, uri, \"SuccessDeleteAttach\", \"ErrorDeleteAttach\", this.afterUploadFunction);\r\n\t\t},\r\n\t\treadData: function(that, uri, params, aFilters, afterFunction) {\r\n\t\t\tvar busy = new sap.m.BusyDialog();\r\n\t\t\tbusy.open();\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tvar url = \"/sap/opu/odata/sap/ZNMM_SRV\";\r\n\t\t\t\t\tvar oModel = new sap.ui.model.odata.v2.ODataModel(url);\r\n\t\t\t\t\tvar oModelJsonArray = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModel.read(uri, {\r\n\t\t\t\t\t\turlParameters: params,\r\n\t\t\t\t\t\tfilters: aFilters,\r\n\t\t\t\t\t\tasync: false,\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\toModelJsonArray.setData(oData);\r\n\t\t\t\t\t\t\tif ((oModelJsonArray.getData() != undefined) && (oModelJsonArray.getData().results != undefined) && (oModelJsonArray.getData()\r\n\t\t\t\t\t\t\t\t\t.results.length > 100)) {\r\n\t\t\t\t\t\t\t\toModelJsonArray.setSizeLimit(oModelJsonArray.getData().results.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tafterFunction(that, oModelJsonArray);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(error) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tif (error.response) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tvar vMessages = $(error.response.body).find('message').first().text().match(/{(.*)}/)[0];\r\n\t\t\t\t\t\t\t\t\tif (vMessages) {\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsgS(that, vMessages);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar vMessage = $(error.response.body).find('message').first().text();\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", vMessage);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.message);\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.response.body);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.showMsg(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t250\r\n\t\t\t);\r\n\t\t},\r\n\t\tsendData: function(that, vEntitySet, oEntry, vSuccessId, vErrorId, fAfterFunction) {\r\n\t\t\tvar vErrorMsg = this.getResourceBundle().getText(vErrorId);\r\n\t\t\tvar vSuccessMsg = this.getResourceBundle().getText(vSuccessId);\r\n\t\t\tvar busy = new sap.m.BusyDialog();\r\n\t\t\tbusy.open();\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tvar url = \"/sap/opu/odata/sap/ZNMM_SRV\";\r\n\t\t\t\t\tvar oModel = new sap.ui.model.odata.ODataModel(url);\r\n\t\t\t\t\toModel.create(vEntitySet, oEntry, null,\r\n\t\t\t\t\t\tfunction(oData, oResponse) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tfAfterFunction(oData, oResponse, that);\r\n\t\t\t\t\t\t\tif (vSuccessMsg != \"\") {\r\n\t\t\t\t\t\t\t\tsap.m.MessageToast.show(vSuccessMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//that.refreshView();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(error) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tif (error.response) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tvar vMessages = $(error.response.body).find('message').first().text().match(/{(.*)}/)[0];\r\n\t\t\t\t\t\t\t\t\tif (vMessages) {\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsgS(that, vMessages);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar vMessage = $(error.response.body).find('message').first().text();\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", vMessage);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.message);\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.response.body);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.showMsg(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t500\r\n\t\t\t);\r\n\t\t},\r\n\t\tdeleteData: function(that, uri, vSuccessId, vErrorId, fAfterFunction) {\r\n\t\t\tvar vErrorMsg = this.oI18n.getText(vErrorId);\r\n\t\t\tvar vSuccessMsg = this.oI18n.getText(vSuccessId);\r\n\t\t\tvar busy = new sap.m.BusyDialog();\r\n\t\t\tbusy.open();\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tvar url = \"/sap/opu/odata/sap/ZNMM_SRV\";\r\n\t\t\t\t\tvar oModel = new sap.ui.model.odata.v2.ODataModel(url);\r\n\t\t\t\t\toModel.remove(uri, {\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tfAfterFunction(oData, oResponse, that);\r\n\t\t\t\t\t\t\tsap.m.MessageToast.show(vSuccessMsg);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(error) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tsap.m.MessageToast.show(vErrorMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 300);\r\n\t\t},\r\n\t\taddMsg: function(that, msgType, msgText) {\r\n\t\t\tvar oMessageManager = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar vMsgType = null;\r\n\t\t\tswitch (msgType) {\r\n\t\t\t\tcase \"E\":\r\n\t\t\t\t\tvMsgType = sap.ui.core.MessageType.Error;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"I\":\r\n\t\t\t\t\tvMsgType = sap.ui.core.MessageType.Information;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"S\":\r\n\t\t\t\t\tvMsgType = sap.ui.core.MessageType.Success;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"W\":\r\n\t\t\t\t\tvMsgType = sap.ui.core.MessageType.Warning;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvMsgType = sap.ui.core.MessageType.Information;\r\n\t\t\t}\r\n\t\t\tvar errorMessage = new sap.ui.core.message.Message({\r\n\t\t\t\tmessage: msgText,\r\n\t\t\t\ttype: vMsgType,\r\n\t\t\t\tid: \"1\",\r\n\t\t\t\tpersistent: true,\r\n\t\t\t\tprocessor: oMessageProcessor\r\n\t\t\t});\r\n\t\t\toMessageManager.addMessages(errorMessage);\r\n\t\t},\r\n\t\taddMsgS: function(that, vMessages) {\r\n\t\t\tvar oMessages = JSON.parse(vMessages);\r\n\t\t\tfor (var i = 0; i < oMessages.itab.length; i++) {\r\n\t\t\t\tthis.addMsg(that, oMessages.itab[i].type, oMessages.itab[i].message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowMsg: function(xVsbl) {\r\n\t\t\tthis.getView().byId(\"__tabMessages\").setVisible(xVsbl);\r\n\t\t},\r\n\t\tgetFormValue: function(fieldId) {\r\n\t\t\tvar oElement = this.getView().byId(fieldId);\r\n\t\t\tif (!oElement) {\r\n\t\t\t\tvar oElement = sap.ui.getCore().byId(fieldId);\r\n\t\t\t}\r\n\t\t\tif (!oElement) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tvar oElementType = oElement.getMetadata().getName();\r\n\t\t\tswitch (oElementType) {\r\n\t\t\t\tcase \"sap.m.Input\":\r\n\t\t\t\t\treturn oElement.getValue();\r\n\t\t\t\tcase \"sap.m.ComboBox\":\r\n\t\t\t\t\treturn oElement.getSelectedKey();\r\n\t\t\t\tcase \"sap.m.Select\":\r\n\t\t\t\t\treturn oElement.getSelectedKey();\r\n\t\t\t\tcase \"sap.m.CheckBox\":\r\n\t\t\t\t\treturn oElement.getSelected();\r\n\t\t\t\tcase \"sap.m.DatePicker\":\r\n\t\t\t\t\treturn this.toJSONLocal(oElement.getDateValue());\r\n\t\t\t\t\t//return oElement.getValue();\r\n\t\t\t\tcase \"sap.m.Switch\":\r\n\t\t\t\t\treturn oElement.getState();\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn oElement.getValue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAttachPress: function(oEvent) {\r\n\t\t\tdebugger;\r\n\t\t\tvar vIndex = oEvent.getParameter(\"id\").split(\"-\")[oEvent.getParameter(\"id\").split(\"-\").length - 1];\r\n\t\t\tvar oModel = this.getModel(\"Attachment\");\r\n\t\t\tvar xContent = oModel.oData.results[vIndex].Content;\r\n\t\t\tvar vType = oModel.oData.results[vIndex].AttachType;\r\n\t\t\tvar vName = oModel.oData.results[vIndex].AttachName;\r\n\r\n\t\t\t// base64 string\r\n\t\t\tvar base64str = xContent;\r\n\r\n\t\t\t// decode base64 string, remove space for IE compatibility\r\n\t\t\tvar binary = atob(base64str.replace(/\\s/g, ''));\r\n\t\t\tvar len = binary.length;\r\n\t\t\tvar buffer = new ArrayBuffer(len);\r\n\t\t\tvar view = new Uint8Array(buffer);\r\n\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\tview[i] = binary.charCodeAt(i);\r\n\t\t\t}\r\n\t\t\t// create the blob object with content-type \"application/pdf\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\tvar blob = new Blob([view], {\r\n\t\t\t\ttype: vType\r\n\t\t\t});\r\n\t\t\tif (window.navigator.msSaveOrOpenBlob) {\r\n\t\t\t\twindow.navigator.msSaveBlob(blob, vName);\r\n\t\t\t} else {\r\n\t\t\t\tvar elem = window.document.createElement('a');\r\n\t\t\t\telem.href = window.URL.createObjectURL(blob);\r\n\t\t\t\telem.download = vName;\r\n\t\t\t\tdocument.body.appendChild(elem);\r\n\t\t\t\telem.click();\r\n\t\t\t\tdocument.body.removeChild(elem);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateAttachItemGuid: function(isItem, isHeader) {\r\n\t\t\t\tdebugger;\r\n\t\t\t\tvar url = \"/sap/opu/odata/sap/ZNMM_SRV\";\r\n\t\t\t\tvar oModel = new sap.ui.model.odata.ODataModel(url);\r\n\t\t\t\tfor (var i = 0; i < this.getView().getModel(\"Attachment\").oData.results.length; i++) {\r\n\t\t\t\t\tvar oEntry = {};\r\n\t\t\t\t\tvar uri = \"/AttachmentSet(GUID='\" + isItem.ParentDraftUUID.replace(/-/g, \"\").toUpperCase() + \"',GUIDA='\" +  \r\n\t\t\t\t\tthis.getView().getModel(\"Attachment\").oData.results[i].GUIDA.replace(/-/g,\"\").toUpperCase()\r\n\t\t\t\t\t\t+ \"')\";\r\n\t\t\t\t\toEntry.GUID = isItem.ParentDraftUUID.replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\t\toEntry.GUIDI = isItem.DraftUUID.replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\t\toEntry.GUIDA = this.getView().getModel(\"Attachment\").oData.results[i].GUIDA;\r\n\t\t\t\t\toModel.update(uri, oEntry, null,\r\n\t\t\t\t\t\tfunction(oData, oResponse) {\r\n\t\t\t\t\t\t\tconsole.log(oResponse);\r\n\t\t\t\t\t\t\t//sap.m.MessageToast.show(vSuccessMsg);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(error) {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//> Added by con4PAS - Attachments\t\t\t\t\t\t\r\n\t});\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/Component.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/core/UIComponent\",\"sap/ui/model/resource/ResourceModel\",\"ui/s2p/mm/requisition/maintain/s1/model/models\",\"sap/ui/Device\",\"ui/s2p/mm/requisition/maintain/s1/controller/ErrorHandler\",\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\"ui/s2p/mm/requisition/maintain/s1/localService/mockserver\"],function(U,R,m,D,E,B,M){\"use strict\";return U.extend(\"ui.s2p.mm.requisition.maintain.s1.Component\",{metadata:{manifest:\"json\",config:{fullWidth:true}},init:function(){try{var p=window.location;U.prototype.init.apply(this,arguments);this._oErrorHandler=new E(this);this.setModel(m.createDeviceModel(),\"device\");this.setModel(m.createFLPModel(),\"FLP\");this.getRouter().initialize();this.getComponentData().changingSourcePageAllowed=true;var u=this.getComponentData();if(u.startupParameters[\"page\"]){this.getComponentData().sourcePage=u.startupParameters[\"page\"][0];this.getComponentData().changingSourcePageAllowed=false;}if(u.startupParameters[\"draftKey\"]){this.getComponentData().draftKey=u.startupParameters[\"draftKey\"][0];}if(u.startupParameters[\"DocumentNo\"]){this.getComponentData().purchaseRequisition=u.startupParameters[\"DocumentNo\"][0];}if(u.startupParameters[\"DocumentItemNo\"]){this.getComponentData().purReqnItem=u.startupParameters[\"DocumentItemNo\"][0];}if(u.startupParameters[\"DocumentItemDraft\"]){this.getComponentData().purReqnItemDraft=u.startupParameters[\"DocumentItemDraft\"][0];}if(u.startupParameters[\"ItemPath\"]){this.getComponentData().PRitemPath=u.startupParameters[\"ItemPath\"][0];}if(u.startupParameters[\"IsExtPurgScenario\"]){this.getComponentData().isExtPurgScenario=u.startupParameters[\"IsExtPurgScenario\"][0];}if(M.MockServerMode){this.getRouter().navTo(\"Search\");}else{window.decodeURIComponent(p);p+=\" \";if(p.search(\"searchTerm\")<0){if(p.search(\"CartOverview\")>=0){this.getRouter().navTo(\"CartOverview\",{DraftKey:u.draftKey,PurchaseRequisition:u.purchaseRequisition});}else{if(u.startupParameters[\"mode\"]==\"create\"){if(p.search('Freetext')>0){}else{this.getRouter().navTo(\"Search\");}}else{if(p.search('Freetext')>0){}else{this.getRouter().navTo(\"PurReqList\");}}}}}var b=new sap.m.Button({text:this.getModel(\"i18n\").getResourceBundle().getText(\"usersettings\"),tooltip:this.getModel(\"i18n\").getResourceBundle().getText(\"usersettings\"),press:jQuery.proxy(function(){this.showSettingsDialog({});},this)});b.addStyleClass(\"sapUshellActionItem\");sap.ushell.services.AppConfiguration.addApplicationSettingsButtons([b]);}catch(e){}},showSettingsDialog:function(){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");var a=this.getComponentData().startupParameters[\"mode\"];var i;var s;if(this.getComponentData().startupParameters[\"page\"]){s=this.getComponentData().startupParameters[\"page\"][0];}else{s=this.getComponentData().sourcePage;}if(a[0]===\"create\"){i=\"create\";}else{i=\"manageLineItems\";}c.toExternal({target:{semanticObject:\"UserDefaults\",action:\"manage\"},params:{BusinessObject:[\"PurchaseRequisition\"],Intent:[i],Mode:[a],page:[s],draftKey:[this.getComponentData().draftKey],DocumentNo:[this.getComponentData().purchaseRequisition],DocumentItemNo:[this.getComponentData().purReqnItem],DocumentItemDraft:[this.getComponentData().purReqnItemDraft],ItemPath:[this.getComponentData().PRitemPath],IsExtPurgScenario:[this.getComponentData().isExtPurgScenario]}});},getQueryVariable:function(v){var q=window.location.search.substring(1);var a=q.split(\"&\");for(var i=0;i<a.length;i++){var p=a[i].split(\"=\");if(p[0]===v){return p[1];}}return(false);},createContent:function(){var r=U.prototype.createContent.apply(this,arguments);r.addStyleClass(this.getContentDensityClass());return r;},getContentDensityClass:function(){if(!this._sContentDensityClass){if(D.system.desktop){this._sContentDensityClass=\"sapUiSizeCompact\";}else{this._sContentDensityClass=\"sapUiSizeCozy\";}}return this._sContentDensityClass;}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Search.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\"sap/ui/model/json/JSONModel\",'sap/m/MessageBox',\"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\"sap/m/MessageToast\"],function(B,J,M,f,E,a){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Search\",{onInit:function(){this.getView().setBusy(true);this.oView.setVisible(false);this.oModel=this.getAppModel();this.getResourceBundle();this._oModel=this.getAppModel();if((this.getHeaderDraftKey()===\"\")||(this.getHeaderDraftKey()===undefined)){this.genInfo();}else{}this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));this._oRouter=this._oComponent.getRouter();this.getRouter().getRoute(\"Search\").attachPatternMatched(this._handleRouteMatched,this);this.oSplitContainer=this.getView().byId(\"mySplitContainer\");this.oSplitContainer.setShowSecondaryContent(false);this.getView().byId(\"catalogText\").setEnabled(false);this.getView().byId(\"filterBtn\").setVisible(false);this.filters={};this.selectedValue=\"\";this.bDescending=true;},genInfo:function(){this.dataManager.getCurrentDraft(this.getServiceCallParameter(this.showUserPopup,this.serviceFail));},showUserPopup:function(d){var t=this;var p=d.results?d.results[0]:d;var b=this.getDraftKey(p,true);this.getView().byId(\"headerPanel\").setBusy(true);if(p){this.setExtScenarioFlag(p.IsExtPurgScenario);if(p.NumberOfItems!==0){M.show(this.getResourceBundle().getText(\"draftMessage\"),{icon:M.Icon.INFORMATION,title:t.getResourceBundle().getText(\"draft\"),actions:[t.getResourceBundle().getText(\"continue\"),t.getResourceBundle().getText(\"discard\")],onClose:function(A){if(A===t.getResourceBundle().getText(\"continue\")){t.getDraftSuccessCallback(d);}else{if(t.getTestMode()){t.getDraftSuccessCallback(d);t.getView().byId(\"btnCart\").setText(\"0\");}else{t.deleteAndCreateNewDraft(b,p.PurchaseRequisition);}}t.getView().setVisible(true);},initialFocus:t.getResourceBundle().getText(\"continue\")});}else{this.deleteAndCreateNewDraft(b,p.PurchaseRequisition);this.getView().setVisible(true);var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"btnCart\").setModel(j);this.getView().byId(\"btnCart\").bindElement(\"/results/0\");}if(p.NumberOfItems>1){var T=p.NumberOfItems+\" \"+this.getResourceBundle().getText(\"items\")+\" \"+this.getResourceBundle().getText(\"itemcount\");}else{var T=p.NumberOfItems+\" \"+this.getResourceBundle().getText(\"items\")+\" \"+this.getResourceBundle().getText(\"itemcount\");}var i=this.getView().byId(\"numberofitems\");i.setText(T);}else{this.getView().setVisible(true);this.getView().byId(\"searchItems\").setVisible(false);this.getView().byId(\"catalogText\").setVisible(false);this.getView().byId(\"headerPanel\").setBusy(true);this.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft,this.serviceFail));}if(p.NumberOfItems>0){this.getView().byId('btnCart').setType(\"Emphasized\");}else{this.getView().byId('btnCart').setType(\"Default\");}var c=true;if(p&&p.IsSrchEnabled){c=false;}this.getView().byId(\"searchItems\").setVisible(c);this.getView().byId(\"catalogText\").setVisible(c);},success:function(d){var p=d.results?d.results[0]:d;var i=false;if(p){if(p.IsSrchEnabled){i=false;}else{i=true;}this.getView().byId(\"searchItems\").setVisible(i);this.getView().byId(\"catalogText\").setVisible(i);}var b=this.getDraftKey(p,true);this.setHeaderDraftKey(b);this.setPurchaseRequisition(p.PurchaseRequisition);var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"btnCart\").setModel(j);this.getView().byId(\"btnCart\").bindElement(\"/\");if(p.NumberOfItems>0){this.getView().byId('btnCart').setType(\"Emphasized\");}else{this.getView().byId('btnCart').setType(\"Default\");}this.getView().byId(\"headerPanel\").setBusy(false);this.getView().setBusy(false);},createSuccessNewDraft:function(d){if(d){this.setExtScenarioFlag(d.IsExtPurgScenario);this.success(d);this.showCatalogList();this.getView().setBusy(false);}},createSuccessCallback:function(d){this.success(d);if(!this.getView().byId(\"searchItems\").getValue()&&(this.getView().byId(\"FilterList\")))this.showCatalogList();this.navToSourcePage();},deleteAndCreateNewDraft:function(d,p){this.dataManager.deleteAndCreateNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft,this.serviceFail),d,p);},deleteDraftSuccessCallback:function(){this.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft,this.serviceFail));},_handleRouteMatched:function(){var l=this.getView().byId(\"FilterList\");var c=l.getSelectedContexts(true);if(this.getOwnerComponent().getComponentData().changingSourcePageAllowed){this.setSourcePage(\"Search\");}if(c.length){this.filterListSelect(l);}var t=this;if(t.getOrderDelete()===true){t.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft,this.serviceFail));this.getView().byId(\"filterBtn\").removeStyleClass(\"filterposioning\");this.getView().byId(\"filterBtn\").setType(\"Default\").setVisible(false);this.oSplitContainer.setShowSecondaryContent(false);t.setOrderDelete(false);}else{if(t.getHeaderDraftKey()){t.getView().setBusyIndicatorDelay(0);t.getView().setBusy(true);t.dataManager.getHeader(t.getServiceCallParameter(t.createSuccessCallback,t.serviceFail),t.getHeaderDraftKey(),t.getPurchaseRequisition());var s=this.getView().byId(\"searchItems\").getValue();if(s&&(!(l))){var b=\"ProductDescription eq '\"+s+\"'\";var m=this.getServiceCallParameter(this.onSuccessSearchBinding,this.serviceFail);this.dataManager.searchResultsBinding(m,b);}}}},getDraftSuccessCallback:function(d){var p=d.results?d.results[0]:d;if(this.getTestMode()){p.PurchaseRequisition=\"\";}var b=this.getDraftKey(p,true);this.setHeaderDraftKey(b);this.setPurchaseRequisition(p.PurchaseRequisition);var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"btnCart\").setModel(j);this.getView().byId(\"btnCart\").bindElement(\"/results/0\");this.getView().byId(\"headerPanel\").setBusy(false);this.showCatalogList();this.getView().setBusy(false);},showGenItems:function(d){var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"btnCart\").setModel(j);this.getView().byId(\"btnCart\").bindElement(\"/results/0\");this.getView().setBusy(false);},getAtribute:function(e){var S=this.getSearchterm();if(S!==\"false\"){this.getView().byId(\"searchItems\").setValue(S);this.searchBtnPress();}this.setHeaderDraftKey(e.getParameter(\"arguments\").Draftkey);this.setPurchaseRequisition(e.getParameter(\"arguments\").PurchaseRequisition);},searchBtnPress:function(){var s=this.getView().byId(\"searchItems\").getValue();if(s){var b=\"ProductDescription eq '\"+s+\"'\";var c=\"ValueDesc eq '\"+s+\"'\";this.searchResultBind(b);this.filterResultBind(c);}},searchResultBind:function(s){this.getView().byId(\"middleContent\").setBusy(true);if(this.getTestMode()){var d={};var r=[];var b={\"OpnCtlgItemID\":6713,\"Language\":\"Language 1\",\"ProductDescription\":\"ProductDescription 8\",\"ManufacturerName\":\"ManufacturerName 1\",\"ManufacturerMaterial\":\"ManufacturerMaterial 1\",\"OpnCtlgHasPriceScale\":\"OpnCtlgHasPriceScale 1\",\"ProductCatalogName\":\"ProductCatalogName 1\",\"OpnCtlgIntCatalogName\":\"OpnCtlgIntCatalogName 1\",\"Service\":true,\"Material\":\"Material 1\",\"MaterialGroup\":\"MaterialGroup 1\",\"OpnCtlgSrchLongText\":\"OpnCtlgSrchLongText 1\",\"MaterialGroupName\":\"MaterialGroupName 1\",\"OpnCtlgSupplierName\":\"OpnCtlgSupplierName 1\",\"Manufacturer\":\"Manufacturer 1\",\"OpnCtlgSupplierID\":\"OpnCtlgSupplierID 1\",\"OpnCtlgMaterialIDByVendor\":\"OpnCtlgMaterialIDByVendor 1\",\"UnitOfMeasure\":\"UnitOfMeasure 1\",\"OpnCtlgItemPrice\":1008.18,\"OpnCtlgItemCurrency\":\"OpnCtlgItemCurrency 1\",\"ProductType\":\"ProductType 1\",\"OpnCtlgCategoryID\":\"5b3cbe35-29fb-4932-b8ca-e94beda2f25d\",\"OpnCtlgHasProdRelationExists\":\"OpnCtlgHasProdRelationExists 1\",\"OpnCtlgMainImageName\":\"OpnCtlgMainImageName 1\",\"OpnCtlgMainImageURL\":\"OpnCtlgMainImageURL 1\",\"OpnCtlgMainImageText\":\"OpnCtlgMainImageText 1\",\"OpnCtlgMainImageID\":9535,\"OpnCtlgPrcComCurrency\":4596.02,\"OpnCtlgComCurrencyID\":\"OpnCtlgComCurrencyID 1\",\"PricingScaleType\":\"PricingScaleType 1\",\"OpnCtlgExternalProductID\":\"OpnCtlgExternalProductID 1\",\"OpnCtlgWebServiceID\":\"OpnCtlgWebServiceID 1\",\"OpnCtlgWebServiceName\":\"OpnCtlgWebServiceName 1\",\"ItemType\":\"ItemType 1\",\"NetPriceQuantity\":\"NetPriceQuantity 1\",\"OpnCtlgContentUnit\":\"OpnCtlgContentUnit 1\",\"OpnCtlgPackingQty\":\"OpnCtlgPackingQty 1\",\"OpnCtlgMinOrderQuantity\":\"OpnCtlgMinOrderQuantity 1\",\"MaterialFixedLotSizeQuantity\":\"MaterialFixedLotSizeQuantity 1\",\"ContractAccount\":\"ContractAccount 1\",\"OpnCtlgContractItem\":\"OpnCtlgContractItem 1\",\"OpnCtlgExternalQuoteID\":\"OpnCtlgExternalQuoteID 1\",\"OpnCtlgExtQuoteItem\":\"OpnCtlgExtQuoteItem 1\",\"OpnCtlgExtSchemaType\":\"OpnCtlgExtSchemaType 1\",\"OpnCtlgExternalCategoryID\":\"OpnCtlgExternalCategoryID 1\",\"OpnCtlgExternalCategory\":\"OpnCtlgExternalCategory 1\",\"UsageRating\":8273.84,\"ParentItem\":\"ParentItem 1\",\"IsOpnCtlgManaged\":true,\"IsOpnCtlgItmFrmMatlMstr\":false,\"IsOpnCtlgItem\":false,\"ChangedDateTime\":2928.14,\"OpnCtlgChangedBy\":\"OpnCtlgChangedBy 1\",\"OpnCtlgItemSustainCompliance\":\"OpnCtlgItemSustainCompliance 1\",\"OpnCtlgDirectEmissionValue\":9688.67,\"OpnCtlgDirectEmissionUnit\":\"OpnCtlgDirectEmissionUnit 1\",\"OpnCtlgIndrctEmissionValue\":6332.56,\"OpnCtlgIndrctEmissionUnit\":\"OpnCtlgIndrctEmissionUnit 1\",\"OpnCtlgTempEmissionValue\":6980.75,\"OpnCtlgTempEMissionUnit\":\"OpnCtlgTempEMissionUnit 1\",\"OpnCtlgRecycleValue\":5965.22,\"OpnCtlgRecycleUnit\":\"OpnCtlgRecycleUnit 1\",\"OpnCtlgWaterConsumptionValue\":1035.46,\"OpnCtlgWaterConsumptionUnit\":\"OpnCtlgWaterConsumptionUnit 1\",\"OpnCtlgEnergyConsumptionValue\":9301.09,\"OpnCtlgEnergyConsumptionUnit\":\"OpnCtlgEnergyConsumptionUnit 1\",\"OpnCtlgWasteGeneratedValue\":2708.63,\"OpnCtlgWasteGeneratedUnit\":\"OpnCtlgWasteGeneratedUnit 1\",\"LogicalSystem\":\"LogicalSystem 1\",\"OpnCtlgSystemName\":\"OpnCtlgSystemName 1\",\"SourceLogicalSystem\":\"SourceLogicalSystem 1\",\"Decimals\":4682,\"LeadTimeAnncmntDueInDays\":\"LeadTimeAnncmntDueInDays 1\",\"OpnCtlgPrcValidityStartDate\":\"OpnCtlgPrcValidityStartDate 1\",\"OpnCtlgPrcValidityEndDate\":\"OpnCtlgPrcValidityEndDate 1\",\"TaxTolerancePercent\":916.48,\"OpnCtlgNumberOfHits\":5769,\"OpnCtlgFilterValue\":\"OpnCtlgFilterValue 1\",\"__metadata\":{\"uri\":\"C_Procurementitems(OpnCtlgItemID=6713,Language='Language 1')\",\"type\":\"MMPUR_REQ_SSP_MAINTAIN_SRV.C_ProcurementitemsType\"}};r.push(b);d.results=r;this.onSuccessSearchBinding(d);}else{var m=this.getServiceCallParameter(this.onSuccessSearchBinding,this.serviceFail);this.dataManager.searchResultsBinding(m,s);}var m=this.getServiceCallParameter(this.onSuccessSearchBinding,this.serviceFail);this.dataManager.searchResultsBinding(m,s);},onSuccessSearchBinding:function(d){this.getView().byId(\"middleContent\").setBusy(false);this.getView().byId(\"catalogText\").setEnabled(true);this.getView().setBusy(false);if(d.results.length){this.destroyContent(\"middleContent\");this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.SearchResults\",\"middleContent\");var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"middleContent\").setModel(j);this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].bindElement(\"/results\");this.destroyContent(\"NoSearchresult\");this.getView().byId(\"filterBtn\").setVisible(true);var t=d.results.length;}else{this.destroyContent(\"middleContent\");this.destroyContent(\"NoSearchresult\");this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.NoserachResult\",\"NoSearchresult\");this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogList\",\"middleContent\");this.bindCatalog(\"middleContent\");this.getView().byId(\"filterBtn\").setVisible(false);this.oSplitContainer.setShowSecondaryContent(false);}},filterResultBind:function(b){var m=this.getServiceCallParameter(this.onSuccessFilterResult,this.serviceFail);this.dataManager.filterResultsBinding(m,b);},onSuccessFilterResult:function(d){this.removeRawData(d);var t=this.cloneFilterData(d);this.saveFilterTemplate(t);var b=d.results.length;for(var i=0;i<b;i++){if(d.results[i].PropertyCategory===\"Price Range\"){d.results[i].PropertyCategory=\"Z-Price Range\";}}var j=new sap.ui.model.json.JSONModel();j.setData(d);this.getView().byId(\"FilterList\").setModel(j);this.getView().byId(\"FilterList\").bindElement(\"/results\");},removeRawData:function(d){for(var i=d.results.length-1;i>=0;i--){if(d.results[i].PropertyCategory===\"RAW_PRICE\"){d.results.splice(i,1);}}},cloneFilterData:function(o){var c;if(null==o||\"object\"!=typeof o){return o;}if(o instanceof Date){c=new Date();c.setTime(o.getTime());return c;}if(o instanceof Array){c=[];for(var i=0,l=o.length;i<l;i++){c[i]=this.cloneFilterData(o[i]);}return c;}if(o instanceof Object){c={};for(var b in o){if(o.hasOwnProperty(b)){c[b]=this.cloneFilterData(o[b]);}}return c;}throw new Error(\"Unable to copy obj! Its type isn't supported.\");},saveFilterTemplate:function(t){for(var i=0;i<t.results.length;i++){t.results[i].TotalHits=\"\";}this.firstFilterData=t;},onSelectionFilter:function(e){var l=e.getSource();this.filterListSelect(l);},filterListSelect:function(l){var c=l.getSelectedContexts(true);for(var i=0;i<c.length;i++){this.selectedkey=c[i].getObject().PropertyCategory;this.selectedValue=c[i].getObject().PropertyValue;this.pushToFilterValues(this.selectedkey,this.selectedValue);}var b=this.formQueryString();var s=this.getView().byId(\"searchItems\").getValue();var d=\"\";if(b!==\"\"){var e=\"DESCRIPTION\"+\"@@@\"+s;d=this.appendToQueryString(e)+b;d=d.replace(\"Z-Price Range\",\"Price Range\");this.searchResultBind(d);this.filterLaterBind(d);}else{this.searchBtnPress();}this.filters={};},pushToFilterValues:function(k,v){if(this.filters[k]===undefined){var b=[];b.push(v);this.filters[k]=b;}else{b=this.filters[k];if(b.indexOf(v)===-1){b.push(v);}this.filters[k]=b;}},formQueryString:function(){var u=\"\";for(var k in this.filters){var b=k;var c=this.filters[k];for(var i=0;i<c.length;i++){b=b+\"@@@\"+c[i];}u=u+\" or \"+this.appendToQueryString(b);}return u;},appendToQueryString:function(b){return\" OpnCtlgFilterValue eq '\"+b+\"'\";},filterLaterBind:function(b){var m=this.getServiceCallParameter(this.onSuccessAfterFilter,this.serviceFail);this.dataManager.filterResultsBinding(m,b);},onSuccessAfterFilter:function(d){this.getView().byId(\"filterBtn\").setVisible(true);this.getView().byId(\"filterBtn\").addStyleClass(\"filterposioning\");this.oSplitContainer.setShowSecondaryContent(true);var p=this.processFilter(d);var b=p.results.length;for(var i=0;i<b;i++){if(p.results[i].PropertyCategory===\"Price Range\"){p.results[i].PropertyCategory=\"Z-Price Range\";}}this.getView().byId(\"FilterList\").getModel().setData(p);},processFilter:function(n){var o=this.cloneFilterData(this.firstFilterData);this.removeNewPriceRange(n);this.mappingNewPriceRange(o,n);for(var i=0;i<n.results.length;i++){for(var j=0;j<o.results.length;j++){if(o.results[j].PropertyCategory===n.results[i].PropertyCategory&&o.results[j].ValueDesc===n.results[i].ValueDesc){o.results[j].TotalHits=n.results[i].TotalHits;}}}return o;},removeNewPriceRange:function(n){for(var i=n.results.length-1;i>=0;i--){if(n.results[i].PropertyCategory===\"Price Range\"){n.results.splice(i,1);}}},mappingNewPriceRange:function(o,n){var s=[];for(var i=0;i<n.results.length;i++){if(n.results[i].PropertyCategory===\"RAW_PRICE\"){for(var j=0;j<o.results.length;j++){s=o.results[j].PropertyValue.split(\"-\");if(o.results[j].PropertyCategory===\"Price Range\"){if(parseFloat(s[0])<=parseFloat(n.results[i].PropertyValue)&&parseFloat(n.results[i].PropertyValue)<parseFloat(s[1])){if(o.results[j].TotalHits===\"\"&&o.results[j].TotalHits!==0){o.results[j].TotalHits=0;}o.results[j].TotalHits=parseInt(o.results[j].TotalHits)+parseInt(n.results[i].TotalHits);break;}}}}}},showCatalogPress:function(){this.destroyContent(\"NoSearchresult\");this.getView().byId(\"catalogText\").setEnabled(false);this.getView().byId(\"filterBtn\").removeStyleClass(\"filterposioning\");this.getView().byId(\"filterBtn\").setType(\"Default\").setVisible(false);this.showCatalogList();},showCatalogList:function(){this.getView().byId(\"filterBtn\").setVisible(false);this.oSplitContainer.setShowSecondaryContent(false);this.destroyContent(\"middleContent\");this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogList\",\"middleContent\");this.bindCatalog(\"middleContent\");},showGridCatalog:function(){this.destroyContent(\"middleContent\");this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogGrid\",\"middleContent\");this.bindCatalog(\"middleContent\");},CatalogWindowImg:function(e){var S=e.getSource().getParent().getAggregation(\"content\")[1].getProperty(\"text\");this.catalogPress(S);},onCatalogNavClick:function(e){var S=e.getSource().getAggregation(\"cells\")[1].getAggregation(\"items\")[0].getText();this.catalogPress(S);},onPressText:function(e){var S=e.getSource().getText();this.catalogPress(S);},catalogPress:function(S){var p=this.getHeaderDraftKey();var m=this.getServiceCallParameter(this.onSuccessGetUrl,this.serviceFail);this.dataManager.catalogBind(m,S,p);},onSuccessGetUrl:function(d){this.oneTimePoll=true;var t=this;var s=d.ServiceURL;var b;if(d.FormData){b=$('<form/>');b.attr(\"method\",\"post\");b.attr(\"action\",s);b.attr(\"target\",'catalogWindow');var q=d.FormData.split(\"&\");for(var i=0;i<q.length;i++){this.nameValuePair=q[i].split(\"=\");var c=$('<input>').attr({type:'hidden',name:this.nameValuePair[0],value:this.nameValuePair[1]});b.append(c);b.appendTo(document.body);}}var p=\"/PollingSet(EventId='\"+d.EventId+\"')\";var P={\"success\":jQuery.proxy(t.onSuccesspolling,this),\"error\":jQuery.proxy(t.errorServiceFail,this)};t.oModel.read(p,P);this.popupWindow=window.open('','catalogWindow','height=800,width=1100,resizable=yes,scrollbars=1');this.popupWindow.onbeforeunload=function(g){try{if(g.srcElement.hasOwnProperty(closed)){this.popupWindow=g.srcElement;}}catch(e){};};if(this.popupWindow.location==\"about:blank\"){this.popupWindow.location=s;}if(d.FormData){b.submit();}document.body.removeChild(b);this.popupWindow.focus();},onSuccesspolling:function(d){var t=this;var p=false;if(!this.popupWindow.closed){p=true;}else{if(this.oneTimePoll==true){this.oneTimePoll=false;p=true;}else{p=false;}}if(d.Status===\"001\"){if(p){var b=\"/PollingSet(EventId='\"+d.EventId+\"')\";var P={\"success\":jQuery.proxy(this.onSuccesspolling,this),\"error\":jQuery.proxy(this.errorServiceFail,this)};setTimeout(function(){t.oModel.read(b,P);},2000);}}if(d.Status===\"002\"||d.Status===\"003\"){sap.m.MessageToast.show(this.getResourceBundle().getText(\"Failure\"));}if(d.Status===\"004\"){sap.m.MessageToast.show(this.getResourceBundle().getText(\"Success\"));this.dataManager.getHeader(this.getServiceCallParameter(this.successCallback,this.serviceFail),this.getHeaderDraftKey(),this.getPurchaseRequisition());}if(this.getTestMode()){this.popupWindow.close();}},onSortReview:function(){var t=this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].getAggregation(\"items\")[0].getAggregation(\"items\")[1].getBinding(\"items\");var l=t.oList;if(this.bDescending){this.bDescending=false;}else{this.bDescending=true;}for(var k in l){l[k].OpnCtlgPrcComCurrency=parseFloat(l[k].OpnCtlgPrcComCurrency);}var s=[];s.push(new sap.ui.model.Sorter(\"OpnCtlgPrcComCurrency\",this.bDescending));t.sort(s);},onExit:function(){if(this._oPopover){this._oPopover.destroy();}if(this._oPopoverFilter){this._oPopoverFilter.destroy();}},ProductDetails:function(e){this.setSearchterm(\"false\");var p=e.getSource().getBindingContext().getPath().substr(9);var P=e.getSource().getBindingContext().getModel().getData().results[p].OpnCtlgItemID;var l=e.getSource().getBindingContext().getModel().getData().results[p].Language;var d=this.getHeaderDraftKey();var c=sap.ui.getCore().getConfiguration().getLanguage();if(!l){l=c;}var b=this.getPurchaseRequisition()?this.getPurchaseRequisition():this.dataManager.EntityConstants.DUMMY_PR_KEY;this.getRouter().navTo(\"ProductDetails\",{OpnCtlgItemID:P,view:\"search\",Language:l,DraftKey:d,PurchaseRequisition:b,free:\"0\"});if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},closeSecondaryContent:function(e){var s=this.getView().byId(\"mySplitContainer\");s.setShowSecondaryContent(!s.getShowSecondaryContent());var F=this.getView().byId(\"filterBtn\");F.toggleStyleClass(\"filterposioning\");if(s.getShowSecondaryContent()){e.getSource().setType(\"Emphasized\");}else{e.getSource().setType(\"Default\");}},successhandleOrderCartPress:function(){var t=this;M.show(this.getResourceBundle().getText(\"MSG_SuccessOrder\"),{icon:M.Icon.INFORMATION,title:t.getResourceBundle().getText(\"orderCart\"),actions:[t.getResourceBundle().getText(\"ok\")],onClose:function(A){if(A===t.getResourceBundle().getText(\"ok\")){this.dataManager.createNewDraft(this.getServiceCallParameter(this.getDraftSuccessCallback,this.serviceFail));if(t._oPopover){t._oPopover.destroy();t._oPopover.destroyContent();t._oPopover=null;}t.getRouter().navTo(\"Search\");}else{}},initialFocus:t.getResourceBundle().getText(\"ok\")});},addToCart:function(e){var p=e.getSource().getBindingContext().getPath().substr(9);var r=e.getSource().getBindingContext().getModel().oData.results[p].OpnCtlgMinOrderQuantity;var m=sap.ui.getCore().getMessageManager();var o=new sap.ui.core.message.ControlMessageProcessor();var s=this.getResourceBundle().getText(\"MESSAGE_ERROR_ADDTOCART\");var t=\"/\"+r+\"/value\";var d=new sap.ui.core.message.Message({message:s,type:sap.ui.core.MessageType.Error,target:t,processor:o});m.registerMessageProcessor(o);if(r>0&&r.match(/^[0-9]{1,10}(\\.\\d{1,3})?$/i)){var D={RequestedQuantity:r,ParentDraftUUID:this.getHeaderDraftKey(),PurReqnSSPCrossCatalogItem:e.getSource().getBindingContext().getObject().OpnCtlgItemID,};this.getView().setBusy(true);var P=this.getServiceCallParameter(this.successhandleAddtoCartPress,this.serviceFail);this.dataManager.createNewItem(P,this.getHeaderDraftKey(),this.getPurchaseRequisition(),D);m.removeAllMessages();return true;}else{m.addMessages(d);e.getSource().getParent().getParent().getAggregation(\"items\")[0].getAggregation(\"items\")[1].getAggregation(\"items\")[0].setValueState(sap.ui.core.ValueState.Error);var b=this.getView().byId(\"MsgalrtBtn\");b.firePress();return false;}},successhandleAddtoCartPress:function(){var m=sap.ui.getCore().getMessageManager();var b=m.getMessageModel().getData();var c=-1;for(var i=0;i<b.length;i++){if(b[i].message&&b[i].code===\"MMPUR_REQ_COMMON/022\"){sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCartUpdated\"));c=1;break;}else{c=0;}}if(c!==1){sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));}this.dataManager.getHeader(this.getServiceCallParameter(this.successCallback,this.serviceFail),this.getHeaderDraftKey(),this.getPurchaseRequisition());},successCallback:function(d){var p=d.results?d.results[0]:d;var b=this.getDraftKey(p,true);this.setHeaderDraftKey(b);this.setPurchaseRequisition(p.PurchaseRequisition);this.getView().byId(\"headerPanel\").setBusy(false);var j=new sap.ui.model.json.JSONModel(d);this.getView().byId(\"btnCart\").setModel(j);this.getView().byId(\"btnCart\").bindElement(\"/\");this.getView().setBusy(false);var c=this.getView().byId(\"btnCart\");if(c.getText()===\"1\"){c.firePress();}},PricescaleClick:function(e){if(!this._prcsclPopover){this._prcsclPopover=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\",this);}var p=\"OpnCtlgItemID eq \"+e.getSource().getParent().getParent().getBindingContext().getObject().OpnCtlgItemID;this.decimal=e.getSource().getParent().getParent().getBindingContext().getObject().Decimals;var q=e.getSource().getParent().getParent().getItems()[0].getItems()[1].getProperty(\"text\");this.curr=\" \"+e.getSource().getParent().getParent().getItems()[0].getItems()[0].getProperty(\"unit\");q=this.getResourceBundle().getText(\"price\")+\" \"+q;var m=this.getServiceCallParameter(this.successPrcScale,this.serviceFail);this.dataManager.priceScalefind(m,p);this.getView().addDependent(this._prcsclPopover);jQuery.sap.syncStyleClass(\"sapUiSizeCompact\",this.getView(),this._prcsclPopover);var P=e.getSource();jQuery.sap.delayedCall(0,this,function(){this._prcsclPopover.openBy(P);});this._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(q);},successPrcScale:function(d){var j=new sap.ui.model.json.JSONModel(d);var l=j.oData.results.length;var i=0;for(i=0;i<l;i++){j.oData.results[i].Currency=this.curr;j.oData.results[i].OpnCtlgItemPrice=parseFloat(j.oData.results[i].OpnCtlgItemPrice).toFixed(this.decimal);}this._prcsclPopover.getContent()[0].setModel(j);this._prcsclPopover.getContent()[0].bindElement(\"/results\");},onBack:function(){var c=sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"#\"}});},onPressDefault:function(){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"UserDefaults\",action:\"manage\"},params:{BusinessObject:\"PR\"}});}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/App-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n 'sap/m/MessageBox',\r\n \"ui/s2p/mm/requisition/maintain/s1/localService/mockserver\"\r\n], function(BaseController, JSONModel, MessageBox, Mockserver) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.App\", {\r\n\r\n  onInit: function() {\r\n\r\n   var oViewModel,\r\n    fnSetAppNotBusy,\r\n    iOriginalBusyDelay = this.getView().getBusyIndicatorDelay();\r\n   oViewModel = new JSONModel({\r\n    busy: true,\r\n    delay: 0\r\n   });\r\n   this.setModel(oViewModel, \"appView\");\r\n\r\n   fnSetAppNotBusy = function() {\r\n    oViewModel.setProperty(\"/busy\", false);\r\n    oViewModel.setProperty(\"/delay\", iOriginalBusyDelay);\r\n   };\r\n\r\n   this.oModel = this.getAppModel();\r\n   this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());\r\n   this.getOwnerComponent().getModel().metadataLoaded().then(jQuery.proxy(fnSetAppNotBusy, this), jQuery.proxy(fnSetAppNotBusy, this));\r\n   if (Mockserver.MockServerMode) {\r\n    this.setTestMode(true);\r\n   } else {\r\n    this.setTestMode(false);\r\n   }\r\n  }\r\n\r\n });\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ProductDetails.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");sap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",'sap/m/MessageBox'],function(B,M){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ProductDetails\",{onInit:function(){this._oRouter=this.getRouter();this._oRouter.getRoute(\"ProductDetails\").attachPatternMatched(this.loadData,this);},loadData:function(e){var p=window.location;window.decodeURIComponent(p);p+='';var s=p.split('searchTerm=');if(p.search(\"searchTerm\")>0){var a=\"ProductDescription eq '\"+s[1]+\"'\";var m=this.getServiceCallParameter(this.onSuccessSearchBinding,this.serviceFail);this.dataManager.searchResultsBinding(m,a);}this.oModel=this.getAppModel();this.setSourcePage(\"ProductDetails\");this.itemKey=e.getParameter(\"arguments\").OpnCtlgItemID;this.lang=e.getParameter(\"arguments\").Language;if(this.getTestMode()){this.lang=\"EN\";}var v=e.getParameter(\"arguments\").view;var i=e.getParameter(\"arguments\").free;this.isprcscl=e.getParameter(\"arguments\").isprcscl;var b=this.itemKey;if(v===\"search\"){this.getView().byId(\"idAddToCart\").setVisible(true);}var c=\"/\"+this.entityConstants.getEntityName('productEntity')+\"(OpnCtlgItemID=\"+b+\",Language='\"+this.lang+\"')\";var d=this.entityConstants.getEntityName('productEntity')+\"(OpnCtlgItemID=\"+b+\",Language='\"+this.lang+\"')\";var f=\"OpnCtlgItemID eq \"+b;var l=\" and Language eq '\"+this.lang+\"'\";this.getView().setBusyIndicatorDelay(0);this.getView().setBusy(true);this.getView().byId(\"iconTabbar\").setVisible(false);this.getView().byId(\"page\").bindElement(c);this.setHeaderDraftKey(e.getParameter(\"arguments\").DraftKey);this.setPurchaseRequisition(e.getParameter(\"arguments\").PurchaseRequisition);var P=this.getServiceCallParameter(this.headerSuccess,this.serviceFail);this.dataManager.getHeader(P,this.getHeaderDraftKey(),this.getPurchaseRequisition());var g=this.getView().byId(\"carousel\").getBinding(\"pages\");var h=[];var o=[];o.push(new sap.ui.model.Filter(\"OpnCtlgAttachmentType\",sap.ui.model.FilterOperator.EQ,\"03\"));o.push(new sap.ui.model.Filter(\"OpnCtlgAttachmentType\",sap.ui.model.FilterOperator.EQ,\"01\"));h.push(new sap.ui.model.Filter(o,false));h.push(new sap.ui.model.Filter(\"OpnCtlgItemID\",sap.ui.model.FilterOperator.EQ,b));g.filter(h);var t=this.getView().byId(\"idReviewTable\").getBinding(\"items\");var j=[];j.push(new sap.ui.model.Filter(\"OpnCtlgItemID\",\"EQ\",b));t.filter(j);if(p.search(\"searchTerm\")<0&&this.getView().byId(\"idHeader\").getBindingContext()){this.curr=this.getView().byId(\"idHeader\").getBindingContext().getObject().OpnCtlgItemCurrency;}var k=this.getServiceCallParameter(this.fnSetAttrData,this.serviceFail);this.dataManager.getAttributeDetails(k,f,l);this.decimal=this.oModel.oData[d].Decimals;this.prcsclPresent();},onSuccessSearchBinding:function(d){var i=this.itemKey;var a=\"/\"+this.entityConstants.getEntityName('productEntity')+\"(OpnCtlgItemID=\"+i+\",Language='\"+this.lang+\"')\";this.getView().byId(\"page\").bindElement(a);},successPrcScale:function(d){var j=new sap.ui.model.json.JSONModel(d);var l=j.oData.results.length;var i=0;for(i=0;i<l;i++){j.oData.results[i].Currency=this.curr;j.oData.results[i].OpnCtlgItemPrice=parseFloat(j.oData.results[i].OpnCtlgItemPrice).toFixed(this.decimal);}this.getView().byId(\"idPrcSclTable\").setModel(j);this.getView().byId(\"idPrcSclTable\").bindElement(\"/results\");var g=this.getView().byId(\"page\");var a=g.getBindingContext().oModel.oData;var b=this.itemKey;var c=this.lang;var e=a[\"C_Procurementitems(OpnCtlgItemID=\"+b+\",Language='\"+this.lang+\"')\"];var q=this.getResourceBundle().getText(\"price\")+\" \"+this.getResourceBundle().getText(\"CurrencyPer\")+\" \"+e.NetPriceQuantity+\" \"+e.UnitOfMeasure;this.getView().byId(\"idPrcSclTable\").getAggregation(\"columns\")[1].getAggregation(\"header\").setText(q);},prcsclPresent:function(){var i=\"OpnCtlgItemID eq \"+this.itemKey;var m=this.getServiceCallParameter(this.successPrcScalePresent,this.serviceFail);this.dataManager.priceScalefind(m,i);},successPrcScalePresent:function(d){if(d.results.length){this.getView().byId(\"prcscltab\").setVisible(true);this.successPrcScale(d);}else{this.getView().byId(\"prcscltab\").setVisible(false);}},hideTabs:function(){var s=this.getView().byId(\"sustainability\").getText();var d=this.getView().byId(\"directEms\").getText();var i=this.getView().byId(\"indirectEms\").getText();var t=this.getView().byId(\"tempEms\").getText();var r=this.getView().byId(\"recycleContent\").getText();var w=this.getView().byId(\"waterUsage\").getText();var e=this.getView().byId(\"energyUsage\").getText();var a=this.getView().byId(\"waste\").getText();if((s===\"\"||s===\"0\")&&(d===\"\"||d===\"0\")&&(i===\"\"||i===\"0\")&&(t===\"\"||t===\"0\")&&(r===\"\"||r===\"0\")&&(w===\"\"||w===\"0\")&&(e===\"\"||e===\"0\")&&(a===\"\"||a===\"0\")){this.getView().byId(\"sustainabilityTab\").setVisible(false);}},fnSetAttrData:function(d){var a=[];for(var i=0;i<d.results.length;i++){a[i]=\"\\n\"+d.results[i].OpnCtlgAttribName+\": \"+d.results[i].OpnCtlgAttribValue+\" \"+d.results[i].OpnCtlgAttribUnit;}if(a.length>0){this.getView().byId(\"idAttribute\").setText(a);}else{this.getView().byId(\"technicalDetails\").setVisible(false);}this.hideTabs();this.getView().byId(\"iconTabbar\").setVisible(true);this.getView().setBusy(false);},onBack:function(){window.history.back();if(this.reviewDialog){this.reviewDialog.destroy();this.reviewDialog.destroyContent();this.reviewDialog=null;}if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},handleViewCartPress:function(){var p=this.getPurchaseRequisition()?this.getPurchaseRequisition():this.dataManager.EntityConstants.DUMMY_PR_KEY;this.getRouter().navTo(\"CartOverview\",{DraftKey:this.getHeaderDraftKey(),PurchaseRequisition:p});if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},onAddReview:function(){if(!this.reviewDialog){this.reviewDialog=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AddReview\",this);this.getView().addDependent(this.reviewDialog);}this.reviewDialog.open();},onSortReview:function(){var t=this.getView().byId(\"idReviewTable\").getBinding(\"items\");var d;var s=[];if(t.aSorters.bDescending||t.aSorters.length>0){if(t.aSorters[0].bDescending){d=false;}else{d=true;}}else{d=true;}s.push(new sap.ui.model.Sorter(\"UsageRating\",d));t.sort(s);},handleClose:function(){this.reviewDialog.close();},addToCart:function(){var d={RequestedQuantity:\"1\",DraftUUID:this.getHeaderDraftKey(),PurReqnSSPCrossCatalogItem:Number(this.itemKey)};var p=this.getServiceCallParameter(this.successAddToCart,this.serviceFail);this.dataManager.addToCart(p,d,this.getHeaderDraftKey());this.getView().setBusy(true);},submitReview:function(){var p=sap.ui.getCore().byId(\"idProductRating\").getProperty(\"value\");var c=sap.ui.getCore().byId(\"idReviewText\").getProperty(\"value\");var i=this.itemKey;var d=this.getView().byId(\"productDetails\").getBindingContext();var E=\"\";var C=\"\";var D={};this.reviewDialog.close();if(d){E=d.getProperty(\"OpnCtlgExternalProductID\");C=d.getProperty(\"OpnCtlgWebServiceID\");D={OpnCtlgItemID:Number(i),OpnCtlgExternalProductID:E,OpnCtlgWebServiceID:C,UsageRating:Number(p).toFixed(2),ReviewedByUser:c,ChangedDateTime:\"\"};}if(i.length>0&&E!==\"\"&&C!==\"\"){if(Number(p)>0){var P=this.getServiceCallParameter(this.fnSuccessAddReview,this.fnReviewFailed);this.dataManager.submitReview(P,D);}else{sap.m.MessageToast.show(this.getResourceBundle().getText(\"RatingNeeded\"));this.reviewDialog.open();}}else{this.fnReviewFailed();}},fnSuccessAddReview:function(){this.getView().setBusy(false);sap.m.MessageToast.show(this.getResourceBundle().getText(\"ReviewSuccess\"));var t=this.getView().byId(\"idReviewTable\").getBinding(\"items\");t.refresh();var r=this.getView().byId(\"idReviewTable\").getItems();var o=this.getView().byId(\"rating\").getProperty(\"value\");var n=sap.ui.getCore().byId(\"idProductRating\").getProperty(\"value\");var a=parseFloat((o*r.length+n)/(r.length+1));this.getView().byId(\"rating\").setValue(a);},onUpdateFinished:function(){var u=this.getView().byId(\"idReviewTable\").getItems();if(u.length>0&&u[0].getBindingContext().getProperty(\"UserID\")===this.getUserID()){this.getView().byId(\"btnAddReview\").setEnabled(false);}else{this.getView().byId(\"btnAddReview\").setEnabled(true);}this.getView().byId(\"reviewCount\").setText(\"(\"+u.length+\")\");this.checkError();},checkError:function(){var t=this;var a;var m=sap.ui.getCore().getMessageManager();var o=m.getMessageModel();var b=o.aBindings[1].oValue[0].code;if(b=='MMPUR_REQ_COMMON/023'){var a=o.aBindings[1].oValue[0].message;this.getView(\"ProductDetails\").destroyContent();M.show(a,{icon:M.Icon.ERROR,title:t.getResourceBundle().getText(\"ProductDetails\"),actions:[t.getResourceBundle().getText(\"ok\")],onClose:function(A){if(A===t.getResourceBundle().getText(\"ok\")){window.history.back();}},initialFocus:t.getResourceBundle().getText(\"ok\")});}},fnReviewFailed:function(){this.getView().setBusy(false);sap.m.MessageToast.show(this.getResourceBundle().getText(\"ReviewFailed\"));},successAddToCart:function(){this.updateHeader();this.getView().setBusy(false);sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));},updateHeader:function(){var p=this.getServiceCallParameter(this.updateHeaderSuccess,this.serviceFail);this.dataManager.getHeader(p,this.getHeaderDraftKey(),this.getPurchaseRequisition());},updateHeaderSuccess:function(){this.dataManager.updateHeaderSuccess(this.getView().byId('btnCart'),[this.getPurchaseRequisition(),\"guid'\"+this.getHeaderDraftKey()+\"'\"]);var t=this;setTimeout(function(){t.firstMiniCartOpen();},2000);},handlePopoverPress:function(e){if(!this._oPopover){this._oPopover=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.PopOver\",this);this.getView().addDependent(this._oPopover);}var b=e.getSource();jQuery.sap.delayedCall(0,this,function(){this._oPopover.openBy(b);});},sendEmail:function(){var u=window.location;u+=\"&searchTerm=\"+this.getView().byId(\"idHeader\").getTitle();window.encodeURIComponent(u);var e=this.getResourceBundle().getText(\"emailsubject\")+\":\"+this.getView().byId(\"idHeader\").getTitle();sap.m.URLHelper.triggerEmail(\"\",e,u);}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ItemDetails-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n 'sap/m/UploadCollectionParameter',\r\n 'sap/m/MessageToast',\r\n 'sap/m/MessageBox',\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\"\r\n], function(BaseController, JSONModel, formatter) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ItemDetails\", {\r\n  // <!-- ADDED BY C4P -->\r\n  vhr_ZZPURCHREQ: function() {\r\n   this.getSearchHelpMetaData(\"ZZPURCHREQ\", \"ZNMM_SH_ZNZ\");\r\n  },\r\n  isDate: function(oDate) {\r\n   return oDate.constructor.toString().indexOf(\"Date\") > -1;\r\n  },\r\n  toJSONLocal: function(oDate) {\r\n   function addZ(n) {\r\n    return (n < 10 ? '0' : '') + n;\r\n   }\r\n   if (oDate == null) {\r\n    var oDate = new Date(1, 1, 1);\r\n   }\r\n   if (!this.isDate(oDate)) {\r\n    if (oDate.match(/\\./g) && oDate.match(/\\./g).length == 2) {\r\n     var vDate = oDate.split(\".\")[2] + '-' + oDate.split(\".\")[1] + '-' + oDate.split(\".\")[0];\r\n     oDate = new Date(vDate);\r\n    } else {\r\n     oDate = new Date(oDate);\r\n    }\r\n   }\r\n   return oDate.getFullYear() + '-' +\r\n    addZ(oDate.getMonth() + 1) + '-' +\r\n    addZ(oDate.getDate()) + 'T02:00:00';\r\n  },\r\n\r\n  shlpDialog: null,\r\n  oValueHelpElement: null,\r\n  oDataVHFields: null,\r\n  oSHLPDefVals: {\r\n   \"values\": []\r\n  },\r\n  getFormValue: function(fieldId) {\r\n   var oElement = this.getView().byId(fieldId);\r\n   if (!oElement) {\r\n    var oElement = sap.ui.getCore().byId(fieldId);\r\n   }\r\n   if (!oElement) {\r\n    return \"\";\r\n   }\r\n   var oElementType = oElement.getMetadata().getName();\r\n   switch (oElementType) {\r\n    case \"sap.m.Input\":\r\n     return oElement.getValue();\r\n    case \"sap.m.ComboBox\":\r\n     return oElement.getSelectedKey();\r\n    case \"sap.m.Select\":\r\n     return oElement.getSelectedKey();\r\n    case \"sap.m.CheckBox\":\r\n     return oElement.getSelected();\r\n    case \"sap.m.DatePicker\":\r\n     return this.toJSONLocal(oElement.getDateValue());\r\n     //return oElement.getValue();\r\n    case \"sap.m.Switch\":\r\n     return oElement.getState();\r\n    default:\r\n     return oElement.getValue();\r\n   }\r\n  },\r\n  setFormValue: function(fieldId, iValue) {\r\n   var oElement = this.getView().byId(fieldId);\r\n   if (!oElement) {\r\n    var oElement = sap.ui.getCore().byId(fieldId);\r\n   }\r\n   if (!oElement) {\r\n    return \"\";\r\n   }\r\n   var oElementType = oElement.getMetadata().getName();\r\n   switch (oElementType) {\r\n    case \"sap.m.Input\":\r\n     oElement.setValue(iValue);\r\n     break;\r\n    case \"sap.m.ComboBox\":\r\n     oElement.setSelectedKey(iValue);\r\n     break;\r\n    case \"sap.m.CheckBox\":\r\n     oElement.setSelected(iValue);\r\n     break;\r\n    case \"sap.m.DatePicker\":\r\n     oElement.getDateValue(iValue);\r\n     break;\r\n    case \"sap.m.Switch\":\r\n     oElement.setState(iValue);\r\n     break;\r\n    default:\r\n     return oElement.setValue(iValue);\r\n   }\r\n  },\r\n\r\n  readSHLPData: function(that, uri, params, afterFunction) {\r\n   var busy = new sap.m.BusyDialog();\r\n   busy.open();\r\n   setTimeout(\r\n    function() {\r\n     var url = \"/sap/opu/odata/sap/ZNMM_SHLP_SRV\";\r\n     var oModel = new sap.ui.model.odata.v2.ODataModel(url);\r\n     var oModelJsonArray = new sap.ui.model.json.JSONModel();\r\n     oModel.read(uri, {\r\n      urlParameters: params,\r\n      success: function(oData, oResponse) {\r\n       busy.close();\r\n       oModelJsonArray.setData(oData);\r\n       if ((oModelJsonArray.getData() != undefined) && (oModelJsonArray.getData().results != undefined) && (oModelJsonArray.getData()\r\n         .results.length > 100)) {\r\n        oModelJsonArray.setSizeLimit(oModelJsonArray.getData().results.length);\r\n       }\r\n       afterFunction(that, oModelJsonArray);\r\n      },\r\n      error: function(error) {\r\n       busy.close();\r\n       if (error.response) {\r\n        try {\r\n         var vMessages = $(error.response.body).find('message').first().text().match(/{(.*)}/)[0];\r\n         if (vMessages) {\r\n          that.addMsgS(that, vMessages);\r\n         } else {\r\n          var vMessage = $(error.response.body).find('message').first().text();\r\n          that.addMsg(that, \"E\", vMessage);\r\n         }\r\n        } catch (err) {\r\n         that.addMsg(that, \"E\", error.message);\r\n         that.addMsg(that, \"E\", error.response.body);\r\n        }\r\n        that.showMsg(true);\r\n       }\r\n      }\r\n     });\r\n    },\r\n    250\r\n   );\r\n  },\r\n  getSearchHelpMetaData: function(iElementId, iShlpName) {\r\n   this.oValueHelpElement = this.getView().byId(iElementId);\r\n   var uri = \"/ShlpDescrSet\";\r\n   var params = {\r\n    \"$filter\": \"Shlpname eq '\" + iShlpName + \"'\"\r\n   };\r\n   this.readSHLPData(this, uri, params, this.createSearchHelpDialog);\r\n  },\r\n  createSearchHelpDialog: function(that, oModel) {\r\n   that.oDataVHFields = oModel.oData;\r\n   var oI18n = that.getView().getModel(\"i18n\").getResourceBundle();\r\n   if (that.oDataVHFields.results[0] && that.oDataVHFields.results[0].Shlptext) {\r\n    var vTitle = that.oDataVHFields.results[0].Shlptext;\r\n   } else {\r\n    var vTitle = \"Search help\";\r\n   }\r\n   if (!that.shlpDialog) {\r\n    that.shlpDialog = new sap.m.Dialog({\r\n     title: vTitle,\r\n     buttons: [\r\n      new sap.m.Button({\r\n       id: \"btn_shlpsearch\",\r\n       text: oI18n.getText(\"StartSearch\"),\r\n       press: function() {\r\n        that.shlpSearchValues(that);\r\n       }.bind(this)\r\n      }),\r\n      new sap.m.Button({\r\n       id: \"btn_shlpformopen\",\r\n       text: oI18n.getText(\"OpenFormSearch\"),\r\n       visible: false,\r\n       press: function() {\r\n        that.shlpSearchForm(that);\r\n       }.bind(this)\r\n      }),\r\n      new sap.m.Button({\r\n       id: \"btn_shlpclose\",\r\n       text: oI18n.getText(\"Close\"),\r\n       press: function() {\r\n        that.shlpDialog.close();\r\n        that.shlpDialog.destroy(false);\r\n        that.shlpDialog = null;\r\n       }.bind(this)\r\n      })\r\n     ]\r\n    });\r\n    var oSimpleForm = new sap.ui.layout.form.SimpleForm(\"sf_shlpattrs\");\r\n    for (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n     oSimpleForm.addContent(new sap.m.Label({\r\n      id: \"lbl_\" + that.oDataVHFields.results[i].Fieldname,\r\n      text: that.oDataVHFields.results[i].ScrtextM\r\n     }));\r\n     switch (that.oDataVHFields.results[i].Datatype) {\r\n      case \"CHAR\":\r\n       oSimpleForm.addContent(new sap.m.Input({\r\n        id: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n       }));\r\n       break;\r\n      case \"DATS\":\r\n       oSimpleForm.addContent(new sap.m.DatePicker({\r\n        id: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n       }));\r\n       break;\r\n      default:\r\n       oSimpleForm.addContent(new sap.m.Input({\r\n        id: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n       }));\r\n     }\r\n    }\r\n    oSimpleForm.addContent(new sap.m.Label({\r\n     id: \"lbl_maxrows\",\r\n     text: oI18n.getText(\"MaxRows\")\r\n    }));\r\n    oSimpleForm.addContent(new sap.m.Input({\r\n     id: \"inp_maxrows\",\r\n     value: 10\r\n    }));\r\n    that.shlpDialog.addContent(oSimpleForm);\r\n    //>add default values from form&nbsp;\r\n    for (var i = 0; i < that.oSHLPDefVals.values.length; i++) {\r\n     var oElement = sap.ui.getCore().byId(\"inp_\" + that.oSHLPDefVals.values[i].name);\r\n     if (oElement) {\r\n      oElement.setValue(that.oSHLPDefVals.values[i].value);\r\n     }\r\n    }\r\n    //<\r\n    that.shlpDialog.oVC = that;\r\n    that.shlpDialog.open();\r\n   }\r\n  },\r\n  shlpSearchValues: function(that) {\r\n   if (!this.oDataVHFields) {\r\n    return;\r\n   } else {\r\n    var vFilter = \"\";\r\n    var vShlpname = this.oDataVHFields.results[0].Shlpname;\r\n    for (var i = 0; i < this.oDataVHFields.results.length; i++) {\r\n     vFilter = vFilter + this.oDataVHFields.results[i].Fieldname + '=' + this.getFormValue(\"inp_\" + this.oDataVHFields.results[i].Fieldname) +\r\n      ';';\r\n    }\r\n    vFilter = vFilter + 'maxrows=' + this.getFormValue(\"inp_maxrows\");\r\n    vFilter = encodeURI(vFilter);\r\n    var uri = \"/ShlpValueSet\";\r\n    var params = {\r\n     \"$filter\": \"Shlpname eq '\" + vShlpname + \"' and Values eq '\" + vFilter + \"'\"\r\n    };\r\n    this.readSHLPData(this, uri, params, this.createSearchValueTable);\r\n   }\r\n  },\r\n  shlpSearchForm: function(that) {\r\n   that.setVisible(\"sf_shlpattrs\", true);\r\n   that.setVisible(\"btn_shlpformopen\", false);\r\n   that.setVisible(\"btn_shlpsearch\", true);\r\n  },\r\n  createSearchValueTable: function(that, oModel) {\r\n   //console.log(oModel);\r\n   for (var i = 0; i < oModel.oData.results.length; i++) {\r\n    oModel.oData.results[i].Values = JSON.parse(oModel.oData.results[i].Values);\r\n    for (var l = 0; l < that.oDataVHFields.results.length; l++) {\r\n     oModel.oData.results[i][that.oDataVHFields.results[l].Fieldname.toLowerCase()] = oModel.oData.results[i].Values[that.oDataVHFields\r\n      .results[l].Fieldname.toLowerCase()];\r\n    }\r\n   }\r\n   if (sap.ui.getCore().byId(\"tbl_SearchValue\") != undefined) {\r\n    sap.ui.getCore().byId(\"tbl_SearchValue\").destroy();\r\n   }\r\n   var oSearchValueTable = new sap.m.Table({\r\n    id: \"tbl_SearchValue\",\r\n    mode: sap.m.ListMode.SingleSelectLeft,\r\n    selectionChange: that.onSearchValueSelected\r\n   });\r\n   for (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n    oSearchValueTable.addColumn(new sap.m.Column({\r\n     //width : \"60px\",\r\n     header: new sap.m.Label({\r\n      text: that.oDataVHFields.results[i].ScrtextM\r\n     })\r\n    }));\r\n   }\r\n   var oTemplate = new sap.m.ColumnListItem();\r\n   for (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n    oTemplate.addCell(new sap.m.Text({\r\n     text: {\r\n      path: that.oDataVHFields.results[i].Fieldname.toLowerCase()\r\n     },\r\n     wrapping: false\r\n    }));\r\n   }\r\n   oSearchValueTable.setModel(oModel);\r\n   oSearchValueTable.bindItems(\"/results\", oTemplate);\r\n   that.shlpDialog.addContent(oSearchValueTable);\r\n   if (oModel.oData.results.length > 0) {\r\n    that.setVisible(\"sf_shlpattrs\", false);\r\n    that.setVisible(\"btn_shlpformopen\", true);\r\n    that.setVisible(\"btn_shlpsearch\", false);\r\n   } else {}\r\n  },\r\n  onSearchValueSelected: function(oEvent) {\r\n   var oSelectedItem = oEvent.getSource().getSelectedItem().getBindingContext().getObject();\r\n   var that = oEvent.getSource().oParent.oVC;\r\n   if (!that.oValueHelpElement) {\r\n    return;\r\n   }\r\n   var vValue = oSelectedItem[oSelectedItem.Retfieldname.toLowerCase()];\r\n   that.oValueHelpElement.setValue(vValue);\r\n   that.setDataDescription(that, that.oValueHelpElement, vValue);\r\n   that.shlpDialog.close();\r\n   that.shlpDialog.destroy(false);\r\n   that.shlpDialog = null;\r\n  },\r\n  setDataDescr: function(that, iElement) {\r\n   var vValue = this.getFormValue(iElement);\r\n   var uri = \"/ValueDescrSet\";\r\n   var params = {\r\n    \"$filter\": \"Fieldname eq '\" + iElement + \"' and Value eq '\" + vValue + \"'\"\r\n   };\r\n   that.readSHLPData(this, uri, params, this.setValueDescription);\r\n  },\r\n  setDataDescription: function(that, oElement, iValue) {\r\n   if (iValue == \"\") {\r\n    return;\r\n   }\r\n   var aFName = oElement.getId().split(\"-\");\r\n   var vFieldname = aFName[aFName.length - 1];\r\n   var uri = \"/ValueDescrSet\";\r\n   var params = {\r\n    \"$filter\": \"Fieldname eq '\" + vFieldname + \"' and Value eq '\" + iValue + \"'\"\r\n   };\r\n   that.readSHLPData(that, uri, params, that.setValueDescription);\r\n  },\r\n  setValueDescription: function(that, oModel) {\r\n   try {\r\n    for (var i = 0; i < oModel.oData.results.length; i++) {\r\n     var vFieldname = oModel.oData.results[i].Fieldname;\r\n     var vFieldnameD = oModel.oData.results[i].Fieldname + \"_D\";\r\n     var vDescr = oModel.oData.results[i].Description;\r\n     var vValue = oModel.oData.results[i].Value;\r\n     if (vDescr != \"\") {\r\n      var oElement = that.getView().byId(vFieldnameD);\r\n      oElement.setText(vDescr);\r\n      oElement.setVisible(true);\r\n     }\r\n     if (vValue != \"\") {\r\n      that.setFormValue(vFieldname, vValue);\r\n     }\r\n    }\r\n   } catch (error) {}\r\n  },\r\n  setVisible: function(iElement, xVisible) {\r\n   try {\r\n    var oEl = this.getView().byId(iElement);\r\n    if (!oEl) {\r\n     var oEl = sap.ui.getCore().byId(iElement);\r\n    }\r\n    oEl.setVisible(xVisible);\r\n   } catch (err) {\r\n    var oEl = sap.ui.getCore().byId(iElement);\r\n    if (oEl) {\r\n     oEl.setVisible(xVisible);\r\n    }\r\n   }\r\n  },\r\n  // <!-- END ADDED BY C4P -->\r\n  _loadattachments: function() {\r\n   var PRNum = this.getPurchaseRequisition();\r\n   var itemKey;\r\n   var PRMode = 'C';\r\n   if (!this.editable) {\r\n    PRMode = \"D\";\r\n\r\n   }\r\n\r\n   if (PRNum) {\r\n    while (PRNum.length < 10) {\r\n     PRNum = \"0\" + PRNum;\r\n    }\r\n    var PRItmNum = this.prItem;\r\n    if (PRItmNum) { //If its a new itemthat is created and an attachment is added to it PRItmNum will be initial\r\n     itemKey = PRNum.concat(PRItmNum);\r\n    } else {\r\n     itemKey = this.itemDraftUUID;\r\n    }\r\n\r\n   } else {\r\n    itemKey = this.itemDraftUUID;\r\n   }\r\n   itemKey = itemKey.replace(/-/g, \"\");\r\n   var self = this.getView();\r\n   // var owner = this.getOwnerComponent();\r\n   var oAttachmentComponentPromise;\r\n   // var attachmentView = self.byId(\"attachmentCompContainer\");\r\n   var that = this;\r\n\r\n   if ((oAttachmentComponentPromise !== null) && (oAttachmentComponentPromise) && (oAttachmentComponentPromise.getId() ===\r\n     \"attachmentsrv.ItemDetails\")) {\r\n    oAttachmentComponentPromise.refresh(PRMode, \"EBAN\", itemKey);\r\n   } else {\r\n    // owner._oComp = sap.ui.getCore().createComponent({\r\n    //  name: \"sap.se.mi.plm.lib.attachmentservice.attachment\",\r\n    //  id: \"attachmentsrv.ItemDetails\",\r\n     oAttachmentComponentPromise = this.getOwnerComponent().createComponent({\r\n      usage: \"attachmentReuseComponent\",\r\n      settings: {\r\n       mode: PRMode,\r\n      objectKey: itemKey,\r\n       objectType: \"EBAN\"\r\n     }\r\n     });\r\n    // oAttachmentComponentPromise.setMode(PRMode);\r\n    // oAttachmentComponentPromise.setObjectKey(itemKey);\r\n\r\n    //attachmentView.setComponent(owner._oComp);\r\n     oAttachmentComponentPromise.then(function(successValue) {\r\n      that.byId(\"attachmentCompContainer\").setComponent(successValue);\r\n     });\r\n\r\n   }\r\n   this.prcsclPresent();\r\n  },\r\n\r\n  onInit: function() {\r\n\r\n   this.getView().addEventDelegate({\r\n\r\n    onafterHide: function(evt) {\r\n     this.oModel.resetChanges();\r\n     this.Model.refresh();\r\n    },\r\n\r\n    onbeforeHide: function() {\r\n     this.oModel.resetChanges();\r\n     this.Model.refresh();\r\n    },\r\n   });\r\n\r\n   // var viewModel = new sap.ui.model.json.JSONModel();\r\n   // var mode = {\r\n   //  editable: false\r\n   // };\r\n   // this.bFlag = false;\r\n   // if (this.getMode() === \"edit\") {\r\n\r\n   //  viewModel.setData(mode);\r\n   //  this.getView().setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm1\").setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm2\").setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm3\").setModel(viewModel, \"viewProperties\");\r\n\r\n   // } else {\r\n   //  mode = {\r\n   //   editable: true,\r\n   //   enabled: false\r\n   //  };\r\n   //  viewModel.setData(mode);\r\n   //  this.getView().setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm1\").setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm2\").setModel(viewModel, \"viewProperties\");\r\n   //  this.getView().byId(\"smartForm3\").setModel(viewModel, \"viewProperties\");\r\n   // }\r\n   this.getView().setBusyIndicatorDelay(0);\r\n   this.getView().setBusy(true);\r\n\r\n   this._notes = [];\r\n   this.batch_update = [];\r\n   this.batch_create = [];\r\n   this.accSection = false;\r\n\r\n   this.oModel = this.getAppModel();\r\n   this.oModel.setSizeLimit(500);\r\n   var oRouter = sap.ui.core.UIComponent.getRouterFor(this);\r\n   oRouter.getRoute(\"ItemDetails\").attachPatternMatched(this._onObjectMatched, this);\r\n\r\n   var oModel = new sap.ui.model.json.JSONModel({\r\n    \"Salutation\": [{\r\n     \"Key\": \"0001\",\r\n     \"Name\": \"Ms.\"\r\n    }, {\r\n     \"Key\": \"0002\",\r\n     \"Name\": \"Mr.\"\r\n    }, {\r\n     \"Key\": \"0003\",\r\n     \"Name\": \"Company\"\r\n    }, {\r\n     \"Key\": \"0004\",\r\n     \"Name\": \"Mr. and Mrs.\"\r\n    }]\r\n   });\r\n   this.getView().setModel(oModel, \"Title\");\r\n  },\r\n\r\n  DateRangeValidation: function(oEvent) {\r\n   var dateRangeControl = oEvent.getSource();\r\n\r\n   var isValid = oEvent.getParameter('valid');\r\n   if (isValid === true) {\r\n\r\n    var sFrom = oEvent.getSource().getDateValue();\r\n    var oCorrectDateFrom = new Date(Date.UTC(sFrom.getFullYear(), sFrom.getMonth(), sFrom.getDate()));\r\n\r\n    var sTo = oEvent.getSource().getSecondDateValue();\r\n    var oCorrectDateTo = new Date(Date.UTC(sTo.getFullYear(), sTo.getMonth(), sTo.getDate()));\r\n\r\n    var oPerfPeriodStart = dateRangeControl.getBinding(\"dateValue\");\r\n    oPerfPeriodStart.setValue(oCorrectDateFrom);\r\n\r\n    var oPerfPeriodEnd = dateRangeControl.getBinding(\"secondDateValue\");\r\n    oPerfPeriodEnd.setValue(oCorrectDateTo);\r\n   }\r\n  },\r\n\r\n  ////////////////////////////Apply Changes logic/////////////////////////////////////////////////////////////\r\n\r\n  //apply changes to other item details\r\n  onPressApplyChange: function() {\r\n   this.saveApplyChange = true;\r\n   //this.onPressSave();\r\n   this.invokeMassChange();\r\n  },\r\n\r\n  //close the apply changes dialog without making any changes on popup\r\n  onCancelChanges: function() {\r\n   this.ApplyChange.onCancelChanges();\r\n  },\r\n\r\n  //open the popup containing the items where the changes need to be applied\r\n  onSelectItemsApplyChange: function() {\r\n   sap.ui.getCore().byId(\"massChangeDialog\").setTitle(this.getResourceBundle().getText(\"selectItems\"));\r\n   this.ApplyChange.onSelectItems(this.getPurchaseRequisition(), this.getHeaderDraftKey(), this);\r\n  },\r\n\r\n  //go back to the main page containing details of selected items\r\n  goBacktoSectionsPage: function() {\r\n   sap.ui.getCore().byId(\"massChangeDialog\").setTitle(this.getResourceBundle().getText(\"selectChanges\"));\r\n   this.ApplyChange.goBacktoSectionsPage();\r\n  },\r\n\r\n  //Apply Changes to other items\r\n  onSaveChanges: function() {\r\n   this.ApplyChange.onSaveChanges(this);\r\n  },\r\n\r\n  // Update the selected items count\r\n  updateMassItemCount: function(oEvt) {\r\n   this.ApplyChange.onUpdateSelectedItemsCount(oEvt);\r\n  },\r\n\r\n  onSearchMassChange: function(oEvt) {\r\n   this.ApplyChange.onSearchMassChange(oEvt);\r\n  },\r\n  //////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  prepareStatusUI: function() {\r\n   this.statusFromID_DBind();\r\n  },\r\n\r\n  _onObjectMatched: function(oEvent) {\r\n   this.readItemTextTypesMasterSet();\r\n   if (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n    this.setSourcePage(\"ItemDetails\");\r\n   }\r\n   // ADDED BY C4P\r\n   var ac4p = this.getOwnerComponent().getComponentData().purchaseRequisition.substr(0, 1);\r\n   if (ac4p === \"1\") {\r\n    var vc4p = true;\r\n   } else {\r\n    vc4p = false;\r\n   }\r\n   // ADDED BY C4P\r\n\r\n   var viewModel = new sap.ui.model.json.JSONModel();\r\n   var mode = {\r\n    editable: false,\r\n    // ADDED BY C4P\r\n    visible: vc4p\r\n     // ADDED BY C4P\r\n   };\r\n   this.bFlag = false;\r\n   if (this.getMode() === \"edit\") {\r\n\r\n    viewModel.setData(mode);\r\n    this.getView().setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm1\").setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm2\").setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm3\").setModel(viewModel, \"viewProperties\");\r\n\r\n   } else {\r\n    try {\r\n     if (this.getAppModel().oData[oEvent.getParameter('arguments').items].RequestedQuantity_fc == \"1\") {\r\n      mode = {\r\n       editable: true,\r\n       enabled: false,\r\n       // ADDED BY C4P\r\n       visible: vc4p\r\n        // ADDED BY C4P\r\n      };\r\n     } else {\r\n      mode = {\r\n       editable: true,\r\n       // ADDED BY C4P\r\n       visible: vc4p\r\n        // ADDED BY C4P\r\n      };\r\n\r\n     }\r\n    } catch (e) {\r\n     mode = {\r\n      editable: true,\r\n      // ADDED BY C4P\r\n      visible: vc4p\r\n       // ADDED BY C4P\r\n     };\r\n    }\r\n    viewModel.setData(mode);\r\n    this.getView().setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm1\").setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm2\").setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"smartForm3\").setModel(viewModel, \"viewProperties\");\r\n   }\r\n\r\n   this.save = false;\r\n   this.accSection = false;\r\n   this.supplierNamesos = \"\";\r\n   if (this._oContent_Supplier) {\r\n    this._oContent_Supplier.destroy(true);\r\n    this._oContent_Supplier = null;\r\n   }\r\n\r\n   if (this.productList) {\r\n    this.productList.destroy(true);\r\n    this.productList = null;\r\n   }\r\n   if (this._ocontent) {\r\n    this._ocontent.destroy(true);\r\n    this._ocontent = null;\r\n   }\r\n\r\n   this.setHeaderDraftKey(oEvent.getParameter(\"arguments\").DraftKey);\r\n   this.setPurchaseRequisition(oEvent.getParameter(\"arguments\").PurchaseRequisition);\r\n   this.itemDraftUUID = oEvent.getParameter(\"arguments\").DraftUUID;\r\n   this.getOwnerComponent().getComponentData().purReqnItemDraft = this.itemDraftUUID;\r\n   this.itmKey = oEvent.getParameter(\"arguments\").OpnCtlgItemID;\r\n   this.prItem = oEvent.getParameter(\"arguments\").PurchaseRequisitionItem;\r\n   this.getOwnerComponent().getComponentData().purReqnItem = this.prItem;\r\n   this.itemPath = oEvent.getParameter(\"arguments\").items;\r\n   if (oEvent.getParameter(\"arguments\").Editable === \"true\") {\r\n    this.editable = true;\r\n   } else {\r\n    this.editable = false;\r\n   }\r\n   // this.editable = oEvent.getParameter(\"arguments\").Editable;\r\n   this.getOwnerComponent().getComponentData().PRitemPath = this.itemPath;\r\n   this.itemBindingPath = \"/\" + this.itemPath + \"/\" + \"to_PurReqnAccAssignment_WD\";\r\n\r\n   var sName = oEvent.getParameter(\"name\");\r\n\r\n   if (sName === \"ItemDetails\") {\r\n    if (!this.getTestMode()) {\r\n     this._loadattachments();\r\n    }\r\n   }\r\n\r\n   this.getView().byId(\"smartForm1\").bindElement({\r\n    path: \"/\" + this.itemPath\r\n\r\n   });\r\n   this.getView().byId(\"smartForm2\").bindElement({\r\n    path: \"/\" + this.itemPath\r\n\r\n   });\r\n   // this.getDraftAccountId();\r\n   // Removing check condition due to broswer refresh issue fix \r\n   //if (this.getView().byId(\"smartForm1\").getBindingContext()) {\r\n   this.checkAccAssignment();\r\n   this.getApprovalPreviewSet();\r\n   this.getView().setBusy(true);\r\n   this.dataManager.getNotes(this.getServiceCallParameter(this.onSuccessNotes, this.serviceFail), this.itemDraftUUID, this.getPurchaseRequisition(),\r\n    this.prItem);\r\n   this.bFlag = false;\r\n   this.showSource();\r\n   var checkMaterial = this.getView().byId(\"smartForm1\").getBindingContext().getObject().Material;\r\n   if ((checkMaterial === \"\") || (checkMaterial === null)) {\r\n    this.getView().byId(\"idMaterialDescription\").setEnabled(true);\r\n   } else {\r\n    this.getView().byId(\"idMaterialDescription\").setEnabled(false);\r\n   }\r\n   if (this.getPurchaseRequisition()) {\r\n    this.getView().byId(\"addSupplier\").setEnabled(this.getView().byId(\"idDescription\").getEditable());\r\n   }\r\n   this.deletable = this.getView().byId(\"smartForm1\").getBindingContext().getObject().delete_ac;\r\n   this.getView().byId(\"idDeleteButton\").setEnabled(this.deletable);\r\n   this.getView().byId(\"idSaveButton\").setEnabled(this.deletable);\r\n   if (this.getPurchaseRequisition()) {\r\n    if (sap.ui.getCore().byId(\"itemProcessFlow\")) {\r\n     sap.ui.getCore().byId(\"itemProcessFlow\").destroy();\r\n    }\r\n    if (this.getPurchaseRequisition() !== \"PurchaseRequisition 8\") {\r\n     //this.showItemStatus();\r\n    }\r\n   }\r\n   //} else \r\n   if (this.getTestMode()) {\r\n    this.getView().setBusy(false);\r\n   }\r\n   var mParameters = this.getServiceCallParameter(this.successItemDetails, this.errorServiceFail);\r\n   this.dataManager.getItemDetails(mParameters, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem,\r\n    false);\r\n\r\n   if (this.getPurchaseRequisition()) {\r\n    var status = this.getItemStatus();\r\n    if (status === \"B\" || status === \"A\" || status === \"K\" || status === \"L\" || status === \"R\" || status === \"S\") {\r\n     this.getView().byId(\"idItemLevelStatus\").setVisible(true);\r\n     this.prepareStatusUI();\r\n\r\n    } else {\r\n     this.getView().byId(\"idItemLevelStatus\").setVisible(false);\r\n    }\r\n   }\r\n   if (this.checkSupplierAssigned()) {\r\n    this.getView().byId(\"addSupplier\").setVisible(false);\r\n   }\r\n   if (this.getView().byId(\"idServicePerformerDet\")) {\r\n    if (this.getView().byId(\"idServicePerformerDet\").getValue()) {\r\n     if (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0]) {\r\n      this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n     }\r\n    }\r\n   }\r\n   if (this.getExtScenarioFlag()) {\r\n    this.getView().byId(\"productTypeSelect\").setVisible(false);\r\n    this.getView().byId(\"idApplychangeButton\").setVisible(false);\r\n   }\r\n   this.supplierPendingCanges = false;\r\n   this.oModel.resetChanges();\r\n  },\r\n\r\n  //Method: Check if Supplier Assigned or not \r\n  checkSupplierAssigned: function() {\r\n   // Check for + button for Supplier to be diplayed or not \r\n   var checkItemCount, checkStatus;\r\n   var status = this.getResourceBundle().getText(\"assigned\");\r\n   //Check if any suppliers is assigned or not\r\n   if (sap.ui.getCore().byId(\"idProductsTable\")) {\r\n    checkItemCount = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n    for (var i = 0; i <= checkItemCount - 1; i++) {\r\n     if (status === sap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[2].getText()) {\r\n      checkStatus = this.getResourceBundle().getText(\"assigned\");\r\n      break;\r\n     }\r\n    }\r\n   } else {\r\n    if (this.getView().byId(\"sourceOfSupply\").getContent().length > 0) {\r\n     checkItemCount = this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length;\r\n    } else {\r\n     checkItemCount = 0;\r\n    }\r\n    for (var a = 0; a <= checkItemCount - 1; a++) {\r\n     if (status === this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[a].getCells()[2].getText()) {\r\n      checkStatus = this.getResourceBundle().getText(\"assigned\");\r\n      break;\r\n     }\r\n    }\r\n   }\r\n   //Cross checking both status to check if supplier assigned or not \r\n   for (var c = 0; c <= checkItemCount - 1; c++) {\r\n    if (status === checkStatus) {\r\n     return true;\r\n    }\r\n   }\r\n   return false;\r\n  },\r\n\r\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  // set the JSON model based on the selected product type for apply changes list and also decide whether to enable/disbale button\r\n  successItems: function(data) {\r\n   if (data.results.length > 0) {\r\n    var itemsResults = [];\r\n    for (var i = 0; i < data.results.length; i++) {\r\n     // exclude the selected item from the list\r\n     if (data.results[i].DraftUUID != this.itemDraftUUID) {\r\n      itemsResults.push(data.results[i]);\r\n     }\r\n    }\r\n   }\r\n\r\n   // set the list of items excluding the current item to the list\r\n   var itemslist = {\r\n    \"items\": itemsResults\r\n   };\r\n\r\n   this.oItemsList = new sap.ui.model.json.JSONModel(itemslist);\r\n\r\n   // set the save and choose other items only if:-\r\n   // if selected item is material item enable the button to choose from other material items\r\n   // if selected item is a service item enable the button to choose from other service items\r\n   if (itemsResults.length > 0) {\r\n    this.getView().byId('idApplychangeButton').setEnabled(true);\r\n   } else {\r\n    this.getView().byId('idApplychangeButton').setEnabled(false);\r\n   }\r\n  },\r\n\r\n  errorServiceFailitems: function() {\r\n   sap.m.MessageToast.show(this.oTextBundle.getText(\"readFailed\"));\r\n  },\r\n\r\n  // read all the other items in the cart which are similar to the selected item(material/service)\r\n  successItemDetails: function(data) {\r\n\r\n   try {\r\n    var productType = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ProductType\");\r\n   } catch (e) {\r\n    productType = \"\";\r\n    this.getView().setBusy(false);\r\n   }\r\n\r\n   //get no of items for enabling MassChange Btn\r\n   var mParameters = this.getServiceCallParameter(this.successItems, this.errorServiceFailitems);\r\n   this.dataManager.getItemsforProductType(mParameters, this.getPurchaseRequisition(), this.getHeaderDraftKey(), false, productType);\r\n  },\r\n\r\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  checkAccAssignment: function() {\r\n   var accAssignCategory = this.getView().byId('accAssCategory').getValue();\r\n   var plant = this.getView().byId(\"idLocation\").getValue();\r\n   var extplant = this.getView().byId(\"idExtLocation\").getValue();\r\n   if ((accAssignCategory === null) || (accAssignCategory === \"\") || ((plant === null) || (plant === \"\")) && ((extplant === null) || (\r\n     extplant === \"\"))) {\r\n\r\n    this.getView().byId(\"listAccAssignment\").setVisible(false);\r\n    this.getView().byId(\"formAccAssignment\").setVisible(false);\r\n    this.getView().setBusy(false);\r\n   } else {\r\n    this.dataManager.getAccAssignmentValue(this.getServiceCallParameter(this.checkAccountCategory, this.serviceFail),\r\n     accAssignCategory);\r\n   }\r\n\r\n  },\r\n  checkAccountCategory: function(data) {\r\n   if (data.results[0] !== undefined) {\r\n\r\n    this.accValue = data.results[0].ConsumptionPosting;\r\n    if (this.accValue === 'U') { // to enable Account Assignment without Consumption Posting\r\n     //if ((this.accValue === 'U') || (this.accValue === \"\")) {  \r\n     this.getView().byId(\"listAccAssignment\").setVisible(false);\r\n     this.getView().byId(\"formAccAssignment\").setVisible(false);\r\n     this.getView().setBusy(false);\r\n     this.accSection = false;\r\n    } else {\r\n     var mParameters = this.getServiceCallParameter(this.successAccRead, this.errorServiceFail);\r\n     this.dataManager.getAccounting(mParameters, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem,\r\n      false);\r\n     // this.getView().getModel().refresh();\r\n     // Refresh the accouting line data\r\n     this.getAppModel().read(\r\n      this.itemBindingPath, {\r\n\r\n      });\r\n\r\n     this.getView().byId(\"listAccAssignment\").setVisible(true);\r\n     if (!this.getTestMode()) {\r\n      this.createAccComponent();\r\n     }\r\n     this.sFin = false;\r\n     if (this.sFin === true) {\r\n      this.getView().byId(\"sFinlistAccAssignment\").setVisible(true);\r\n      this.createAccComponentsFin();\r\n     }\r\n     this.getView().setBusy(false);\r\n     this.accSection = true;\r\n\r\n    }\r\n   } else {\r\n    this.getView().byId(\"listAccAssignment\").setVisible(false);\r\n    this.getView().setBusy(false);\r\n   }\r\n\r\n  },\r\n  successAccRead: function(data) {\r\n   var accDetails = data.results[0];\r\n  },\r\n  createAccComponentsFin: function() {\r\n   var sFinaccAssignComp = sap.ui.getCore().createComponent({\r\n    \"name\": \"sap.fin.acc.lib.codingblock.component\",\r\n    componentData: {\r\n     \"entitySetName\": \"C_Sspprmaint_Accassign\",\r\n     \"entityTypeName\": \"C_Sspprmaint_AccassignType\",\r\n     \"parentEntitySetName\": \"C_Sspprmaint_Itm\",\r\n     \"parentEntityKey\": {\r\n      \"PurchaseRequisition\": this.getPurchaseRequisition(),\r\n      \"PurchaseRequisitionItem\": this.prItem,\r\n      \"PurReqnItemDraftUUID\": this.itemDraftUUID\r\n     },\r\n     \"navigationName\": \"to_PurReqnAccAssignment_WD\",\r\n     \"UIMode\": \"TABLE\",\r\n     \"enableRowEditButtons\": false\r\n    }\r\n   });\r\n   // accAssignComp.attachDetailNavigation(jQuery.proxy(this.accDetailsnavigation, this));\r\n   sFinaccAssignComp.attachCodingBlockAttributeChanged(jQuery.proxy(this.onCodingBlockChange, this));\r\n   this.getView().byId(\"sFinaccAssignmentCompContainer\").setComponent(sFinaccAssignComp);\r\n   // this.accAssignComp = accAssignComp;\r\n\r\n  },\r\n  onCodingBlockChange: function(oEvent) {\r\n   //this.onSmartFieldValueChange(oEvent.getParameter(\"codingBlockEvent\"));\r\n   var OData = oEvent.getParameter(\"codingBlockEvent\").getSource().getModel().getData(oEvent.getParameter(\"codingBlockEvent\").getSource()\r\n    .getBindingContext()\r\n    .sPath);\r\n   var prop;\r\n   try {\r\n    delete OData.HasDraftEntity;\r\n    delete OData.DraftAdministrativeDataUUID;\r\n    delete OData.IsActiveEntity;\r\n    delete OData.HasActiveEntity;\r\n    delete OData.MultipleAcctAssgmtDistrPercent;\r\n    delete OData.CompanyCode;\r\n    delete OData.CostElement;\r\n    for (prop in OData)\r\n     if (typeof(OData[prop]) === \"object\") {\r\n      delete OData[prop];\r\n     }\r\n    for (prop in OData) {\r\n     if (prop.search('UxFc') !== -1) {\r\n      delete OData[prop];\r\n     }\r\n    }\r\n   } catch (e) { //do nothing\r\n   }\r\n\r\n   var path = oEvent.getParameter(\"codingBlockEvent\").getSource().getBindingContext().sPath;\r\n   //this.onSmartFieldValueChange(oEvent.getParameter(\"codingBlockEvent\"));\r\n   var oModel = oEvent.getParameter(\"codingBlockEvent\").getSource().getModel();\r\n\r\n   if (oModel) {\r\n    oModel.update(path, OData, {\r\n     \"success\": jQuery.proxy(this.successHandler, this),\r\n     \"error\": jQuery.proxy(this.errorHandler, this)\r\n    });\r\n   }\r\n  },\r\n\r\n  successHandler: function(oEvent) {\r\n   sap.m.MessageToast.show(this.oTextBundle.getText(\"updateSuccess\"));\r\n   oEvent.getParameter(\"codingBlockEvent\").getSource().getModel().refresh();\r\n\r\n  },\r\n  errorHandler: function() {\r\n   //alert(\"fail\");\r\n  },\r\n\r\n  netPriceValidation: function() {\r\n   var quantity = this.getView().byId(\"idNetPriceQuantity\").getValue();\r\n   quantity = quantity.split('.').join('');\r\n   quantity = quantity.split(',').join('');\r\n   quantity = Number(quantity);\r\n   if (quantity <= 0 || isNaN(quantity)) {\r\n    var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n    var catalogItem = oData.PurReqnSSPCrossCatalogItem;\r\n    if (catalogItem) {\r\n     this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n     return true;\r\n    } else {\r\n     this.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.Error);\r\n     this.getView().byId(\"idNetPriceQuantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n     return false;\r\n    }\r\n   } else {\r\n    var baseUnit = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath).BaseUnit;\r\n    if (baseUnit === \"\") {\r\n     this.getView().byId(\"idNetPriceQuantity\").setUomEditState(0);\r\n    } else {\r\n     this.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.None);\r\n     return true;\r\n    }\r\n   }\r\n   // if (this.getView().byId(\"idNetPriceQuantity\").getEditable()) {\r\n   //  if (this.getView().byId(\"idNetPriceQuantity\").getInnerControls()[1].getValue() === \"\") {\r\n   //   this.getView().byId(\"idNetPriceQuantity\").setUomEditState(0);\r\n   //  } else {\r\n   //   this.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.None);\r\n   //   return true;\r\n   //  }\r\n   // } else {\r\n   //  if (this.getView().byId(\"idNetPriceQuantity\").getInnerControls()[1].getText() === \"\") {\r\n   //   this.getView().byId(\"idNetPriceQuantity\").setUomEditState(0);\r\n   //  } else {\r\n   //   this.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.None);\r\n   //   return true;\r\n   //  }\r\n   // }\r\n  },\r\n\r\n  priceValidation: function() {\r\n\r\n   var price = this.getView().byId(\"idPrice\").getValue();\r\n   price = price.split('.').join('');\r\n   price = price.split(',').join('');\r\n   price = Number(price);\r\n   if (price <= 0 || isNaN(price)) {\r\n    var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n    var catalogItem = oData.PurReqnSSPCrossCatalogItem;\r\n    if (catalogItem) {\r\n     this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n     return true;\r\n    } else {\r\n     this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.Error);\r\n     this.getView().byId(\"idPrice\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n     return false;\r\n    }\r\n   } else {\r\n    this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n  },\r\n\r\n  quantityValidation: function() {\r\n\r\n   var quantity = this.getView().byId(\"idDescription\").getValue();\r\n   if (this.getTestMode()) {\r\n    quantity = \"3,348.640\";\r\n   }\r\n   quantity = quantity.split('.').join('');\r\n   quantity = quantity.split(',').join('');\r\n\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   var catalogItem = oData.PurReqnSSPCrossCatalogItem;\r\n   if (quantity.length > 13) {\r\n    this.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    return false;\r\n   }\r\n   quantity = Number(quantity); // reintroducing this check here as the length property check above requires string variable\r\n   if (quantity <= 0 || isNaN(quantity)) {\r\n    this.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    return false;\r\n   } else if (catalogItem) {\r\n    this.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   } else if (this.getView().byId(\"idDescription\").getUnitOfMeasure().trim() === \"\") {\r\n    this.getView().byId(\"idDescription\").setUomEditState(0);\r\n    this.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n   } else {\r\n    this.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n  },\r\n\r\n  //Validation logic for mandatory feilds before item save.\r\n  mandatoryFieldValidation: function() {\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   //WorkAround - Get form fields data for cross reference.\r\n   var oDataRef = {};\r\n   var smartFields1 = this.getView().byId(\"smartForm1\").getSmartFields();\r\n   var smartFields2 = this.getView().byId(\"smartForm2\").getSmartFields();\r\n   var smartFields = smartFields1.concat(smartFields2);\r\n   for (var i = 0; i < smartFields.length; i++) {\r\n    var key = smartFields[i].getDataProperty().typePath;\r\n    var value = smartFields[i].getValue();\r\n    oDataRef[key] = value;\r\n    // Get Base Unit\r\n    if (key === \"NetPriceQuantity\" || key === \"RequestedQuantity\") {\r\n     if (oData.PurReqnSSPCrossCatalogItem) {\r\n      oDataRef[\"BaseUnit\"] = oData.BaseUnit;\r\n     } else {\r\n      oDataRef[\"BaseUnit\"] = smartFields[i].getUnitOfMeasure();\r\n     }\r\n    }\r\n   }\r\n   var allKeys = Object.keys(oData); //All keys in oData.\r\n   for (i = 0; i < allKeys.length; i++) {\r\n    key = allKeys[i].split(\"_\"); // Split current Keys based on '_'.\r\n    if (key[key.length - 1] === \"fc\") { // Check current key has 'fc'.\r\n     if (oData[allKeys[i]] === 7) { // Check current key is MANDATORY.\r\n      if (!oDataRef[key[0]]) { // Check if data for key from form is empty.\r\n       return false;\r\n      }\r\n     }\r\n    }\r\n   }\r\n   if ((oData['Plant_fc'] === 7) && this.getView().byId('idCompany').getValue() == '') // Plant and Company code have same FC\r\n   {\r\n    return false;\r\n   }\r\n   return true; //return TRUE if all mandatory feilds are not EMPTY.\r\n  },\r\n\r\n  getApprovalPreviewSet: function() {\r\n   var prNum = this.getPurchaseRequisition();\r\n   if (prNum.length !== 0) {\r\n    this.dataManager.getApprovalPreviewSet(this.getServiceCallParameter(this.showApprovalPreview, this.serviceFail), prNum,\r\n     this.prItem);\r\n   } else {\r\n    this.getView().byId(\"processflow2\").setVisible(false);\r\n    this.destroyContent(\"processflow2\");\r\n   }\r\n  },\r\n\r\n  // getDraftAccountId: function() {\r\n  //  this.getView().byId(\"smartForm3\").setBusy(true);\r\n  //  this.dataManager.getDraftAccountID(this.getServiceCallParameter(this.showAccountAssignment, this.serviceFail), this.itemDraftUUID,\r\n  //   this.getPurchaseRequisition(), this.prItem);\r\n  // },\r\n  // showAccountAssignment: function(data) {\r\n\r\n  //  this.getView().setBusy(false);\r\n\r\n  //  if (data.results[0]) {\r\n  //   var sUrl = data.results[0].__metadata.id;\r\n  //   var result = sUrl.split(\"/\");\r\n  //   this.bindingPath = \"/\" + result[result.length - 1];\r\n  //  }\r\n\r\n  //  this.getView().byId(\"smartForm3\").bindElement(this.bindingPath);\r\n  //  this.getView().byId(\"smartForm3\").setBusy(false);\r\n  //  var accountAssignmentCategory = this.getView().byId(\"accAssCategory\").getValue();\r\n\r\n  // if (accountAssignmentCategory === \"K\" || accountAssignmentCategory === \"F\" || accountAssignmentCategory === \"N\")\r\n\r\n  // {\r\n\r\n  //  this.getCostCentreText();\r\n  //  this.glAccountDescription();\r\n  // } else {\r\n\r\n  //  this.glAccountDescription();\r\n\r\n  // }\r\n\r\n  // },\r\n\r\n  // getCostCentreText: function() {\r\n  //  this.getView().byId(\"costCenterDesc\").setVisible(true);\r\n  //  this.controllingArea = this.getView().byId(\"controllingArea\").getValue();\r\n  //  this.costCentre = this.getView().byId(\"costCenter\").getValue();\r\n  //  if ((this.controllingArea == \"\")) {\r\n  //   this.dataManager.getCostCentreDescription(this.getServiceCallParameter(this.getCostCentreDesc, this.serviceFail), this.costCentre);\r\n  //  } else {\r\n  //   this.getCostCentreDescByCntrlArea();\r\n  //  }\r\n\r\n  // },\r\n\r\n  // getCostCentreDesc: function(oData) {\r\n  //  this.getView().byId(\"costCenterDesc\").setVisible(true);\r\n  //  var prData = oData.results ? oData.results[0] : oData;\r\n  //  this.costCentreText = prData.CostCenter_Text;\r\n  //  this.getView().byId(\"costCenterDesc\").setValue(this.costCentreText);\r\n\r\n  // },\r\n  // getCostCentreDescByCntrlArea: function() {\r\n  //  this.dataManager.getCostCentreDescByControllingArea(this.getServiceCallParameter(this.getCostCentreTextByCntrlArea, this.serviceFail),\r\n  //   this.controllingArea, this.costCentre);\r\n  // },\r\n  // getCostCentreTextByCntrlArea: function(oData) {\r\n  //  var prData = oData.results ? oData.results[0] : oData;\r\n  //  this.costCentreTextByCntrlArea = prData.CostCenter_Text;\r\n  //  this.getView().byId(\"costCenterDesc\").setValue(this.costCentreTextByCntrlArea);\r\n  // },\r\n  // glAccountDescription: function() {\r\n  //  this.companyCode = this.getView().byId(\"idCompany\").getValue();\r\n  //  this.glAccount = this.getView().byId(\"glaAccount\").getValue();\r\n  //  this.dataManager.getCostCentreDescription(this.getServiceCallParameter(this.getGLAccountDesc, this.serviceFail), this.companyCode,\r\n  //   this.glAccount);\r\n  // },\r\n  // getGLAccountDesc: function(oData) {\r\n  //  var prData = oData.results ? oData.results[0] : oData;\r\n  //  this.glAccountText = prData.GLAccount_Text;\r\n  //  this.getView().byId(\"lblGLAccount\").setValue(this.glAccountText);\r\n  //  this.getView().byId(\"lblGLAccount\").setVisible(true);\r\n  // },\r\n  showApprovalPreview: function(data) {\r\n   if (data.results.length !== 0) {\r\n    //  var approvalData = data.results ? data.results : data;\r\n    var approvalData = data.results;\r\n    var oDataLanes = {};\r\n    var oDataProcessFlow = [];\r\n    var len = data.results.length;\r\n    for (var i = 0; i < len; i++) {\r\n     var lanes = {};\r\n     lanes.id = i;\r\n     if (approvalData.length > 0) {\r\n      lanes.icon = \"sap-icon://order-status\";\r\n      lanes.label = approvalData[i].Stext;\r\n      lanes.Userid = approvalData[i].Objid;\r\n      lanes.UserType = approvalData[i].Otype;\r\n      lanes.position = i;\r\n      oDataProcessFlow.push(lanes);\r\n     }\r\n    }\r\n    if (oDataProcessFlow.length > 0) {\r\n     oDataLanes.oDataProcessFlow = oDataProcessFlow;\r\n     var oModelPf2 = new sap.ui.model.json.JSONModel();\r\n     oModelPf2.setData(oDataLanes);\r\n     this.getView().byId(\"processflow1\").setModel(oModelPf2, \"pf2\");\r\n    } else {\r\n     this.getView().byId(\"processflow2\").setVisible(false);\r\n     this.destroyContent(\"processflow2\");\r\n    }\r\n   } else {\r\n    this.getView().byId(\"processflow2\").setVisible(false);\r\n    this.destroyContent(\"processflow2\");\r\n   }\r\n\r\n  },\r\n  onApproverClick: function(oEvent) {\r\n   this.oEventSrc = oEvent.getSource();\r\n   var sApproverId = this.byId('processflow1').getModel().getProperty('Userid', oEvent.getSource().getBindingContext());\r\n   this.dataManager.getApproverDetails(this.getServiceCallParameter(this.openApproverBusinessCard, this.serviceFail),\r\n    sApproverId, this.getPurchaseRequisition(), this.prItem);\r\n  },\r\n  openApproverBusinessCard: function(data) {\r\n   var oJSModelApprover = new sap.ui.model.json.JSONModel(data);\r\n   if (!this._oApproverPopover) {\r\n    this._oApproverPopover = sap.ui.xmlfragment(\"F1600.view.approverBusinessCard\", this);\r\n    this.getView().addDependent(this._oApproverPopover);\r\n   }\r\n\r\n   this._oApproverPopover.setModel(oJSModelApprover);\r\n   this._oApproverPopover.setContentHeight('auto');\r\n   this._oApproverPopover.openBy(this.oEventSrc);\r\n  },\r\n  onCallBusinessCard: function(oEvent) {\r\n   sap.m.URLHelper.triggerTel(oEvent.getSource().getText());\r\n  },\r\n\r\n  onEmailBusinessCard: function(oEvent) {\r\n   sap.m.URLHelper.triggerEmail(oEvent.getSource().getText());\r\n  },\r\n  /**\r\n   * Convenience Method for Validatiing the Material  field at the client side\r\n   * Sets the value state to Error if Material is blank or empty\r\n   * @public\r\n   * @returns true if it is not empty & false when it is empty\r\n   */\r\n\r\n  materialValidation: function() {\r\n   var material = this.getView().byId(\"idProductId\").getValue();\r\n   var sMaterialDescription = this.getView().byId(\"idMaterialDescription\").getValue();\r\n\r\n   if (material === \"\"){\r\n    if(sMaterialDescription.length > this.getView().byId(\"idMaterialDescription\").getProperty('maxLength') ){\r\n     return false;\r\n    }else{\r\n     return true;\r\n    }\r\n   }else{\r\n    return true;\r\n   }\r\n   //if (material === \"\") {\r\n   // this.saveItem();\r\n   // this.getView().byId(\"idMaterialDescription\").setEnabled(true);\r\n   // this.getView().byId(\"idMaterialDescription\").setValue(\"\");\r\n   // this.getView().byId(\"idName\").setEnabled(true);\r\n\r\n   //} else {\r\n   // this.dataManager.getMaterialDescription(this.getServiceCallParameter(this.successMaterial, this.serviceFail), material);\r\n   // this.getView().byId(\"idMaterialDescription\").setEnabled(false);\r\n   //}\r\n  },\r\n  successMaterial: function(oData) {\r\n   var prData = oData.results ? oData.results[0] : oData;\r\n   this.materialText = prData.Material_Text;\r\n   this.getView().byId(\"idMaterialDescription\").setValue(this.materialText);\r\n   this.getView().byId(\"idName\").setValue(prData.MaterialGroup);\r\n   this.getView().byId(\"idName\").setEnabled(false);\r\n   // this.getView().byId(\"idDescription\").setUnitOfMeasure(prData.MaterialBaseUnit);\r\n   this.saveItem(); // triggers determinations to get price for the new material\r\n\r\n  },\r\n\r\n  showSource: function() {\r\n   /*   this.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Material\");\r\n      if (this.material === \"\") {\r\n       this.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtMaterialForPurg\");\r\n      }\r\n      this.plant = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Plant\");*/\r\n   this.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtMaterialForPurg\");\r\n   if (this.material === \"\") {\r\n    this.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Material\");\r\n   }\r\n   this.plant = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtPlantForPurg\");\r\n   if (this.plant === \"\") {\r\n    this.plant = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Plant\");\r\n   }\r\n   var fixedSupplierValue = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"FixedSupplier\");\r\n   var supplierName = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"SupplierName\");\r\n   var purchasingInfoRecordValue = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchasingInfoRecord\");\r\n   var purchaseContractValue = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchaseContract\");\r\n   var purchaseContractItemValue = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchaseContractItem\");\r\n   var supplierValue = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Supplier\");\r\n   var extFixedSupplier = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtFixedSupplierForPurg\");\r\n   var extDesiredSupplier = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtDesiredSupplierForPurg\");\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   // var titleKey = oData.FormOfAddress;\r\n   // this.getView().byId(\"idTitle\").setValue(titleKey);\r\n\r\n   if (((fixedSupplierValue === '') || (fixedSupplierValue === undefined)) & ((purchasingInfoRecordValue === '') || (\r\n     purchasingInfoRecordValue === undefined)) & ((purchaseContractValue === '') || (purchaseContractValue === undefined)) &\r\n    ((purchaseContractItemValue === '') || (purchaseContractItemValue === undefined) || (purchaseContractItemValue === '00000')) & (\r\n     (\r\n      supplierValue === '') || (supplierValue === undefined)) & ((extFixedSupplier === '') || (extFixedSupplier === undefined)) & ((\r\n     extDesiredSupplier === '') || (extDesiredSupplier === undefined))) {\r\n    this.getView().byId(\"addSupplier\").setVisible(true);\r\n    if (!this._ocontent) {\r\n     this._ocontent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.SourceOfSupply\", this);\r\n\r\n    }\r\n    this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n    this.getView().byId(\"sourceOfSupply\").addContent(this._ocontent);\r\n    var tableBinding = sap.ui.getCore().byId(\"idProductsTable\").getBinding(\"items\");\r\n    var afilter = [];\r\n    afilter.push(new sap.ui.model.Filter(\"Material\", \"EQ\", this.material));\r\n    afilter.push(new sap.ui.model.Filter(\"Plant\", \"EQ\", this.plant));\r\n    tableBinding.filter(afilter);\r\n\r\n   } else {\r\n    this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n    var FixedSupplier = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"FixedSupplier\");\r\n    var supplier = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Supplier\");\r\n    var catalogItem = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurReqnSSPCatalog\");\r\n\r\n    if (FixedSupplier !== '') {\r\n     this.text = this.getResourceBundle().getText(\"Fixed\");\r\n     this.sText = FixedSupplier;\r\n\r\n    } else if (supplier !== '') {\r\n     this.text = this.getResourceBundle().getText(\"Preferred\");\r\n     this.sText = supplier;\r\n    } else if (extFixedSupplier !== '') {\r\n     this.text = this.getResourceBundle().getText(\"Fixed\");\r\n     this.sText = extFixedSupplier;\r\n    } else if (extDesiredSupplier !== '') {\r\n     this.text = this.getResourceBundle().getText(\"Preferred\");\r\n     this.sText = extDesiredSupplier;\r\n    }\r\n\r\n    this.dataManager.getSupplierName(this.getServiceCallParameter(this.successSupplier, this.serviceFail), this.sText);\r\n\r\n    if (!this.productList) {\r\n     this.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n     this.getView().addDependent(this.productList);\r\n    }\r\n    // \r\n    if (purchasingInfoRecordValue) {\r\n     var contractText = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"InfoRecord\") + \":\" + purchasingInfoRecordValue;\r\n    }\r\n    else if (purchaseContractValue){\r\n     var contractText = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"agreementNumber\") + \"/\" + this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"item\") +  \":\"  + purchaseContractValue + \"/\" + purchaseContractItemValue;\r\n    }\r\n\r\n\r\n    this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n    //this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierNamesos);\r\n             this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(supplierName);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(contractText);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[3].setText(this.text);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n     \"assigned\"));\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n    var OpnCtlgSupplierID = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"OpnCtlgSupplierID\"); \r\n    var OpnCtlgSupplierName = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"OpnCtlgSupplierName\");\r\n    if (!(catalogItem === \"\") & (!OpnCtlgSupplierID === undefined || !OpnCtlgSupplierName === undefined)) {\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setVisible(false);\r\n     this.getView().byId(\"addSupplier\").setVisible(false);\r\n    } else {\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setVisible(true);\r\n     this.getView().byId(\"addSupplier\").setVisible(true);\r\n    }\r\n\r\n   }\r\n\r\n  },\r\n  onUpdateFinished: function() {\r\n\r\n   var itemCount = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n   if (this.getPurchaseRequisition()) {\r\n    for (var i = 0; i < itemCount; i++) {\r\n     sap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[4].setEnabled(this.editable);\r\n    }\r\n   }\r\n\r\n  },\r\n  disableSections: function(oEvent) {\r\n   if ((this.getPurchaseRequisition()) && (oEvent.getSource().getEditable() === false)) {\r\n    this.getView().byId(\"textArea\").setEnabled(false);\r\n    this.getView().byId(\"addSupplier\").setEnabled(false);\r\n    //  this.getView().byId(\"idDeleteButton\").setEnabled(false);\r\n    //  this.getView().byId(\"idSaveButton\").setEnabled(false);\r\n   }\r\n  },\r\n\r\n  successSupplier: function(oData) {\r\n   this.getView().byId(\"sourceOfSupply\").setBusy(true);\r\n   var prData = oData.results ? oData.results[0] : oData;\r\n   if (prData) {\r\n    this.supplierNamesos = prData.SupplierName;\r\n    // this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierNamesos);\r\n   }\r\n   this.getView().byId(\"sourceOfSupply\").setBusy(false);\r\n  },\r\n\r\n  // cartService: function() {\r\n  //  this.dataManager.updateHeaderSuccess(this.getView().byId(\"btnCart\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n  //   \"'\"\r\n  //  ]);\r\n  // this.getView().byId(\"btnCart\").bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" +\r\n  //  this.getPurchaseRequisition() + \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n\r\n  // },\r\n\r\n  onPressSave: function(oEvent) {\r\n   var titleKey = this.getView().byId(\"idTitle\").getValue();\r\n\r\n   if (this.priceValidation() && this.quantityValidation() && this.netPriceValidation() && this.mandatoryFieldValidation() && this.materialValidation()) {\r\n    // if (true) {\r\n    var oData = this.getView().byId(\"smartForm1\").getModel().getObject(\"/\" + this.itemPath, {\r\n     select: \"*\"\r\n    });\r\n    if (this.getExtScenarioFlag()) {\r\n     if (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length > 0)\r\n      oData = this.ExternalPurchasing.updateModel(this, oData);\r\n    } else {\r\n\r\n     if (!(this.Fixedsupplier1 === undefined)) {\r\n      oData.FixedSupplier = this.Fixedsupplier1;\r\n\r\n     }\r\n     //else {\r\n     //            oData.FixedSupplier = \"\";\r\n     // }\r\n\r\n     if (!(this.Supplier1 === undefined)) {\r\n      oData.Supplier = this.Supplier1;\r\n     }\r\n    }\r\n    //  else {\r\n    //            oData.Supplier = \"\";\r\n    // }\r\n\r\n    if (this.bFlag) {\r\n     oData.FixedSupplier = \"\";\r\n     oData.Supplier = \"\";\r\n    }\r\n\r\n    // if (this.oProductType != undefined) {\r\n    //  oData.ProductType = this.oProductType;\r\n    // }\r\n\r\n    if (oData.PurchasingDocumentItemCategory == \"9\") {\r\n     oData.PurchasingDocumentItemCategory = \"\";\r\n    }\r\n\r\n    oData.FormOfAddress = titleKey;\r\n\r\n    oData.PurchasingInfoRecord = this.PurchasingInfoRecord;\r\n    oData.PurchaseContract = this.PurchaseContract;\r\n    oData.PurchaseContractItem = this.PurchaseContractItem;\r\n\r\n    this.getView().setBusy(true);\r\n\r\n    // var oDataModel_Notes = this.entityConstants.getServiceName(\"purchaseRequisition\");\r\n    // var oDataModel_Notes_Model = new sap.ui.model.odata.ODataModel(oDataModel_Notes);\r\n    var mParameters1 = {\r\n     \"success\": jQuery.proxy(this.successOnUpdate, this)\r\n    };\r\n    this.captureItemNoteTextsChanges();\r\n    for (var i = 0; i < this.batch_update.length; i++) {\r\n     this.dataManager.updateNotes(this.getServiceCallParameter(this.successOnUpdate, this.serviceFail), this.getAppModel(),\r\n      this.batch_update[i].DraftUUID, this.getPurchaseRequisition(), this.batch_update[i], this.prItem, this.batch_update[i].DocumentText\r\n     );\r\n\r\n    }\r\n\r\n    for (i = 0; i < this.batch_create.length; i++) {\r\n     this.dataManager.createNotes(this.getServiceCallParameter(this.successOnUpdate, this.serviceFail), this.getAppModel(),\r\n      this.itemDraftUUID, this.getPurchaseRequisition(), this.batch_create[i], this.prItem);\r\n\r\n    }\r\n    oData = this.adjustPayload(oData);\r\n    this.dataManager.updateItemDetails(this.getServiceCallParameter(this.successItemUpdate, this.serviceFail), this.itemDraftUUID,\r\n     this.getPurchaseRequisition(), oData, this.prItem);\r\n    // }\r\n\r\n    this.dataManager.getNotes(this.getServiceCallParameter(this.onSuccessNotes, this.serviceFail), this.itemDraftUUID, this.getPurchaseRequisition(),\r\n     this.prItem);\r\n   } else if (!this.mandatoryFieldValidation()) {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"MandatoryFields\"));\r\n    return;\r\n   }\r\n  },\r\n  // updateAccAssignment: function() {\r\n  //  if (this.accSection) {\r\n  //   var oData = this.getAppModel().getData(this.getView().byId(\"smartForm3\").getBindingContext().getPath());\r\n  //   try {\r\n  //    delete oData.HasActiveEntity;\r\n  //    delete oData.HasDraftEntity;\r\n  //    delete oData.IsActiveEntity;\r\n\r\n  //    for (var prop in oData) {\r\n  //     if (prop.search('UxFc') !== -1) {\r\n  //      delete oData[prop];\r\n  //     }\r\n  //    }\r\n\r\n  //    delete oData.MultipleAcctAssgmtDistrPercent;\r\n  //    delete oData.CompanyCode;\r\n  //    delete oData.CostElement;\r\n  //   } catch (e) { //do nothing\r\n  //   }\r\n\r\n  //   this.dataManager.updateAccountAssignment(this.getServiceCallParameter(this.successUpdate, this.serviceFail), this.draftAccountID,\r\n  //    this.getPurchaseRequisition(), oData, this.prItem, this.bindingPath);\r\n  //  } else {\r\n  //   this.successUpdate();\r\n  //  }\r\n\r\n  // },\r\n  successUpdate: function() {\r\n   var msgMgr = sap.ui.getCore().getMessageManager();\r\n   msgMgr.removeAllMessages();\r\n   var mParameters = this.getServiceCallParameter(this.successItemDetails, this.errorServiceFail);\r\n   this.dataManager.getItemDetails(mParameters, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem,\r\n    false);\r\n   this.getView().setBusy(false);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"update\"));\r\n   this.bFlag = false;\r\n   this.save = true;\r\n  },\r\n  invokeMassChange: function() {\r\n   if (this.saveApplyChange) {\r\n    this.getView().setBusy(false);\r\n    this.saveApplyChange = false;\r\n    // Check if any ERROR message in Message Manager\r\n    var msgMgrItems = sap.ui.getCore().getMessageManager().getMessageModel().getData();\r\n    var msgErrorFlag = false;\r\n    for (var i = 0; i < msgMgrItems.length; i++) {\r\n     if (msgMgrItems[i].getType() === \"Error\") {\r\n      msgErrorFlag = true;\r\n      break;\r\n     }\r\n    }\r\n\r\n    // check if mandatory values are entered and only then check for errors\r\n    // in case mandatory fields are blank do not proceed with copy to other items\r\n    if (this.mandatoryFieldValidation() === true) {\r\n     //Flag : Determine to Open Dialog or not.\r\n     if (msgErrorFlag) {\r\n      var that = this;\r\n      sap.m.MessageBox.show(\r\n       this.getResourceBundle().getText(\"errorBeforeCopy\"), {\r\n        icon: sap.m.MessageBox.Icon.WARNING,\r\n        title: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n        actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n        styleClass: \"sapUiSizeCompact\",\r\n        onClose: function(oAction) {\r\n         if (oAction === sap.m.MessageBox.Action.YES) {\r\n          that.ApplyChange.onPressApplyChangeMass(that);\r\n         }\r\n        },\r\n        initialFocus: sap.m.MessageBox.Action.YES\r\n       }\r\n      );\r\n     } else {\r\n      this.ApplyChange.onPressApplyChangeMass(this);\r\n     }\r\n    }\r\n   }\r\n  },\r\n  successItemUpdate: function() {\r\n   if (this.getTestMode()) {\r\n    window.history.back();\r\n    return;\r\n   }\r\n   if (this.accSection) {\r\n    if (!this.getView().byId(\"smartForm1\").getBindingContext().getProperty('AccountAssignmentCategory') == \"\") {\r\n     this.accAssignComp.updateAccList(this.successAccUpdate, this.serviceFail, this);\r\n\r\n    }\r\n   } else {\r\n    this.successUpdate();\r\n   }\r\n   this.supplierPendingCanges = false;\r\n   this.oModel.resetChanges();\r\n\r\n   // Call the Save and apply changes to other items dialog\r\n\r\n  },\r\n  successAccUpdate: function(obj) {\r\n   var msgMgr = sap.ui.getCore().getMessageManager();\r\n   msgMgr.removeAllMessages();\r\n\r\n   var mParameters = obj.getServiceCallParameter(obj.successItemDetails, obj.errorServiceFail);\r\n   obj.dataManager.getItemDetails(mParameters, obj.getHeaderDraftKey(), obj.itemDraftUUID, obj.getPurchaseRequisition(), obj.prItem,\r\n    false);\r\n   mParameters = obj.getServiceCallParameter(obj.successAccRead, obj.errorServiceFail);\r\n   obj.dataManager.getAccounting(mParameters, obj.getHeaderDraftKey(), obj.itemDraftUUID, obj.getPurchaseRequisition(), obj.prItem,\r\n    false);\r\n   // this.getView().getModel().refresh();\r\n   // Refresh the accouting line data\r\n   obj.getAppModel().read(\r\n    obj.itemBindingPath, {\r\n\r\n    });\r\n   obj.getView().setBusy(false);\r\n   sap.m.MessageToast.show(obj.getResourceBundle().getText(\"update\"));\r\n   obj.bFlag = false;\r\n   obj.save = true;\r\n  },\r\n\r\n  // onAssign: function(oEvent) {\r\n\r\n  //  if (oEvent.getSource().getText() === \"Assign\") {\r\n  //   oEvent.getSource().setType(\"Reject\");\r\n  //   oEvent.getSource().setText(\"Unassign\");\r\n  //   sap.ui.getCore().byId(\"State-idProductsTable-\" + oEvent.getSource().toString().slice(-1)).setText(\"Assigned\");\r\n  //  } else {\r\n  //   oEvent.getSource().setType(\"Default\");\r\n  //   oEvent.getSource().setText(\"Assign\");\r\n  //   sap.ui.getCore().byId(\"State-idProductsTable-\" + oEvent.getSource().toString().slice(-1)).setText(\"\");\r\n  //  }\r\n\r\n  //  this.Fixedsupplier = oEvent.getSource().getBindingContext().getProperty(\"Fixedsupplier\");\r\n  //  this.Supplier = oEvent.getSource().getBindingContext().getProperty(\"Supplyingvendorname\").substr(0, 9);\r\n  // },\r\n\r\n  onSupplier: function() {\r\n   var checkItemCount, checkStatus;\r\n   var status = this.getResourceBundle().getText(\"assigned\");\r\n   this.cFlag = true;\r\n   if (sap.ui.getCore().byId(\"idProductsTable\")) {\r\n\r\n    checkItemCount = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n    for (var i = 0; i <= checkItemCount - 1; i++) {\r\n\r\n     if (status === sap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[2].getText()) {\r\n\r\n      checkStatus = this.getResourceBundle().getText(\"assigned\");\r\n      break;\r\n     }\r\n\r\n    }\r\n   } else {\r\n    if (this.getView().byId(\"sourceOfSupply\").getContent().length > 0) {\r\n     checkItemCount = this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length;\r\n    } else {\r\n     checkItemCount = 0;\r\n    }\r\n    for (var a = 0; a <= checkItemCount - 1; a++) {\r\n\r\n     if (status === this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[a].getCells()[2].getText()) {\r\n\r\n      checkStatus = this.getResourceBundle().getText(\"assigned\");\r\n      break;\r\n     }\r\n\r\n    }\r\n   }\r\n\r\n   for (var c = 0; c <= checkItemCount - 1; c++) {\r\n\r\n    if (status === checkStatus) {\r\n     sap.m.MessageToast.show(this.getResourceBundle().getText(\"unAssignMessage\"));\r\n     this.cFlag = false;\r\n     break;\r\n    }\r\n\r\n   }\r\n   if (this.cFlag) {\r\n    if (!this._oContent_Supplier) {\r\n     this._oContent_Supplier = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.Supplier\", this);\r\n     sap.ui.getCore().byId('simpleForm').bindElement({\r\n      path: \"/\" + this.itemPath\r\n     });\r\n     this.getView().addDependent(this._oContent_Supplier);\r\n    }\r\n    sap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n    this._oContent_Supplier.getButtons()[0].setEnabled(true);\r\n    var itemId = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"DraftUUID\");\r\n    this._oContent_Supplier.bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') +\r\n     \"(PurchaseRequisition='',PurchaseRequisitionItem='00000',DraftUUID=guid'\" +\r\n     itemId + \"',IsActiveEntity=\" + false + \")\");\r\n    jQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oContent_Supplier);\r\n    // if (this.getExtScenarioFlag()) {\r\n    //  sap.ui.getCore().byId(\"supplier\").setShowValueHelp(false);\r\n    //  sap.ui.getCore().byId(\"supplier\").setShowSuggestion(false);\r\n    // }\r\n    this._oContent_Supplier.open();\r\n    this.getView().byId(\"sourceOfSupply\").removeContent();\r\n   }\r\n\r\n  },\r\n  onAddSupplier: function(oEvent) {\r\n   this.getView().byId(\"sourceOfSupply\").removeContent();\r\n   this.sText = \"\";\r\n   this.sText = sap.ui.getCore().byId(\"supplier\").getValue();\r\n   var preferred = sap.ui.getCore().byId(\"preferred\").getSelected();\r\n   // var fixed = sap.ui.getCore().byId(\"fixed\").getSelected();\r\n\r\n   if (preferred === true) {\r\n    this.text = sap.ui.getCore().byId(\"preferred\").getText();\r\n    this.Supplier = this.sText;\r\n    this.Fixedsupplier = \"\";\r\n   } else {\r\n    this.text = sap.ui.getCore().byId(\"fixed\").getText();\r\n    this.Fixedsupplier = this.sText;\r\n    this.Supplier = \"\";\r\n   }\r\n\r\n   if (!this.productList) {\r\n    this.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n    this.getView().addDependent(this.productList);\r\n   }\r\n\r\n   var supplierId = sap.ui.getCore().byId(\"supplier\");\r\n   var supplierNameoData = supplierId.getBindingContext().getModel().oData;\r\n\r\n   // if (MaterialGrp.search(\" -- \")>0){\r\n   var supplierEntity = \"C_MM_SupplierValueHelp('\" + this.sText + \"')\";\r\n   for (var obj in supplierNameoData) {\r\n    if (supplierNameoData[obj].Supplier == this.sText) {\r\n     var supplierName = supplierNameoData[obj].SupplierName;\r\n     break;\r\n    }\r\n   }\r\n\r\n   // oEvent.getSource().getParent().getParent().getParent().byId(\"sourceOfSupply\").removeAllContent();\r\n   this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n   this.getView().byId(\"addSupplier\").setVisible(false);\r\n   this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n    supplierName);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n    \"assigned\"));\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n   this.Fixedsupplier1 = this.Fixedsupplier;\r\n   this.Supplier1 = this.Supplier;\r\n   this.bFlag = false;\r\n   this._oContent_Supplier.close();\r\n   this.supplierPendingCanges = true;\r\n   this.onPressSave();\r\n  },\r\n\r\n  onCancelSupplier: function() {\r\n   sap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n   this._oContent_Supplier.close();\r\n  },\r\n  onUnAssign: function() {\r\n   this.supplierPendingCanges = true;\r\n   this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n   var content = new sap.m.List({\r\n    noDataText: this.getResourceBundle().getText(\"supplier\")\r\n   });\r\n   this.getView().byId(\"addSupplier\").setVisible(true);\r\n   this.getView().byId(\"sourceOfSupply\").addContent(content);\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   oData.FixedSupplier = \"\";\r\n   oData.SupplierName = \"\";\r\n   oData.Supplier = \"\";\r\n   oData.ExtFixedSupplierForPurg = \"\";\r\n   oData.ExtDesiredSupplierForPurg = \"\";\r\n   this.bFlag = true;\r\n\r\n   if (!this._ocontent) {\r\n    this._ocontent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.SourceOfSupply\", this);\r\n\r\n   }\r\n   this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n   this.getView().byId(\"sourceOfSupply\").addContent(this._ocontent);\r\n   var tableBinding = sap.ui.getCore().byId(\"idProductsTable\").getBinding(\"items\");\r\n   var afilter = [];\r\n   afilter.push(new sap.ui.model.Filter(\"Material\", \"EQ\", this.material));\r\n   afilter.push(new sap.ui.model.Filter(\"Plant\", \"EQ\", this.plant));\r\n   tableBinding.filter(afilter);\r\n\r\n  },\r\n\r\n  onSelect: function(oEvent) {\r\n   var sKey = oEvent.getParameter(\"selectedKey\");\r\n   for (var i = 0; i < this._notes.length; i++) {\r\n    if (this._notes[i].DocumentText === sKey) {\r\n     oEvent.getParameters().item.getContent()[0].setValue(this._notes[i].PurReqnItemLongtext);\r\n     if ((this.getPurchaseRequisition()) && (!this.getView().byId(\"idDescription\").getEditable())) {\r\n      oEvent.getParameters().item.getContent()[0].setEnabled(false);\r\n     }\r\n\r\n     break;\r\n\r\n    } else {\r\n     oEvent.getParameters().item.getContent()[0].setValue(\"\");\r\n     if ((this.getPurchaseRequisition()) && (!this.getView().byId(\"idDescription\").getEditable())) {\r\n      oEvent.getParameters().item.getContent()[0].setEnabled(false);\r\n     }\r\n    }\r\n\r\n   }\r\n\r\n  },\r\n  onChange: function(oEvent) {\r\n   var key = oEvent.getSource().getBindingContext().getProperty(\"DocumentText\");\r\n   var text = oEvent.getSource().getValue();\r\n   var index;\r\n   var elementPos = this._notes.map(function(x) {\r\n    return x.DocumentText;\r\n   }).indexOf(key);\r\n   var objectFound = this._notes[elementPos];\r\n\r\n   var valPrice = this.getView().byId(\"idPrice\").getValue();\r\n   var validity = valPrice.replace(/,/g, \"\");\r\n   validity = Number(validity);\r\n   if (isNaN(validity)) {\r\n    this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.Error);\r\n   } else {\r\n    this.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n   }\r\n\r\n   if (elementPos != '-1') {\r\n    this._notes[elementPos].PurReqnItemLongtext = text;\r\n    var elementPos_inner = this.batch_update.map(function(x) {\r\n     return x.DocumentText;\r\n    }).indexOf(key);\r\n    if (elementPos_inner != '-1') {\r\n     this.batch_update[elementPos_inner].PurReqnItemLongtext = text;\r\n    } else {\r\n     this.batch_update.push({\r\n      DocumentText: key,\r\n      PurReqnItemLongtext: text,\r\n      DraftUUID: this._notes[elementPos].DraftUUID\r\n\r\n     });\r\n    }\r\n\r\n   } else\r\n\r\n   {\r\n\r\n    this._notes.push({\r\n     DocumentText: key,\r\n     PurReqnItemLongtext: text,\r\n     ParentDraftUUID: this.itemDraftUUID\r\n\r\n    });\r\n    var elementPos_inner = this.batch_create.map(function(x) {\r\n     return x.DocumentText;\r\n    }).indexOf(key);\r\n    if (elementPos_inner != '-1') {\r\n     this.batch_create[elementPos_inner].PurReqnItemLongtext = text;\r\n    } else {\r\n     this.batch_create.push({\r\n      DocumentText: key,\r\n      PurReqnItemLongtext: text,\r\n      ParentDraftUUID: this.itemDraftUUID\r\n     });\r\n    }\r\n\r\n   }\r\n\r\n  },\r\n\r\n  successOnUpdate: function() {\r\n   var msgMgr = sap.ui.getCore().getMessageManager();\r\n   var messages = msgMgr.getMessageModel().getData();\r\n   var flag = -1;\r\n   for (var i = 0; i < messages.length; i++) {\r\n    if (messages[i].message && messages[i].code === \"MMPUR_REQ_COMMON/022\") {\r\n     sap.m.MessageToast.show(messages[i].message);\r\n     flag = 1;\r\n     break;\r\n    } else {\r\n     flag = 0;\r\n    }\r\n   }\r\n\r\n   if (flag !== 1) {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"itemDetailUpdate\"));\r\n   }\r\n  },\r\n\r\n  onBack: function() {\r\n   if (!this.mandatoryFieldValidation()) {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"MandatoryFields\"));\r\n    return;\r\n   }\r\n\r\n   // if (!this.save) {\r\n   //  this.oModel.resetChanges();\r\n   // }\r\n   if (this._oContent) {\r\n    this._oContent.destroy();\r\n    this._oContent = null;\r\n   }\r\n   // for (var i = 0; i < this.getView().byId(\"idIconTabBarNoIcons\").getItems().length; i++) {\r\n   //  this.getView().byId(\"idIconTabBarNoIcons\").getItems()[i].getContent()[0].setValue(\"\"); // flushing the values for notes so that actual node value is fetched\r\n   // }\r\n   var that = this;\r\n   if (this._oContent_Supplier) {\r\n    this._oContent_Supplier.destroy(true);\r\n    //            this._oContent_Supplier.destroyContent();\r\n    this._oContent_Supplier = null;\r\n   }\r\n   if (sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\")) {\r\n    //sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\").destroy(true);\r\n   }\r\n   if (sap.ui.getCore().byId(\"buttonUnAssign1\")) {\r\n    sap.ui.getCore().byId(\"buttonUnAssign1\").destroy();\r\n   }\r\n   if (sap.ui.getCore().byId(\"textArea\")) {\r\n    sap.ui.getCore().byId(\"textArea\").destroy();\r\n   }\r\n   if (this.oModel.hasPendingChanges() || this.batch_update.length > 0 || this.batch_create.length > 0 || this.supplierPendingCanges) {\r\n    var bCompact = !!this.getView().$().closest(\".sapUiSizeCompact\").length;\r\n    sap.m.MessageBox.show(\r\n     this.getResourceBundle().getText(\"MESSAGE_DATA_LOST_POPUP\"), {\r\n      icon: sap.m.MessageBox.Icon.WARNING,\r\n      title: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n      actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n      onClose: function(oAction) {\r\n       if (oAction === sap.m.MessageBox.Action.OK) {\r\n        if (that.quantityValidation() && that.priceValidation() && that.netPriceValidation()) {\r\n         that.oModel.resetChanges();\r\n         that.oModel.refresh();\r\n         window.history.back();\r\n        }\r\n       }\r\n      },\r\n      styleClass: bCompact ? \"sapUiSizeCompact\" : \"\"\r\n     }\r\n    );\r\n   } else {\r\n    window.history.back();\r\n   }\r\n\r\n  },\r\n\r\n  validateFax: function() {\r\n\r\n   var faxregex = /^[+\\-0-9()/A-Z ]+$/;\r\n   var fax = this.getView().byId(\"fax\").getValue();\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_TELEFAX_NUMBER\");\r\n   var faxMessage = new sap.ui.core.message.Message({\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: \"/fax/value\", \r\n    processor: oMessageProcessor\r\n   });\r\n\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n\r\n   if (fax.length === 0 || !faxregex.test(fax)) {\r\n    oMessageManager.addMessages(faxMessage);\r\n\r\n    this.getView().byId(\"fax\").setValueState(sap.ui.core.ValueState.Error);\r\n    return false;\r\n   } else {\r\n    oMessageManager.removeAllMessages();\r\n    return true;\r\n\r\n   }\r\n  },\r\n\r\n  readItemTextTypesMasterSet: function () {\r\n   var textTypesModel = this.getView().getModel(\"Notes\");\r\n   if(!textTypesModel || textTypesModel === undefined){\r\n    this.oNotesJSModel = new sap.ui.model.json.JSONModel();\r\n    this.getView().setModel(this.oNotesJSModel, \"Notes\");\r\n   }\r\n   var odefGroup = this.getAppModel().getDeferredGroups();\r\n   odefGroup[odefGroup.length] = \"itemMetaInfoRead\" ;\r\n   this.getAppModel().setDeferredGroups(odefGroup);\r\n   this.getAppModel().read(\"/C_Sspprmaint_Itmtexttypes\", {\r\n    method: \"GET\",\r\n    groupId: \"itemMetaInfoRead\"\r\n   });\r\n   this.getAppModel().submitChanges({\r\n    groupId: \"itemMetaInfoRead\",\r\n    success: jQuery.proxy(this.onItemTextTypesMasterDataLoadSuccess, this),\r\n    error: function () {}\r\n   });\r\n  },\r\n  onItemTextTypesMasterDataLoadSuccess: function (oData) {\r\n   var itemNoteTexts = [];\r\n   if (oData.__batchResponses[\"0\"] && oData.__batchResponses[\"0\"].data && oData.__batchResponses[\"0\"].data.results) {\r\n    var noteTexts = oData.__batchResponses[\"0\"].data.results;\r\n    for (var i = 0; i < noteTexts.length; i++) {\r\n     var itemNoteText = {};\r\n     itemNoteText.key = noteTexts[i].DocumentText;\r\n     itemNoteText.name = noteTexts[i].DocumentText_Text;\r\n     itemNoteText.value = \"\";\r\n     itemNoteTexts.push(itemNoteText);\r\n    }\r\n   }\r\n   this.getView().getModel(\"Notes\").setProperty(\"/itemTextTypes\", itemNoteTexts);\r\n  },\r\n\r\n  onSuccessNotes: function (data) {\r\n   this.backEndItemNoteTexts = [];\r\n   //backup the itemNoteTextValues that are saved and retrieved from backend\r\n   if (data.results && data.results.length > 0) {\r\n    var bEndItemNoteTexts = data.results;\r\n    for (var j = 0; j < bEndItemNoteTexts.length; j++) {\r\n     var key = \"\";\r\n     if (bEndItemNoteTexts[j].DocumentText !== \"\") {\r\n      key = bEndItemNoteTexts[j].DocumentText;\r\n      this.backEndItemNoteTexts[key.toString()] = bEndItemNoteTexts[j];\r\n     } \r\n    }\r\n   }\r\n   //reset the texts in all tabs based on what comes from the backend\r\n   var itemNoteTexts = this.getView().getModel(\"Notes\").getProperty(\"/itemTextTypes\");\r\n   for (var i = 0; i < itemNoteTexts.length; i++) {\r\n    var backEndItemNoteTextObj = this.backEndItemNoteTexts[itemNoteTexts[i].key.toString()];\r\n    if (backEndItemNoteTextObj) {\r\n     itemNoteTexts[i].value = backEndItemNoteTextObj.PurReqnItemLongtext;\r\n    } else {\r\n     itemNoteTexts[i].value = \"\";\r\n    }\r\n   }\r\n   this.getView().getModel(\"Notes\").setProperty(\"/itemTextTypes\", itemNoteTexts);\r\n   this.getView().byId(\"idIconTabBarNoIcons\").setExpanded(true);\r\n   this.getView().setBusy(false);\r\n  },\r\n\r\n  captureItemNoteTextsChanges: function () {\r\n   this.batch_update = [];\r\n   this.batch_create = [];\r\n   var itemNoteTexts = this.getView().getModel(\"Notes\").getProperty(\"/itemTextTypes\");\r\n   for (var i = 0; i < itemNoteTexts.length; i++) {\r\n    var backEndItemNoteTextObj = this.backEndItemNoteTexts[itemNoteTexts[i].key.toString()];\r\n    if (backEndItemNoteTextObj && itemNoteTexts[i].value !== backEndItemNoteTextObj.PurReqnItemLongtext) { //edit\r\n     this.batch_update.push({\r\n      DocumentText: backEndItemNoteTextObj.DocumentText,\r\n      PurReqnItemLongtext: itemNoteTexts[i].value,\r\n      DraftUUID: backEndItemNoteTextObj.DraftUUID\r\n     });\r\n    } else if (!backEndItemNoteTextObj && itemNoteTexts[i].value !== \"\") { //create\r\n     this.batch_create.push({\r\n      DocumentText: itemNoteTexts[i].key,\r\n      PurReqnItemLongtext: itemNoteTexts[i].value,\r\n      ParentDraftUUID: this.itemDraftUUID\r\n     });\r\n    }\r\n   }\r\n  },\r\n\r\n  onMaterialGroupUpdate: function() {\r\n   this.getView().setBusy(true);\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   this.dataManager.updateItemDetails(this.getServiceCallParameter(this.checkAccAssignment, this.serviceFail), this.itemDraftUUID,\r\n    this.getPurchaseRequisition(), oData, this.prItem);\r\n  },\r\n\r\n  validatePhone: function() {\r\n\r\n   var phoneregex = /^[+\\-0-9()/A-Z ]+$/;\r\n   var phone = this.getView().byId(\"phone\").getValue();\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_TELEPHONE_NUMBER\");\r\n   var phoneMessage = new sap.ui.core.message.Message({\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: \"/phone/value\",\r\n    processor: oMessageProcessor\r\n   });\r\n\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n\r\n   if (phone.length === 0 || !phoneregex.test(phone)) {\r\n    oMessageManager.addMessages(phoneMessage);\r\n\r\n    this.getView().byId(\"phone\").setValueState(sap.ui.core.ValueState.Error);\r\n    return false;\r\n   } else {\r\n    oMessageManager.removeAllMessages();\r\n    return true;\r\n\r\n   }\r\n  },\r\n  onAssign: function(oEvent) {\r\n   var listLength = oEvent.getSource().getParent().getParent().getItems().length;\r\n   var status = this.getResourceBundle().getText(\"assigned\");\r\n   var flag = false;\r\n   if (!(oEvent.getSource().getText() === this.getResourceBundle().getText(\"unAssign\"))) {\r\n    for (var i = 0; i < listLength; i++) {\r\n\r\n     if (status === oEvent.getSource().getParent().getParent().getItems()[i].getCells()[2].getText()) {\r\n\r\n      flag = true;\r\n      break;\r\n     }\r\n\r\n    }\r\n   }\r\n   if (!flag) {\r\n    if (oEvent.getSource().getText() === this.getResourceBundle().getText(\"assign\")) {\r\n     oEvent.getSource().getParent().getCells()[2].setText(this.getResourceBundle().getText(\"assigned\"));\r\n     oEvent.getSource().setText(this.getResourceBundle().getText(\"unAssign\"));\r\n     oEvent.getSource().setType(this.getResourceBundle().getText(\"reject\"));\r\n     this.Fixedsupplier1 = oEvent.getSource().getParent().getCells()[1].getItems()[0].getAttributes()[1].getText();\r\n     this.Supplier1 = oEvent.getSource().getParent().getCells()[1].getItems()[0].getAttributes()[2].getText();\r\n     var ExtSupplierNumbers = this.ExternalPurchasing.updateExtSupplierInfo(oEvent, this);\r\n     if (this.getExtScenarioFlag()) {\r\n      this.ExtInfoRecord = ExtSupplierNumbers[\"ExtInfoRecord\"];\r\n      this.ExtContract = ExtSupplierNumbers[\"ExtContract\"];\r\n      this.ExtContractItem = ExtSupplierNumbers[\"ExtContractItem\"];\r\n     }\r\n     else {\r\n      //read contract information\r\n      this.PurchasingInfoRecord = ExtSupplierNumbers[\"ExtInfoRecord\"];\r\n      this.PurchaseContract = ExtSupplierNumbers[\"ExtContract\"];\r\n      this.PurchaseContractItem = ExtSupplierNumbers[\"ExtContractItem\"];\r\n     }\r\n    } else {\r\n     oEvent.getSource().getParent().getCells()[2].setText(\"\");\r\n     oEvent.getSource().setText(this.getResourceBundle().getText(\"assign\"));\r\n     oEvent.getSource().setType(\"Default\");\r\n     this.getView().byId(\"addSupplier\").setVisible(true);\r\n     this.Fixedsupplier1 = \"\";\r\n     this.Supplier1 = \"\";\r\n     this.ExtInfoRecord = \"\";\r\n     this.ExtContract = \"\";\r\n     this.ExtContractItem = \"\";\r\n    }\r\n   } else {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"unAssignMessage\"));\r\n   }\r\n   this.supplierPendingCanges = true;\r\n   this.onPressSave();\r\n  },\r\n\r\n  validateEmail: function() {\r\n   // Create Regex and check EMail\r\n   var email = this.getView().byId(\"email\").getValue();\r\n   var mailregex = /^\\w+[\\w-\\.]*\\@\\w+((-\\w+)|(\\w*))((\\.([a-z]{2,3}))|(\\.[a-z]{2,3}\\.[a-z]{2,3})|(\\.[a-z]{2,3}\\.[a-z]{2,3}\\.[a-z]{2,3}))$/;\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_EMAIL\");\r\n   var emailMessage = new sap.ui.core.message.Message({\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: \"/email/value\",\r\n    processor: oMessageProcessor\r\n   });\r\n\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n   if (!mailregex.test(email) || email.length === 0) {\r\n    oMessageManager.addMessages(emailMessage);\r\n    this.getView().byId(\"email\").setValueState(sap.ui.core.ValueState.Error);\r\n    return false;\r\n   } else {\r\n    oMessageManager.removeAllMessages();\r\n    return true;\r\n   }\r\n  },\r\n  onAccCategoryUpdate: function() {\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getObject(\"/\" + this.itemPath, {\r\n    select: \"*\"\r\n   });\r\n   oData.FixedSupplier = this.Fixedsupplier;\r\n   oData.Supplier = this.Supplier;\r\n   this.getView().setBusy(true);\r\n   this.adjustPayload(oData);\r\n   this.dataManager.updateItemDetails(this.getServiceCallParameter(this.checkAccAssignment, this.serviceFail), this.itemDraftUUID,\r\n    this.getPurchaseRequisition(), oData, this.prItem);\r\n\r\n  },\r\n  onPressDelete: function() {\r\n   var mParameters = this.getServiceCallParameter(this.checkItemCount, this.errorServiceFail);\r\n   this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n  },\r\n\r\n  checkItemCount: function(data) {\r\n   var that = this;\r\n   var prData = data.results ? data.results[0] : data;\r\n   this.itemCount = (prData.NumberOfItems);\r\n   if (!this.getPurchaseRequisition() === '') {\r\n    if (this.itemCount - 1 === 0) {\r\n     sap.m.MessageBox.show(\r\n      that.getResourceBundle().getText(\"msgDeleteLastItemCartMyPR\"), {\r\n       icon: sap.m.MessageBox.Icon.WARNING,\r\n       title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n       actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n       styleClass: \"sapUiSizeCompact\",\r\n       onClose: function(oAction) {\r\n        if (oAction === sap.m.MessageBox.Action.OK) {\r\n         var mparameters = that.getServiceCallParameter(that.successDelete, that.serviceFail);\r\n         that.dataManager.deleteItem(mparameters, that.itemDraftUUID, that.getPurchaseRequisition(), that.prItem);\r\n        }\r\n\r\n       },\r\n       initialFocus: sap.m.MessageBox.Action.OK\r\n      }\r\n     );\r\n    } else {\r\n     sap.m.MessageBox.show(\r\n      that.getResourceBundle().getText(\"msgText\"), {\r\n       icon: sap.m.MessageBox.Icon.WARNING,\r\n       title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n       actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n       styleClass: \"sapUiSizeCompact\",\r\n       onClose: function(oAction) {\r\n        if (oAction === sap.m.MessageBox.Action.YES) {\r\n         var mparameters = that.getServiceCallParameter(that.successDelete, that.serviceFail);\r\n         that.dataManager.deleteItem(mparameters, that.itemDraftUUID, that.getPurchaseRequisition(), that.prItem);\r\n\r\n        }\r\n\r\n       },\r\n       initialFocus: sap.m.MessageBox.Action.YES\r\n      }\r\n     );\r\n    }\r\n   } else {\r\n    if (this.itemCount - 1 === 0) {\r\n\r\n     // Setting the message based on the Purchase requisition\r\n     if (this.getPurchaseRequisition() != \"\") {\r\n      var lastItemdeleteMsg = that.getResourceBundle().getText(\"msgDeleteLastItemCartAndOrder\");\r\n     } else {\r\n      lastItemdeleteMsg = that.getResourceBundle().getText(\"msgDeleteLastItemCart\");\r\n     }\r\n     sap.m.MessageBox.show(\r\n      lastItemdeleteMsg, {\r\n       icon: sap.m.MessageBox.Icon.WARNING,\r\n       title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n       actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n       styleClass: \"sapUiSizeCompact\",\r\n       onClose: function(oAction) {\r\n        if (oAction === sap.m.MessageBox.Action.OK) {\r\n         var mparameters = that.getServiceCallParameter(that.successDelete, that.serviceFail);\r\n         that.dataManager.deleteItem(mparameters, that.itemDraftUUID, that.getPurchaseRequisition(), that.prItem);\r\n        }\r\n\r\n       },\r\n       initialFocus: sap.m.MessageBox.Action.OK\r\n      }\r\n     );\r\n    } else {\r\n     sap.m.MessageBox.show(\r\n      that.getResourceBundle().getText(\"msgText\"), {\r\n       icon: sap.m.MessageBox.Icon.WARNING,\r\n       title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n       actions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n       styleClass: \"sapUiSizeCompact\",\r\n       onClose: function(oAction) {\r\n        if (oAction === sap.m.MessageBox.Action.YES) {\r\n         var mparameters = that.getServiceCallParameter(that.successDelete, that.serviceFail);\r\n         that.dataManager.deleteItem(mparameters, that.itemDraftUUID, that.getPurchaseRequisition(), that.prItem);\r\n\r\n        }\r\n\r\n       },\r\n       initialFocus: sap.m.MessageBox.Action.YES\r\n      }\r\n     );\r\n    }\r\n\r\n   }\r\n  },\r\n  successDelete: function() {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n   // window.history.back();\r\n   if ((this.getPurchaseRequisition() === '') && (this.itemCount - 1 === 0)) {\r\n    this.getRouter().navTo(\"Search\");\r\n   } else {\r\n    // this.getRouter().navTo(\"CartOverview\", {\r\n    //  DraftKey: this.draftKey,\r\n    //  PurchaseRequisition: this.purchaseRequisition\r\n    // });\r\n    window.history.back();\r\n   }\r\n  },\r\n  createAccComponent: function() {\r\n   var bEditMode = this.editable;\r\n   var accAssignComp = sap.ui.getCore().createComponent({\r\n    name: \"sap.ui.s2p.mm.lib.reuse.accounting.component\",\r\n    componentData: {\r\n     sAccEntitySetName: \"C_Sspprmaint_Accassign\",\r\n     sAccEntityTypeName: \"C_Sspprmaint_AccassignType\",\r\n     sAccBindingPathEntityType: \"\",\r\n     sAccBindingPathEntitySet: this.itemBindingPath,\r\n     oModel: this.getAppModel(),\r\n     oRouter: this.oRouter,\r\n     bEditMode: bEditMode,\r\n     bAccDetailsAsPopup: false,\r\n     sCurrentView: \"list\",\r\n     bShowListHeader: true,\r\n     bIsExtPurgScenario: this.getExtScenarioFlag()\r\n    }\r\n   });\r\n   accAssignComp.attachDetailNavigation(jQuery.proxy(this.accDetailsnavigation, this));\r\n   this.getView().byId(\"accAssignmentCompContainer\").setComponent(accAssignComp);\r\n   this.accAssignComp = accAssignComp;\r\n\r\n  },\r\n  accDetailsnavigation: function(oEvent) {\r\n   if (this.oModel.hasPendingChanges) \r\n             this.onAccCategoryUpdate(); \r\n   var formBindPath = oEvent.getParameter('bindpath');\r\n   this.getRouter().navTo(\"Account_Asisgnment_Detail\", {\r\n    formBindingPath: formBindPath.substr(1)\r\n\r\n   });\r\n\r\n  },\r\n  PricescaleClick: function(oEvent) {\r\n   if (!this._prcsclPopover) {\r\n    this._prcsclPopover = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\", this);\r\n   }\r\n   var ikey = \"OpnCtlgItemID eq \" + this.itmKey;\r\n   var quant = oEvent.getSource().getParent().getParent().getParent().getBindingContext().getObject().NetPriceQuantity;\r\n   var baseunit = oEvent.getSource().getParent().getParent().getParent().getBindingContext().getObject().BaseUnit;\r\n   this.curr = oEvent.getSource().getParent().getParent().getParent().getBindingContext().getObject().Currency;\r\n   quant = this.getResourceBundle().getText(\"price\") + \" \" + this.getResourceBundle().getText(\"CurrencyPer\") + \" \" + quant + \" \" +\r\n    baseunit;\r\n\r\n   var mparameters = this.getServiceCallParameter(this.successPrcScale, this.serviceFail);\r\n\r\n   this.dataManager.priceScalefind(mparameters, ikey);\r\n   this.getView().addDependent(this._prcsclPopover);\r\n\r\n   var oPopoverlink = oEvent.getSource();\r\n   jQuery.sap.delayedCall(0, this, function() {\r\n    this._prcsclPopover.openBy(oPopoverlink);\r\n   });\r\n   this._prcsclPopover.setPlacement(\"Right\");\r\n   this._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(quant);\r\n\r\n  },\r\n  successPrcScale: function(data) {\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   var len = oJSModelCart.oData.results.length;\r\n   var i = 0;\r\n   for (i = 0; i < len; i++) {\r\n    oJSModelCart.oData.results[i].Currency = this.curr;\r\n   }\r\n   this._prcsclPopover.getContent()[0].setModel(oJSModelCart);\r\n   this._prcsclPopover.getContent()[0].bindElement(\"/results\");\r\n  },\r\n  prcsclPresent: function() {\r\n   var ikey = \"OpnCtlgItemID eq \" + this.itmKey;\r\n   var mparameters = this.getServiceCallParameter(this.successPrcScalePresent, this.serviceFail);\r\n   this.dataManager.priceScalefind(mparameters, ikey);\r\n  },\r\n  successPrcScalePresent: function(data) {\r\n   if (data.results.length) {\r\n    this.getView().byId(\"l_prcscale\").setVisible(true);\r\n   } else {\r\n    this.getView().byId(\"l_prcscale\").setVisible(false);\r\n   }\r\n  },\r\n\r\n  onExit: function() {\r\n   if (this._oContent_Supplier) {\r\n    this._oContent_Supplier.destroy(true);\r\n    this._oContent_Supplier = null;\r\n   }\r\n   if (sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\")) {\r\n    sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\").destroy(true);\r\n   }\r\n   if (this.productList) {\r\n    this.productList.destroy(true);\r\n    this.productList = null;\r\n   }\r\n   if (this._ocontent) {\r\n    this._ocontent.destroy(true);\r\n    this._ocontent = null;\r\n   }\r\n\r\n  },\r\n  formartVisiblityDetailsPerformer: function(productType) {\r\n   // var a = 10;\r\n   // if (this.oProductType != undefined) {\r\n   //  productType = this.oProductType;\r\n   // }\r\n   var visible = false;\r\n   if (productType != undefined) {\r\n    if (productType === '2') {\r\n     visible = true;\r\n    }\r\n   }\r\n\r\n   return visible;\r\n  },\r\n\r\n  formartVisiblityDetailsDateRange: function(productType) {\r\n   // var a = 10;\r\n   // if (this.oProductType != undefined) {\r\n   //  productType = this.oProductType;\r\n   // }\r\n   var visible = false;\r\n   if (productType != undefined) {\r\n    if (productType === '2') {\r\n     visible = true;\r\n    }\r\n   }\r\n\r\n   return visible;\r\n  },\r\n\r\n  formartVisiblityDetailsDate: function(productType) {\r\n   // var a = 10;\r\n   // if (this.oProductType != undefined) {\r\n   //  productType = this.oProductType;\r\n   // }\r\n   var visible = true;\r\n   if (productType != undefined) {\r\n    if (productType === '2') {\r\n     visible = false;\r\n    }\r\n   }\r\n\r\n   return visible;\r\n  },\r\n\r\n  selectionChangedDet: function(oEvent) {\r\n   var selectedKey = oEvent.getSource().getValue();\r\n   this.itemType = parseInt(selectedKey);\r\n   if (this.itemType === 9) { //Service\r\n    //Changing the binding type as value is not being set properly into the model\r\n    var categoryControl = oEvent.getSource().getBindingContext();\r\n    oEvent.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"2\", categoryControl);\r\n    // this.oProductType = \"2\";\r\n    this.getView().byId(\"idServicePerformerDet\").setVisible(true);\r\n    this.getView().byId(\"idServicePerformerDet\").setShowLabel(true);\r\n    this.getView().byId(\"idDeliveryDateRangeDet\").setVisible(true);\r\n    this.getView().byId(\"idDeliveryDateRangeDet\").getParent().setVisible(true);\r\n    this.getView().byId(\"idDate\").setVisible(false);\r\n\r\n   } else { //Material\r\n    //Changing the binding type as value is not being set properly into the model\r\n    var categoryControl = oEvent.getSource().getBindingContext();\r\n    oEvent.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"\", categoryControl);\r\n    // this.oProductType = \"\";\r\n    this.getView().byId(\"idServicePerformerDet\").setVisible(false);\r\n    this.getView().byId(\"idDeliveryDateRangeDet\").setVisible(false);\r\n    this.getView().byId(\"idDeliveryDateRangeDet\").getParent().setVisible(false);\r\n    this.getView().byId(\"idDate\").setVisible(true);\r\n    this.getView().byId(\"idDate\").setShowLabel(true);\r\n\r\n   }\r\n   // Trigger a server round trip when material is changed to service or vice versa so that correct items are fetched for apply changes\r\n   this.onPressSave();\r\n  },\r\n  // raiseMessage: function(oMessageTarget, oMessageId, messageType, oMessageText) {\r\n  //  var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n  //  var oMessageManager = sap.ui.getCore().getMessageManager();\r\n  //  var sMessage = this.getResourceBundle().getText(oMessageText);\r\n  //  var oMessageRaised = [];\r\n  //  var oMessage = new sap.ui.core.message.Message({\r\n  //   id: oMessageId,\r\n  //   message: sMessage,\r\n  //   type: messageType,\r\n  //   target: oMessageTarget,\r\n  //   processor: oMessageProcessor\r\n  //  });\r\n  //  oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n  //  oMessageRaised = this.isMessageAvailable(oMessageTarget, oMessageId);\r\n  //  if (oMessageRaised.length == 0) {\r\n  //   oMessageManager.addMessages(oMessage);\r\n  //  }\r\n  // },\r\n\r\n  // isMessageAvailable: function(oMessageTarget, oMessageId) {\r\n  //  var oMessageManager = sap.ui.getCore().getMessageManager();\r\n  //  var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n  //  var oMessageRaised = [];\r\n  //  if (oMessageProcessor.mMessages != undefined) {\r\n  //   if (oMessageProcessor.mMessages[oMessageTarget] != undefined) {\r\n  //    var oMessageArray = oMessageProcessor.mMessages[oMessageTarget];\r\n  //    // var oMessageFound = false;\r\n  //    if (oMessageArray.length > 0) {\r\n  //     for (var i = 0; i < oMessageArray.length; i++) {\r\n  //      if (oMessageArray[i].id == oMessageId) {\r\n  //       // oMessageFound = true;\r\n  //       oMessageRaised.push(oMessageArray[i]);\r\n  //      }\r\n  //     }\r\n  //    }\r\n  //   }\r\n  //  }\r\n  //  return oMessageRaised;\r\n  // },\r\n\r\n  // removeMessage: function(oMessageTarget, oMessageId) {\r\n  //  var oMessageManager = sap.ui.getCore().getMessageManager();\r\n  //  var oMessageRaised = [];\r\n  //  oMessageRaised = this.isMessageAvailable(oMessageTarget, oMessageId);\r\n  //  if (oMessageRaised.length > 0) {\r\n  //   oMessageManager.removeMessages(oMessageRaised);\r\n  //  }\r\n\r\n  // },\r\n  checkDropDownEnabled: function(PurReqnSSPCatalog) {\r\n   var isEnabled = true;\r\n   if (PurReqnSSPCatalog !== \"\") {\r\n    isEnabled = false;\r\n   }\r\n   return isEnabled;\r\n  },\r\n\r\n  formartPurchasingDocumentItemCategory: function(productDocumentItemCat, productType) {\r\n   // if (this.oProductType != undefined) {\r\n   //  productType = this.oProductType;\r\n   // }\r\n   if (productType == \"2\") {\r\n    productDocumentItemCat = \"9\";\r\n    if (this.getView().byId(\"smartForm1\") != undefined) {\r\n     //Changing the binding type as value is not being set into model properly\r\n     var itemCatcontrol = this.getView().byId(\"smartForm1\").getBindingContext();\r\n     this.getView().byId(\"smartForm1\").getBindingContext().oModel.setProperty(\"PurchasingDocumentItemCategory\", \"9\", itemCatcontrol);\r\n    }\r\n   }\r\n   return productDocumentItemCat;\r\n  },\r\n  changeName: function(oEvent) {\r\n   oEvent.getSource().setTextLabel(this.getResourceBundle().getText(\"companyCode\"));\r\n  },\r\n  saveItem: function(SaveandApplyChange) {\r\n   var titleKey = this.getView().byId(\"idTitle\").getValue();\r\n\r\n   var oData = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n   oData.PurchaseRequisitionPrice = \"0.00\";\r\n   if (!(this.Fixedsupplier1 === undefined)) {\r\n    oData.FixedSupplier = this.Fixedsupplier1;\r\n   }\r\n   if (!(this.Supplier1 === undefined)) {\r\n    oData.Supplier = this.Supplier1;\r\n   }\r\n   if (this.bFlag) {\r\n    oData.FixedSupplier = \"\";\r\n    oData.Supplier = \"\";\r\n   }\r\n   oData.FormOfAddress = titleKey;\r\n   oData = this.adjustPayload(oData);\r\n   this.getView().setBusy(true);\r\n\r\n   this.dataManager.updateItemDetails(this.getServiceCallParameter(this.successItem(SaveandApplyChange), this.serviceFail), this.itemDraftUUID,\r\n    this.getPurchaseRequisition(), oData, this.prItem);\r\n  },\r\n  successItem: function(data) {\r\n   this.getAppModel().read(\"/\" + this.itemPath, {\r\n    success: jQuery.proxy(this.updateBasicData, this),\r\n    error: jQuery.proxy(this.serviceFail, this)\r\n   });\r\n  },\r\n  updateBasicData: function(data) {\r\n   this.getView().byId(\"idPrice\").setValue(data.PurchaseRequisitionPrice);\r\n   this.getView().setBusy(false);\r\n\r\n  },\r\n  adjustPayload: function(oData) {\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n   for (var prop in oData) {\r\n    if (prop.search('_fc') < 0) {\r\n     var property = prop.toString() + \"_fc\";\r\n     if (oData[property] === 1 || oData[property] === 0) {\r\n      delete oData[prop];\r\n      delete oData[property];\r\n     }\r\n    }\r\n   }\r\n   return oData;\r\n  },\r\n  showItemStatus: function() {\r\n   // this.getView().byId(\"idItemLevelStatus\").setVisible(true);\r\n   // var prNum = this.getPurchaseRequisition();\r\n   // var prItem = this.prItem;\r\n   // this.statusData(prNum, prItem);\r\n\r\n  },\r\n  setDefaultValue: function(event) {\r\n   if (event.getSource().getDataProperty().typePath === \"AddressStreetName\") {\r\n    event.getSource().setTextLabel(this.getResourceBundle().getText(\"houseNumber\"));\r\n   }\r\n  },\r\n\r\n  servicePerformerChange: function(oEvent) {\r\n   var servicePerf = this.getView().byId(\"idServicePerformerDet\").getValue();\r\n   if (servicePerf) {\r\n    var oModel = this.getModel();\r\n\r\n    oModel.read(\"/C_MM_ServicePerformerValueHelp\", {\r\n     urlParameters: {\r\n      \"$filter\": \"ServicePerformer eq '\" + servicePerf + \"'\"\r\n     },\r\n     success: jQuery.proxy(this.supplierReadSuccess, this),\r\n     error: jQuery.proxy(this.supplierReadFailure, this)\r\n    });\r\n    // var supplier = '12300001';\r\n\r\n    // oModel.read(\"/I_Supplier\", {\r\n    //  urlParameters: {\r\n    //   \"$filter\": \"Supplier eq '\" + supplier + \"'\"\r\n    //  },\r\n    //  success: jQuery.proxy(this.supplierReadSuccess, this),\r\n    //  error: jQuery.proxy(this.supplierReadFailure, this)\r\n    // });\r\n   } else {\r\n\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n    this.getView().byId(\"addSupplier1\").setVisible(true);\r\n    if (this.productList) {\r\n     this.productList.destroy();\r\n     // this.productList.destroyContent();\r\n     this.productList = null;\r\n     var content = new sap.m.List({\r\n      noDataText: this.getResourceBundle().getText(\"supplier\")\r\n     });\r\n\r\n     this.getView().byId(\"sourceOfSupply\").addContent(content);\r\n    }\r\n    // this.getView().byId(\"sourceOfSupply\").setNoDataText(\"No Supplier Assigned\");\r\n   }\r\n\r\n  },\r\n\r\n  supplierReadSuccess: function(data) {\r\n   if (data.results.length) {\r\n    var suppdata = data.results[0];\r\n    this.text = \"Fixed\";\r\n    this.Fixedsupplier = suppdata.Supplier;\r\n    this.Supplier = \"\";\r\n    this.Fixedsupplier1 = this.Fixedsupplier;\r\n    this.Supplier1 = this.Supplier;\r\n    if (!this.productList) {\r\n     this.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n     this.getView().addDependent(this.productList);\r\n    }\r\n\r\n    this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n    this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n     suppdata.SupplierName);\r\n\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(\r\n     suppdata\r\n     .Supplier);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n    this.getView().byId(\"addSupplier\").setVisible(false);\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n   } else {\r\n    this.getView().byId(\"idServicePerformer\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"idServicePerformer\").setValueStateText(this.getResourceBundle().getText(\"servicePerformerError\"));\r\n   }\r\n  }\r\n });\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/PurReqList-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/*global history*/\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n 'sap/m/MessageToast',\r\n 'sap/m/MessageBox',\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\"\r\n], function(BaseController, JSONModel, formatter, MessageBox) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.PurReqList\", {\r\n\r\n  onInit: function() {\r\n   this.getView().setVisible(false);\r\n   this.oModel = this.getAppModel();\r\n   this._oView = this.getView();\r\n   this._oComponent = sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));\r\n   this._oRouter = this._oComponent.getRouter();\r\n   this._oRouter.getRoute(\"PurReqList\").attachPatternMatched(this._onObjectMatched, this);\r\n  },\r\n\r\n  _onObjectMatched: function() {\r\n   if (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n    this.setSourcePage(\"PurReqList\");\r\n   }\r\n\r\n   if ((this.getPurchaseRequisition() === \"\") || (this.getSourcePage() === \"PurReqList\")) {\r\n    this.getView().setVisible(true);\r\n    this.getView().getModel().refresh();\r\n   } else {\r\n    if (this.getSourcePage() == \"\") { // case goods receipt back button press\r\n     this.setSourcePage(\"CartOverview\");\r\n    }\r\n    if (!(this.getSourcePage() === \"PurReqList\")) { // case refresh in browser\r\n     this.navToSourcePage();\r\n    }\r\n   }\r\n\r\n  },\r\n\r\n  onNavBack: function() {\r\n   // window.history.go(-2);\r\n   var oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"#\"\r\n    }\r\n   });\r\n  },\r\n\r\n  fnNavigateItemList: function(oEvent) {\r\n   if (this._oHistory) {\r\n    this._oHistory.destroy();\r\n   }\r\n   this.setLifeCycleStatus(oEvent.getSource().getBindingContext());\r\n   var prNumber = oEvent.getSource().getBindingContext().getProperty(\"PurchaseRequisition\");\r\n   this.setPurchaseRequisition(prNumber);\r\n   //this.editDraft();\r\n   this.checkDraft(prNumber);\r\n\r\n  },\r\n\r\n  fnNavigateEditItemList: function(oEvent) {\r\n\r\n   var prNumber = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;\r\n   this.setPurchaseRequisition(prNumber);\r\n   //this.editDraft(prNumber);\r\n   this.checkDraft(prNumber);\r\n\r\n  },\r\n\r\n  fnNavigateReturnGR: function(oEvent) {\r\n   //return the PR only when a line item is selected\r\n   if (this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()) {\r\n    var vPRNumber = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;\r\n    var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n    oCrossAppNavigator.toExternal({\r\n     target: {\r\n      semanticObject: \"GoodsReceipt\",\r\n      action: \"return\"\r\n     },\r\n     params: {\r\n      PurchaseRequisition: [vPRNumber]\r\n     }\r\n    });\r\n   } else {\r\n    MessageBox.error(\"Select a PR for return\");\r\n   }\r\n  },\r\n\r\n  fnNavigateConfirmGR: function(oEvent) {\r\n   //confirm the PR only when a line item is selected\r\n   if (this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()) {\r\n\r\n    var vPRNumber = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;\r\n    var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n    oCrossAppNavigator.toExternal({\r\n     target: {\r\n      semanticObject: \"GoodsReceipt\",\r\n      action: \"create\"\r\n     },\r\n     params: {\r\n      PurchaseRequisition: [vPRNumber]\r\n     }\r\n    });\r\n   } else {\r\n    MessageBox.error(\"Select an item to confirm\");\r\n   }\r\n  },\r\n\r\n  checkDraft: function(prNo) {\r\n\r\n   this.dataManager.getCurrentDraft(this.getServiceCallParameter(this.saveDraftUID, this.serviceFail), prNo);\r\n\r\n  },\r\n  saveDraftUID: function(data) {\r\n   var that = this;\r\n   var prData = data.results ? data.results[0] : data;\r\n   var draftKey = this.getDraftKey(prData, true);\r\n   if (draftKey) {\r\n    MessageBox.show(this.getResourceBundle().getText(\"draftMessage\"), {\r\n     icon: MessageBox.Icon.INFORMATION,\r\n     title: that.getResourceBundle().getText(\"draft\"),\r\n     actions: [that.getResourceBundle().getText(\"continue\"), that.getResourceBundle().getText(\"discard\")],\r\n     onClose: function(oAction) {\r\n      if (oAction === that.getResourceBundle().getText(\"continue\")) {\r\n       that.getRouter().navTo(\"CartOverview\", {\r\n        DraftKey: draftKey,\r\n        PurchaseRequisition: prData.PurchaseRequisition\r\n       });\r\n      } else {\r\n       that.deleteDraft(draftKey);\r\n      }\r\n\r\n     },\r\n     initialFocus: that.getResourceBundle().getText(\"continue\")\r\n    });\r\n   } else\r\n\r\n   {\r\n    this.editDraft();\r\n   }\r\n\r\n   //that.deleteDraft();\r\n  },\r\n  deleteDraft: function(draftKey) {\r\n   this.dataManager.deleteDraft(this.getServiceCallParameter(this.editDraft, this.serviceFail), draftKey, this.getPurchaseRequisition());\r\n  },\r\n  editDraft: function() {\r\n   var draftKey = '00000000-0000-0000-0000-000000000000';\r\n\r\n   this.dataManager.editDocument(this.getServiceCallParameter(this.getDraftId, this.errorServiceFail), draftKey, this.getPurchaseRequisition());\r\n\r\n  },\r\n\r\n  getDraftId: function(data) {\r\n   var prData = data.results ? data.results[0] : data;\r\n   var draftKey = this.getDraftKey(prData, true);\r\n   this.setHeaderDraftKey(draftKey);\r\n   this.setUserID(prData.Employee);\r\n   this.getRouter().navTo(\"CartOverview\", {\r\n    DraftKey: this.getHeaderDraftKey(),\r\n    PurchaseRequisition: this.getPurchaseRequisition()\r\n   });\r\n\r\n  },\r\n  checkDelete: function(data) {\r\n   var that = this;\r\n   data.Delete_mc = true; //needs to be deleted\r\n   this.getView().setBusy(false);\r\n   if (data.Delete_mc) {\r\n    var PRNumber = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;\r\n    MessageBox.show(this.getResourceBundle().getText(\"deleteCart\"), {\r\n     icon: MessageBox.Icon.INFORMATION,\r\n     title: that.getResourceBundle().getText(\"overviewDelete\"),\r\n     actions: [that.getResourceBundle().getText(\"continue\"), that.getResourceBundle().getText(\"cancel\")],\r\n     onClose: function(oAction) {\r\n      if (oAction === that.getResourceBundle().getText(\"continue\")) {\r\n       that.onDeletePurReq(PRNumber);\r\n      }\r\n     },\r\n     initialFocus: that.getResourceBundle().getText(\"continue\")\r\n    });\r\n   } else {\r\n    MessageBox.show(this.getResourceBundle().getText(\"deleteFailed\"), {\r\n     icon: MessageBox.Icon.INFORMATION,\r\n     title: that.getResourceBundle().getText(\"overviewDelete\"),\r\n     actions: [that.getResourceBundle().getText(\"ok\")],\r\n     onClose: function(oAction) {\r\n      if (oAction === that.getResourceBundle().getText(\"ok\")) {\r\n       // do nothing\r\n      }\r\n     },\r\n     initialFocus: that.getResourceBundle().getText(\"ok\")\r\n    });\r\n   }\r\n  },\r\n\r\n  onPressDeleteRequisition: function() {\r\n   //delete the PR only when a line item is selected\r\n   if (this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()) {\r\n    this.getView().setBusy(true);\r\n    this.dataManager.getHeader(this.getServiceCallParameter(this.checkDelete, this.serviceFail),\r\n     \"00000000-0000-0000-0000-000000000000\",\r\n     this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition, true);\r\n   } else {\r\n    MessageBox.error(\"Select an item to delete\");\r\n   }\r\n  },\r\n  onDeletePurReq: function(PRNumber) {\r\n   var sUrlPR = \"/sap/opu/odata/sap/MMPUR_REQ_SSP_MAINTAIN_SRV/\";\r\n   var values = [PRNumber, \"guid'00000000-0000-0000-0000-000000000000'\", true];\r\n   var keys = this.entityConstants.getKeys(\"headerEntity\");\r\n   var valueObject = {};\r\n   for (var j = 0; j < keys.length; j++) {\r\n    valueObject[keys[j]] = values[j];\r\n   }\r\n   var url = \"\";\r\n   url = url + keys[0] + \"='\" + valueObject[keys[0]] + \"'\";\r\n   for (var i = 1; i < keys.length; i++) {\r\n    url = url + \",\";\r\n    if (typeof valueObject[keys[i]] !== \"boolean\") {\r\n     if (valueObject[keys[i]].startsWith(\"guid\")) {\r\n      url = url + keys[i] + \"=\" + valueObject[keys[i]];\r\n     } else {\r\n      if (valueObject[keys[i]] === \"false\") {\r\n       valueObject[keys[i]] = false;\r\n       url = url + keys[i] + \"=\" + valueObject[keys[i]];\r\n      } else {\r\n       url = url + keys[i] + \"='\" + valueObject[keys[i]] + \"'\";\r\n      }\r\n     }\r\n    } else {\r\n     url = url + keys[i] + \"=\" + valueObject[keys[i]];\r\n    }\r\n   }\r\n   var sUrlPRHeader = this.entityConstants.getEntityName('headerEntity') + \"(\" + url + \")\";\r\n   var oModel = new sap.ui.model.odata.ODataModel(sUrlPR);\r\n   oModel.remove(\r\n    sUrlPRHeader, {\r\n     batchGroupId: 1,\r\n     changeSetId: 1,\r\n     success: jQuery.proxy(this.onSuccessDelete, this),\r\n     error: jQuery.proxy(this.onErrorDelete, this)\r\n    });\r\n  },\r\n  onPressCreate: function() {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n   if (this.itemCount === 1) {\r\n    this.getRouter().navTo(\"Search\");\r\n   } else {\r\n    window.history.back();\r\n   }\r\n  },\r\n\r\n  onErrorDelete: function(oError) {\r\n   var ErrorMsg = oError.response.body.split(\"<message>\")[1].split(\"</message>\")[0];\r\n   sap.m.MessageToast.show(ErrorMsg, {\r\n    duration: 2000\r\n   });\r\n   this.getView().byId(\"idSmartTablePRList\").getModel().refresh();\r\n   this.byId(\"deleteReqLinkId\").setEnabled(false);\r\n  },\r\n\r\n  onSuccessDelete: function() {\r\n   var sSuccessMsg = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"MSG_SUCCESS_DELETE\");\r\n   sap.m.MessageToast.show(sSuccessMsg, {\r\n    duration: 2000\r\n   });\r\n   this.getView().byId(\"idSmartTablePRList\").getModel().refresh();\r\n   this.byId(\"deleteReqLinkId\").setEnabled(false);\r\n\r\n  },\r\n\r\n  handlePRFactSheetNavigation: function(oEvent) {\r\n   var selectedLine = oEvent.getSource().getBindingContext().getObject();\r\n   var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"PurchaseRequisition\",\r\n     action: \"displayFactSheet\"\r\n    },\r\n    params: {\r\n     PurchaseRequisition: [selectedLine.PurchaseRequisition]\r\n    }\r\n   });\r\n  },\r\n\r\n  onSearchPRList: function() {\r\n   var oTable = this.getView().byId(\"idSmartTablePRList\");\r\n   var oBinding = oTable.getTable().getBinding(\"items\");\r\n   //var selectionFields = \"PurchaseRequisition,Material,PurReqnDescription,NumberOfItems,PurReqnItemLifeCycleStatus,CreationDate,TotalNetAmount,Currency\";\r\n   var oSmartFilterBar = this.byId(\"idSmartFilterPRList\");\r\n   var aSmartFilters = oSmartFilterBar.getFilters();\r\n   var oParameters = oSmartFilterBar.getParameters();\r\n\r\n   oBinding.sCustomParams = oBinding.getModel().createCustomParams({\r\n    custom: {\r\n     search: oParameters.custom.search\r\n    }\r\n   });\r\n\r\n   var dFormattedDate = sap.ui.core.format.DateFormat.getDateInstance({\r\n    pattern: \"yyyy-MM-dd\"\r\n   });\r\n\r\n   var timeFrom = dFormattedDate.format(this.byId(\"timeRangeFilter\").getDateValue(), false);\r\n   var timeTo = dFormattedDate.format(this.byId(\"timeRangeFilter\").getSecondDateValue(), false);\r\n\r\n   if (timeFrom !== null && timeTo !== null && timeFrom !== \"\" && timeTo !== \"\") {\r\n    var oSearchfilter = new sap.ui.model.Filter(\"CreationDate\", sap.ui.model.FilterOperator.BT, timeFrom, timeTo);\r\n    aSmartFilters.push(oSearchfilter);\r\n   }\r\n   oBinding.filter(aSmartFilters, oParameters);\r\n  },\r\n  // validation for date picker field\r\n  checkDateNow: function(oEvent) {\r\n   var bValid = oEvent.getParameter(\"valid\");\r\n\r\n   var oDRS = oEvent.getSource();\r\n   if (bValid) {\r\n    oDRS.setValueState(sap.ui.core.ValueState.None);\r\n   } else {\r\n    oDRS.setValueState(sap.ui.core.ValueState.Error);\r\n    oDRS.setValueStateText(this.getResourceBundle().getText(\"dateRangeError\"));\r\n   }\r\n\r\n  },\r\n\r\n  onPressRow: function() {\r\n   if (this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()) {\r\n    //var sDeleteText = this.getResourceBundle().getText(\"deleted\");\r\n    //var sPRStatus = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurReqnLifeCycleStatusName;\r\n    var sPRStatusCode = this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurReqnLifeCycleStatus;\r\n\r\n    //*******************Handling of Return and Confirm Button in case of Exterior PR SCenerio*******************/\r\n    //*********************************************Starts*********************************************************/\r\n    var self = this;\r\n    var oModel;\r\n    var oTableId = this.getView().byId(\"idRequisitionItemsTable\");\r\n    var isExtScenario = oTableId.getSelectedContexts()[0].getObject().IsExtPurgScenario;\r\n    var PRNumber = oTableId.getSelectedContexts()[0].getObject().PurchaseRequisition;\r\n    if (isExtScenario === 'X' || isExtScenario != \"\") {\r\n     oModel = self.getView().getModel();\r\n     var mParams = {\r\n      method: \"GET\",\r\n      urlParameters: {\r\n       PRNumber: PRNumber\r\n      },\r\n      success: function(oData, response) {\r\n       if (response.statusText === 'OK') {\r\n        if (oData.GRFlag === true) {\r\n         self.byId(\"ConfirmGRLinkId\").setEnabled(true);\r\n         self.byId(\"deleteReqLinkId\").setEnabled(false);\r\n        } else {\r\n         self.byId(\"ConfirmGRLinkId\").setEnabled(false);\r\n        }\r\n        if (oData.RTDFlag === true) {\r\n         self.byId(\"ReturnGRLinkId\").setEnabled(true);\r\n         self.byId(\"deleteReqLinkId\").setEnabled(false);\r\n        } else {\r\n         self.byId(\"ReturnGRLinkId\").setEnabled(false);\r\n        }\r\n        //If Follow On document created\r\n        // if(TBD)// Open point: needs to be handled\r\n        // {\r\n        //  this.byId(\"deleteReqLinkId\").setEnabled(false);\r\n        // }\r\n       }\r\n      },\r\n      error: function(oError) {\r\n       var loError = oError;\r\n      }\r\n     };\r\n     oModel.callFunction(\"/CheckGREnabled\", mParams);\r\n     //*******************Handling of Return and Confirm Button in case of Exterior PR SCenerio*******************/\r\n     //*********************************************Ends*********************************************************/\r\n\r\n    } else {\r\n\r\n     if (sPRStatusCode !== 'X') {\r\n      this.byId(\"deleteReqLinkId\").setEnabled(true);\r\n     } else {\r\n      this.byId(\"deleteReqLinkId\").setEnabled(false);\r\n     }\r\n     if (sPRStatusCode === 'G') {\r\n      this.byId(\"ReturnGRLinkId\").setEnabled(true);\r\n      this.byId(\"deleteReqLinkId\").setEnabled(false); //Disabling the delete button for a PR with Follow on status\r\n\r\n     } else {\r\n      this.byId(\"ReturnGRLinkId\").setEnabled(false);\r\n     }\r\n     // Confirm Good reciept status\r\n     if (sPRStatusCode === 'C') {\r\n      this.byId(\"ConfirmGRLinkId\").setEnabled(true);\r\n      this.byId(\"deleteReqLinkId\").setEnabled(false); //Disabling the delete button for a PR with Follow on status\r\n\r\n     } else {\r\n      this.byId(\"ConfirmGRLinkId\").setEnabled(false);\r\n     }\r\n     // Enable both return and confirm\r\n     if (sPRStatusCode === 'P') {\r\n      this.byId(\"ConfirmGRLinkId\").setEnabled(true);\r\n      this.byId(\"ReturnGRLinkId\").setEnabled(true);\r\n      this.byId(\"deleteReqLinkId\").setEnabled(false); //Disabling the delete button for a PR with Follow on status\r\n\r\n     }\r\n\r\n     //Disabling the delete button for a PR with Follow on status\r\n     if (sPRStatusCode === 'B') {\r\n      this.byId(\"deleteReqLinkId\").setEnabled(false);\r\n     }\r\n    }\r\n   }\r\n  },\r\n  handleStatusPress: function(oEvent) {\r\n   var that = this;\r\n   var isExtScenario;\r\n   this.getView().byId(\"page\").setBusy(true);\r\n   this.oButton = oEvent.getSource();\r\n   this.PRNumber = oEvent.getSource().getBindingContext().getObject().PurchaseRequisition;\r\n   this.PurReqnLifeCycleStatus = oEvent.getSource().getBindingContext().getObject().PurReqnLifeCycleStatus;\r\n   isExtScenario = oEvent.getSource().getBindingContext().getObject().IsExtPurgScenario;\r\n   this.setExtScenarioFlag(isExtScenario);\r\n   var oModel = that.getAppModel();\r\n   if (this.PRNumber) {\r\n    oModel.read(\"/C_Sspprmaint_Hdr\", {\r\n     urlParameters: {\r\n      \"$filter\": \"IsActiveEntity eq true and PurchaseRequisition eq '\" + this.PRNumber + \"'\",\r\n      \"$expand\": \"to_Purchaserequisitionitem_Wd\"\r\n     },\r\n     success: jQuery.proxy(this.itemssSuccessHandler, this),\r\n     error: jQuery.proxy(this.statusErrorHandler, this)\r\n    });\r\n   }\r\n\r\n  },\r\n  itemssSuccessHandler: function(data) {\r\n\r\n   var oDataItems = data.results[0].to_Purchaserequisitionitem_Wd;\r\n   this.oModelPf2 = new sap.ui.model.json.JSONModel();\r\n   var n = sap.ui.getCore().byId(\"navCon\");\r\n   if (n) {\r\n    n.to(\"p1\");\r\n   }\r\n   this.oModelPf2.setData(oDataItems);\r\n   if (!this._oHistory) {\r\n    this._oHistory = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.PRHistory\", this);\r\n    this.getView().addDependent(this._oHistory);\r\n   }\r\n   sap.ui.getCore().byId(\"itemsList\").setModel(this.oModelPf2, \"pf2\");\r\n   this.getView().byId(\"page\").setBusy(false);\r\n   this._oHistory.getContent()[0].getPages()[0].getSubHeader().getContent()[0].setValue(\"\");\r\n   this._oHistory.openBy(this.oButton);\r\n\r\n  },\r\n  handleNav: function(oEvent) {\r\n   // if (this.PurReqnLifeCycleStatus === \"C\" || \"B\" || \"G\"){\r\n   // if (this.PurReqnLifeCycleStatus === \"C\")\r\n   // || (this.PurReqnLifeCycleStatus === \"B\") || (this.PurReqnLifeCycleStatus === \"G\") {\r\n   // || (this.PurReqnLifeCycleStatus === \"B\")\r\n   // || (this.PurReqnLifeCycleStatus === \"G\"){ \r\n   var navCon = sap.ui.getCore().byId(\"navCon\");\r\n   var status = oEvent.getSource().getBindingContext(\"pf2\").getObject().PurReqnItemLifeCycleStatus;\r\n   if (status === \"B\" || status === \"A\" || status === \"K\" || status === \"L\" || status === \"R\" || status === \"S\" || status === \"02\" || status === \"05\") {\r\n    this.PRItemNumber = oEvent.getSource().getBindingContext(\"pf2\").getObject().PurchaseRequisitionItem;\r\n    this.itemText = oEvent.getSource().getTitle();\r\n    this.statusFromMYPR_DBind(this.PRNumber, this.PRItemNumber, navCon);\r\n   } else {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"noFollowOnDoc\"));\r\n   }\r\n\r\n   // this.navCon.to(\"p2\");\r\n   // }\r\n  },\r\n  goBack: function() {\r\n   var navCon = sap.ui.getCore().byId(\"navCon\");\r\n   navCon.back();\r\n  },\r\n  showStatus: function(oEvent) {\r\n   this.getView().setBusy(true);\r\n   var prNum = this.PRNumber;\r\n   while (prNum.length < 10) {\r\n    prNum = \"0\" + prNum;\r\n   }\r\n   var prItemNum = oEvent.getSource().getBindingContext().getObject().PurchaseRequisitionItem;\r\n   if (!this._historyDialog) {\r\n    this.statusData(prNum, prItemNum);\r\n   } else {\r\n    this._historyDialog.open();\r\n\r\n    this.getView().setBusy(false);\r\n   }\r\n\r\n  },\r\n  onItemSearch: function(oEvent) {\r\n   var aFilters = [];\r\n   var sQuery = oEvent.getSource().getValue();\r\n   if (sQuery && sQuery.length > 0) {\r\n    var filter = new sap.ui.model.Filter(\"PurchaseRequisitionItemText\", sap.ui.model.FilterOperator.Contains, sQuery);\r\n    aFilters.push(filter);\r\n   }\r\n\r\n   // update list binding\r\n   var list = sap.ui.getCore().byId(\"itemsList\");\r\n   var binding = list.getBinding(\"items\");\r\n   binding.filter(aFilters);\r\n  },\r\n\r\n  cancelFilter: function(oEvent) {\r\n   oEvent.getSource().reset();\r\n  },\r\n\r\n  ResetFields: function(oEvent) {\r\n   this.byId(\"timeRangeFilter\").setValue(\"\");\r\n  },\r\n\r\n  onBeforeExport: function(oEvt) {\r\n   var mExcelSettings = oEvt.getParameter(\"exportSettings\");\r\n   // GW export\r\n   if (mExcelSettings.url) {\r\n    return;\r\n   }\r\n\r\n   // Column cuustomization\r\n   if (mExcelSettings.workbook && mExcelSettings.workbook.columns) {\r\n    mExcelSettings.workbook.columns.forEach(function(oColumnConfiguration) {\r\n\r\n     if (oColumnConfiguration.columnId && oColumnConfiguration.columnId.indexOf(\"idStatusColumn\") > -1) {\r\n      oColumnConfiguration.property = \"PurReqnLifeCycleStatusName\";\r\n      oColumnConfiguration.type = \"string\";\r\n      return true;\r\n     }\r\n    });\r\n   }\r\n  }\r\n\r\n });\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ErrorHandler.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\",\"sap/m/MessageBox\"],function(O,M){\"use strict\";return O.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ErrorHandler\",{constructor:function(c){this._oResourceBundle=c.getModel(\"i18n\").getResourceBundle();this._oComponent=c;this._oModel=c.getModel();this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText(\"errorText\");this._oModel.attachMetadataFailed(function(e){var p=e.getParameters();this._showMetadataError(p.response);},this);this._oModel.attachRequestFailed(function(E){var p=E.getParameters();if(p.response.statusCode!==\"404\"||(p.response.statusCode===404&&p.response.responseText.indexOf(\"Cannot POST\")===0)){var m=p.response.statusText;try{if(JSON.parse(p.response.responseText).error&&JSON.parse(p.response.responseText).error.message){var a=JSON.parse(p.response.responseText).error.code;m=JSON.parse(p.response.responseText).error.message.value;}else{m=m+\": \"+p.response.responseText.substring(p.response.responseText.search(\"1>\")+2,p.response.responseText.search(\"</h1\"));}}catch(e){m=this._oResourceBundle.getText(\"errorText\")+\" : \"+m;}if(a!==\"005056A509B11EE1B9A8FEC11C23378E\"){this._showServiceError(m);}else{sap.ui.getCore().getMessageManager().removeAllMessages();}}},this);},_showMetadataError:function(d){M.error(this._sErrorText,{id:\"metadataErrorMessageBox\",details:d,styleClass:this._oComponent.getContentDensityClass(),actions:[M.Action.RETRY,M.Action.CLOSE],onClose:function(a){if(a===M.Action.RETRY){this._oModel.refreshMetadata();}}.bind(this)});},_showServiceError:function(d){if(this._bMessageOpen){return;}this._bMessageOpen=true;M.error(d,{id:\"serviceErrorMessageBox\",styleClass:this._oComponent.getContentDensityClass(),actions:[M.Action.CLOSE],onClose:function(){this._bMessageOpen=false;}.bind(this)});}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ProductDetails-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n 'sap/m/MessageBox'\r\n], function(BaseController, MessageBox) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ProductDetails\", {\r\n\r\n  onInit: function() {\r\n   this._oRouter = this.getRouter();\r\n   this._oRouter.getRoute(\"ProductDetails\").attachPatternMatched(this.loadData, this);\r\n\r\n  },\r\n  /**\r\n   * Convenience method for loading the data on the view\r\n   * @public\r\n   * @param {object} [oEvent] the event with parameters passed in the routing\r\n   */\r\n  loadData: function(oEvent) {\r\n\r\n   var productDetailsUrl = window.location;\r\n   window.decodeURIComponent(productDetailsUrl);\r\n   productDetailsUrl += '';\r\n   var searchUrl = productDetailsUrl.split('searchTerm=');\r\n   if (productDetailsUrl.search(\"searchTerm\") > 0) {\r\n    var searchTerm = \"ProductDescription eq '\" + searchUrl[1] + \"'\";\r\n    var mparameters = this.getServiceCallParameter(this.onSuccessSearchBinding, this.serviceFail);\r\n    this.dataManager.searchResultsBinding(mparameters, searchTerm);\r\n   }\r\n   // get the model of the app\r\n   this.oModel = this.getAppModel();\r\n   this.setSourcePage(\"ProductDetails\");\r\n   // get the parameters passed using routing\r\n   this.itemKey = oEvent.getParameter(\"arguments\").OpnCtlgItemID;\r\n   this.lang = oEvent.getParameter(\"arguments\").Language;\r\n   if (this.getTestMode()) {\r\n    this.lang = \"EN\";\r\n   }\r\n   var view = oEvent.getParameter(\"arguments\").view;\r\n   var itemDraftUUID = oEvent.getParameter(\"arguments\").free;\r\n   this.isprcscl = oEvent.getParameter(\"arguments\").isprcscl;\r\n   var itemkey = this.itemKey;\r\n\r\n   // show the add to cart button if user navigates from search results\r\n   if (view === \"search\") {\r\n    this.getView().byId(\"idAddToCart\").setVisible(true);\r\n   }\r\n\r\n   // building the URLs with proper values\r\n   var itemURL = \"/\" + this.entityConstants.getEntityName('productEntity') + \"(OpnCtlgItemID=\" + itemkey + \",Language='\" + this.lang +\r\n    \"')\";\r\n            var searchnewURL = this.entityConstants.getEntityName('productEntity') + \"(OpnCtlgItemID=\" + itemkey + \",Language='\" + this.lang +\r\n    \"')\";\r\n   // preparing the parameters to be passed to fetch data\r\n   var filterParam = \"OpnCtlgItemID eq \" + itemkey;\r\n   var languageParam = \" and Language eq '\" + this.lang + \"'\";\r\n   this.getView().setBusyIndicatorDelay(0);\r\n   this.getView().setBusy(true);\r\n   this.getView().byId(\"iconTabbar\").setVisible(false);\r\n\r\n   this.getView().byId(\"page\").bindElement(itemURL);\r\n\r\n   // For header data, primarily userID, to enable reviews later\r\n   this.setHeaderDraftKey(oEvent.getParameter(\"arguments\").DraftKey);\r\n   this.setPurchaseRequisition(oEvent.getParameter(\"arguments\").PurchaseRequisition);\r\n   var mParametersHeader = this.getServiceCallParameter(this.headerSuccess, this.serviceFail);\r\n   this.dataManager.getHeader(mParametersHeader, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\r\n   // pick the proper images for the carousel, using filters\r\n   var imageBinding = this.getView().byId(\"carousel\").getBinding(\"pages\");\r\n   var andFilter = [];\r\n   var orFilter = [];\r\n   orFilter.push(new sap.ui.model.Filter(\"OpnCtlgAttachmentType\", sap.ui.model.FilterOperator.EQ, \"03\"));\r\n   orFilter.push(new sap.ui.model.Filter(\"OpnCtlgAttachmentType\", sap.ui.model.FilterOperator.EQ, \"01\"));\r\n   andFilter.push(new sap.ui.model.Filter(orFilter, false));\r\n   andFilter.push(new sap.ui.model.Filter(\"OpnCtlgItemID\", sap.ui.model.FilterOperator.EQ, itemkey));\r\n   imageBinding.filter(andFilter);\r\n\r\n   // pick the proper reviews for the reviews tab, using filters\r\n   var tableBinding = this.getView().byId(\"idReviewTable\").getBinding(\"items\");\r\n   var afilter = [];\r\n   afilter.push(new sap.ui.model.Filter(\"OpnCtlgItemID\", \"EQ\", itemkey));\r\n   tableBinding.filter(afilter);\r\n   if (productDetailsUrl.search(\"searchTerm\") < 0 && this.getView().byId(\"idHeader\").getBindingContext()) {\r\n    this.curr = this.getView().byId(\"idHeader\").getBindingContext().getObject().OpnCtlgItemCurrency;\r\n   }\r\n   // function to get Technical specifications\r\n   var mParameters = this.getServiceCallParameter(this.fnSetAttrData, this.serviceFail);\r\n   this.dataManager.getAttributeDetails(mParameters, filterParam, languageParam);\r\n   this.decimal = this.oModel.oData[searchnewURL].Decimals;\r\n   this.prcsclPresent();\r\n  },\r\n\r\n  onSuccessSearchBinding: function(data) {\r\n   var itemkey = this.itemKey;\r\n   var itemURL = \"/\" + this.entityConstants.getEntityName('productEntity') + \"(OpnCtlgItemID=\" + itemkey + \",Language='\" + this.lang +\r\n    \"')\";\r\n   this.getView().byId(\"page\").bindElement(itemURL);\r\n  },\r\n\r\n  successPrcScale: function(data) {\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   var len = oJSModelCart.oData.results.length;\r\n   var i = 0;\r\n   for (i = 0; i < len; i++) {\r\n    oJSModelCart.oData.results[i].Currency = this.curr;\r\n    oJSModelCart.oData.results[i].OpnCtlgItemPrice = parseFloat(oJSModelCart.oData.results[i].OpnCtlgItemPrice).toFixed(this.decimal);\r\n   }\r\n   this.getView().byId(\"idPrcSclTable\").setModel(oJSModelCart);\r\n   this.getView().byId(\"idPrcSclTable\").bindElement(\"/results\");\r\n   var getView = this.getView().byId(\"page\");\r\n   var getData = getView.getBindingContext().oModel.oData;\r\n   var itmKey = this.itemKey;\r\n   var lang = this.lang;\r\n   var itemData = getData[\"C_Procurementitems(OpnCtlgItemID=\" + itmKey + \",Language='\" + this.lang + \"')\"];\r\n   var quant = this.getResourceBundle().getText(\"price\") + \" \" + this.getResourceBundle().getText(\"CurrencyPer\") + \" \" + itemData.NetPriceQuantity +\r\n    \" \" + itemData.UnitOfMeasure;\r\n   this.getView().byId(\"idPrcSclTable\").getAggregation(\"columns\")[1].getAggregation(\"header\").setText(quant);\r\n  },\r\n\r\n  prcsclPresent: function() {\r\n   var ikey = \"OpnCtlgItemID eq \" + this.itemKey;\r\n   var mparameters = this.getServiceCallParameter(this.successPrcScalePresent, this.serviceFail);\r\n   this.dataManager.priceScalefind(mparameters, ikey);\r\n  },\r\n  successPrcScalePresent: function(data) {\r\n   if (data.results.length) {\r\n    this.getView().byId(\"prcscltab\").setVisible(true);\r\n    this.successPrcScale(data);\r\n   } else {\r\n    this.getView().byId(\"prcscltab\").setVisible(false);\r\n   }\r\n  },\r\n  /**\r\n   * Convenience method to hide tabs if they do not have data\r\n   * @public\r\n   */\r\n  hideTabs: function() {\r\n   var sustainability = this.getView().byId(\"sustainability\").getText();\r\n   var directEms = this.getView().byId(\"directEms\").getText();\r\n   var indirectEms = this.getView().byId(\"indirectEms\").getText();\r\n   var tempEms = this.getView().byId(\"tempEms\").getText();\r\n   var recycleContent = this.getView().byId(\"recycleContent\").getText();\r\n   var waterUsage = this.getView().byId(\"waterUsage\").getText();\r\n   var energyUsage = this.getView().byId(\"energyUsage\").getText();\r\n   var waste = this.getView().byId(\"waste\").getText();\r\n\r\n   if ((sustainability === \"\" || sustainability === \"0\") && (directEms === \"\" || directEms === \"0\") && (indirectEms === \"\" ||\r\n     indirectEms === \"0\") && (tempEms === \"\" || tempEms === \"0\") && (recycleContent === \"\" || recycleContent === \"0\") && (waterUsage ===\r\n     \"\" || waterUsage === \"0\") &&\r\n    (energyUsage === \"\" || energyUsage === \"0\") && (waste === \"\" || waste === \"0\")) {\r\n    this.getView().byId(\"sustainabilityTab\").setVisible(false);\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for success callback for getting Technical specifications.\r\n   * @public\r\n   * @param {object} [data] the data returned by server on a successful call\r\n   */\r\n  fnSetAttrData: function(data) {\r\n   var attributes = [];\r\n   for (var i = 0; i < data.results.length; i++) {\r\n    attributes[i] = \"\\n\" + data.results[i].OpnCtlgAttribName + \": \" + data.results[i].OpnCtlgAttribValue + \" \" + data.results[i].OpnCtlgAttribUnit;\r\n   }\r\n   if (attributes.length > 0) {\r\n    this.getView().byId(\"idAttribute\").setText(attributes);\r\n   } else {\r\n    this.getView().byId(\"technicalDetails\").setVisible(false);\r\n   }\r\n   this.hideTabs();\r\n   this.getView().byId(\"iconTabbar\").setVisible(true);\r\n   // disable busy indicator, as this is the last part to be loaded initially\r\n   this.getView().setBusy(false);\r\n  },\r\n\r\n  /**\r\n   * Convenience method for navigating back\r\n   * @public\r\n   */\r\n  onBack: function() {\r\n   window.history.back();\r\n   // removing fragments and pop-ups on exit\r\n   if (this.reviewDialog) {\r\n    this.reviewDialog.destroy();\r\n    this.reviewDialog.destroyContent();\r\n    this.reviewDialog = null;\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for navigating to Cart Overview\r\n   * @public\r\n   */\r\n  handleViewCartPress: function() {\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.dataManager.EntityConstants.DUMMY_PR_KEY;\r\n   this.getRouter().navTo(\"CartOverview\", {\r\n    DraftKey: this.getHeaderDraftKey(),\r\n    PurchaseRequisition: purchaseRequisition\r\n\r\n   });\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for opening the dialog to add review\r\n   * @public\r\n   */\r\n  onAddReview: function() {\r\n   if (!this.reviewDialog) {\r\n    this.reviewDialog = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AddReview\", this);\r\n    this.getView().addDependent(this.reviewDialog);\r\n   }\r\n   this.reviewDialog.open();\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for sorting reviews\r\n   * @public\r\n   */\r\n  onSortReview: function() {\r\n   var tableBinding = this.getView().byId(\"idReviewTable\").getBinding(\"items\");\r\n   var bDesc;\r\n   var aSorters = [];\r\n\r\n   if (tableBinding.aSorters.bDescending || tableBinding.aSorters.length > 0) {\r\n    if (tableBinding.aSorters[0].bDescending) {\r\n     bDesc = false;\r\n    } else {\r\n     bDesc = true;\r\n    }\r\n   } else {\r\n    bDesc = true;\r\n   }\r\n   aSorters.push(new sap.ui.model.Sorter(\"UsageRating\", bDesc));\r\n   tableBinding.sort(aSorters);\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for closing the review dialog\r\n   * @public\r\n   */\r\n  handleClose: function() {\r\n   this.reviewDialog.close();\r\n  },\r\n\r\n  /**\r\n   * Convenience method for adding item to cart\r\n   * @public\r\n   */\r\n  addToCart: function() {\r\n   var oData = {\r\n    RequestedQuantity: \"1\",\r\n    DraftUUID: this.getHeaderDraftKey(),\r\n    PurReqnSSPCrossCatalogItem: Number(this.itemKey)\r\n   };\r\n   var mParameters = this.getServiceCallParameter(this.successAddToCart, this.serviceFail);\r\n   this.dataManager.addToCart(mParameters, oData, this.getHeaderDraftKey());\r\n   this.getView().setBusy(true);\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for submitting a review\r\n   * @public\r\n   */\r\n  submitReview: function() {\r\n   var productRating = sap.ui.getCore().byId(\"idProductRating\").getProperty(\"value\");\r\n   var comment = sap.ui.getCore().byId(\"idReviewText\").getProperty(\"value\");\r\n   var itemKey = this.itemKey;\r\n   var details = this.getView().byId(\"productDetails\").getBindingContext();\r\n   var ExternalProdID = \"\";\r\n   var CatalogSrvID = \"\";\r\n   var oData = {};\r\n   this.reviewDialog.close();\r\n   if (details) {\r\n    ExternalProdID = details.getProperty(\"OpnCtlgExternalProductID\");\r\n    CatalogSrvID = details.getProperty(\"OpnCtlgWebServiceID\");\r\n    oData = {\r\n     OpnCtlgItemID: Number(itemKey),\r\n     OpnCtlgExternalProductID: ExternalProdID,\r\n     OpnCtlgWebServiceID: CatalogSrvID,\r\n     UsageRating: Number(productRating).toFixed(2),\r\n     ReviewedByUser: comment,\r\n     ChangedDateTime: \"\"\r\n    };\r\n   }\r\n   if (itemKey.length > 0 && ExternalProdID !== \"\" && CatalogSrvID !== \"\") {\r\n    if (Number(productRating) > 0) {\r\n     var mParameters = this.getServiceCallParameter(this.fnSuccessAddReview, this.fnReviewFailed);\r\n     this.dataManager.submitReview(mParameters, oData);\r\n    } else {\r\n     sap.m.MessageToast.show(this.getResourceBundle().getText(\"RatingNeeded\"));\r\n     this.reviewDialog.open();\r\n    }\r\n   } else {\r\n    this.fnReviewFailed();\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for success callback on adding review\r\n   * @public\r\n   */\r\n  fnSuccessAddReview: function() {\r\n   this.getView().setBusy(false);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"ReviewSuccess\"));\r\n   var tableBinding = this.getView().byId(\"idReviewTable\").getBinding(\"items\");\r\n   tableBinding.refresh();\r\n   var reviewCount = this.getView().byId(\"idReviewTable\").getItems();\r\n   var oldRating = this.getView().byId(\"rating\").getProperty(\"value\");\r\n   var newRating = sap.ui.getCore().byId(\"idProductRating\").getProperty(\"value\");\r\n   var overallRating = parseFloat((oldRating * reviewCount.length + newRating) / (reviewCount.length + 1));\r\n   this.getView().byId(\"rating\").setValue(overallRating);\r\n  },\r\n\r\n  /**\r\n   * Convenience method to enable/disable add review button and count number of reviews\r\n   * @public\r\n   */\r\n  onUpdateFinished: function() {\r\n   // sap.m.MessageToast.show(this.getResourceBundle().getText(\"ReviewSuccess\"));\r\n   var userReview = this.getView().byId(\"idReviewTable\").getItems();\r\n   if (userReview.length > 0 && userReview[0].getBindingContext().getProperty(\"UserID\") === this.getUserID()) {\r\n    this.getView().byId(\"btnAddReview\").setEnabled(false);\r\n   } else {\r\n    this.getView().byId(\"btnAddReview\").setEnabled(true);\r\n   }\r\n   this.getView().byId(\"reviewCount\").setText(\"(\" + userReview.length + \")\");\r\n   this.checkError();\r\n  },\r\n\r\n  /**\r\n   * Convenience method to fetch messages from gateway\r\n   * @public\r\n   */\r\n  checkError: function() {\r\n   var that = this;\r\n   var text;\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var oMessageModel = oMessageManager.getMessageModel();\r\n   var messageCode = oMessageModel.aBindings[1].oValue[0].code;\r\n   if (messageCode == 'MMPUR_REQ_COMMON/023') {\r\n    var text = oMessageModel.aBindings[1].oValue[0].message;\r\n    this.getView(\"ProductDetails\").destroyContent();\r\n\r\n    MessageBox.show(text, {\r\n     icon: MessageBox.Icon.ERROR,\r\n     title: that.getResourceBundle().getText(\"ProductDetails\"),\r\n     actions: [that.getResourceBundle().getText(\"ok\")],\r\n     onClose: function(oAction) {\r\n      if (oAction === that.getResourceBundle().getText(\"ok\")) {\r\n       window.history.back();\r\n      }\r\n     },\r\n     initialFocus: that.getResourceBundle().getText(\"ok\")\r\n    });\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for error callback on adding review\r\n   * @public\r\n   */\r\n  fnReviewFailed: function() {\r\n   this.getView().setBusy(false);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"ReviewFailed\"));\r\n  },\r\n\r\n  /**\r\n   * Convenience method for success callback on adding to cart\r\n   * @public\r\n   */\r\n  successAddToCart: function() {\r\n   this.updateHeader();\r\n   this.getView().setBusy(false);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n  },\r\n\r\n  /**\r\n   * Convenience method for updating header details and count of minicart items\r\n   * @public\r\n   */\r\n  updateHeader: function() {\r\n   var mParameters = this.getServiceCallParameter(this.updateHeaderSuccess, this.serviceFail);\r\n   this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for success callback of updating header\r\n   * @public\r\n   */\r\n  updateHeaderSuccess: function() {\r\n   this.dataManager.updateHeaderSuccess(this.getView().byId('btnCart'), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n    \"'\"\r\n   ]);\r\n   // this.getView().byId('btnCart').bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n   //  \"(PurchaseRequisition='\" + this.getPurchaseRequisition() + \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n\r\n   var that = this;\r\n   setTimeout(function() {\r\n    that.firstMiniCartOpen();\r\n   }, 2000);\r\n  },\r\n\r\n  handlePopoverPress: function(oEvent) {\r\n\r\n   if (!this._oPopover) {\r\n    this._oPopover = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.PopOver\", this);\r\n    this.getView().addDependent(this._oPopover);\r\n   }\r\n   var oButton = oEvent.getSource();\r\n   jQuery.sap.delayedCall(0, this, function() {\r\n    this._oPopover.openBy(oButton);\r\n   });\r\n  },\r\n\r\n  sendEmail: function() {\r\n\r\n   var vUrlProductDetails = window.location;\r\n   // vUrlProductDetails += '&skipComponent=true';\r\n   vUrlProductDetails += \"&searchTerm=\" + this.getView().byId(\"idHeader\").getTitle();\r\n   window.encodeURIComponent(vUrlProductDetails);\r\n   var emailSubject = this.getResourceBundle().getText(\"emailsubject\") + \":\" + this.getView().byId(\"idHeader\").getTitle();\r\n   sap.m.URLHelper.triggerEmail(\"\", emailSubject, vUrlProductDetails);\r\n  }\r\n\r\n });\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/PurReqList.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\"sap/ui/model/json/JSONModel\",'sap/m/MessageToast','sap/m/MessageBox',\"ui/s2p/mm/requisition/maintain/s1/model/formatter\"],function(B,J,f,M){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.PurReqList\",{onInit:function(){this.getView().setVisible(false);this.oModel=this.getAppModel();this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));this._oRouter=this._oComponent.getRouter();this._oRouter.getRoute(\"PurReqList\").attachPatternMatched(this._onObjectMatched,this);},_onObjectMatched:function(){if(this.getOwnerComponent().getComponentData().changingSourcePageAllowed){this.setSourcePage(\"PurReqList\");}if((this.getPurchaseRequisition()===\"\")||(this.getSourcePage()===\"PurReqList\")){this.getView().setVisible(true);this.getView().getModel().refresh();}else{if(this.getSourcePage()==\"\"){this.setSourcePage(\"CartOverview\");}if(!(this.getSourcePage()===\"PurReqList\")){this.navToSourcePage();}}},onNavBack:function(){var c=sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"#\"}});},fnNavigateItemList:function(e){if(this._oHistory){this._oHistory.destroy();}this.setLifeCycleStatus(e.getSource().getBindingContext());var p=e.getSource().getBindingContext().getProperty(\"PurchaseRequisition\");this.setPurchaseRequisition(p);this.checkDraft(p);},fnNavigateEditItemList:function(e){var p=this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;this.setPurchaseRequisition(p);this.checkDraft(p);},fnNavigateReturnGR:function(e){if(this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()){var p=this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"GoodsReceipt\",action:\"return\"},params:{PurchaseRequisition:[p]}});}else{M.error(\"Select a PR for return\");}},fnNavigateConfirmGR:function(e){if(this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()){var p=this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"GoodsReceipt\",action:\"create\"},params:{PurchaseRequisition:[p]}});}else{M.error(\"Select an item to confirm\");}},checkDraft:function(p){this.dataManager.getCurrentDraft(this.getServiceCallParameter(this.saveDraftUID,this.serviceFail),p);},saveDraftUID:function(d){var t=this;var p=d.results?d.results[0]:d;var a=this.getDraftKey(p,true);if(a){M.show(this.getResourceBundle().getText(\"draftMessage\"),{icon:M.Icon.INFORMATION,title:t.getResourceBundle().getText(\"draft\"),actions:[t.getResourceBundle().getText(\"continue\"),t.getResourceBundle().getText(\"discard\")],onClose:function(A){if(A===t.getResourceBundle().getText(\"continue\")){t.getRouter().navTo(\"CartOverview\",{DraftKey:a,PurchaseRequisition:p.PurchaseRequisition});}else{t.deleteDraft(a);}},initialFocus:t.getResourceBundle().getText(\"continue\")});}else{this.editDraft();}},deleteDraft:function(d){this.dataManager.deleteDraft(this.getServiceCallParameter(this.editDraft,this.serviceFail),d,this.getPurchaseRequisition());},editDraft:function(){var d='00000000-0000-0000-0000-000000000000';this.dataManager.editDocument(this.getServiceCallParameter(this.getDraftId,this.errorServiceFail),d,this.getPurchaseRequisition());},getDraftId:function(d){var p=d.results?d.results[0]:d;var a=this.getDraftKey(p,true);this.setHeaderDraftKey(a);this.setUserID(p.Employee);this.getRouter().navTo(\"CartOverview\",{DraftKey:this.getHeaderDraftKey(),PurchaseRequisition:this.getPurchaseRequisition()});},checkDelete:function(d){var t=this;d.Delete_mc=true;this.getView().setBusy(false);if(d.Delete_mc){var P=this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition;M.show(this.getResourceBundle().getText(\"deleteCart\"),{icon:M.Icon.INFORMATION,title:t.getResourceBundle().getText(\"overviewDelete\"),actions:[t.getResourceBundle().getText(\"continue\"),t.getResourceBundle().getText(\"cancel\")],onClose:function(a){if(a===t.getResourceBundle().getText(\"continue\")){t.onDeletePurReq(P);}},initialFocus:t.getResourceBundle().getText(\"continue\")});}else{M.show(this.getResourceBundle().getText(\"deleteFailed\"),{icon:M.Icon.INFORMATION,title:t.getResourceBundle().getText(\"overviewDelete\"),actions:[t.getResourceBundle().getText(\"ok\")],onClose:function(a){if(a===t.getResourceBundle().getText(\"ok\")){}},initialFocus:t.getResourceBundle().getText(\"ok\")});}},onPressDeleteRequisition:function(){if(this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()){this.getView().setBusy(true);this.dataManager.getHeader(this.getServiceCallParameter(this.checkDelete,this.serviceFail),\"00000000-0000-0000-0000-000000000000\",this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurchaseRequisition,true);}else{M.error(\"Select an item to delete\");}},onDeletePurReq:function(P){var u=\"/sap/opu/odata/sap/MMPUR_REQ_SSP_MAINTAIN_SRV/\";var v=[P,\"guid'00000000-0000-0000-0000-000000000000'\",true];var k=this.entityConstants.getKeys(\"headerEntity\");var a={};for(var j=0;j<k.length;j++){a[k[j]]=v[j];}var b=\"\";b=b+k[0]+\"='\"+a[k[0]]+\"'\";for(var i=1;i<k.length;i++){b=b+\",\";if(typeof a[k[i]]!==\"boolean\"){if(a[k[i]].startsWith(\"guid\")){b=b+k[i]+\"=\"+a[k[i]];}else{if(a[k[i]]===\"false\"){a[k[i]]=false;b=b+k[i]+\"=\"+a[k[i]];}else{b=b+k[i]+\"='\"+a[k[i]]+\"'\";}}}else{b=b+k[i]+\"=\"+a[k[i]];}}var U=this.entityConstants.getEntityName('headerEntity')+\"(\"+b+\")\";var m=new sap.ui.model.odata.ODataModel(u);m.remove(U,{batchGroupId:1,changeSetId:1,success:jQuery.proxy(this.onSuccessDelete,this),error:jQuery.proxy(this.onErrorDelete,this)});},onPressCreate:function(){sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));if(this.itemCount===1){this.getRouter().navTo(\"Search\");}else{window.history.back();}},onErrorDelete:function(e){var E=e.response.body.split(\"<message>\")[1].split(\"</message>\")[0];sap.m.MessageToast.show(E,{duration:2000});this.getView().byId(\"idSmartTablePRList\").getModel().refresh();this.byId(\"deleteReqLinkId\").setEnabled(false);},onSuccessDelete:function(){var s=this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"MSG_SUCCESS_DELETE\");sap.m.MessageToast.show(s,{duration:2000});this.getView().byId(\"idSmartTablePRList\").getModel().refresh();this.byId(\"deleteReqLinkId\").setEnabled(false);},handlePRFactSheetNavigation:function(e){var s=e.getSource().getBindingContext().getObject();var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"PurchaseRequisition\",action:\"displayFactSheet\"},params:{PurchaseRequisition:[s.PurchaseRequisition]}});},onSearchPRList:function(){var t=this.getView().byId(\"idSmartTablePRList\");var b=t.getTable().getBinding(\"items\");var s=this.byId(\"idSmartFilterPRList\");var S=s.getFilters();var p=s.getParameters();b.sCustomParams=b.getModel().createCustomParams({custom:{search:p.custom.search}});var F=sap.ui.core.format.DateFormat.getDateInstance({pattern:\"yyyy-MM-dd\"});var a=F.format(this.byId(\"timeRangeFilter\").getDateValue(),false);var c=F.format(this.byId(\"timeRangeFilter\").getSecondDateValue(),false);if(a!==null&&c!==null&&a!==\"\"&&c!==\"\"){var o=new sap.ui.model.Filter(\"CreationDate\",sap.ui.model.FilterOperator.BT,a,c);S.push(o);}b.filter(S,p);},checkDateNow:function(e){var v=e.getParameter(\"valid\");var d=e.getSource();if(v){d.setValueState(sap.ui.core.ValueState.None);}else{d.setValueState(sap.ui.core.ValueState.Error);d.setValueStateText(this.getResourceBundle().getText(\"dateRangeError\"));}},onPressRow:function(){if(this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem()){var p=this.getView().byId(\"idRequisitionItemsTable\").getSelectedItem().getBindingContext().getObject().PurReqnLifeCycleStatus;var s=this;var m;var t=this.getView().byId(\"idRequisitionItemsTable\");var i=t.getSelectedContexts()[0].getObject().IsExtPurgScenario;var P=t.getSelectedContexts()[0].getObject().PurchaseRequisition;if(i==='X'||i!=\"\"){m=s.getView().getModel();var a={method:\"GET\",urlParameters:{PRNumber:P},success:function(d,r){if(r.statusText==='OK'){if(d.GRFlag===true){s.byId(\"ConfirmGRLinkId\").setEnabled(true);s.byId(\"deleteReqLinkId\").setEnabled(false);}else{s.byId(\"ConfirmGRLinkId\").setEnabled(false);}if(d.RTDFlag===true){s.byId(\"ReturnGRLinkId\").setEnabled(true);s.byId(\"deleteReqLinkId\").setEnabled(false);}else{s.byId(\"ReturnGRLinkId\").setEnabled(false);}}},error:function(e){var l=e;}};m.callFunction(\"/CheckGREnabled\",a);}else{if(p!=='X'){this.byId(\"deleteReqLinkId\").setEnabled(true);}else{this.byId(\"deleteReqLinkId\").setEnabled(false);}if(p==='G'){this.byId(\"ReturnGRLinkId\").setEnabled(true);this.byId(\"deleteReqLinkId\").setEnabled(false);}else{this.byId(\"ReturnGRLinkId\").setEnabled(false);}if(p==='C'){this.byId(\"ConfirmGRLinkId\").setEnabled(true);this.byId(\"deleteReqLinkId\").setEnabled(false);}else{this.byId(\"ConfirmGRLinkId\").setEnabled(false);}if(p==='P'){this.byId(\"ConfirmGRLinkId\").setEnabled(true);this.byId(\"ReturnGRLinkId\").setEnabled(true);this.byId(\"deleteReqLinkId\").setEnabled(false);}if(p==='B'){this.byId(\"deleteReqLinkId\").setEnabled(false);}}}},handleStatusPress:function(e){var t=this;var i;this.getView().byId(\"page\").setBusy(true);this.oButton=e.getSource();this.PRNumber=e.getSource().getBindingContext().getObject().PurchaseRequisition;this.PurReqnLifeCycleStatus=e.getSource().getBindingContext().getObject().PurReqnLifeCycleStatus;i=e.getSource().getBindingContext().getObject().IsExtPurgScenario;this.setExtScenarioFlag(i);var m=t.getAppModel();if(this.PRNumber){m.read(\"/C_Sspprmaint_Hdr\",{urlParameters:{\"$filter\":\"IsActiveEntity eq true and PurchaseRequisition eq '\"+this.PRNumber+\"'\",\"$expand\":\"to_Purchaserequisitionitem_Wd\"},success:jQuery.proxy(this.itemssSuccessHandler,this),error:jQuery.proxy(this.statusErrorHandler,this)});}},itemssSuccessHandler:function(d){var D=d.results[0].to_Purchaserequisitionitem_Wd;this.oModelPf2=new sap.ui.model.json.JSONModel();var n=sap.ui.getCore().byId(\"navCon\");if(n){n.to(\"p1\");}this.oModelPf2.setData(D);if(!this._oHistory){this._oHistory=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.PRHistory\",this);this.getView().addDependent(this._oHistory);}sap.ui.getCore().byId(\"itemsList\").setModel(this.oModelPf2,\"pf2\");this.getView().byId(\"page\").setBusy(false);this._oHistory.getContent()[0].getPages()[0].getSubHeader().getContent()[0].setValue(\"\");this._oHistory.openBy(this.oButton);},handleNav:function(e){var n=sap.ui.getCore().byId(\"navCon\");var s=e.getSource().getBindingContext(\"pf2\").getObject().PurReqnItemLifeCycleStatus;if(s===\"B\"||s===\"A\"||s===\"K\"||s===\"L\"||s===\"R\"||s===\"S\"||s===\"02\"||s===\"05\"){this.PRItemNumber=e.getSource().getBindingContext(\"pf2\").getObject().PurchaseRequisitionItem;this.itemText=e.getSource().getTitle();this.statusFromMYPR_DBind(this.PRNumber,this.PRItemNumber,n);}else{sap.m.MessageToast.show(this.getResourceBundle().getText(\"noFollowOnDoc\"));}},goBack:function(){var n=sap.ui.getCore().byId(\"navCon\");n.back();},showStatus:function(e){this.getView().setBusy(true);var p=this.PRNumber;while(p.length<10){p=\"0\"+p;}var a=e.getSource().getBindingContext().getObject().PurchaseRequisitionItem;if(!this._historyDialog){this.statusData(p,a);}else{this._historyDialog.open();this.getView().setBusy(false);}},onItemSearch:function(e){var F=[];var q=e.getSource().getValue();if(q&&q.length>0){var a=new sap.ui.model.Filter(\"PurchaseRequisitionItemText\",sap.ui.model.FilterOperator.Contains,q);F.push(a);}var l=sap.ui.getCore().byId(\"itemsList\");var b=l.getBinding(\"items\");b.filter(F);},cancelFilter:function(e){e.getSource().reset();},ResetFields:function(e){this.byId(\"timeRangeFilter\").setValue(\"\");},onBeforeExport:function(e){var E=e.getParameter(\"exportSettings\");if(E.url){return;}if(E.workbook&&E.workbook.columns){E.workbook.columns.forEach(function(c){if(c.columnId&&c.columnId.indexOf(\"idStatusColumn\")>-1){c.property=\"PurReqnLifeCycleStatusName\";c.type=\"string\";return true;}});}}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Freetext.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\", \"sap/ui/model/json/JSONModel\",\r\n\t\"ui/s2p/mm/requisition/maintain/s1/model/formatter\", 'sap/m/MessageToast', 'sap/m/MessageBox'\r\n], function(B, J, f, M, a) {\r\n\t\"use strict\";\r\n\treturn B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Freetext\", {\r\n\t\tonInit: function() {\r\n\t\t\tthis.oModel = this.getAppModel();\r\n\t\t\tthis.batch_update = [];\r\n\t\t\tthis.batch_create = [];\r\n\t\t\tthis._notes = [];\r\n\t\t\tthis.dummy = [];\r\n\t\t\tthis._oView = this.getView();\r\n\t\t\tthis._oComponent = sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));\r\n\t\t\tthis._oRouter = this._oComponent.getRouter();\r\n\t\t\tvar r = this.getResourceBundle();\r\n\t\t\tthis.firstTime = true;\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tthis._oRouter.getRoute(\"Freetext\").attachPatternMatched(this._onObjectMatched, this);\r\n\t\t},\r\n\t\tsetItemDraftKey: function(i) {\r\n\t\t\tthis.itemDraftKey = i;\r\n\t\t},\r\n\t\tgetItemDraftKey: function() {\r\n\t\t\treturn this.itemDraftKey;\r\n\t\t},\r\n\t\tgetDummyItem: function() {\r\n\t\t\tvar m = '01';\r\n\t\t\tvar d = 'DummyIgnoreThis';\r\n\t\t\tvar b = 'EA';\r\n\t\t\tvar c = 'EUR';\r\n\t\t\tvar D = {\r\n\t\t\t\tMaterialGroup: m,\r\n\t\t\t\tPurchaseRequisitionItemText: d,\r\n\t\t\t\tBaseUnit: b,\r\n\t\t\t\tCurrency: c\r\n\t\t\t};\r\n\t\t\tvar p = this.getServiceCallParameter(this.successhandleAddtoCartPressDummy, this.serviceFail);\r\n\t\t\tthis.dataManager.createNewItem(p, this.getHeaderDraftKey(), this.getPurchaseRequisition(), D);\r\n\t\t},\r\n\t\t_onObjectMatched: function(e) {\r\n\t\t\tif (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n\t\t\t\tthis.setSourcePage(\"FreeText\");\r\n\t\t\t}\r\n\t\t\tthis.getView().setBusyIndicatorDelay(0);\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tthis.setHeaderDraftKey(e.getParameter(\"arguments\").DraftKey);\r\n\t\t\tthis.setPurchaseRequisition(e.getParameter(\"arguments\").PurchaseRequisition);\r\n\t\t\tvar p = this.getServiceCallParameter(this.headerSuccess, this.serviceFail);\r\n\t\t\tthis.dataManager.getHeader(p, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\t\t\tif (!this.getTestMode()) {\r\n\t\t\t\tthis.getDummyItem();\r\n\t\t\t} else {\r\n\t\t\t\tthis.successhandleAddtoCartPressDummy();\r\n\t\t\t}\r\n\t\t\tthis.itemType = 0;\r\n\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\tthis.getView().byId(\"productTypeSelect\").setVisible(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_loadattachments: function() {\r\n\t\t\tvar s = this.getView();\r\n\t\t\tvar b = this.getHeaderDraftKey();\r\n\t\t\tb = b.replace(/-/g, \"\").toUpperCase();//doplnno .toUpperCase()\r\n\t\t\tvar P = \"C\";\r\n\t\t\tvar A;\r\n\t\t\t/* Added by con4PAS */\r\n\t\t\tvar t = this;\r\n\t\t\tvar uri = \"/AttachmentSet\";\r\n\t\t\tvar params = {\r\n\t\t\t\t\"$filter\": \"GUID eq '\" + b + \"'\"\r\n\t\t\t};\r\n\t\t\tthis.readData(t, uri, params, null, t.setAttachsAfterUpload);\r\n\t\t\t/* Added by con4PAS */\r\n\t\t\t/*if ((A !== null) && (A) && (A.getId() === \"attachmentsrv.FreeText\")) {\r\n\t\t\t\tA.refresh(P, \"EBAN\", b);\r\n\t\t\t} else {\r\n\t\t\t\tA = this.getOwnerComponent().createComponent({\r\n\t\t\t\t\tusage: \"attachmentReuseComponent\",\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tmode: P,\r\n\t\t\t\t\t\tobjectKey: b,\r\n\t\t\t\t\t\tobjectType: \"EBAN\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tA.then(function(c) {\r\n\t\t\t\t\tt.byId(\"attachmentCompContainer\").setComponent(c);\r\n\t\t\t\t});\r\n\t\t\t}*/\r\n\t\t},\r\n\t\tsuccesshandleAddtoCartPressDummy: function(d) {\r\n\t\t\t/*ADDED by C4P*/\r\n\t\t\tvar oAttModel = new sap.ui.model.json.JSONModel({});\r\n\t\t\tthis.getView().setModel(oAttModel,\"Attachment\");\r\n\t\t\t/*END ADDED by C4P*/\r\n\t\t\tthis.makeJSONModel(d);\r\n\t\t\tthis.getView().setModel(this.oModel);\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.getView().bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') +\r\n\t\t\t\t\t\"(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\"\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tvar b = this.getDraftKey(d, true);\r\n\t\t\t\tthis.setItemDraftKey(b);\r\n\t\t\t\tthis.getView().bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + this.getPurchaseRequisition() +\r\n\t\t\t\t\t\"',PurchaseRequisitionItem='00000',DraftUUID=guid'\" + d.DraftUUID + \"',IsActiveEntity=\" + false + \")\");\r\n\t\t\t\tthis._loadattachments();\r\n\t\t\t\tthis.getView().setBusyIndicatorDelay(0);\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t\tthis.dummy = d;\r\n\t\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\t\tm.removeAllMessages();\r\n\t\t\t\tvar c = this.getView().byId(\"idMaterialGroup\").getValue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetTextError: function() {\r\n\t\t\tvar m = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar o = sap.ui.getCore().getMessageManager();\r\n\t\t\to.removeAllMessages();\r\n\t\t\tvar s = this.getResourceBundle().getText(\"MESSAGE_ERROR_SHORT_TEXT\");\r\n\t\t\tvar b = new sap.ui.core.message.Message({\r\n\t\t\t\tid: \"idShortTextEmpty\",\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\ttarget: \"/idMaterialDescription/value\",\r\n\t\t\t\tprocessor: m\r\n\t\t\t});\r\n\t\t\to.registerMessageProcessor(m);\r\n\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueStateText(s);\r\n\t\t\to.addMessages(b);\r\n\t\t},\r\n\t\thandleAddtoCart: function() {\r\n\t\t\tthis.supplierName = \"\";\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tvar d;\r\n\t\t\t\tvar o = true;\r\n\t\t\t\tif (o) {\r\n\t\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\t\tvar p = this.getServiceCallParameter(this.successhandleAddtoCartPress, this.serviceFail);\r\n\t\t\t\t\tthis.dataManager.createNewItem(p, this.getHeaderDraftKey(), this.getPurchaseRequisition(), d);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar d = this.getView().byId(\"simpleForm\").getBindingContext().getObject({\r\n\t\t\t\t\tselect: \"*\"\r\n\t\t\t\t});\r\n\t\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\t\tvar o = this.ExternalPurchasing.validateMatAndText(this);\r\n\t\t\t\t\tif (!o) {\r\n\t\t\t\t\t\tthis.setTextError();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length > 0) {\r\n\t\t\t\t\t\t\td = this.ExternalPurchasing.updateModel(this, d);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!(this.Fixedsupplier1 === undefined)) {\r\n\t\t\t\t\t\td.FixedSupplier = this.Fixedsupplier1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!(this.Supplier1 === undefined)) {\r\n\t\t\t\t\t\td.Supplier = this.Supplier1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.itemType === 1) {\r\n\t\t\t\t\t\td.ProductType = '2';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\td.ProductType = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (d.PurchasingDocumentItemCategory == \"9\") {\r\n\t\t\t\t\t\td.PurchasingDocumentItemCategory = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.bFlag) {\r\n\t\t\t\t\t\td.FixedSupplier = \"\";\r\n\t\t\t\t\t\td.Supplier = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (d.PurchaseRequisitionItemText == '' || d.PurchaseRequisitionItemText === null) {\r\n\t\t\t\t\t\tif (this.getView().byId(\"idMaterialDescription\").getValue().length === 0) {\r\n\t\t\t\t\t\t\tthis.setTextError();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar o = false;\r\n\t\t\t\tif (this.unitOfMeasureValidation() && this.deliveryDateValidation() && this.matGrpValidation() && this.quantityValidation()) {\r\n\t\t\t\t\tif (this.priceValidation()) {\r\n\t\t\t\t\t\to = true;\r\n\t\t\t\t\t} else if (this.descvalidation() && this.priceValidation()) {\r\n\t\t\t\t\t\to = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (o) {\r\n\t\t\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\t\t\tvar p = this.getServiceCallParameter(this.successhandleAddtoCartPress, this.serviceFail);\r\n\t\t\t\t\t\tthis.dataManager.createNewItem(p, this.getHeaderDraftKey(), this.getPurchaseRequisition(), d);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateHeader: function() {\r\n\t\t\tvar p = this.getServiceCallParameter(this.updateHeaderSuccess, this.serviceFail);\r\n\t\t\tthis.dataManager.getHeader(p, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\t\t},\r\n\t\tupdateHeaderSuccess: function() {\r\n\t\t\tthis.dataManager.updateHeaderSuccess(this.getView().byId('btnCart'), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n\t\t\t\t\"'\", false\r\n\t\t\t]);\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tvar t = this;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tt.firstMiniCartOpen();\r\n\t\t\t}, 2000);\r\n\t\t\tthis.retrieveMessages();\r\n\t\t},\r\n\t\tsuccesshandleAddtoCartPress: function(d, h) {\r\n\t\t\tthis.storeMessages(d, h);\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.getView().byId(\"btnCart\").setText(\"1\");\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateHeader();\r\n\t\t\t\t/* Added by con4PAS */\r\n\t\t\t\tthis.updateAttachItemGuid(d,h);\r\n\t\t\t\tthis.getModel(\"Attachment\").setData(null);\r\n\t\t\t\tthis.getModel(\"Attachment\").refresh();\r\n\t\t\t\t/* Added by con4PAS */\r\n\t\t\t\tvar p = {\r\n\t\t\t\t\t\"success\": jQuery.proxy(this.successOnUpdate, this)\r\n\t\t\t\t};\r\n\t\t\t\tfor (var i = 0; i < this.batch_create.length; i++) {\r\n\t\t\t\t\tthis.counter = i;\r\n\t\t\t\t\tthis.dataManager.createNotes(this.getServiceCallParameter(this.successOnUpdate, this.errorServiceFail), this.getAppModel(), d.DraftUUID,\r\n\t\t\t\t\t\tthis.getPurchaseRequisition(), this.batch_create[i], d.PurchaseRequisitionItem);\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"textArea\").setValue(\"\");\r\n\t\t\t\tfor (i = 0; i < this.getView().byId(\"idIconTabBarNoIcons\").getItems().length; i++) {\r\n\t\t\t\t\tthis.getView().byId(\"idIconTabBarNoIcons\").getItems()[i].getContent()[0].setValue(\" \");\r\n\t\t\t\t}\r\n\t\t\t\tthis.Fixedsupplier1 = \"\";\r\n\t\t\t\tthis.Supplier1 = \"\";\r\n\t\t\t\tthis.onUnAssign();\r\n\t\t\t\tthis.bFlag = false;\r\n\t\t\t\tvar b = this.dummy.PurchaseRequisitionPrice;\r\n\t\t\t\tvar q = this.dummy.RequestedQuantity;\r\n\t\t\t\tvar c = this.dummy.DeliveryDate;\r\n\t\t\t\tvar m = this.dummy.MaterialGroup;\r\n\t\t\t\tthis.oModel.resetChanges();\r\n\t\t\t\tthis.oModel.checkUpdate();\r\n\t\t\t\tthis._loadattachments();\r\n\t\t\t\tvar P = this.getServiceCallParameter(function() {\r\n\t\t\t\t\tthis.makeJSONModel(this.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n\t\t\t\t}, this.serviceFail);\r\n\t\t\t\tthis.dataManager.readDummy(P, ['', \"00000\", \"guid'00000000-0000-0000-0000-000000000000'\", false]);\r\n\t\t\t\tthis._notes = [];\r\n\t\t\t\tthis.batch_create = [];\r\n\t\t\t\tthis.itemType = 0;\r\n\t\t\t\tthis.handleServiceLineDisplay(0);\r\n\t\t\t\tthis.setServiceLineFieldsBlankValues();\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDate\").setValue(c);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessOnUpdate: function() {\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n\t\t\tif (this.counter === (this.batch_create.length - 1)) {\r\n\t\t\t\tthis.batch_create = [];\r\n\t\t\t}\r\n\t\t\tthis.retrieveMessages();\r\n\t\t},\r\n\t\tonExit: function() {\r\n\t\t\tif (this._oPopover) {\r\n\t\t\t\tthis._oPopover.destroy();\r\n\t\t\t\tthis._oPopover = null;\r\n\t\t\t}\r\n\t\t\tif (this._oMiniCart) {\r\n\t\t\t\tthis._oMiniCart.destroy();\r\n\t\t\t\tthis._oMiniCart = null;\r\n\t\t\t}\r\n\t\t\tif (this._oContent) {\r\n\t\t\t\tthis._oContent.destroy();\r\n\t\t\t\tthis._oContent = null;\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().byId(\"attachmentsrv.Freetext\")) {\r\n\t\t\t\tsap.ui.getCore().byId(\"attachmentsrv.ItemDetails\").destroy(true);\r\n\t\t\t}\r\n\t\t\tif (this.productList) {\r\n\t\t\t\tthis.productList.destroy();\r\n\t\t\t\tthis.productList = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBack: function() {\r\n\t\t\tthis.oModel.refresh(true);\r\n\t\t\tthis.oModel.updateBindings();\r\n\t\t\tif (this._oPopover) {\r\n\t\t\t\tthis._oPopover.destroy();\r\n\t\t\t\tthis._oPopover = null;\r\n\t\t\t}\r\n\t\t\tif (this._oMiniCart) {\r\n\t\t\t\tthis._oMiniCart.destroy();\r\n\t\t\t\tthis._oMiniCart = null;\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().byId(\"attachmentsrv.FreeText\")) {\r\n\t\t\t\tsap.ui.getCore().byId(\"attachmentsrv.FreeText\").destroy(true);\r\n\t\t\t}\r\n\t\t\twindow.history.go(-1);\r\n\t\t},\r\n\t\tgetExtMaterialDetails: function() {\r\n\t\t\tthis.ExternalPurchasing.getExtMaterialDetails(this);\r\n\t\t},\r\n\t\tmaterialValidation: function() {\r\n\t\t\tvar m = this.getView().byId(\"idMaterial\").getValue();\r\n\t\t\tif ((m === \"\" || m === null) && this.getView().byId(\"idMaterialDescription\").getEditable() === true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.servicePerf = this.getView().byId(\"idServicePerformer\").getValue();\r\n\t\t\tthis.validityPeriod = this.getView().byId(\"idDeliveryDateRange\").getValue();\r\n\t\t\tthis.validityPeriodStart = this.getView().byId(\"idDeliveryDateRange\").getDateValue();\r\n\t\t\tthis.validityPeriodEnd = this.getView().byId(\"idDeliveryDateRange\").getSecondDateValue();\r\n\t\t\tthis.oModel.resetChanges();\r\n\t\t\tif (m.trim() === \"\" || m === null) {\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\tvar t = this;\r\n\t\t\t\tthis.dataManager.getMaterialPrice(this.getServiceCallParameter(function() {\r\n\t\t\t\t\tt.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n\t\t\t\t\tt.getView().byId(\"idDeliveryDateRange\").setValue(\"\");\r\n\t\t\t\t\tt.getView().setBusy(false);\r\n\t\t\t\t}, this.serviceFail), m);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\tthis.dataManager.getMaterialPrice(this.getServiceCallParameter(this.successMaterialPrice, this.serviceFail), m);\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessMaterialGroup: function(d) {\r\n\t\t\tvar p = d.results ? d.results[0] : d;\r\n\t\t\tthis.materialgroupText = p.MaterialGroup_Text;\r\n\t\t\tif (!this.materialText) {\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroupText\").setValue(this.materialgroupText);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessMaterialPrice: function(d) {\r\n\t\t\tvar p = d.results ? d.results[0] : d;\r\n\t\t\tthis.getView().byId(\"idServicePerformer\").setValue(this.servicePerf);\r\n\t\t\tthis.getView().byId(\"idDeliveryDateRange\").setValue(this.validityPeriod);\r\n\t\t\tvar b = this.oModel.oData[\r\n\t\t\t\t\"C_Sspprmaint_Itm(PurchaseRequisition='',PurchaseRequisitionItem='00000',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=false)\"\r\n\t\t\t];\r\n\t\t\tb.PerformancePeriodEndDate = this.validityPeriodEnd;\r\n\t\t\tb.PerformancePeriodStartDate = this.validityPeriodStart;\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t},\r\n\t\tdeliveryDateValidation: function() {\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tunitOfMeasureValidation: function() {\r\n\t\t\tvar u = this.getView().byId(\"quantity\").getUnitOfMeasure();\r\n\t\t\tif (!u) {\r\n\t\t\t\tthis.getView().byId(\"quantity\").getInnerControls()[1].setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"quantity\").getInnerControls()[1].setValueStateText(this.getResourceBundle().getText(\"unitError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquantityValidation: function() {\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tvar w = true;\r\n\t\t\t\tif (w) {\r\n\t\t\t\t\tvar q = \"abc\";\r\n\t\t\t\t\tw = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar q = 12;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar q = this.getView().byId(\"quantity\").getValue();\r\n\t\t\t}\r\n\t\t\tvar n = \"NaN\";\r\n\t\t\tif (Number(parseFloat(sap.ui.core.format.NumberFormat.getFloatInstance().parse(q))) == n) {\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tq = q.split('.').join('');\r\n\t\t\tq = q.split(',').join('');\r\n\t\t\tif (q.length > 13) {\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tq = Number(q);\r\n\t\t\tif (q <= 0 || isNaN(q)) {\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdescvalidation: function() {\r\n\t\t\tvar D = this.getView().byId(\"idMaterialDescription\").getValue();\r\n\t\t\tvar m = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar o = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar s = this.getResourceBundle().getText(\"MESSAGE_ERROR_SHORT_TEXT\");\r\n\t\t\tvar b = new sap.ui.core.message.Message({\r\n\t\t\t\tid: \"idMatValid\",\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\ttarget: \"/idMaterialDescription/value\",\r\n\t\t\t\tprocessor: m\r\n\t\t\t});\r\n\t\t\to.registerMessageProcessor(m);\r\n\t\t\tif (D === \"\" || D === \" \" || D === null) {\r\n\t\t\t\tvar c = this.materialValidation();\r\n\t\t\t\tif (!c) {\r\n\t\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueStateText(s);\r\n\t\t\t\t\to.addMessages(b);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (D.length > this.getView().byId(\"idMaterialDescription\").getProperty('maxLength')) {\r\n\t\t\t\tthis.removeMessage(\"/idMaterialDescription/value\", \"idMatValid\");\r\n\t\t\t\tthis.removeMessage(\"/idMaterialDescription/value\", \"idShortTextEmpty\");\r\n\t\t\t} else {\r\n\t\t\t\to.removeAllMessages();\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessOnMatGroup: function(d) {},\r\n\t\tmatGrpValidation: function(e) {\r\n\t\t\tvar b = this.getView().byId(\"idMaterialGroup\").getValue();\r\n\t\t\tvar r = /^[a-z\\d\\s\\:._-]+$/i;\r\n\t\t\tif (!r.test(b) || b === \"\" || b === \" \" || b === null) {\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroup\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idMaterialGroup\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tthis.dataManager.getMaterialGroupDescription(this.getServiceCallParameter(this.successMaterialGroup, this.serviceFail), b);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tpriceValidation: function() {\r\n\t\t\tvar p = this.getView().byId(\"price\").getValue();\r\n\t\t\tp = p.split('.').join('');\r\n\t\t\tp = p.split(',').join('');\r\n\t\t\tp = p.split(' ').join('');\r\n\t\t\tp = Number(p);\r\n\t\t\tif (p < 0 || isNaN(p)) {\r\n\t\t\t\tthis.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"price\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (!this.isMaterial()) {\r\n\t\t\t\tif (p === 0) {\r\n\t\t\t\t\tthis.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tthis.getView().byId(\"price\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisMaterial: function() {\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tvar m = \"abc\";\r\n\t\t\t} else {\r\n\t\t\t\tvar m = this.getView().byId(\"idMaterial\").getValue();\r\n\t\t\t}\r\n\t\t\tif (m.trim() === \"\" || m === null) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSupplier: function() {\r\n\t\t\tif (!this._oContent) {\r\n\t\t\t\tthis._oContent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.Supplier\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oContent);\r\n\t\t\t}\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValue(\"SUPPLIER 1\");\r\n\t\t\t\tthis._oContent.getButtons()[0].setEnabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis._oContent.getButtons()[0].setEnabled(false);\r\n\t\t\t}\r\n\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oContent);\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\tthis._oContent.open();\r\n\t\t},\r\n\t\tonUnAssign: function() {\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\tvar c = new sap.m.List({\r\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"supplier\")\r\n\t\t\t});\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(c);\r\n\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(true);\r\n\t\t\tthis.bFlag = true;\r\n\t\t},\r\n\t\tonCancelSupplier: function() {\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n\t\t\tthis._oContent.close();\r\n\t\t},\r\n\t\tonSelect: function(e) {\r\n\t\t\tvar k = e.getParameter(\"selectedKey\");\r\n\t\t\tfor (var i = 0; i < this._notes.length; i++) {\r\n\t\t\t\tif (this._notes[i].DocumentTextForEdit === k || this._notes[i].DocumentText === k) {\r\n\t\t\t\t\te.getParameters().item.getContent()[0].setValue(this._notes[i].PurReqnItemLongtext);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.getParameters().item.getContent()[0].setValue(\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChange: function(e) {\r\n\t\t\tvar k = e.getSource().getBindingContext().getProperty(\"DocumentText\");\r\n\t\t\tvar t = e.getSource().getValue();\r\n\t\t\tvar b = this._notes.map(function(x) {\r\n\t\t\t\treturn x.DocumentTextForEdit;\r\n\t\t\t}).indexOf(k);\r\n\t\t\tvar v = this.getView().byId(\"price\").getValue();\r\n\t\t\tvar c = v.replace(/,/g, \"\");\r\n\t\t\tc = Number(c);\r\n\t\t\tif (isNaN(c)) {\r\n\t\t\t\tthis.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t}\r\n\t\t\tif (b != '-1') {\r\n\t\t\t\tthis._notes[b].PurReqnItemLongtext = t;\r\n\t\t\t\tvar d = this.batch_update.map(function(x) {\r\n\t\t\t\t\treturn x.DocumentTextForEdit;\r\n\t\t\t\t}).indexOf(k);\r\n\t\t\t\tif (d != '-1') {\r\n\t\t\t\t\tthis.batch_update[d].PurReqnItemLongtext = t;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.batch_update.push({\r\n\t\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\t\tDraftUUID: this._notes[b].DraftUUID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._notes.push({\r\n\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\tParentDraftUUID: this.getItemDraftKey()\r\n\t\t\t\t});\r\n\t\t\t\tvar d = this.batch_create.map(function(x) {\r\n\t\t\t\t\treturn x.DocumentTextForEdit;\r\n\t\t\t\t}).indexOf(k);\r\n\t\t\t\tif (d != '-1') {\r\n\t\t\t\t\tthis.batch_create[d].PurReqnItemLongtext = t;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.batch_create.push({\r\n\t\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\t\tParentDraftUUID: this.getItemDraftKey()\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tformartServiceTypeVisiblity: function(p) {\r\n\t\t\tvar v = false;\r\n\t\t\tvar k = 0;\r\n\t\t\tif (this.itemType != undefined) {\r\n\t\t\t\tk = this.itemType;\r\n\t\t\t} else {\r\n\t\t\t\tvar s = this.getView().byId(\"productTypeSelect\");\r\n\t\t\t\tif (s != undefined) {\r\n\t\t\t\t\tk = parseInt(s.getSelectedKey());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (k == 1) {\r\n\t\t\t\tv = true;\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t},\r\n\t\tformartVisiblityDateSelector: function(p) {\r\n\t\t\tvar v = true;\r\n\t\t\tvar k = 0;\r\n\t\t\tif (this.itemType != undefined) {\r\n\t\t\t\tk = this.itemType;\r\n\t\t\t} else {\r\n\t\t\t\tvar s = this.getView().byId(\"productTypeSelect\");\r\n\t\t\t\tif (s != undefined) {\r\n\t\t\t\t\tk = parseInt(s.getSelectedKey());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (k == 1) {\r\n\t\t\t\tv = false;\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t},\r\n\t\tDateRangeValidation: function(e) {\r\n\t\t\tvar d = e.getSource();\r\n\t\t\tvar i = e.getParameter('valid');\r\n\t\t\tif (i === true) {\r\n\t\t\t\tthis.removeMessage(\"/idDeliveryDateRange/value\", \"dateRangeNotCorrect\");\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\tvar F = e.getSource().getDateValue();\r\n\t\t\t\tvar c = new Date(Date.UTC(F.getFullYear(), F.getMonth(), F.getDate()));\r\n\t\t\t\tvar t = e.getSource().getSecondDateValue();\r\n\t\t\t\tvar C = new Date(Date.UTC(t.getFullYear(), t.getMonth(), t.getDate()));\r\n\t\t\t\tvar p = d.getBinding(\"dateValue\");\r\n\t\t\t\tp.setValue(c);\r\n\t\t\t\tvar P = d.getBinding(\"secondDateValue\");\r\n\t\t\t\tP.setValue(C);\r\n\t\t\t} else {\r\n\t\t\t\tthis.raiseMessage(\"/idDeliveryDateRange/value\", \"dateRangeNotCorrect\", sap.ui.core.MessageType.Error,\r\n\t\t\t\t\t\"MESSAGE_ERROR_DELIVERY_DATE\");\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectionChanged: function(e) {\r\n\t\t\tvar s = e.getParameter('selectedItem').getKey();\r\n\t\t\tthis.itemType = parseInt(s);\r\n\t\t\tif (this.itemType == 1) {\r\n\t\t\t\tvar c = e.getSource().getBindingContext();\r\n\t\t\t\te.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"2\", c);\r\n\t\t\t} else {\r\n\t\t\t\tvar c = e.getSource().getBindingContext();\r\n\t\t\t\te.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"\", c);\r\n\t\t\t}\r\n\t\t\tthis.handleServiceLineDisplay(this.itemType);\r\n\t\t},\r\n\t\thandleServiceLineDisplay: function(i) {\r\n\t\t\tif (i === 1) {\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setShowLabel(true);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRange\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDate\").setVisible(false);\r\n\t\t\t} else {\r\n\t\t\t\tvar s = this.getView().byId(\"idServicePerformer\").getValue();\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRange\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDate\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDate\").setShowLabel(true);\r\n\t\t\t\tif (s) {\r\n\t\t\t\t\tthis.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n\t\t\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(true);\r\n\t\t\t\t\tif (this.productList) {\r\n\t\t\t\t\t\tthis.productList.destroy();\r\n\t\t\t\t\t\tthis.productList = null;\r\n\t\t\t\t\t\tvar c = new sap.m.List({\r\n\t\t\t\t\t\t\tnoDataText: this.getResourceBundle().getText(\"supplier\")\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(c);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetServiceLineFieldsBlankValues: function() {\r\n\t\t\tthis.getView().byId(\"productTypeSelect\").setSelectedKey('0');\r\n\t\t\tthis.getView().byId(\"productTypeSelect\").getBindingContext().getObject().ProductType = \"\";\r\n\t\t\tthis.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n\t\t},\r\n\t\traiseMessage: function(m, o, b, c) {\r\n\t\t\tvar d = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar e = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar s = this.getResourceBundle().getText(c);\r\n\t\t\tvar g = [];\r\n\t\t\tvar h = new sap.ui.core.message.Message({\r\n\t\t\t\tid: o,\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: b,\r\n\t\t\t\ttarget: m,\r\n\t\t\t\tprocessor: d\r\n\t\t\t});\r\n\t\t\te.registerMessageProcessor(d);\r\n\t\t\tg = this.isMessageAvailable(m, o);\r\n\t\t\tif (g.length == 0) {\r\n\t\t\t\te.addMessages(h);\r\n\t\t\t}\r\n\t\t},\r\n\t\tisMessageAvailable: function(m, o) {\r\n\t\t\tvar b = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar c = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar d = [];\r\n\t\t\tif (c.mMessages != undefined) {\r\n\t\t\t\tif (c.mMessages[m] != undefined) {\r\n\t\t\t\t\tvar e = c.mMessages[m];\r\n\t\t\t\t\tif (e.length > 0) {\r\n\t\t\t\t\t\tfor (var i = 0; i < e.length; i++) {\r\n\t\t\t\t\t\t\tif (e[i].id == o) {\r\n\t\t\t\t\t\t\t\td.push(e[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tremoveMessage: function(m, o) {\r\n\t\t\tvar b = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar c = [];\r\n\t\t\tc = this.isMessageAvailable(m, o);\r\n\t\t\tif (c.length > 0) {\r\n\t\t\t\tb.removeMessages(c);\r\n\t\t\t}\r\n\t\t},\r\n\t\tservicePerformerChange: function(e) {\r\n\t\t\tvar s = this.getView().byId(\"idServicePerformer\").getValue();\r\n\t\t\tif (s) {\r\n\t\t\t\tvar m = this.getModel();\r\n\t\t\t\tm.read(\"/C_MM_ServicePerformerValueHelp\", {\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\"$filter\": \"ServicePerformer eq '\" + s + \"'\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: jQuery.proxy(this.supplierReadSuccess, this),\r\n\t\t\t\t\terror: jQuery.proxy(this.supplierReadFailure, this)\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n\t\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(true);\r\n\t\t\t\tif (this.productList) {\r\n\t\t\t\t\tthis.productList.destroy();\r\n\t\t\t\t\tthis.productList = null;\r\n\t\t\t\t\tvar c = new sap.m.List({\r\n\t\t\t\t\t\tnoDataText: this.getResourceBundle().getText(\"supplier\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupplierReadSuccess: function(d) {\r\n\t\t\tif (d.results.length) {\r\n\t\t\t\tvar s = d.results[0];\r\n\t\t\t\tthis.text = \"Fixed\";\r\n\t\t\t\tthis.Fixedsupplier = s.Supplier;\r\n\t\t\t\tthis.Supplier = \"\";\r\n\t\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t\t\tif (!this.productList) {\r\n\t\t\t\t\tthis.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this.productList);\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(s.SupplierName);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(s.Supplier);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n\t\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setValueStateText(this.getResourceBundle().getText(\"servicePerformerError\"));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Freetext-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\r\n 'sap/m/MessageToast',\r\n 'sap/m/MessageBox'\r\n], function(BaseController, JSONModel, formatter, MessageToast, MessageBox) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Freetext\", {\r\n\r\n  onInit: function() {\r\n\r\n   this.oModel = this.getAppModel();\r\n   this.batch_update = [];\r\n   this.batch_create = [];\r\n   this._notes = [];\r\n   this.dummy = [];\r\n   this._oView = this.getView();\r\n   this._oComponent = sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));\r\n   this._oRouter = this._oComponent.getRouter();\r\n   var resourceBundle = this.getResourceBundle();\r\n   this.firstTime = true;\r\n   this.bFlag = false;\r\n   this._oRouter.getRoute(\"Freetext\").attachPatternMatched(this._onObjectMatched, this);\r\n\r\n  },\r\n\r\n  /**\r\n   * Setter method to set the ItemDraft Key.\r\n   * @public\r\n   * @param{draftKey}his. ItemDraft Key of the application\r\n   */\r\n\r\n  setItemDraftKey: function(itemDraftKey) {\r\n   this.itemDraftKey = itemDraftKey;\r\n  },\r\n\r\n  /**\r\n   * Getter  method to get the ItemDraft Key.\r\n   * @public\r\n   * returns ItemDraft Key {draftKey}\r\n   */\r\n  getItemDraftKey: function() {\r\n   return this.itemDraftKey;\r\n  },\r\n\r\n  /**\r\n   * Convenience method for doing a Dummy Post to get the Metadata for the Smart Fields in FreeText Screen\r\n   * @public\r\n   */\r\n\r\n  getDummyItem: function() {\r\n   var materialGroup = '01'; // this.getView().byId(\"material\").getValue(); //MaterialGroup\r\n   var description = 'DummyIgnoreThis'; // this.getView().byId(\"descrp\").getValue(); //PurchaseRequisitionItemText\r\n   var baseunit = 'EA'; //this.getView().byId(\"unit\").getValue(); //BaseUnit\r\n   var currency = 'EUR'; //this.getView().byId(\"currency\").getValue(); //PurReqnItemCurrency\r\n\r\n   var oData = {\r\n    MaterialGroup: materialGroup,\r\n    // ParentDraftUUID: this.getHeaderDraftKey(),\r\n    PurchaseRequisitionItemText: description,\r\n    BaseUnit: baseunit,\r\n    Currency: currency\r\n   };\r\n\r\n   var mParameters = this.getServiceCallParameter(this.successhandleAddtoCartPressDummy, this.serviceFail);\r\n   this.dataManager.createNewItem(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition(), oData);\r\n  },\r\n\r\n  /**\r\n   * This is Method Will be called on AttachPattern Matched (when ever we coem to this view from any other view),\r\n   * used to load different sections of the freetext Screen\r\n   * @public\r\n   */\r\n  _onObjectMatched: function(oEvent) {\r\n   if (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n    this.setSourcePage(\"FreeText\");\r\n   }\r\n\r\n   this.getView().setBusyIndicatorDelay(0);\r\n   this.getView().setBusy(true);\r\n   this.bFlag = false;\r\n   this.setHeaderDraftKey(oEvent.getParameter(\"arguments\").DraftKey);\r\n   this.setPurchaseRequisition(oEvent.getParameter(\"arguments\").PurchaseRequisition);\r\n   var mParameters = this.getServiceCallParameter(this.headerSuccess, this.serviceFail);\r\n   this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\r\n   if (!this.getTestMode()) {\r\n    this.getDummyItem();\r\n   } else {\r\n    this.successhandleAddtoCartPressDummy();\r\n   }\r\n   this.itemType = 0;\r\n   // this.bFlag = false;\r\n   if (this.getExtScenarioFlag()) {\r\n    this.getView().byId(\"productTypeSelect\").setVisible(false);\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for  upload/Viewing  the Attachments\r\n   * @public\r\n   */\r\n\r\n  _loadattachments: function() {\r\n   var self = this.getView();\r\n   // var owner = this.getOwnerComponent();\r\n   var appKey = this.getHeaderDraftKey();\r\n   appKey = appKey.replace(/-/g, \"\");\r\n   var PRMode = \"C\";\r\n   var oAttachmentComponentPromise;\r\n   // var attachmentView = self.byId(\"attachmentCompContainer\");\r\n   var that = this;\r\n\r\n   if ((oAttachmentComponentPromise !== null) && (oAttachmentComponentPromise) && (oAttachmentComponentPromise.getId() ===\r\n     \"attachmentsrv.FreeText\")) {\r\n    oAttachmentComponentPromise.refresh(PRMode, \"EBAN\", appKey);\r\n   } else {\r\n    // owner._oCompFT = sap.ui.getCore().createComponent({\r\n    //  name: \"sap.se.mi.plm.lib.attachmentservice.attachment\",\r\n    //  id: \"attachmentsrv.FreeText\",\r\n    oAttachmentComponentPromise = this.getOwnerComponent().createComponent({\r\n     usage: \"attachmentReuseComponent\",\r\n     settings: {\r\n      mode: PRMode,\r\n      objectKey: appKey,\r\n      objectType: \"EBAN\"\r\n     }\r\n    });\r\n    // oAttachmentComponentPromise.setMode(PRMode);\r\n    // oAttachmentComponentPromise.setObjectKey(appKey);\r\n    //attachmentView.setComponent(owner._oCompFT);\r\n    oAttachmentComponentPromise.then(function(successValue) {\r\n     that.byId(\"attachmentCompContainer\").setComponent(successValue);\r\n    });\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for loading the smart form with default values\r\n   * @public\r\n   */\r\n\r\n  successhandleAddtoCartPressDummy: function(oData) {\r\n   this.makeJSONModel(oData);\r\n   this.getView().setModel(this.oModel);\r\n   if (this.getTestMode()) {\r\n    this.getView().bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') +\r\n     \"(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\"\r\n    );\r\n   } else {\r\n    var draftKey = this.getDraftKey(oData, true);\r\n    this.setItemDraftKey(draftKey);\r\n\r\n    this.getView().bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') +\r\n     \"(PurchaseRequisition='\" + this.getPurchaseRequisition() + \"',PurchaseRequisitionItem='00000',DraftUUID=guid'\" +\r\n     oData.DraftUUID + \"',IsActiveEntity=\" + false + \")\");\r\n\r\n    this._loadattachments();\r\n    this.getView().setBusyIndicatorDelay(0);\r\n    this.getView().setBusy(false);\r\n    this.dummy = oData;\r\n    var oMessageManager = sap.ui.getCore().getMessageManager();\r\n    oMessageManager.removeAllMessages();\r\n\r\n    var materialGroup = this.getView().byId(\"idMaterialGroup\").getValue();\r\n    // if (materialGroup) {\r\n\r\n    //  this.dataManager.getMaterialGroupDescription(this.getServiceCallParameter(this.successMaterialGroup, this.serviceFail),\r\n    //   materialGroup);\r\n    // }\r\n\r\n   }\r\n  },\r\n\r\n  setTextError: function() {\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_SHORT_TEXT\");\r\n   var shortTextMessage = new sap.ui.core.message.Message({\r\n    id: \"idShortTextEmpty\",\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: \"/idMaterialDescription/value\",\r\n    processor: oMessageProcessor\r\n   });\r\n\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n\r\n   this.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n   this.getView().byId(\"idMaterialDescription\").setValueStateText(sMessage);\r\n   oMessageManager.addMessages(shortTextMessage);\r\n  },\r\n\r\n  /**\r\n   * Success message Toast method,  will be called when the item has been deleted successfully\r\n   * @public\r\n   */\r\n  // deleteSuccessItem: function() {\r\n  //  sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n  // },\r\n\r\n  /**\r\n   * Convenience method for adding the Items to the Purchase Requisition\r\n   * @public\r\n   * successHandler - successhandleAddtoCartPress\r\n   * errorHandler - serviceFail\r\n   * @param{successHandler} : Success Handler function callback, this is called after the service call returns SUCCESS(Status Code : 200, 201)\r\n   * @param{errorHandler} : Error handler function callback, called when service fails(Status Codes : 400, 500, 401)\r\n   */\r\n\r\n  handleAddtoCart: function() {\r\n\r\n   this.supplierName = \"\";\r\n   if (this.getTestMode()) {\r\n    var oData;\r\n    var order = true;\r\n    if (order) {\r\n     this.getView().setBusy(true);\r\n     var mParameters = this.getServiceCallParameter(this.successhandleAddtoCartPress, this.serviceFail);\r\n     this.dataManager.createNewItem(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition(), oData);\r\n    }\r\n   } else {\r\n    var oData = this.getView().byId(\"simpleForm\").getBindingContext().getObject({\r\n     select: \"*\"\r\n    });\r\n    if (this.getExtScenarioFlag()) {\r\n     var order = this.ExternalPurchasing.validateMatAndText(this);\r\n     if (!order) {\r\n      this.setTextError();\r\n      return;\r\n     } else {\r\n      if (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length > 0) {\r\n       oData = this.ExternalPurchasing.updateModel(this, oData);\r\n      }\r\n     }\r\n    } else {\r\n     if (!(this.Fixedsupplier1 === undefined)) {\r\n      oData.FixedSupplier = this.Fixedsupplier1;\r\n\r\n     }\r\n     if (!(this.Supplier1 === undefined)) {\r\n      oData.Supplier = this.Supplier1;\r\n     }\r\n     if (this.itemType === 1) {\r\n      oData.ProductType = '2';\r\n     } else {\r\n      oData.ProductType = '';\r\n     }\r\n     if (oData.PurchasingDocumentItemCategory == \"9\") {\r\n      oData.PurchasingDocumentItemCategory = \"\";\r\n     }\r\n     if (this.bFlag) {\r\n      oData.FixedSupplier = \"\";\r\n      oData.Supplier = \"\";\r\n     }\r\n     if (oData.PurchaseRequisitionItemText == '' || oData.PurchaseRequisitionItemText === null) {\r\n      //Only set the error message when the Material Description is empty\r\n      if(this.getView().byId(\"idMaterialDescription\").getValue().length === 0){\r\n       this.setTextError();\r\n      }\r\n      return;\r\n     }\r\n    }\r\n    var order = false;\r\n    if (this.unitOfMeasureValidation() && this.deliveryDateValidation() && this.matGrpValidation() && this.quantityValidation()) {\r\n     //if (this.materialValidation() && this.priceValidation()) { default changeset issue\r\n     if (this.priceValidation()) {\r\n      order = true;\r\n     } else if (this.descvalidation() && this.priceValidation()) {\r\n      order = true;\r\n     }\r\n     if (order) {\r\n      this.getView().setBusy(true);\r\n      var mParameters = this.getServiceCallParameter(this.successhandleAddtoCartPress, this.serviceFail);\r\n      this.dataManager.createNewItem(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition(), oData);\r\n     }\r\n\r\n    } else {\r\n     //            sap.ui.getCore().getMessageManager().addMessages(\"PLease fill all the Mandatory Fields\");\r\n\r\n    }\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for updating the Header Item\r\n   * @public\r\n   * successHandler - updateHeaderSuccess\r\n   * errorHandler - serviceFail\r\n   */\r\n  updateHeader: function() {\r\n   var mParameters = this.getServiceCallParameter(this.updateHeaderSuccess, this.serviceFail);\r\n   this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method for refreshing the MiniCart once Hedaer Item is updated.\r\n   * @public\r\n   */\r\n  updateHeaderSuccess: function() {\r\n   this.dataManager.updateHeaderSuccess(this.getView().byId('btnCart'), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n    \"'\", false\r\n   ]);\r\n   // this.getView().byId('btnCart').bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n   //  \"(PurchaseRequisition='\" + this.getPurchaseRequisition() + \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n   this.getView().setBusy(false);\r\n   var that = this;\r\n   setTimeout(function() {\r\n    that.firstMiniCartOpen();\r\n   }, 2000);\r\n   this.retrieveMessages();\r\n  },\r\n  /**\r\n   * This Methods is called when the  Item is Successfully added to Cart & also refreshes all the Sections\r\n   * @public\r\n   */\r\n  successhandleAddtoCartPress: function(data, headers) {\r\n   this.storeMessages(data, headers);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n   if (this.getTestMode()) {\r\n    this.getView().byId(\"btnCart\").setText(\"1\");\r\n    this.getView().setBusy(false);\r\n   } else {\r\n    this.updateHeader();\r\n    // var oDataModel_Notes = this.entityConstants.getServiceName(\"purchaseRequisition\");\r\n    // var oDataModel_Notes_Model = new sap.ui.model.odata.ODataModel(oDataModel_Notes);\r\n    var mParameters1 = {\r\n     \"success\": jQuery.proxy(this.successOnUpdate, this)\r\n    };\r\n\r\n    for (var i = 0; i < this.batch_create.length; i++) {\r\n     this.counter = i;\r\n     this.dataManager.createNotes(this.getServiceCallParameter(this.successOnUpdate, this.errorServiceFail), this.getAppModel(),\r\n      data.DraftUUID, this.getPurchaseRequisition(), this.batch_create[i], data.PurchaseRequisitionItem);\r\n    }\r\n\r\n    this.getView().byId(\"textArea\").setValue(\"\");\r\n    for (i = 0; i < this.getView().byId(\"idIconTabBarNoIcons\").getItems().length; i++) {\r\n\r\n     this.getView().byId(\"idIconTabBarNoIcons\").getItems()[i].getContent()[0].setValue(\" \");\r\n    }\r\n\r\n    this.Fixedsupplier1 = \"\";\r\n    this.Supplier1 = \"\";\r\n    this.onUnAssign();\r\n    this.bFlag = false;\r\n    var priceFloat = this.dummy.PurchaseRequisitionPrice;\r\n    var quanityFloat = this.dummy.RequestedQuantity;\r\n    var delDate = this.dummy.DeliveryDate;\r\n    var matGroup = this.dummy.MaterialGroup;\r\n    this.oModel.resetChanges();\r\n    this.oModel.checkUpdate();\r\n    this._loadattachments();\r\n    var mParameters = this.getServiceCallParameter(function() {\r\n     this.makeJSONModel(this.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n    }, this.serviceFail);\r\n    this.dataManager.readDummy(mParameters, ['', \"00000\", \"guid'00000000-0000-0000-0000-000000000000'\", false]);\r\n    // this.getView().byId(\"idMaterialDescription\").setEnabled(true);\r\n    // this.getView().byId(\"idMaterial\").setValue(this.dummy.Material);\r\n    // this.getView().byId(\"idMaterialDescription\").setValue(this.dummy.PurchaseRequisitionItemText);\r\n    // this.getView().byId(\"idMaterialDescription\").setEditable(true);\r\n    // this.getView().byId(\"idMaterialGroup\").setValue(this.dummy.MaterialGroup);\r\n    // this.getView().byId(\"idMaterialGroup\").setEditable(true);\r\n    // this.getView().byId(\"idMaterialGroupText\").setValue(this.dummy.MaterialGroup_Text);\r\n    this._notes = [];\r\n    this.batch_create = [];\r\n    this.itemType = 0;\r\n    this.handleServiceLineDisplay(0);\r\n    this.setServiceLineFieldsBlankValues();\r\n    this.getView().byId(\"idDeliveryDate\").setValue(delDate);\r\n   }\r\n\r\n   // if (headers.headers[\"sap-message\"]) {\r\n\r\n   //  var message = JSON.parse(headers.headers[\"sap-message\"]).message;\r\n   //  var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   //  var errorMessage = new sap.ui.core.message.Message({\r\n   //   message: message,\r\n   //   type: sap.ui.core.MessageType.Error\r\n   //  });\r\n   //  oMessageManager.addMessages(errorMessage);\r\n   // }\r\n\r\n  },\r\n\r\n  /**\r\n   * This Methods is called to show the Success Message Toast when  the  Item is Successfully added to Cart\r\n   * @public\r\n   */\r\n  successOnUpdate: function() {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n   if (this.counter === (this.batch_create.length - 1)) { // flush the value in the batch.create array only after the last item's note\r\n    this.batch_create = [];\r\n   }\r\n   this.retrieveMessages();\r\n  },\r\n\r\n  /**\r\n   * This Methods is called  to get the Selcted value of the Radio Button in the Freetext Smart Form to determine whethere it is a service / Product\r\n   * @public\r\n   * @param (oEvent)\r\n   */\r\n\r\n  // selctedkey: function(oEvent) {\r\n\r\n  //  this.itemType = oEvent.getParameter(\"selectedIndex\");\r\n\r\n  // },\r\n\r\n  /**\r\n   * This Methods is called  when ever oData Service Fails, it shows a Dialog box with the reson for failure\r\n   * @public\r\n   * @param (oError)\r\n   */\r\n\r\n  // failService: function(oError) {\r\n  //  var sMessage = \"\";\r\n  //  var sDetails = \"\";\r\n  //  var oDetails = null;\r\n  //  if (oError && oError.getParameters) {\r\n  //   var mParameters = oError.getParameters();\r\n  //   if (mParameters) {\r\n  //    if (mParameters.response) {\r\n  //     sMessage = mParameters.message;\r\n  //     oDetails = jQuery.parseJSON(mParameters.response.body);\r\n  //     sDetails = oDetails.error.message.value;\r\n  //    }\r\n  //   }\r\n  //  } else {\r\n  //   sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_OCCURED\");\r\n  //   sDetails = \"\";\r\n  //  }\r\n  //  sap.ca.ui.message.showMessageBox({\r\n  //   type: sap.ca.ui.message.Type.ERROR,\r\n  //   message: sMessage,\r\n  //   details: sDetails\r\n  //  });\r\n  // },\r\n\r\n  /**\r\n   * This is called to cleap up or destory the Popover/ Minicart / Fragments on Exit\r\n   * @public\r\n   */\r\n\r\n  onExit: function() {\r\n   if (this._oPopover) {\r\n    this._oPopover.destroy();\r\n    this._oPopover = null;\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n\r\n   if (this._oContent) {\r\n    this._oContent.destroy();\r\n    this._oContent = null;\r\n   }\r\n   if (sap.ui.getCore().byId(\"attachmentsrv.Freetext\")) {\r\n\r\n    sap.ui.getCore().byId(\"attachmentsrv.ItemDetails\").destroy(true);\r\n   }\r\n   if (this.productList) {\r\n    this.productList.destroy();\r\n    // since destroy is already destroying sourc eof supply instance again destroy content is not required\r\n    //  this.productList.destroyContent();\r\n    this.productList = null;\r\n   }\r\n  },\r\n\r\n  /**\r\n   * This is called to go back to the previous page in history & cleap up or destory the Popover/ Minicart / Fragments on back\r\n   * @public\r\n   */\r\n\r\n  onBack: function() {\r\n   this.oModel.refresh(true);\r\n   this.oModel.updateBindings();\r\n\r\n   if (this._oPopover) {\r\n    this._oPopover.destroy();\r\n    this._oPopover = null;\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n   if (sap.ui.getCore().byId(\"attachmentsrv.FreeText\")) {\r\n\r\n    sap.ui.getCore().byId(\"attachmentsrv.FreeText\").destroy(true);\r\n   }\r\n   window.history.go(-1);\r\n  },\r\n\r\n  /**\r\n   * Convenience Method for Validatiing the Material  field at the client side\r\n   * Sets the value state to Error if Material is blank or empty\r\n   * @public\r\n   * @returns true if it is not empty & false when it is empty\r\n   */\r\n  getExtMaterialDetails: function() {\r\n   this.ExternalPurchasing.getExtMaterialDetails(this);\r\n  },\r\n\r\n  materialValidation: function() {\r\n   var material = this.getView().byId(\"idMaterial\").getValue();\r\n   if((material === \"\" || material ===null) && this.getView().byId(\"idMaterialDescription\").getEditable() === true)\r\n    {\r\n     //Only Short Text was provided, no need to delete the entered data\r\n     return;\r\n    }\r\n   this.servicePerf = this.getView().byId(\"idServicePerformer\").getValue();\r\n   this.validityPeriod = this.getView().byId(\"idDeliveryDateRange\").getValue();\r\n   this.validityPeriodStart = this.getView().byId(\"idDeliveryDateRange\").getDateValue();\r\n   this.validityPeriodEnd = this.getView().byId(\"idDeliveryDateRange\").getSecondDateValue();\r\n   this.oModel.resetChanges();\r\n   if (material.trim() === \"\" || material === null) {\r\n    this.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n    // this.getView().byId(\"idMaterialDescription\").setEnabled(true);\r\n    // this.getView().byId(\"idMaterialDescription\").setValue(\"\");\r\n    // this.getView().byId(\"idMaterialGroup\").setEnabled(true);\r\n    // this.getView().byId(\"quantity\").setUomEditable(true);\r\n    // this.getView().byId(\"price\").setUomEditable(true);\r\n    this.getView().setBusy(true);\r\n    var that = this;\r\n    this.dataManager.getMaterialPrice(this.getServiceCallParameter(function() {\r\n     that.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n     that.getView().byId(\"idDeliveryDateRange\").setValue(\"\");\r\n     that.getView().setBusy(false);\r\n    }, this.serviceFail), material);\r\n    // this.getView().byId(\"idMaterialDescription\").setValue(\"\");\r\n    return false;\r\n   } else {\r\n    this.getView().setBusy(true);\r\n    this.dataManager.getMaterialPrice(this.getServiceCallParameter(this.successMaterialPrice, this.serviceFail), material);\r\n    // this.dataManager.getMaterialDescription(this.getServiceCallParameter(this.successMaterial, this.serviceFail), material);\r\n    // this.getView().byId(\"idMaterialDescription\").setEnabled(false);\r\n    this.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n\r\n  },\r\n  // successMaterial: function(oData) {\r\n  //  var prData = oData.results ? oData.results[0] : oData;\r\n  //  if (prData) {\r\n\r\n  //   this.materialText = prData.Material_Text;\r\n  //   // if((this.materialText)\r\n  //   // this.getView().byId(\"idMaterialDescription\").setValue(this.materialText);\r\n  //   // this.getView().byId(\"idMaterialGroup\").setValue(prData.MaterialGroup);\r\n  //   // this.getView().byId(\"idMaterialGroup\").setEnabled(false);\r\n  //   // this.matGrpValidation();\r\n  //   // this.getView().byId(\"quantity\").setUnitOfMeasure(prData.MaterialBaseUnit);\r\n  //   // this.getView().byId(\"quantity\").setUomEditable(false);\r\n  //   this.dataManager.getMaterialPrice(this.getServiceCallParameter(this.successMaterialPrice, this.serviceFail), this.getView().byId(\r\n  //    \"idMaterial\").getValue());\r\n  //  } else {\r\n  //   this.getView().setBusy(false);\r\n  //  }\r\n  // \r\n  // },\r\n  successMaterialGroup: function(oData) {\r\n   var prData = oData.results ? oData.results[0] : oData;\r\n   this.materialgroupText = prData.MaterialGroup_Text;\r\n   if (!this.materialText) {\r\n    this.getView().byId(\"idMaterialGroupText\").setValue(this.materialgroupText);\r\n   }\r\n  },\r\n  successMaterialPrice: function(oData) {\r\n   var prData = oData.results ? oData.results[0] : oData;\r\n   this.getView().byId(\"idServicePerformer\").setValue(this.servicePerf);\r\n   this.getView().byId(\"idDeliveryDateRange\").setValue(this.validityPeriod);\r\n   //WorkAround : Getting the value on the DateRange field my explicitly setting the model values\r\n   var dateModel = this.oModel.oData[\r\n    \"C_Sspprmaint_Itm(PurchaseRequisition='',PurchaseRequisitionItem='00000',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=false)\"\r\n   ];\r\n   dateModel.PerformancePeriodEndDate = this.validityPeriodEnd;\r\n   dateModel.PerformancePeriodStartDate = this.validityPeriodStart;\r\n   this.getView().setBusy(false);\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience Method for Validatiing the  Quanityt field at the client side\r\n   * Sets the value state to Error if Quantity is not gresater than Zero & Numeric\r\n   * @public\r\n   * @returns true/ false based on the above condition\r\n   */\r\n  deliveryDateValidation: function() {\r\n   return true;\r\n   // var date = this.getView().byId(\"idDeliveryDate\").getValue();\r\n   // // Check Value State of Date Picket Field.\r\n   // if (this.getView().byId(\"idDeliveryDate\").getValueState() === \"Error\" && this.itemType != 1) { //Adding itemType parameter to deliveryDateValidation() as without this, the addtoCart function failed for Service Item \r\n   //  return false;\r\n   // }\r\n   // //Check for Date Format\r\n   // var dateTemp = new Date(date);\r\n   // if (dateTemp.toString() === \"Invalid Date\" && this.itemType != 1) { //Adding itemType parameter as without this, the addtoCart function failed for Service Item \r\n   //  this.getView().byId(\"idDeliveryDate\").setValueState(sap.ui.core.ValueState.Error);\r\n   //  this.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"dateEmptyError\"));\r\n   //  return false;\r\n   // }\r\n   // //Check if date is Blank \r\n   // if ((date == \"\") && (this.itemType === 0)) {\r\n   //  this.getView().byId(\"idDeliveryDate\").setValueState(sap.ui.core.ValueState.Error);\r\n   //  this.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"dateEmptyError\"));\r\n   //  return false;\r\n   // } else {\r\n   //  return true;\r\n   // }\r\n  },\r\n  unitOfMeasureValidation: function() {\r\n   var uom = this.getView().byId(\"quantity\").getUnitOfMeasure();\r\n   if (!uom) {\r\n    this.getView().byId(\"quantity\").getInnerControls()[1].setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"quantity\").getInnerControls()[1].setValueStateText(this.getResourceBundle().getText(\"unitError\"));\r\n    return false;\r\n   } else {\r\n    return true;\r\n   }\r\n  },\r\n  quantityValidation: function() {\r\n   //Setting Qty for OPA Test as oControl.setvalue() not working for Wrong Qty & Correct Qty.\r\n   if (this.getTestMode()) {\r\n    var wrongQtyFlag = true;\r\n    if (wrongQtyFlag) {\r\n     var quantity = \"abc\";\r\n     wrongQtyFlag = false;\r\n    } else {\r\n     var quantity = 12;\r\n    }\r\n   } else {\r\n    var quantity = this.getView().byId(\"quantity\").getValue();\r\n   }\r\n   var noNumber = \"NaN\";\r\n   if (Number(parseFloat(sap.ui.core.format.NumberFormat.getFloatInstance().parse(quantity))) == noNumber) {\r\n    //if (Number.isNaN(sap.ui.core.format.NumberFormat.getFloatInstance().parse(quantity))) {\r\n    this.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    return false;\r\n   }\r\n   /*if (this.getView().byId(\"quantity\").getValueState() == 'Error') {\r\n    this.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n    return false;\r\n   }*/\r\n   quantity = quantity.split('.').join('');\r\n   quantity = quantity.split(',').join('');\r\n   if (quantity.length > 13) {\r\n    this.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    return false;\r\n   }\r\n   quantity = Number(quantity);\r\n   if (quantity <= 0 || isNaN(quantity)) {\r\n    this.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"quantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    return false;\r\n   } else {\r\n    this.getView().byId(\"quantity\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience Method for Validatiing the  Short Description  field at the client side\r\n   * Sets the value state to Error if Short Description field if it is empty\r\n   * @public\r\n   * @returns true/ false based on the above condition\r\n   */\r\n\r\n  descvalidation: function() {\r\n\r\n   var Description = this.getView().byId(\"idMaterialDescription\").getValue();\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_SHORT_TEXT\");\r\n\r\n   /*   if (Description) {\r\n       this.getAppModel().callFunction(\"/GetmatgroupTexts\", {\r\n        urlParameters: {\r\n         \"ItemText\": Description\r\n        },\r\n        \"success\": jQuery.proxy(this.successOnMatGroup, this),\r\n        \"error\": function() {},\r\n        method: \"GET\"\r\n       });\r\n\r\n      }*/\r\n   var shortTextMessage = new sap.ui.core.message.Message({\r\n    id: \"idMatValid\",\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: \"/idMaterialDescription/value\",\r\n    processor: oMessageProcessor\r\n   });\r\n\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n   if (Description === \"\" || Description === \" \" || Description === null) {\r\n    var matnr = this.materialValidation();\r\n    if (!matnr) {\r\n     this.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n     this.getView().byId(\"idMaterialDescription\").setValueStateText(sMessage);\r\n     oMessageManager.addMessages(shortTextMessage);\r\n    }\r\n\r\n    return false;\r\n   } else if(Description.length > this.getView().byId(\"idMaterialDescription\").getProperty('maxLength')){\r\n     this.removeMessage(\"/idMaterialDescription/value\", \"idMatValid\");\r\n     this.removeMessage(\"/idMaterialDescription/value\", \"idShortTextEmpty\");\r\n   } else {\r\n    oMessageManager.removeAllMessages();\r\n    this.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n\r\n  },\r\n\r\n  successOnMatGroup: function(oData) {\r\n   /*      this.oModel;\r\n         if (!this._oDialog) {\r\n          this.oModel = new sap.ui.model.json.JSONModel();\r\n          this._oDialog = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.fragment.MaterialGroupTexts\", this);\r\n          this.getView().addDependent(this._oDialog);\r\n         }\r\n         this.oModel.setData(oData);\r\n         this._oDialog.setModel(this.oModel);\r\n         this._oDialog.open();\r\n      */\r\n  },\r\n\r\n  /* handleSearch: function(oEvent) {\r\n    var sValue = oEvent.getParameter(\"value\");\r\n    var oFilter = new sap.ui.model.Filter(\"ShortText\", sap.ui.model.FilterOperator.Contains, sValue);\r\n    var oBinding = oEvent.getSource().getBinding(\"items\");\r\n    oBinding.filter([oFilter]);\r\n   },\r\n\r\n   handleMatgroup: function(oEvent) {\r\n    //get selected line in popup\r\n    var aContext = oEvent.getParameter(\"selectedContexts\");\r\n    var oBinding = oEvent.getSource().getBinding(\"items\");\r\n    //get object of selected line which contains the parameters selected\r\n    var selLine = aContext.map(function(oContext) {\r\n     return oContext.getObject()\r\n    });\r\n\r\n    this.getView().byId(\"idMaterialGroup\").setValue(selLine[0].MatGroup);\r\n    this.getView().byId(\"idMaterialGroupText\").setValue(selLine[0].ShortText);\r\n   },*/\r\n  /**\r\n   * Convenience Method for Validatiing the  Material Group  field at the client side\r\n   * Sets the value state to Error if Material Group field  is not an alapha numeric character\r\n   * @public\r\n   * @returns true/ false based on the above condition\r\n   */\r\n  // fillmatgroup: function(oEvent) {\r\n  //  var aContext = oEvent.getParameter(\"selectedContexts\");\r\n  //  var oBinding = oEvent.getSource().getBinding(\"items\");\r\n  //  //get object of selected line which contains the parameters selected\r\n  //  var selLine = aContext.map(function(oContext) {\r\n  //   return oContext.getObject();\r\n  //  });\r\n  //  this.getView().byId(\"idMaterialGroup\").setValue(selLine[0].MatGroup);\r\n  //  this.getView().byId(\"idMaterialGroupText\").setValue(selLine[0].ShortText);\r\n  // },\r\n  matGrpValidation: function(oEvent) {\r\n\r\n   var MaterialGrp = this.getView().byId(\"idMaterialGroup\").getValue();\r\n   var regex = /^[a-z\\d\\s\\:._-]+$/i; \r\n\r\n   if (!regex.test(MaterialGrp) || MaterialGrp === \"\" || MaterialGrp === \" \" || MaterialGrp === null) {\r\n\r\n    this.getView().byId(\"idMaterialGroup\").setValueState(sap.ui.core.ValueState.Error);\r\n\r\n    return false;\r\n   } else {\r\n    this.getView().byId(\"idMaterialGroup\").setValueState(sap.ui.core.ValueState.None);\r\n    this.dataManager.getMaterialGroupDescription(this.getServiceCallParameter(this.successMaterialGroup, this.serviceFail),\r\n     MaterialGrp);\r\n    return true;\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience Method for Validatiing the  Price field at the client side\r\n   * Sets the value state to Error if Price is not gresater than Zero & Numeric\r\n   * @public\r\n   * @returns true/ false based on the above condition\r\n   */\r\n\r\n  priceValidation: function() {\r\n\r\n   var price = this.getView().byId(\"price\").getValue();\r\n   price = price.split('.').join('');\r\n   price = price.split(',').join('');\r\n   price = price.split(' ').join('');\r\n   price = Number(price);\r\n   if (price < 0 || isNaN(price)) {\r\n    this.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(\"price\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n    return false;\r\n   } else if (!this.isMaterial()) {\r\n    if (price === 0) {\r\n     this.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n     this.getView().byId(\"price\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n     return false;\r\n    } else {\r\n     return true;\r\n    }\r\n   } else {\r\n    this.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.None);\r\n    return true;\r\n   }\r\n  },\r\n\r\n  isMaterial: function() {\r\n   if (this.getTestMode()) {\r\n    var material = \"abc\";\r\n   } else {\r\n    var material = this.getView().byId(\"idMaterial\").getValue();\r\n   }\r\n   if (material.trim() === \"\" || material === null) {\r\n    return false;\r\n   } else {\r\n    return true;\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience Method for Validatiing the  Delivery Date field at the client side\r\n   * Sets the value state to Error if Delivery Date is less than  current Date\r\n   * @public\r\n   * @returns true/ false based on the above condition\r\n   */\r\n\r\n  // deliveryDtValidation: function() {\r\n  //  var DeliveryDt;\r\n  //  var sMessage;\r\n\r\n  //  if (this.getView().byId(\"productTypeSelect\").getSelectedKey() === \"1\") {\r\n  //   DeliveryDt = this.getView().byId(\"idDeliveryDateRange\").getValue();\r\n  //   sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_VALIDITY_PERIOD\");\r\n  //  } else {\r\n  //   DeliveryDt = this.getView().byId(\"idDeliveryDate\").getValue();\r\n  //   sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_DELIVERY_DATE\");\r\n  //  }\r\n\r\n  //  var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n  //  var oMessageManager = sap.ui.getCore().getMessageManager();\r\n  //  if (!DeliveryDt) {\r\n  //   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n  //   var deliveryDateMessage = new sap.ui.core.message.Message({\r\n  //    message: sMessage,\r\n  //    type: sap.ui.core.MessageType.Error,\r\n  //    target: \"/idDeliveryDate/value\",\r\n  //    processor: oMessageProcessor\r\n  //   });\r\n  //   oMessageManager.addMessages(deliveryDateMessage);\r\n  //   if (this.getView().byId(\"productTypeSelect\").getSelectedKey() === \"1\") {\r\n\r\n  //    this.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.Error);\r\n  //   } else {\r\n  //    this.getView().byId(\"idDeliveryDate\").setValueState(sap.ui.core.ValueState.Error);\r\n  //   }\r\n  //   return false;\r\n\r\n  //  } else {\r\n  //   oMessageManager.removeAllMessages();\r\n  //   this.getView().byId(\"idDeliveryDate\").setValueState(sap.ui.core.ValueState.None);\r\n  //   this.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.None);\r\n  //   return true;\r\n  //  }\r\n  // },\r\n\r\n  onSupplier: function() {\r\n   if (!this._oContent) {\r\n\r\n    this._oContent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.Supplier\", this);\r\n    this.getView().addDependent(this._oContent);\r\n\r\n   }\r\n\r\n   sap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n   if (this.getTestMode()) {\r\n    sap.ui.getCore().byId(\"supplier\").setValue(\"SUPPLIER 1\");\r\n    this._oContent.getButtons()[0].setEnabled(true);\r\n    // sap.ui.getCore().byId(\"supplier\").fireChange();\r\n   } else {\r\n    this._oContent.getButtons()[0].setEnabled(false);\r\n   }\r\n   jQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oContent);\r\n   sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.None);\r\n   // if(this.getExtScenarioFlag()){\r\n   //  sap.ui.getCore().byId(\"supplier\").setShowValueHelp(false);\r\n   //  sap.ui.getCore().byId(\"supplier\").setShowSuggestion(false);\r\n   // }\r\n   this._oContent.open();\r\n  },\r\n  onUnAssign: function() {\r\n   this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n   var content = new sap.m.List({\r\n    noDataText: this.getResourceBundle().getText(\"supplier\")\r\n   });\r\n\r\n   this.getView().byId(\"sourceOfSupply\").addContent(content);\r\n   this.getView().byId(\"addSupplier1\").setVisible(true);\r\n   this.bFlag = true;\r\n  },\r\n\r\n  onCancelSupplier: function() {\r\n   sap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n   this._oContent.close();\r\n  },\r\n  onSelect: function(oEvent) {\r\n   var sKey = oEvent.getParameter(\"selectedKey\");\r\n   for (var i = 0; i < this._notes.length; i++) {\r\n    if (this._notes[i].DocumentTextForEdit === sKey || this._notes[i].DocumentText === sKey) {\r\n     oEvent.getParameters().item.getContent()[0].setValue(this._notes[i].PurReqnItemLongtext);\r\n\r\n     break;\r\n\r\n    } else {\r\n     oEvent.getParameters().item.getContent()[0].setValue(\"\");\r\n\r\n    }\r\n   }\r\n\r\n  },\r\n  onChange: function(oEvent) {\r\n   var key = oEvent.getSource().getBindingContext().getProperty(\"DocumentText\");\r\n   var text = oEvent.getSource().getValue();\r\n   var elementPos = this._notes.map(function(x) {\r\n    return x.DocumentTextForEdit;\r\n   }).indexOf(key);\r\n   var valPrice = this.getView().byId(\"price\").getValue();\r\n   var validity = valPrice.replace(/,/g, \"\");\r\n   validity = Number(validity);\r\n   if (isNaN(validity)) {\r\n    this.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.Error);\r\n   } else {\r\n    this.getView().byId(\"price\").setValueState(sap.ui.core.ValueState.None);\r\n   }\r\n\r\n   if (elementPos != '-1') {\r\n    this._notes[elementPos].PurReqnItemLongtext = text;\r\n    var elementPos_inner = this.batch_update.map(function(x) {\r\n     return x.DocumentTextForEdit;\r\n    }).indexOf(key);\r\n    if (elementPos_inner != '-1') {\r\n     this.batch_update[elementPos_inner].PurReqnItemLongtext = text;\r\n    } else {\r\n     this.batch_update.push({\r\n      DocumentText: key,\r\n      PurReqnItemLongtext: text,\r\n      DraftUUID: this._notes[elementPos].DraftUUID\r\n\r\n     });\r\n    }\r\n\r\n   } else\r\n\r\n   {\r\n\r\n    this._notes.push({\r\n     DocumentText: key,\r\n     PurReqnItemLongtext: text,\r\n     ParentDraftUUID: this.getItemDraftKey()\r\n\r\n    });\r\n    var elementPos_inner = this.batch_create.map(function(x) {\r\n     return x.DocumentTextForEdit;\r\n    }).indexOf(key);\r\n    if (elementPos_inner != '-1') {\r\n     this.batch_create[elementPos_inner].PurReqnItemLongtext = text;\r\n    } else {\r\n     this.batch_create.push({\r\n      DocumentText: key,\r\n      PurReqnItemLongtext: text,\r\n      ParentDraftUUID: this.getItemDraftKey()\r\n     });\r\n    }\r\n\r\n   }\r\n\r\n  },\r\n\r\n  formartServiceTypeVisiblity: function(productType) {\r\n   var visible = false;\r\n   var key = 0;\r\n   if (this.itemType != undefined) {\r\n    key = this.itemType;\r\n   } else {\r\n    var selectDropDown = this.getView().byId(\"productTypeSelect\");\r\n    if (selectDropDown != undefined) {\r\n     key = parseInt(selectDropDown.getSelectedKey());\r\n    }\r\n   }\r\n   if (key == 1) {\r\n    visible = true;\r\n   }\r\n   return visible;\r\n  },\r\n\r\n  formartVisiblityDateSelector: function(productType) {\r\n   var visible = true;\r\n   var key = 0;\r\n   if (this.itemType != undefined) {\r\n    key = this.itemType;\r\n   } else {\r\n    var selectDropDown = this.getView().byId(\"productTypeSelect\");\r\n    if (selectDropDown != undefined) {\r\n     key = parseInt(selectDropDown.getSelectedKey());\r\n    }\r\n   }\r\n   if (key == 1) {\r\n    visible = false;\r\n   }\r\n   return visible;\r\n  },\r\n\r\n  DateRangeValidation: function(oEvent) {\r\n   var dateRangeControl = oEvent.getSource();\r\n\r\n   var isValid = oEvent.getParameter('valid');\r\n   if (isValid === true) {\r\n    // oMessageManager.removeAllMessages();\r\n    this.removeMessage(\"/idDeliveryDateRange/value\", \"dateRangeNotCorrect\");\r\n    this.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.None);\r\n    var sFrom = oEvent.getSource().getDateValue();\r\n    var oCorrectDateFrom = new Date(Date.UTC(sFrom.getFullYear(), sFrom.getMonth(), sFrom.getDate()));\r\n\r\n    var sTo = oEvent.getSource().getSecondDateValue();\r\n    var oCorrectDateTo = new Date(Date.UTC(sTo.getFullYear(), sTo.getMonth(), sTo.getDate()));\r\n\r\n    var oPerfPeriodStart = dateRangeControl.getBinding(\"dateValue\");\r\n    oPerfPeriodStart.setValue(oCorrectDateFrom);\r\n\r\n    var oPerfPeriodEnd = dateRangeControl.getBinding(\"secondDateValue\");\r\n    oPerfPeriodEnd.setValue(oCorrectDateTo);\r\n\r\n    //dateRangeControl.getBindingContext().getObject().PerformancePeriodStartDate = oCorrectDateFrom;\r\n    //dateRangeControl.getBindingContext().getObject().PerformancePeriodEndDate = oCorrectDateTo;\r\n   } else {\r\n    this.raiseMessage(\"/idDeliveryDateRange/value\", \"dateRangeNotCorrect\", sap.ui.core.MessageType.Error,\r\n     \"MESSAGE_ERROR_DELIVERY_DATE\");\r\n    // oMessageManager.addMessages(deliveryDateMessage);\r\n    this.getView().byId(\"idDeliveryDateRange\").setValueState(sap.ui.core.ValueState.Error);\r\n   }\r\n  },\r\n  selectionChanged: function(oEvent) {\r\n   var selectedKey = oEvent.getParameter('selectedItem').getKey();\r\n   this.itemType = parseInt(selectedKey);\r\n   if (this.itemType == 1) {\r\n    //Changing the binding type as value is not being set properly into the model\r\n    var categoryControl = oEvent.getSource().getBindingContext();\r\n    oEvent.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"2\", categoryControl);\r\n   } else {\r\n    //Changing the binding type as value is not being set properly into the model\r\n    var categoryControl = oEvent.getSource().getBindingContext();\r\n    oEvent.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"\", categoryControl);\r\n   }\r\n   this.handleServiceLineDisplay(this.itemType);\r\n  },\r\n\r\n  handleServiceLineDisplay: function(itemType) {\r\n   if (itemType === 1) {\r\n    this.getView().byId(\"idServicePerformer\").setVisible(true);\r\n    this.getView().byId(\"idServicePerformer\").setShowLabel(true);\r\n    this.getView().byId(\"idDeliveryDateRange\").setVisible(true);\r\n    this.getView().byId(\"idDeliveryDate\").setVisible(false);\r\n   } else {\r\n    var servicePerformer = this.getView().byId(\"idServicePerformer\").getValue();\r\n    this.getView().byId(\"idServicePerformer\").setVisible(false);\r\n    this.getView().byId(\"idDeliveryDateRange\").setVisible(false);\r\n    this.getView().byId(\"idDeliveryDate\").setVisible(true);\r\n    this.getView().byId(\"idDeliveryDate\").setShowLabel(true);\r\n    if (servicePerformer) {\r\n     this.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n     this.getView().byId(\"addSupplier1\").setVisible(true);\r\n     // this.getView().byId(\"sourceOfSupply\").getContent()[0].setNoDataText(\"No Supplier Assigned\");\r\n     if (this.productList) {\r\n      this.productList.destroy();\r\n      // this.productList.destroyContent();\r\n      this.productList = null;\r\n      var content = new sap.m.List({\r\n       noDataText: this.getResourceBundle().getText(\"supplier\")\r\n      });\r\n\r\n      this.getView().byId(\"sourceOfSupply\").addContent(content);\r\n     }\r\n    }\r\n   }\r\n  },\r\n\r\n  setServiceLineFieldsBlankValues: function() {\r\n   this.getView().byId(\"productTypeSelect\").setSelectedKey('0');\r\n   this.getView().byId(\"productTypeSelect\").getBindingContext().getObject().ProductType = \"\";\r\n   this.getView().byId(\"idServicePerformer\").setValue(\"\");\r\n\r\n  },\r\n\r\n  raiseMessage: function(oMessageTarget, oMessageId, messageType, oMessageText) {\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var sMessage = this.getResourceBundle().getText(oMessageText);\r\n   var oMessageRaised = [];\r\n   var oMessage = new sap.ui.core.message.Message({\r\n    id: oMessageId,\r\n    message: sMessage,\r\n    type: messageType,\r\n    target: oMessageTarget,\r\n    processor: oMessageProcessor\r\n   });\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n   oMessageRaised = this.isMessageAvailable(oMessageTarget, oMessageId);\r\n   if (oMessageRaised.length == 0) {\r\n    oMessageManager.addMessages(oMessage);\r\n   }\r\n  },\r\n\r\n  isMessageAvailable: function(oMessageTarget, oMessageId) {\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var oMessageRaised = [];\r\n   if (oMessageProcessor.mMessages != undefined) {\r\n    if (oMessageProcessor.mMessages[oMessageTarget] != undefined) {\r\n     var oMessageArray = oMessageProcessor.mMessages[oMessageTarget];\r\n     // var oMessageFound = false;\r\n     if (oMessageArray.length > 0) {\r\n      for (var i = 0; i < oMessageArray.length; i++) {\r\n       if (oMessageArray[i].id == oMessageId) {\r\n        // oMessageFound = true;\r\n        oMessageRaised.push(oMessageArray[i]);\r\n       }\r\n      }\r\n     }\r\n    }\r\n   }\r\n   return oMessageRaised;\r\n  },\r\n\r\n  removeMessage: function(oMessageTarget, oMessageId) {\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var oMessageRaised = [];\r\n   oMessageRaised = this.isMessageAvailable(oMessageTarget, oMessageId);\r\n   if (oMessageRaised.length > 0) {\r\n    oMessageManager.removeMessages(oMessageRaised);\r\n   }\r\n\r\n  },\r\n\r\n  servicePerformerChange: function(oEvent) {\r\n   var servicePerf = this.getView().byId(\"idServicePerformer\").getValue();\r\n   if (servicePerf) {\r\n    var oModel = this.getModel();\r\n\r\n    oModel.read(\"/C_MM_ServicePerformerValueHelp\", {\r\n     urlParameters: {\r\n      \"$filter\": \"ServicePerformer eq '\" + servicePerf + \"'\"\r\n     },\r\n     success: jQuery.proxy(this.supplierReadSuccess, this),\r\n     error: jQuery.proxy(this.supplierReadFailure, this)\r\n    });\r\n    // var supplier = '12300001';\r\n\r\n    // oModel.read(\"/I_Supplier\", {\r\n    //  urlParameters: {\r\n    //   \"$filter\": \"Supplier eq '\" + supplier + \"'\"\r\n    //  },\r\n    //  success: jQuery.proxy(this.supplierReadSuccess, this),\r\n    //  error: jQuery.proxy(this.supplierReadFailure, this)\r\n    // });\r\n   } else {\r\n\r\n    this.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n    this.getView().byId(\"addSupplier1\").setVisible(true);\r\n    if (this.productList) {\r\n     this.productList.destroy();\r\n     // this.productList.destroyContent();\r\n     this.productList = null;\r\n     var content = new sap.m.List({\r\n      noDataText: this.getResourceBundle().getText(\"supplier\")\r\n     });\r\n\r\n     this.getView().byId(\"sourceOfSupply\").addContent(content);\r\n    }\r\n    // this.getView().byId(\"sourceOfSupply\").setNoDataText(\"No Supplier Assigned\");\r\n   }\r\n\r\n  },\r\n  supplierReadSuccess: function(data) {\r\n    if (data.results.length) {\r\n     var suppdata = data.results[0];\r\n     this.text = \"Fixed\";\r\n     this.Fixedsupplier = suppdata.Supplier;\r\n     this.Supplier = \"\";\r\n     this.Fixedsupplier1 = this.Fixedsupplier;\r\n     this.Supplier1 = this.Supplier;\r\n     if (!this.productList) {\r\n      this.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n      this.getView().addDependent(this.productList);\r\n     }\r\n\r\n     this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n     this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n      suppdata.SupplierName);\r\n\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(\r\n      suppdata\r\n      .Supplier);\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n     this.getView().byId(\"addSupplier1\").setVisible(false);\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n    } else {\r\n     this.getView().byId(\"idServicePerformer\").setValueState(sap.ui.core.ValueState.Error);\r\n     this.getView().byId(\"idServicePerformer\").setValueStateText(this.getResourceBundle().getText(\"servicePerformerError\"));\r\n    }\r\n   }\r\n   //< Added by con4PAS - Attachments\r\n   ,\r\n  onNewAttachment: function(oEvent) {\r\n   this.openNewAttachDialog();\r\n  },\r\n  openNewAttachDialog: function() {\r\n   if (!this.oI18n) {\r\n    this.oI18n = this.getView().getModel(\"i18n\").getResourceBundle();\r\n   }\r\n   if (this.attachDialog) {\r\n    this.attachDialog.destroy();\r\n    this.attachDialog = null;\r\n   }\r\n   if (!this.attachDialog) {\r\n    this.attachDialog = new sap.m.Dialog({\r\n     title: this.oI18n.getText(\"NewAttachment\"),\r\n     buttons: [\r\n      new sap.m.Button({\r\n       text: this.oI18n.getText(\"AddAttachment\"),\r\n       press: function() {\r\n        this.addNewAttach();\r\n       }.bind(this)\r\n      }),\r\n      new sap.m.Button({\r\n       text: this.oI18n.getText(\"Close\"),\r\n       press: function() {\r\n        this.attachDialog.close();\r\n        //this.attachDialog.destroy();\r\n       }.bind(this)\r\n      })\r\n     ],\r\n     content: [\r\n      new sap.ui.layout.form.SimpleForm({\r\n       content: [\r\n        new sap.m.Label({\r\n         id: \"lbl_filename\",\r\n         text: this.oI18n.getText(\"AttFileName\"),\r\n         required: true\r\n        }),\r\n        new sap.ui.unified.FileUploader({\r\n         id: \"fup_attach\",\r\n         name: \"fileUploader\",\r\n         uploadUrl: \"upload/\",\r\n         required: true,\r\n         uploadComplete: function() {\r\n          this.attachUploadComplete();\r\n         }.bind(this)\r\n        }),\r\n        new sap.m.Label({\r\n         id: \"lbl_filedesc\",\r\n         required: true,\r\n         text: this.oI18n.getText(\"AttFileDescr\")\r\n        }),\r\n        new sap.m.Input({\r\n         id: \"inp_filedesc\"\r\n        }),\r\n        new sap.m.Label({\r\n         id: \"lbl_xcontract\",\r\n         text: this.oI18n.getText(\"AttFileInt\")\r\n        }),\r\n        new sap.m.CheckBox({\r\n         id: \"chb_xcontract\"\r\n        })\r\n       ]\r\n      })\r\n     ]\r\n    });\r\n   }\r\n   this.attachDialog.open();\r\n  },\r\n  addNewAttach: function(oEvent) {\r\n   var that = this;\r\n   var oFileUploader = sap.ui.getCore().byId(\"fup_attach\");\r\n   var vFileName = oFileUploader.getValue();\r\n   var domRef = oFileUploader.getFocusDomRef();\r\n   var file = domRef.files[0];\r\n   var fileToLoad = file;\r\n   var oReader = new FileReader();\r\n   oReader.XContract = this.getFormValue(\"chb_xcontract\");\r\n   oReader.FileDescription = this.getFormValue(\"inp_filedesc\");\r\n\r\n   oReader.onload = function(oEvent) {\r\n    var base64marker = 'data:' + file.type + ';base64,';\r\n    var base64index = oEvent.target.result.indexOf(base64marker) + base64marker.length;\r\n    var contentString = oEvent.target.result.substring(base64index);\r\n\r\n    var oEntry = {};\r\n    oEntry.GUID = that.getItemDraftKey();\r\n    oEntry.AttachName = file.name;\r\n    oEntry.AttInternal = this.XContract;\r\n    oEntry.Content = contentString;\r\n    oEntry.AttDescription = this.FileDescription;\r\n    //oEntry.FileMimetype = file.type;\r\n    //oEntry.FileLength = file.size;\r\n\r\n    that.sendData(that, \"/AttachmentSet\", oEntry, \"Empty\", \"UploadErrorMsg\", that.afterUploadFunction);\r\n\r\n   };\r\n   oReader.readAsDataURL(fileToLoad);\r\n\r\n   this.attachDialog.close();\r\n   this.attachDialog.destroy();\r\n  },\r\n  attachUploadComplete: function() {\r\n   console.log(\"Upload Complete\");\r\n  },\r\n  afterUploadFunction: function(oData, oModel, that) {\r\n   var uri = \"/AttachmentSet\";\r\n   var params = {\r\n    \"$filter\": \"GUID eq '\" + that.Guid + \"'\"\r\n   };\r\n   that.readData(that, uri, params, null, that.setAttachsAfterUpload);\r\n  },\r\n  setAttachsAfterUpload: function(that, oModel) {\r\n   /*for(var i=0;i<oModel.oData.results.length;i++){\r\n     oModel.oData.results[i].AttInternal = this.parseBoolean(oModel.oData.results[i].AttInternal);\r\n   }*/\r\n   that.setModel(oModel, \"Attachment\");\r\n  },\r\n  onAttachDelete: function(oEvent) {\r\n   this.sItemIndex = oEvent.getParameter(\"listItem\").oBindingContexts.Attachment.sPath.split(\"/\")[2];\r\n   var dialog = new sap.m.Dialog({\r\n    title: this.oI18n.getText(\"Confirm\"),\r\n    type: \"Message\",\r\n    content: new sap.m.Text({\r\n     text: this.oI18n.getText(\"ConfirmDeleteSureAtt\")\r\n    }),\r\n    beginButton: new sap.m.Button({\r\n     text: this.oI18n.getText(\"Yes\"),\r\n     press: function() {\r\n      this.AttachDelete(oEvent);\r\n      dialog.close();\r\n     }.bind(this)\r\n    }),\r\n    endButton: new sap.m.Button({\r\n     text: this.oI18n.getText(\"No\"),\r\n     press: function() {\r\n      dialog.close();\r\n     }\r\n    }),\r\n    afterClose: function() {\r\n     dialog.destroy();\r\n    }\r\n   });\r\n   dialog.open();\r\n  },\r\n  AttachDelete: function() {\r\n   var oModel = this.getModel(\"Attachment\");\r\n   var oItem = oModel.oData.results[this.sItemIndex];\r\n   var uri = \"/AttachmentSet(GUID='\" + this.getHeaderDraftKey() + \"',GUIDA='\" + this.getItemDraftKey() + \"')\";\r\n   this.deleteData(this, uri, \"SuccessDeleteAttach\", \"ErrorDeleteAttach\", this.afterUploadFunction);\r\n  },\r\n  sendData: function(that, vEntitySet, oEntry, vSuccessId, vErrorId, fAfterFunction) {\r\n    var vErrorMsg = this.getResourceBundle().getText(vErrorId);\r\n    var vSuccessMsg = this.getResourceBundle().getText(vSuccessId);\r\n    var busy = new sap.m.BusyDialog();\r\n    busy.open();\r\n    setTimeout(\r\n     function() {\r\n      var url = that.getOwnerComponent().getModel().sServiceUrl;\r\n      var oModel = new sap.ui.model.odata.ODataModel(url);\r\n      oModel.create(vEntitySet, oEntry, null,\r\n       function(oData, oResponse) {\r\n        busy.close();\r\n        fAfterFunction(oData, oResponse, that);\r\n        if (vSuccessMsg != \"\") {\r\n         sap.m.MessageToast.show(vSuccessMsg);\r\n        }\r\n        //that.refreshView();\r\n       },\r\n       function(error) {\r\n        busy.close();\r\n        if (error.response) {\r\n         try {\r\n          var vMessages = $(error.response.body).find('message').first().text().match(/{(.*)}/)[0];\r\n          if (vMessages) {\r\n           that.addMsgS(that, vMessages);\r\n          } else {\r\n           var vMessage = $(error.response.body).find('message').first().text();\r\n           that.addMsg(that, \"E\", vMessage);\r\n          }\r\n         } catch (err) {\r\n          that.addMsg(that, \"E\", error.message);\r\n          that.addMsg(that, \"E\", error.response.body);\r\n         }\r\n         that.showMsg(true);\r\n        }\r\n       }\r\n      );\r\n     },\r\n     500\r\n    );\r\n   }\r\n   //> Added by con4PAS - Attachments\r\n });\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Account_Asisgnment_Detail-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/*global history*/\r\njQuery.sap.require(\"sap.ui.core.mvc.Controller\");\r\njQuery.sap.require(\"sap.m.TablePersoController\");\r\njQuery.sap.require(\"sap.ui.core.message.MessageManager\");\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\"\r\n\r\n], function(BaseController) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Account_Asisgnment_Detail\", {\r\n\r\n  onInit: function() {\r\n\r\n   var oRouter = sap.ui.core.UIComponent.getRouterFor(this);\r\n   this.oRouter = oRouter;\r\n   oRouter.getRoute(\"Account_Asisgnment_Detail\").attachPatternMatched(this._onObjectMatched, this);\r\n   // this.createAccDetailComponent();\r\n  },\r\n  onAfterRendering: function() {\r\n\r\n  },\r\n  _onObjectMatched: function(oEvent) {\r\n   this.formPath = oEvent.getParameter(\"arguments\").formBindingPath;\r\n\r\n   this.createAccDetailComponent();\r\n  },\r\n\r\n  createAccDetailComponent: function() {\r\n   var accAssignCompDetail = sap.ui.getCore().createComponent({\r\n    name: \"sap.ui.s2p.mm.lib.reuse.accounting.component\",\r\n    componentData: {\r\n     sAccEntitySetName: \"C_Sspprmaint_Accassign\",\r\n     sAccEntityTypeName: \"C_Sspprmaint_AccassignType\",\r\n     sAccBindingPathEntityType: this.formPath,\r\n     sAccBindingPathEntitySet: \"\",\r\n     oModel: this.getAppModel(),\r\n     oRouter: this.oRouter,\r\n     bEditMode: true,\r\n     bAccDetailsAsPopup: false,\r\n     sCurrentView: \"form\",\r\n     bShowListHeader: true,\r\n     bIsExtPurgScenario: this.getExtScenarioFlag()                   \r\n\r\n    }\r\n\r\n   });\r\n   this.getView().byId(\"accountingForm\").setComponent(accAssignCompDetail);\r\n  },\r\n\r\n  onBack: function() {\r\n   window.history.back();\r\n  }\r\n\r\n });\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/CartOverview.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ui.core.mvc.Controller\");jQuery.sap.require(\"sap.m.TablePersoController\");jQuery.sap.require(\"sap.ui.core.message.MessageManager\");jQuery.sap.require(\"sap.ca.ui.message.message\");sap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\"sap/ui/model/json/JSONModel\",\"ui/s2p/mm/requisition/maintain/s1/model/formatter\",'sap/m/MessageToast','sap/m/MessageBox',\"sap/ui/Device\"],function(B,J,f,M,a,D){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.CartOverview\",{formatter:f,onInit:function(){var v=new sap.ui.model.json.JSONModel();var m={editable:false};if(this.getMode()===\"edit\"){v.setData(m);this.getView().setModel(v,\"viewProperties\");this.getView().byId(\"columnListItem\").setModel(v,\"viewProperties\");}else{m={editable:true};v.setData(m);this.getView().setModel(v,\"viewProperties\");this.getView().byId(\"columnListItem\").setModel(v,\"viewProperties\");}this.oModel=this.getAppModel();this._oView=this.getView();this._oComponent=sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));this.getRouter().getRoute(\"CartOverview\").attachPatternMatched(this._handleRouteMatched,this);this._oCartTable=this.byId(\"productsTable\");this._oItemTemplate=this.byId(\"columnListItem\").clone();this.firstTime=true;},_handleRouteMatched:function(e){if(this.getOwnerComponent().getComponentData().changingSourcePageAllowed){this.setSourcePage(\"CartOverview\");}this.getView().setBusyIndicatorDelay(0);this.getView().setBusy(true);this.setHeaderDraftKey(e.getParameter(\"arguments\").DraftKey);this.setPurchaseRequisition(e.getParameter(\"arguments\").PurchaseRequisition);this.currentPRNumber=this.getPurchaseRequisition();if(this.getTestMode()){this.genInfoCart();}else{var p=this.getServiceCallParameter(this.genInfoCart,this.errorServiceFail);this.dataManager.getHeader(p,this.getHeaderDraftKey(),this.getPurchaseRequisition());}},onUpdateFinished:function(){var e=!this._hasInvalidQuantityValues();this.byId(\"btnCheckOut\").setEnabled(e);this.byId(\"btnDeleteCart\").setEnabled(e);var b=this.getView().byId(\"productsTable\").getItems();this.styleClass=this._oComponent.getContentDensityClass();for(var i=0;i<b.length;i++){var C=this.getView().byId(\"productsTable\").getItems()[i].getBindingContext().getObject().OpnCtlgHasPriceScale;if(C=='X'){b[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[1].setVisible(true);}else{b[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[1].setVisible(false);}if(!b[i].getBindingContext().getProperty(\"PurReqnSSPCrossCatalogItem\")){b[i].getAggregation(\"cells\")[1].getAggregation(\"items\")[0].setEnabled(false);}if(this.styleClass===\"sapUiSizeCozy\"){b[i].getAggregation(\"cells\")[0].removeStyleClass(\"sapUiSmallMarginTopBottom\");}if(this.getPurchaseRequisition()&&b[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[0].getEditable()){this.getView().byId(\"btnCheckOut\").setEnabled(true);}if(this.getPurchaseRequisition()){var c=this.getView().byId(\"productsTable\").getItems()[i].getBindingContext().getObject().PurchaseRequisitionItem;this.ItemStatus=this.getLifeCycleStatus(c);if(this.ItemStatus===\"B\"||this.ItemStatus===\"A\"||this.ItemStatus===\"K\"||this.ItemStatus===\"L\"||this.ItemStatus===\"R\"||this.ItemStatus===\"S\"){b[i].getAggregation(\"cells\")[2].getAggregation(\"items\")[0].setVisible(true);this.getView().byId(\"productsTable\").getColumns()[2].getHeader().setVisible(true);}else{b[i].getAggregation(\"cells\")[2].getAggregation(\"items\")[0].setVisible(false);this.getView().byId(\"productsTable\").getColumns()[2].getHeader().setVisible(false);}}}this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());this.updatecartItems(this.getView().byId(\"productsTable\").getItems());if(this.getView().byId(\"productsTable\").getItems().length>0){this.getView().byId('btnCart').setType(\"Emphasized\");}else{this.getView().byId('btnCart').setType(\"Default\");}this.getView().setBusy(false);if(!this.getTestMode()){this.getView().byId(\"btnDeleteCart\").setEnabled(this.getView().getBindingContext().getObject().Delete_ac);this.getView().byId(\"btnCheckOut\").setEnabled(this.getView().getBindingContext().getObject().Delete_ac&&e);}},_hasInvalidQuantityValues:function(){var p=this.getView().byId(\"productsTable\");var q=p.indexOfColumn(this.byId(\"quantityColumn\"));if(q===-1){return false;}var i,I=p.getItems();for(i=0;i<I.length;i++){if(I[i].getAggregation(\"cells\")[q].getAggregation(\"items\")[0].getValueState()===\"Error\"){return true;}}return false;},cartService:function(){this.dataManager.cartService(this._oCartTable,this._oItemTemplate,[this.getPurchaseRequisition(),\"guid'\"+this.getHeaderDraftKey()+\"'\",false]);},genInfoCart:function(d){if(this.currentPRNumber!==\"\"){if(!this.getTestMode()){if(d.PurReqnLifeCycleStatus===\"G\"){this.getView().byId(\"btnReturn\").setEnabled(true);}else{this.getView().byId(\"btnReturn\").setEnabled(false);}}}if(this.currentPRNumber!==\"\"){if(!this.getTestMode()){if(d.PurReqnLifeCycleStatus===\"C\"){this.getView().byId(\"btnConfirm\").setEnabled(true);}else{this.getView().byId(\"btnConfirm\").setEnabled(false);}}}this.dataManager.genInfoCartView(this.getView(),[this.getPurchaseRequisition(),\"guid'\"+this.getHeaderDraftKey()+\"'\",false]);this.dataManager.genInfoCartButton(this.getView().byId(\"btnCart\"),[this.getPurchaseRequisition(),\"guid'\"+this.getHeaderDraftKey()+\"'\",false]);if(!this.getTestMode()){this.getView().getBindingContext().getObject();}this.getView().setBusy(false);if(this.firstTime){this.cartService();this.firstTime=false;}else{this.cartService();this.getView().byId(\"productsTable\").getBinding(\"items\").refresh();}},onCartItemPressed:function(E){this.setItemStatus(this.ItemStatus);this.getOrderDelete();try{var c=E.getSource().getBindingContext().getProperty(\"PurReqnSSPCrossCatalogItem\");}catch(e){c='6334';}try{var b=E.getSource().getBindingContext().getProperty(\"DraftUUID\");var d=E.getSource().getBindingContext().getPath().substr(1);var P=E.getSource().getBindingContext().getProperty(\"PurchaseRequisitionItem\");var g=E.getSource().getAggregation(\"cells\")[3].getAggregation(\"items\")[0].getEditable();}catch(e){b='c23e13de-8504-4180-88ba-d4f664219426';d=\"C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition%208',PurchaseRequisitionItem='PurchaseRequisitionItem%201',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";P='PurchaseRequisitionItem 1';g=true;}var p=this.getPurchaseRequisition()?this.getPurchaseRequisition():this.entityConstants.DUMMY_PR_KEY;this.prNumber=p;var m=sap.ui.getCore().getMessageManager();m.removeAllMessages();this.getRouter().navTo(\"ItemDetails\",{DraftKey:this.getHeaderDraftKey(),PurchaseRequisition:p,OpnCtlgItemID:c,DraftUUID:b,items:d,PurchaseRequisitionItem:P,Editable:g});var h=this.getView().byId(\"productsTable\").getItems();var t=[];for(var i=0;i<h.length;i++){var o=h[i].getBindingContext().getObject();t.push(o);}var j=new sap.ui.model.json.JSONModel();j.setData(t);sap.ui.getCore().setModel(j);},onBack:function(){if(this.getPurchaseRequisition()===''){this.setSourcePage('FreeText');}else{this.setSourcePage('PurReqList');}var p=this.getPurchaseRequisition()?this.getPurchaseRequisition():this.entityConstants.DUMMY_PR_KEY;this.prNumber=p;this.setOrderDelete('dontStopNav');window.history.back();if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},onExit:function(){this.setOrderDelete('dontStopNav');if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},updatecartItems:function(d){var c=d.length;if(d.length>=1){this.getView().byId(\"table\").setText(\"Items (\"+c+\")\");}else{this.getView().byId(\"table\").setText(\"Items (\"+c+\")\");}},totalPriceCart:function(d){var t=0;if(d.length>=1){for(var i=0;i<d.length;i++){t=t+Number(d[i].getBindingContext().getProperty(\"TotalNetAmount\"));}t=t.toFixed(2);}else{}},onPRNameChanged:function(){this.getView().setBusy(true);var p={PurReqnDescription:this.getView().byId(\"PRName\").getValue()};this.dataManager.updateHeader(this.getServiceCallParameter(this.successOnPRNameChanged,this.serviceFail),this.getHeaderDraftKey(),this.getPurchaseRequisition(),p);},successOnPRNameChanged:function(){this.getView().setBusy(false);sap.m.MessageToast.show(this.getResourceBundle().getText(\"updatePRDesc\"));},onQuantityChanged:function(e){var q=e.getSource().getValue();q=q.split('.').join('');q=q.split(',').join('');if(q.length>13||(Number(q)<=0||isNaN(Number(q)))){this.getView().byId(e.getSource().getId()).setValueState(sap.ui.core.ValueState.Error);this.getView().byId(e.getSource().getId()).setValueStateText(this.getResourceBundle().getText(\"quantityError\"));this.getView().byId(\"productsTable\").getModel().refresh(true);}else{e.getSource().setValueState(sap.ui.core.ValueState.None);var b=this.getView().byId(\"productsTable\").getBinding(\"items\");b.attachChange(function(){this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());this.updatecartItems(this.getView().byId(\"productsTable\").getItems());}.bind(this));var d=e.getSource().getBindingContext().getObject().DraftUUID;var i=e.getSource().getBindingContext().getObject().PurchaseRequisitionItem;var o=e.getSource().getBindingContext().getObject();o=this.adjustPayload(o);this.dataManager.updateItemDetails(this.getServiceCallParameter(this.successOnQuantityChanged,this.serviceFail),d,this.getPurchaseRequisition(),o,i);}},successOnQuantityChanged:function(){var m=sap.ui.getCore().getMessageManager();var b=m.getMessageModel().getData();var c=-1;for(var i=0;i<b.length;i++){if(b[i].message&&b[i].code===\"MMPUR_REQ_COMMON/022\"){sap.m.MessageToast.show(b[i].message);c=1;break;}else{c=0;}}this.getView().byId(\"productsTable\").getModel().refresh(true);this.oModel.refresh(true);if(c!==1){sap.m.MessageToast.show(this.getResourceBundle().getText(\"update\"));}},deleteItemPressed:function(e){var i=e.getParameter('listItem');var l=e.getSource();var t=this;var p;if(this.getTestMode()){p=\"/C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";this.deleteSuccess(l,p);}else{this.deleteItemId=e.getParameter('listItem').getId();this.deletable=e.getSource().getBindingContext().getObject().Delete_mc;this.deletable=true;p=i.getBindingContext().getPath();if(this.deletable){var h=parseInt(this.getView().byId(\"btnCart\").getText());if(h===1){if(this.getPurchaseRequisition()===''){sap.m.MessageBox.show(t.getResourceBundle().getText(\"msgDeleteLastItemCart\"),{icon:sap.m.MessageBox.Icon.WARNING,title:t.getResourceBundle().getText(\"msgBoxTitle\"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:\"sapUiSizeCompact\",onClose:function(A){if(A===sap.m.MessageBox.Action.OK){t.deleteSuccess(l,p);setTimeout(function(){t.getDraftSuccessCallback();},2000);}},initialFocus:sap.m.MessageBox.Action.OK});}else{t.deleteSuccess(l,p);setTimeout(function(){t.getDraftSuccessCallback();},2000);}}else{this.deleteSuccess(l,p);}}else{a.show(this.getResourceBundle().getText(\"deleteFailed\"),{icon:a.Icon.INFORMATION,title:t.getResourceBundle().getText(\"overviewDelete\"),actions:[t.getResourceBundle().getText(\"ok\")],onClose:function(A){if(A===t.getResourceBundle().getText(\"ok\")){}},initialFocus:t.getResourceBundle().getText(\"ok\")});}}},deleteSuccess:function(l,p){var t=this;var b=this.getView().byId(\"productsTable\").getBinding(\"items\");b.attachChange(function(){this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());this.updatecartItems(this.getView().byId(\"productsTable\").getItems());}.bind(this));l.getModel().remove(p);l.attachEventOnce('updateFinished',l.focus,l);this.refreshMinicart();setTimeout(function(){sap.m.MessageToast.show(t.getResourceBundle().getText(\"delete\"));},1000);},handleDeleteCartPress:function(){var t=this;sap.m.MessageBox.show(t.getResourceBundle().getText(\"msgDiscardCart\"),{icon:sap.m.MessageBox.Icon.WARNING,title:t.getResourceBundle().getText(\"msgBoxTitle\"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],styleClass:\"sapUiSizeCompact\",onClose:function(A){if(A===sap.m.MessageBox.Action.OK){t.dataManager.deleteDraft(t.getServiceCallParameter(t.onSuccessDeleteHeader,t.serviceFail),t.getHeaderDraftKey(),t.getPurchaseRequisition());t.setOrderDelete(true);t.getView().setBusy(true);if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}}},initialFocus:sap.m.MessageBox.Action.OK});},onSuccessDeleteHeader:function(){sap.m.MessageToast.show(this.getResourceBundle().getText(\"deleteAll\"));if(this.getTestMode()){this.getRouter().navTo(\"Search\");}else{if(this.getPurchaseRequisition()===''){this.getRouter().navTo(\"Search\");}else{this.getRouter().navTo(\"PurReqList\");}}},getDraftSuccessCallback:function(){var t=this;if(this.getPurchaseRequisition()===''){t.getRouter().navTo(\"Search\");}else{sap.m.MessageBox.show(t.getResourceBundle().getText(\"myPRmsgDeleteLastItemCart\"),{icon:sap.m.MessageBox.Icon.WARNING,title:t.getResourceBundle().getText(\"msgBoxTitle\"),actions:[sap.m.MessageBox.Action.OK],styleClass:\"sapUiSizeCompact\",onClose:function(A){if(A===sap.m.MessageBox.Action.OK){}},initialFocus:sap.m.MessageBox.Action.OK});}},PricescaleClick:function(e){if(!this._prcsclPopover){this._prcsclPopover=sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\",this);}var p=\"OpnCtlgItemID eq \"+e.getSource().getParent().getParent().getBindingContext().getObject().PurReqnSSPCrossCatalogItem;var q=e.getSource().getParent().getParent().getBindingContext().getObject().NetPriceQuantity;this.curr=\" \"+e.getSource().getParent().getParent().getBindingContext().getObject().Currency;var b=e.getSource().getParent().getParent().getBindingContext().getObject().BaseUnit;q=this.getResourceBundle().getText(\"price\")+\" \"+this.getResourceBundle().getText(\"CurrencyPer\")+\" \"+q+\" \"+b;var m=this.getServiceCallParameter(this.successPrcScale,this.serviceFail);this.dataManager.priceScalefind(m,p);this.getView().addDependent(this._prcsclPopover);jQuery.sap.syncStyleClass(\"sapUiSizeCompact\",this.getView(),this._prcsclPopover);var P=e.getSource();jQuery.sap.delayedCall(0,this,function(){this._prcsclPopover.openBy(P);});this._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(q);},successPrcScale:function(d){var j=new sap.ui.model.json.JSONModel(d);var l=j.oData.results.length;var i=0;for(i=0;i<l;i++){j.oData.results[i].Currency=this.curr;}this._prcsclPopover.getContent()[0].setModel(j);this._prcsclPopover.getContent()[0].bindElement(\"/results\");},ViewDetails:function(e){this.setOrderDelete('stopNav');var c=e.getSource().getBindingContext().getObject().PurReqnSSPCrossCatalogItem;var C=sap.ui.getCore().getConfiguration().getLanguage();C=C.substr(0,2).toUpperCase();var i=e.getSource().getBindingContext().getObject().DraftUUID;var p=this.getPurchaseRequisition()?this.getPurchaseRequisition():this.entityConstants.DUMMY_PR_KEY;this.prNumber=p;if(c){this.getRouter().navTo(\"ProductDetails\",{DraftKey:this.getHeaderDraftKey(),PurchaseRequisition:p,view:\"cartOverview\",OpnCtlgItemID:c,Language:C,free:i});}if(this._oMiniCart){this._oMiniCart.destroy();this._oMiniCart=null;}},handleReturnPress:function(){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"GoodsReceipt\",action:\"return\"},params:{PurchaseRequisition:[this.currentPRNumber]}});},handleConfirmPress:function(){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService(\"CrossApplicationNavigation\");c.toExternal({target:{semanticObject:\"GoodsReceipt\",action:\"create\"},params:{PurchaseRequisition:[this.currentPRNumber]}});},showStatus:function(e){this.getView().setBusy(true);this.oButton=e.getSource();var p=e.getSource().getBindingContext().getObject().PurchaseRequisition;var b=e.getSource().getBindingContext().getObject().PurchaseRequisitionItem;this.statusFromCO_Cntrls();this.statusFromCO_DBind(p,b);},adjustPayload:function(d){for(var p in d){if(p.search('_fc')<0){var b=p.toString()+\"_fc\";if(d[b]===1||d[b]===0){delete d[p];delete d[b];}}}return d;},handleClose:function(){}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Account_Asisgnment_Detail.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ui.core.mvc.Controller\");jQuery.sap.require(\"sap.m.TablePersoController\");jQuery.sap.require(\"sap.ui.core.message.MessageManager\");sap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\"],function(B){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Account_Asisgnment_Detail\",{onInit:function(){var r=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter=r;r.getRoute(\"Account_Asisgnment_Detail\").attachPatternMatched(this._onObjectMatched,this);},onAfterRendering:function(){},_onObjectMatched:function(e){this.formPath=e.getParameter(\"arguments\").formBindingPath;this.createAccDetailComponent();},createAccDetailComponent:function(){var a=sap.ui.getCore().createComponent({name:\"sap.ui.s2p.mm.lib.reuse.accounting.component\",componentData:{sAccEntitySetName:\"C_Sspprmaint_Accassign\",sAccEntityTypeName:\"C_Sspprmaint_AccassignType\",sAccBindingPathEntityType:this.formPath,sAccBindingPathEntitySet:\"\",oModel:this.getAppModel(),oRouter:this.oRouter,bEditMode:true,bAccDetailsAsPopup:false,sCurrentView:\"form\",bShowListHeader:true,bIsExtPurgScenario:this.getExtScenarioFlag()}});this.getView().byId(\"accountingForm\").setComponent(a);},onBack:function(){window.history.back();}});});",
		"ui/s2p/mm/requisition/maintain/s1/controller/Search-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* search controller */\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n 'sap/m/MessageBox',\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\r\n \"sap/m/MessageToast\"\r\n], function(BaseController, JSONModel, MessageBox, formatter, EntityConstants, MessageToast) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.Search\", {\r\n  onInit: function() {\r\n   this.getView().setBusy(true);\r\n   this.oView.setVisible(false);\r\n   this.oModel = this.getAppModel();\r\n   this.getResourceBundle();\r\n   this._oModel = this.getAppModel();\r\n   if ((this.getHeaderDraftKey() === \"\") || (this.getHeaderDraftKey() === undefined)) {\r\n    this.genInfo();\r\n   } else {\r\n    //this.navToSourcePage();\r\n   }\r\n   this._oView = this.getView();\r\n   this._oComponent = sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));\r\n   this._oRouter = this._oComponent.getRouter();\r\n   this.getRouter().getRoute(\"Search\").attachPatternMatched(this._handleRouteMatched, this);\r\n   this.oSplitContainer = this.getView().byId(\"mySplitContainer\");\r\n   this.oSplitContainer.setShowSecondaryContent(false);\r\n   /*this.showCatalogList();*/\r\n   this.getView().byId(\"catalogText\").setEnabled(false);\r\n   this.getView().byId(\"filterBtn\").setVisible(false);\r\n   this.filters = {};\r\n   this.selectedValue = \"\";\r\n   this.bDescending = true;\r\n  },\r\n  genInfo: function() {\r\n   this.dataManager.getCurrentDraft(this.getServiceCallParameter(this.showUserPopup, this.serviceFail));\r\n  },\r\n\r\n  showUserPopup: function(data) {\r\n   var that = this;\r\n   var prData = data.results ? data.results[0] : data;\r\n   var draftKey = this.getDraftKey(prData, true);\r\n   this.getView().byId(\"headerPanel\").setBusy(true);\r\n   if (prData) {\r\n    this.setExtScenarioFlag(prData.IsExtPurgScenario);\r\n    if (prData.NumberOfItems !== 0) {\r\n     MessageBox.show(this.getResourceBundle().getText(\"draftMessage\"), {\r\n      icon: MessageBox.Icon.INFORMATION,\r\n      title: that.getResourceBundle().getText(\"draft\"),\r\n      actions: [that.getResourceBundle().getText(\"continue\"), that.getResourceBundle().getText(\"discard\")],\r\n      onClose: function(oAction) {\r\n       if (oAction === that.getResourceBundle().getText(\"continue\")) {\r\n        that.getDraftSuccessCallback(data);\r\n\r\n       } else {\r\n        if (that.getTestMode()) {\r\n         that.getDraftSuccessCallback(data);\r\n         that.getView().byId(\"btnCart\").setText(\"0\");\r\n        } else {\r\n         that.deleteAndCreateNewDraft(draftKey, prData.PurchaseRequisition);\r\n         // that.dataManager.deleteDraft(that.getServiceCallParameter(that.deleteDraftSuccessCallback, that.serviceFail), draftKey,\r\n         //  prData.PurchaseRequisition);\r\n        }\r\n       }\r\n       that.getView().setVisible(true);\r\n      },\r\n      initialFocus: that.getResourceBundle().getText(\"continue\")\r\n     });\r\n    } else {\r\n     this.deleteAndCreateNewDraft(draftKey, prData.PurchaseRequisition);\r\n     // that.dataManager.deleteDraft(that.getServiceCallParameter(that.deleteDraftSuccessCallback, that.serviceFail), draftKey,\r\n     //  prData.PurchaseRequisition);\r\n     this.getView().setVisible(true);\r\n     var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n     this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n     this.getView().byId(\"btnCart\").bindElement(\"/results/0\");\r\n     //  this.goToFreetext();\r\n    }\r\n    if (prData.NumberOfItems > 1) {\r\n     var oText = prData.NumberOfItems + \" \" + this.getResourceBundle().getText(\"items\") + \" \" + this.getResourceBundle().getText(\r\n      \"itemcount\");\r\n    } else {\r\n     var oText = prData.NumberOfItems + \" \" + this.getResourceBundle().getText(\"items\") + \" \" + this.getResourceBundle().getText(\r\n      \"itemcount\");\r\n    }\r\n    var itemsInCart = this.getView().byId(\"numberofitems\");\r\n    itemsInCart.setText(oText);\r\n\r\n   } else {\r\n    this.getView().setVisible(true);\r\n    this.getView().byId(\"searchItems\").setVisible(false);\r\n    this.getView().byId(\"catalogText\").setVisible(false);\r\n    this.getView().byId(\"headerPanel\").setBusy(true);\r\n    this.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft, this.serviceFail));\r\n   }\r\n\r\n   if (prData.NumberOfItems > 0) {\r\n    this.getView().byId('btnCart').setType(\"Emphasized\");\r\n   } else {\r\n    this.getView().byId('btnCart').setType(\"Default\");\r\n   }\r\n   //Based on spro configuration search bar would be hide/unhide\r\n   var isSearchEnabled = true;\r\n   if (prData && prData.IsSrchEnabled) {\r\n    isSearchEnabled = false;\r\n   }\r\n   this.getView().byId(\"searchItems\").setVisible(isSearchEnabled);\r\n   this.getView().byId(\"catalogText\").setVisible(isSearchEnabled);\r\n\r\n  },\r\n  success: function(data) {\r\n   var prData = data.results ? data.results[0] : data;\r\n   //Based on spro configuration search bar would be hide/unhide\r\n   var isSearchEnabled = false;\r\n   if (prData) {\r\n    if (prData.IsSrchEnabled) {\r\n     isSearchEnabled = false;\r\n    } else {\r\n     isSearchEnabled = true;\r\n    }\r\n    this.getView().byId(\"searchItems\").setVisible(isSearchEnabled);\r\n    this.getView().byId(\"catalogText\").setVisible(isSearchEnabled);\r\n   }\r\n   var draftKey = this.getDraftKey(prData, true);\r\n   this.setHeaderDraftKey(draftKey);\r\n   this.setPurchaseRequisition(prData.PurchaseRequisition);\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n   this.getView().byId(\"btnCart\").bindElement(\"/\");\r\n   if (prData.NumberOfItems > 0) {\r\n    this.getView().byId('btnCart').setType(\"Emphasized\");\r\n   } else {\r\n    this.getView().byId('btnCart').setType(\"Default\");\r\n   }\r\n   this.getView().byId(\"headerPanel\").setBusy(false);\r\n   this.getView().setBusy(false);\r\n\r\n  },\r\n  createSuccessNewDraft: function(data) {\r\n   if (data) {\r\n    this.setExtScenarioFlag(data.IsExtPurgScenario);\r\n    this.success(data);\r\n    this.showCatalogList();\r\n    this.getView().setBusy(false);\r\n    //    this.goToFreetext();\r\n   }\r\n  },\r\n  createSuccessCallback: function(data) {\r\n   this.success(data);\r\n   if(!this.getView().byId(\"searchItems\").getValue() && (this.getView().byId(\"FilterList\")))\r\n   this.showCatalogList();\r\n   this.navToSourcePage();\r\n  },\r\n  deleteAndCreateNewDraft: function(draftKey, prNo) {\r\n\r\n   this.dataManager.deleteAndCreateNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft, this.serviceFail), draftKey, prNo);\r\n  },\r\n  deleteDraftSuccessCallback: function() {\r\n   this.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft, this.serviceFail));\r\n  },\r\n  _handleRouteMatched: function() {\r\n   var oList2 = this.getView().byId(\"FilterList\");\r\n   var aContexts2 = oList2.getSelectedContexts(true);\r\n   if (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n    this.setSourcePage(\"Search\");\r\n   }\r\n   if (aContexts2.length) {\r\n    this.filterListSelect(oList2);\r\n   }\r\n\r\n   var that = this;\r\n   if (that.getOrderDelete() === true) {\r\n    that.dataManager.createNewDraft(this.getServiceCallParameter(this.createSuccessNewDraft, this.serviceFail));\r\n    this.getView().byId(\"filterBtn\").removeStyleClass(\"filterposioning\");\r\n    this.getView().byId(\"filterBtn\").setType(\"Default\").setVisible(false);\r\n    this.oSplitContainer.setShowSecondaryContent(false);\r\n    that.setOrderDelete(false);\r\n   } else {\r\n\r\n    if (that.getHeaderDraftKey()) {\r\n     that.getView().setBusyIndicatorDelay(0);\r\n     that.getView().setBusy(true);\r\n     that.dataManager.getHeader(that.getServiceCallParameter(that.createSuccessCallback, that.serviceFail), that.getHeaderDraftKey(),\r\n      that.getPurchaseRequisition());\r\n     var searchTerm = this.getView().byId(\"searchItems\").getValue();\r\n     if (searchTerm && (!(oList2))) {\r\n      var searchMain = \"ProductDescription eq '\" + searchTerm + \"'\";\r\n      var mparameters = this.getServiceCallParameter(this.onSuccessSearchBinding, this.serviceFail);\r\n      this.dataManager.searchResultsBinding(mparameters, searchMain);\r\n     }\r\n\r\n    }\r\n   }\r\n  },\r\n  getDraftSuccessCallback: function(data) {\r\n   var prData = data.results ? data.results[0] : data;\r\n   if (this.getTestMode()) {\r\n    prData.PurchaseRequisition = \"\";\r\n   }\r\n   var draftKey = this.getDraftKey(prData, true);\r\n\r\n   this.setHeaderDraftKey(draftKey);\r\n   this.setPurchaseRequisition(prData.PurchaseRequisition);\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n   this.getView().byId(\"btnCart\").bindElement(\"/results/0\");\r\n   this.getView().byId(\"headerPanel\").setBusy(false);\r\n   this.showCatalogList();\r\n   this.getView().setBusy(false);\r\n   //    this.goToFreetext();\r\n  },\r\n\r\n  showGenItems: function(data) {\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n   this.getView().byId(\"btnCart\").bindElement(\"/results/0\");\r\n   this.getView().setBusy(false);\r\n\r\n  },\r\n\r\n  /**\r\n   * Get attribute function\r\n   */\r\n\r\n  getAtribute: function(oEvent) {\r\n   var Svalue = this.getSearchterm();\r\n   if (Svalue !== \"false\") {\r\n    this.getView().byId(\"searchItems\").setValue(Svalue);\r\n    this.searchBtnPress();\r\n   }\r\n   this.setHeaderDraftKey(oEvent.getParameter(\"arguments\").Draftkey);\r\n   this.setPurchaseRequisition(oEvent.getParameter(\"arguments\").PurchaseRequisition);\r\n\r\n  },\r\n\r\n  /**\r\n   * Triger on press of serch button.\r\n   * Success only if value present on search input\r\n   */\r\n  searchBtnPress: function() {\r\n   // if (this.getTestMode()) {\r\n   //  this.getView().byId(\"searchItems\").setValue(\"ProductDescription 8\");\r\n   // }\r\n   var searchTerm = this.getView().byId(\"searchItems\").getValue();\r\n   if (searchTerm) {\r\n    var searchMain = \"ProductDescription eq '\" + searchTerm + \"'\";\r\n    var filtermain = \"ValueDesc eq '\" + searchTerm + \"'\";\r\n    this.searchResultBind(searchMain);\r\n    this.filterResultBind(filtermain);\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * Search result Binding.\r\n   * @public\r\n   * @param {string} searchTerm :  \"ProductDescription eq '\" + Value entered in search input\r\n   */\r\n  searchResultBind: function(searchTerm) {\r\n   this.getView().byId(\"middleContent\").setBusy(true);\r\n   if (this.getTestMode()) {\r\n    var data = {};\r\n    var results = [];\r\n    var searchItem = {\r\n     \"OpnCtlgItemID\": 6713,\r\n     \"Language\": \"Language 1\",\r\n     \"ProductDescription\": \"ProductDescription 8\",\r\n     \"ManufacturerName\": \"ManufacturerName 1\",\r\n     \"ManufacturerMaterial\": \"ManufacturerMaterial 1\",\r\n     \"OpnCtlgHasPriceScale\": \"OpnCtlgHasPriceScale 1\",\r\n     \"ProductCatalogName\": \"ProductCatalogName 1\",\r\n     \"OpnCtlgIntCatalogName\": \"OpnCtlgIntCatalogName 1\",\r\n     \"Service\": true,\r\n     \"Material\": \"Material 1\",\r\n     \"MaterialGroup\": \"MaterialGroup 1\",\r\n     \"OpnCtlgSrchLongText\": \"OpnCtlgSrchLongText 1\",\r\n     \"MaterialGroupName\": \"MaterialGroupName 1\",\r\n     \"OpnCtlgSupplierName\": \"OpnCtlgSupplierName 1\",\r\n     \"Manufacturer\": \"Manufacturer 1\",\r\n     \"OpnCtlgSupplierID\": \"OpnCtlgSupplierID 1\",\r\n     \"OpnCtlgMaterialIDByVendor\": \"OpnCtlgMaterialIDByVendor 1\",\r\n     \"UnitOfMeasure\": \"UnitOfMeasure 1\",\r\n     \"OpnCtlgItemPrice\": 1008.18,\r\n     \"OpnCtlgItemCurrency\": \"OpnCtlgItemCurrency 1\",\r\n     \"ProductType\": \"ProductType 1\",\r\n     \"OpnCtlgCategoryID\": \"5b3cbe35-29fb-4932-b8ca-e94beda2f25d\",\r\n     \"OpnCtlgHasProdRelationExists\": \"OpnCtlgHasProdRelationExists 1\",\r\n     \"OpnCtlgMainImageName\": \"OpnCtlgMainImageName 1\",\r\n     \"OpnCtlgMainImageURL\": \"OpnCtlgMainImageURL 1\",\r\n     \"OpnCtlgMainImageText\": \"OpnCtlgMainImageText 1\",\r\n     \"OpnCtlgMainImageID\": 9535,\r\n     \"OpnCtlgPrcComCurrency\": 4596.02,\r\n     \"OpnCtlgComCurrencyID\": \"OpnCtlgComCurrencyID 1\",\r\n     \"PricingScaleType\": \"PricingScaleType 1\",\r\n     \"OpnCtlgExternalProductID\": \"OpnCtlgExternalProductID 1\",\r\n     \"OpnCtlgWebServiceID\": \"OpnCtlgWebServiceID 1\",\r\n     \"OpnCtlgWebServiceName\": \"OpnCtlgWebServiceName 1\",\r\n     \"ItemType\": \"ItemType 1\",\r\n     \"NetPriceQuantity\": \"NetPriceQuantity 1\",\r\n     \"OpnCtlgContentUnit\": \"OpnCtlgContentUnit 1\",\r\n     \"OpnCtlgPackingQty\": \"OpnCtlgPackingQty 1\",\r\n     \"OpnCtlgMinOrderQuantity\": \"OpnCtlgMinOrderQuantity 1\",\r\n     \"MaterialFixedLotSizeQuantity\": \"MaterialFixedLotSizeQuantity 1\",\r\n     \"ContractAccount\": \"ContractAccount 1\",\r\n     \"OpnCtlgContractItem\": \"OpnCtlgContractItem 1\",\r\n     \"OpnCtlgExternalQuoteID\": \"OpnCtlgExternalQuoteID 1\",\r\n     \"OpnCtlgExtQuoteItem\": \"OpnCtlgExtQuoteItem 1\",\r\n     \"OpnCtlgExtSchemaType\": \"OpnCtlgExtSchemaType 1\",\r\n     \"OpnCtlgExternalCategoryID\": \"OpnCtlgExternalCategoryID 1\",\r\n     \"OpnCtlgExternalCategory\": \"OpnCtlgExternalCategory 1\",\r\n     \"UsageRating\": 8273.84,\r\n     \"ParentItem\": \"ParentItem 1\",\r\n     \"IsOpnCtlgManaged\": true,\r\n     \"IsOpnCtlgItmFrmMatlMstr\": false,\r\n     \"IsOpnCtlgItem\": false,\r\n     \"ChangedDateTime\": 2928.14,\r\n     \"OpnCtlgChangedBy\": \"OpnCtlgChangedBy 1\",\r\n     \"OpnCtlgItemSustainCompliance\": \"OpnCtlgItemSustainCompliance 1\",\r\n     \"OpnCtlgDirectEmissionValue\": 9688.67,\r\n     \"OpnCtlgDirectEmissionUnit\": \"OpnCtlgDirectEmissionUnit 1\",\r\n     \"OpnCtlgIndrctEmissionValue\": 6332.56,\r\n     \"OpnCtlgIndrctEmissionUnit\": \"OpnCtlgIndrctEmissionUnit 1\",\r\n     \"OpnCtlgTempEmissionValue\": 6980.75,\r\n     \"OpnCtlgTempEMissionUnit\": \"OpnCtlgTempEMissionUnit 1\",\r\n     \"OpnCtlgRecycleValue\": 5965.22,\r\n     \"OpnCtlgRecycleUnit\": \"OpnCtlgRecycleUnit 1\",\r\n     \"OpnCtlgWaterConsumptionValue\": 1035.46,\r\n     \"OpnCtlgWaterConsumptionUnit\": \"OpnCtlgWaterConsumptionUnit 1\",\r\n     \"OpnCtlgEnergyConsumptionValue\": 9301.09,\r\n     \"OpnCtlgEnergyConsumptionUnit\": \"OpnCtlgEnergyConsumptionUnit 1\",\r\n     \"OpnCtlgWasteGeneratedValue\": 2708.63,\r\n     \"OpnCtlgWasteGeneratedUnit\": \"OpnCtlgWasteGeneratedUnit 1\",\r\n     \"LogicalSystem\": \"LogicalSystem 1\",\r\n     \"OpnCtlgSystemName\": \"OpnCtlgSystemName 1\",\r\n     \"SourceLogicalSystem\": \"SourceLogicalSystem 1\",\r\n     \"Decimals\": 4682,\r\n     \"LeadTimeAnncmntDueInDays\": \"LeadTimeAnncmntDueInDays 1\",\r\n     \"OpnCtlgPrcValidityStartDate\": \"OpnCtlgPrcValidityStartDate 1\",\r\n     \"OpnCtlgPrcValidityEndDate\": \"OpnCtlgPrcValidityEndDate 1\",\r\n     \"TaxTolerancePercent\": 916.48,\r\n     \"OpnCtlgNumberOfHits\": 5769,\r\n     \"OpnCtlgFilterValue\": \"OpnCtlgFilterValue 1\",\r\n     \"__metadata\": {\r\n      \"uri\": \"C_Procurementitems(OpnCtlgItemID=6713,Language='Language 1')\",\r\n      \"type\": \"MMPUR_REQ_SSP_MAINTAIN_SRV.C_ProcurementitemsType\"\r\n     }\r\n    };\r\n    results.push(searchItem);\r\n    data.results = results;\r\n    this.onSuccessSearchBinding(data);\r\n   } else {\r\n    var mparameters = this.getServiceCallParameter(this.onSuccessSearchBinding, this.serviceFail);\r\n    this.dataManager.searchResultsBinding(mparameters, searchTerm);\r\n   }\r\n   var mparameters = this.getServiceCallParameter(this.onSuccessSearchBinding, this.serviceFail);\r\n   this.dataManager.searchResultsBinding(mparameters, searchTerm);\r\n  },\r\n  /**\r\n   * This is the success callback which will trigger once the service in Search results will executed successfully\r\n   * If Search success, Results will display at middlecontent secssion\r\n   * If Search not success, Shows message at NoSearchresult part and cataloglist shows at middlecontent\r\n   */\r\n  onSuccessSearchBinding: function(data) {\r\n   this.getView().byId(\"middleContent\").setBusy(false);\r\n   this.getView().byId(\"catalogText\").setEnabled(true);\r\n   this.getView().setBusy(false);\r\n   if (data.results.length) {\r\n    this.destroyContent(\"middleContent\");\r\n    this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.SearchResults\", \"middleContent\");\r\n    var jsonModel = new sap.ui.model.json.JSONModel(data);\r\n    this.getView().byId(\"middleContent\").setModel(jsonModel);\r\n    //this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].getAggregation(\"items\")[0].bindElement(\"/results\");\r\n\r\n    this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].bindElement(\"/results\");\r\n    this.destroyContent(\"NoSearchresult\");\r\n    this.getView().byId(\"filterBtn\").setVisible(true);\r\n    //            this.getView().byId(\"filterBtn\").removeStyleClass(\"displayNone\");\r\n    var totalResults = data.results.length;\r\n   /* if (totalResults > 1) {\r\n     this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].getAggregation(\"items\")[0].getAggregation(\"items\")[0].getAggregation(\r\n      \"content\")[0].setText(totalResults + \" \" + this.getResourceBundle().getText(\"RESULTSTEXT\"));\r\n    } else {\r\n     this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].getAggregation(\"items\")[0].getAggregation(\"items\")[0].getAggregation(\r\n      \"content\")[0].setText(totalResults + \" \" + this.getResourceBundle().getText(\"RESULTSTEXT2\"));\r\n    }*/\r\n\r\n   } else {\r\n    this.destroyContent(\"middleContent\");\r\n    this.destroyContent(\"NoSearchresult\");\r\n    this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.NoserachResult\", \"NoSearchresult\");\r\n    this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogList\", \"middleContent\");\r\n    this.bindCatalog(\"middleContent\");\r\n    //                this.getView().byId(\"filterBtn\").removeStyleClass(\"filterposioning\").addStyleClass(\"displayNone\");\r\n    this.getView().byId(\"filterBtn\").setVisible(false);\r\n    this.oSplitContainer.setShowSecondaryContent(false);\r\n   }\r\n\r\n  },\r\n  /**\r\n   * Filter result Binding.\r\n   * @public\r\n   * @param {string} filterTerm : \"ValueDesc eq '\" + Value entered in search input\r\n   */\r\n\r\n  filterResultBind: function(filterTerm) {\r\n   var mparameters = this.getServiceCallParameter(this.onSuccessFilterResult, this.serviceFail);\r\n   this.dataManager.filterResultsBinding(mparameters, filterTerm);\r\n  },\r\n  /**\r\n   * This is the success callback which will trigger once the service in Filter results will executed successfully\r\n   * If Filter results success, Results will display in FilterList secssion\r\n   */\r\n  onSuccessFilterResult: function(data) {\r\n   this.removeRawData(data);\r\n   var templateData = this.cloneFilterData(data);\r\n   this.saveFilterTemplate(templateData);\r\n   var datalength = data.results.length;\r\n   /* \r\n    * PropertyCategory of 'Price Range' changing to Z-Price Range and converting again using formater for sorting perpose\r\n    */\r\n   for (var i = 0; i < datalength; i++) {\r\n    if (data.results[i].PropertyCategory === \"Price Range\") {\r\n     data.results[i].PropertyCategory = \"Z-Price Range\";\r\n    }\r\n   }\r\n   var jsonModelfilter = new sap.ui.model.json.JSONModel();\r\n   jsonModelfilter.setData(data);\r\n   this.getView().byId(\"FilterList\").setModel(jsonModelfilter);\r\n   this.getView().byId(\"FilterList\").bindElement(\"/results\");\r\n   //this.getView().byId(\"FilterTable\").setModel(jsonModelfilter);\r\n   //this.getView().byId(\"FilterTable\").bindElement(\"/results\");\r\n  },\r\n  /**\r\n   * Removing RAW_PRICE from filter data\r\n   */\r\n  removeRawData: function(data) {\r\n   for (var i = data.results.length - 1; i >= 0; i--) {\r\n    if (data.results[i].PropertyCategory === \"RAW_PRICE\") {\r\n     data.results.splice(i, 1);\r\n    }\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * Cloning(copying) the first binded filter data\r\n   * @public\r\n   * @param {obj} obj - obj wanted to clone\r\n   */\r\n  cloneFilterData: function(obj) {\r\n   var copy;\r\n   // Handle the 3 simple types, and null or undefined\r\n   if (null == obj || \"object\" != typeof obj) {\r\n    return obj;\r\n   }\r\n   // Handle Date\r\n   if (obj instanceof Date) {\r\n    copy = new Date();\r\n    copy.setTime(obj.getTime());\r\n    return copy;\r\n   }\r\n   // Handle Array\r\n   if (obj instanceof Array) {\r\n    copy = [];\r\n    for (var i = 0, len = obj.length; i < len; i++) {\r\n     copy[i] = this.cloneFilterData(obj[i]);\r\n    }\r\n    return copy;\r\n   }\r\n   // Handle Object\r\n   if (obj instanceof Object) {\r\n    copy = {};\r\n    for (var attr in obj) {\r\n     if (obj.hasOwnProperty(attr)) {\r\n      copy[attr] = this.cloneFilterData(obj[attr]);\r\n     }\r\n    }\r\n    return copy;\r\n   }\r\n   throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n  },\r\n\r\n  /**\r\n   * save templateData to firstFilterData and making changes in TotalHits to empty\r\n   *  @param {object} templateData - A filter data at first time loaded\r\n   */\r\n\r\n  saveFilterTemplate: function(templateData) {\r\n   for (var i = 0; i < templateData.results.length; i++) {\r\n    templateData.results[i].TotalHits = \"\";\r\n   }\r\n   // firstFilterData without Totalhites\r\n   this.firstFilterData = templateData;\r\n  },\r\n\r\n  /**\r\n   *Trigers on selection item from filter list\r\n   * Calls filterListSelect method and retuns seleted item source\r\n   */\r\n\r\n  onSelectionFilter: function(oEvt) {\r\n   var oList = oEvt.getSource();\r\n   this.filterListSelect(oList);\r\n  },\r\n  /**\r\n   * Geting selected contexts\r\n   * Forming finalfilterUrl\r\n   * calling searchResultBind and filterLaterBind methods with finalfilterUrl as parameters\r\n   * if filterURL empty or selected item removed or unselect item in filter list then calls searchBtnPress method\r\n   */\r\n  filterListSelect: function(list) {\r\n   var aContexts = list.getSelectedContexts(true);\r\n   for (var i = 0; i < aContexts.length; i++) {\r\n    this.selectedkey = aContexts[i].getObject().PropertyCategory;\r\n    this.selectedValue = aContexts[i].getObject().PropertyValue;\r\n    this.pushToFilterValues(this.selectedkey, this.selectedValue);\r\n   }\r\n   var filterURL = this.formQueryString();\r\n   var searchContent = this.getView().byId(\"searchItems\").getValue();\r\n   var finalFilterURL = \"\";\r\n   if (filterURL !== \"\") {\r\n    // Making filter url\r\n    var searchValue = \"DESCRIPTION\" + \"@@@\" + searchContent;\r\n    finalFilterURL = this.appendToQueryString(searchValue) + filterURL;\r\n    finalFilterURL = finalFilterURL.replace(\"Z-Price Range\", \"Price Range\");\r\n    this.searchResultBind(finalFilterURL);\r\n    this.filterLaterBind(finalFilterURL);\r\n   } else {\r\n    this.searchBtnPress();\r\n   }\r\n   this.filters = {};\r\n  },\r\n  /**\r\n   * Making selected filter list into key value pair of object\r\n   * @param {string} Key - selected key\r\n   * @param {string} Value - selected Value\r\n   *\r\n   */\r\n  pushToFilterValues: function(key, value) {\r\n   if (this.filters[key] === undefined) {\r\n    var values = [];\r\n    values.push(value);\r\n    this.filters[key] = values;\r\n   } else {\r\n    values = this.filters[key];\r\n    if (values.indexOf(value) === -1) {\r\n     values.push(value);\r\n    }\r\n    this.filters[key] = values;\r\n   }\r\n  },\r\n  /**\r\n   * forming Query string from this.filters object\r\n   * returns urlString (query string)\r\n   */\r\n  formQueryString: function() {\r\n   var urlString = \"\";\r\n   for (var key in this.filters) {\r\n    var fieldString = key;\r\n    var filterArray = this.filters[key];\r\n    for (var i = 0; i < filterArray.length; i++) {\r\n     fieldString = fieldString + \"@@@\" + filterArray[i];\r\n    }\r\n    urlString = urlString + \" or \" + this.appendToQueryString(fieldString);\r\n   }\r\n   return urlString;\r\n  },\r\n\r\n  /**\r\n   * appending \"OpnCtlgFilterValue eq '\" string to ToQueryString\r\n   * @param {string} fieldString - a string which generated from  this.filters (formQueryString)\r\n   */\r\n  appendToQueryString: function(fieldString) {\r\n   return \" OpnCtlgFilterValue eq '\" + fieldString + \"'\";\r\n  },\r\n\r\n  /**\r\n   * Filter result Binding after slection of Filter List .\r\n   * @public\r\n   * @param {string} filterTerm : finalFilterURL\r\n   */\r\n  filterLaterBind: function(filterTerm) {\r\n   var mparameters = this.getServiceCallParameter(this.onSuccessAfterFilter, this.serviceFail);\r\n   this.dataManager.filterResultsBinding(mparameters, filterTerm);\r\n  },\r\n  /**\r\n   * This is the success callback which will trigger once the service in Filter results will executed successfully\r\n   * If Filter results success, Results will display in FilterList secssion\r\n   * returns processedData\r\n   */\r\n  onSuccessAfterFilter: function(data) {\r\n   this.getView().byId(\"filterBtn\").setVisible(true);\r\n   this.getView().byId(\"filterBtn\").addStyleClass(\"filterposioning\");\r\n   this.oSplitContainer.setShowSecondaryContent(true);\r\n   /* calling processfilter method */\r\n   var processedData = this.processFilter(data);\r\n   var datalength = processedData.results.length;\r\n   for (var i = 0; i < datalength; i++) {\r\n    if (processedData.results[i].PropertyCategory === \"Price Range\") {\r\n     processedData.results[i].PropertyCategory = \"Z-Price Range\";\r\n    }\r\n   }\r\n   this.getView().byId(\"FilterList\").getModel().setData(processedData);\r\n  },\r\n\r\n  /**\r\n   * Mapping old and new Data.\r\n   * @public\r\n   * @param {object} newData : data which Newly formed after selecting filter list\r\n   * returns oldData\r\n   */\r\n  processFilter: function(newData) {\r\n   var oldData = this.cloneFilterData(this.firstFilterData);\r\n   this.removeNewPriceRange(newData);\r\n   this.mappingNewPriceRange(oldData, newData);\r\n   for (var i = 0; i < newData.results.length; i++) {\r\n    for (var j = 0; j < oldData.results.length; j++) {\r\n     if (oldData.results[j].PropertyCategory === newData.results[i].PropertyCategory &&\r\n      oldData.results[j].ValueDesc === newData.results[i].ValueDesc) {\r\n      oldData.results[j].TotalHits = newData.results[i].TotalHits;\r\n     }\r\n    }\r\n   }\r\n   return oldData;\r\n  },\r\n  /* \r\n   *Removing  Price Range from NewData\r\n   */\r\n\r\n  removeNewPriceRange: function(newData) {\r\n   for (var i = newData.results.length - 1; i >= 0; i--) {\r\n    if (newData.results[i].PropertyCategory === \"Price Range\") {\r\n     newData.results.splice(i, 1);\r\n    }\r\n   }\r\n\r\n  },\r\n  /*\r\n   *Mapping New Price Range (from RAW_PRICE )\r\n   * @param {object} oldData\r\n   * @param {object} newData\r\n   */\r\n  mappingNewPriceRange: function(oldData, newData) {\r\n   var splitpriceRange = [];\r\n   for (var i = 0; i < newData.results.length; i++) {\r\n    if (newData.results[i].PropertyCategory === \"RAW_PRICE\") {\r\n     for (var j = 0; j < oldData.results.length; j++) {\r\n      splitpriceRange = oldData.results[j].PropertyValue.split(\"-\");\r\n      if (oldData.results[j].PropertyCategory === \"Price Range\") {\r\n       if (parseFloat(splitpriceRange[0]) <= parseFloat(newData.results[i].PropertyValue) && parseFloat(newData.results[i].PropertyValue) <\r\n        parseFloat(splitpriceRange[1])) {\r\n        if (oldData.results[j].TotalHits === \"\" && oldData.results[j].TotalHits !== 0) {\r\n         oldData.results[j].TotalHits = 0;\r\n        }\r\n        oldData.results[j].TotalHits = parseInt(oldData.results[j].TotalHits) + parseInt(newData.results[i].TotalHits);\r\n        break;\r\n       }\r\n      }\r\n     }\r\n    }\r\n   }\r\n  },\r\n\r\n  /*\r\n   * Trigger on press of showcatalog button\r\n   */\r\n  showCatalogPress: function() {\r\n   this.destroyContent(\"NoSearchresult\");\r\n   this.getView().byId(\"catalogText\").setEnabled(false);\r\n   this.getView().byId(\"filterBtn\").removeStyleClass(\"filterposioning\");\r\n   this.getView().byId(\"filterBtn\").setType(\"Default\").setVisible(false);\r\n   this.showCatalogList();\r\n  },\r\n\r\n  /*\r\n   * Method for showuing list catalog\r\n   */\r\n  showCatalogList: function() {\r\n   this.getView().byId(\"filterBtn\").setVisible(false);\r\n   this.oSplitContainer.setShowSecondaryContent(false);\r\n   this.destroyContent(\"middleContent\");\r\n   this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogList\", \"middleContent\");\r\n   this.bindCatalog(\"middleContent\");\r\n  },\r\n  /*\r\n   * Method for showuing Grid catalog\r\n   * Triger on press of showGridCatalog\r\n   */\r\n  showGridCatalog: function() {\r\n   this.destroyContent(\"middleContent\");\r\n   this.createFragment(\"ui.s2p.mm.requisition.maintain.s1.view.CatalogGrid\", \"middleContent\");\r\n   this.bindCatalog(\"middleContent\");\r\n  },\r\n  /*\r\n   * Catalog Image press\r\n   * calling catalogPress method\r\n   */\r\n  CatalogWindowImg: function(oEvent) {\r\n   var ServiceId = oEvent.getSource().getParent().getAggregation(\"content\")[1].getProperty(\"text\");\r\n   this.catalogPress(ServiceId);\r\n  },\r\n  /*\r\n   * Catalog Nav link press\r\n   * calling catalogPress method\r\n   */\r\n  onCatalogNavClick: function(oEvent) {\r\n   var ServiceId = oEvent.getSource().getAggregation(\"cells\")[1].getAggregation(\"items\")[0].getText();\r\n   this.catalogPress(ServiceId);\r\n  },\r\n  /*\r\n   * Catalog text press\r\n   * calling catalogPress method\r\n   */\r\n  onPressText: function(oEvent) {\r\n   // if (this.getTestMode()) {\r\n\r\n   //  setTimeout(function() {\r\n   //   newWindow.close();\r\n   //  }, 3000);\r\n   // } else {\r\n   var ServiceId = oEvent.getSource().getText();\r\n   this.catalogPress(ServiceId);\r\n   // }\r\n\r\n  },\r\n  /*\r\n   * catalogPress binding external url on new window\r\n   */\r\n  catalogPress: function(ServiceId) {\r\n   var parentKey = this.getHeaderDraftKey();\r\n   var mparameters = this.getServiceCallParameter(this.onSuccessGetUrl, this.serviceFail);\r\n   this.dataManager.catalogBind(mparameters, ServiceId, parentKey);\r\n  },\r\n  /**\r\n   * This is the success callback which will trigger once the service in Catalog External binded successfully\r\n   * will create new popup window\r\n   */\r\n  onSuccessGetUrl: function(data) {\r\n   this.oneTimePoll = true; // used later \r\n   var that = this;\r\n   var slocation = data.ServiceURL;\r\n   var form;\r\n   if (data.FormData) {\r\n    form = $('<form/>');\r\n    form.attr(\"method\", \"post\");\r\n    form.attr(\"action\", slocation);\r\n    form.attr(\"target\", 'catalogWindow');\r\n    var queries = data.FormData.split(\"&\");\r\n    for (var i = 0; i < queries.length; i++) {\r\n     this.nameValuePair = queries[i].split(\"=\");\r\n     var input = $('<input>').attr({\r\n      type: 'hidden',\r\n      name: this.nameValuePair[0],\r\n      value: this.nameValuePair[1]\r\n     });\r\n     form.append(input);\r\n     form.appendTo(document.body);\r\n\r\n    }\r\n   }\r\n   var pollURL = \"/PollingSet(EventId='\" + data.EventId + \"')\";\r\n\r\n   var mParameters = {\r\n    \"success\": jQuery.proxy(that.onSuccesspolling, this),\r\n    \"error\": jQuery.proxy(that.errorServiceFail, this)\r\n   };\r\n   that.oModel.read(pollURL, mParameters);\r\n   this.popupWindow = window.open('', 'catalogWindow', 'height=800,width=1100,resizable=yes,scrollbars=1');\r\n   this.popupWindow.onbeforeunload = function(event) {\r\n    try {\r\n     if (event.srcElement.hasOwnProperty(closed)) {\r\n      this.popupWindow = event.srcElement;\r\n     }\r\n    } catch (e) {};\r\n   };\r\n   if (this.popupWindow.location == \"about:blank\") {\r\n    this.popupWindow.location = slocation;\r\n   }\r\n   if (data.FormData) {\r\n    form.submit();\r\n   }\r\n   document.body.removeChild(form);\r\n   this.popupWindow.focus();\r\n  },\r\n\r\n  /**\r\n   * This is the success callback which will trigger once the service in Popup window (catalogWindow) successfully\r\n   * if Status is 001 recurcively calls function\r\n   * if Status is 002 and 003 service fails\r\n   * if status is 004 srvice sucess and item will add to the cart\r\n   */\r\n  onSuccesspolling: function(data) {\r\n   var that = this;\r\n   var pollingAllowed = false;\r\n   if (!this.popupWindow.closed) {\r\n    pollingAllowed = true;\r\n   } else {\r\n    if (this.oneTimePoll == true) {\r\n     this.oneTimePoll = false; // give one chance to polling to get recent status from server as window is closed\r\n     pollingAllowed = true;\r\n    } else {\r\n     pollingAllowed = false;\r\n    }\r\n   }\r\n   // check\r\n   if (data.Status === \"001\") {\r\n    if (pollingAllowed) {\r\n     var pollURL = \"/PollingSet(EventId='\" + data.EventId + \"')\";\r\n\r\n     var mParameters = {\r\n      \"success\": jQuery.proxy(this.onSuccesspolling, this),\r\n      \"error\": jQuery.proxy(this.errorServiceFail, this)\r\n     };\r\n     setTimeout(function() {\r\n      that.oModel.read(pollURL, mParameters);\r\n     }, 2000);\r\n    }\r\n   }\r\n   if (data.Status === \"002\" || data.Status === \"003\") {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"Failure\"));\r\n   }\r\n   if (data.Status === \"004\") {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"Success\"));\r\n    this.dataManager.getHeader(this.getServiceCallParameter(this.successCallback, this.serviceFail), this.getHeaderDraftKey(),\r\n     this.getPurchaseRequisition());\r\n   }\r\n   if (this.getTestMode()) {\r\n    this.popupWindow.close();\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Trigger on pressof sort button in search results session\r\n   */\r\n\r\n  onSortReview: function() {\r\n   var tableBinding = this.getView().byId(\"middleContent\").getAggregation(\"content\")[0].getAggregation(\"items\")[0].getAggregation(\r\n    \"items\")[1].getBinding(\"items\");\r\n   var list = tableBinding.oList;\r\n   //console.log(tableBinding);\r\n   if (this.bDescending) {\r\n    this.bDescending = false;\r\n   } else {\r\n    this.bDescending = true;\r\n   }\r\n   for (var key in list) {\r\n    list[key].OpnCtlgPrcComCurrency = parseFloat(list[key].OpnCtlgPrcComCurrency);\r\n   }\r\n   var aSorters = [];\r\n   aSorters.push(new sap.ui.model.Sorter(\"OpnCtlgPrcComCurrency\", this.bDescending));\r\n   tableBinding.sort(aSorters);\r\n  },\r\n\r\n  /**\r\n   * Trigger on press of \"Create own Item\" button\r\n   * Navigate to freetext screen\r\n   */\r\n\r\n  // goToFreetext: function() {\r\n  //  var oSearchValue = this.getView().byId(\"searchItems\").getValue();\r\n  //  if (oSearchValue.length === 0) {\r\n  //   oSearchValue = \" \";\r\n  //  }\r\n  //  if (this._oMiniCart) {\r\n  //   this._oMiniCart.destroy();\r\n  //   this._oMiniCart = null;\r\n  //  }\r\n  //  if (this._oPopover) {\r\n  //   this._oPopover.destroy();\r\n  //   this._oPopover.destroyContent();\r\n  //   this._oPopover = null;\r\n  //  }\r\n  //  var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.dataManager.EntityConstants.DUMMY_PR_KEY;\r\n  //  this.getRouter().navTo(\"Freetext\", {\r\n  //   DraftKey: this.getHeaderDraftKey(),\r\n  //   PurchaseRequisition: purchaseRequisition,\r\n  //   SearchValue: oSearchValue\r\n  //  });\r\n\r\n  // },\r\n  onExit: function() {\r\n   if (this._oPopover) {\r\n    this._oPopover.destroy();\r\n   }\r\n   if (this._oPopoverFilter) {\r\n    this._oPopoverFilter.destroy();\r\n   }\r\n  },\r\n\r\n  ProductDetails: function(oEvent) {\r\n   this.setSearchterm(\"false\");\r\n   var oPath = oEvent.getSource().getBindingContext().getPath().substr(9);\r\n   var oProduct = oEvent.getSource().getBindingContext().getModel().getData().results[oPath].OpnCtlgItemID;\r\n   var language = oEvent.getSource().getBindingContext().getModel().getData().results[oPath].Language;\r\n\r\n   // var prcscl = oEvent.getSource().getBindingContext().getModel().getData().results[oPath].IsPriceScaleExists;\r\n   // var isPrcScl=\"0\";\r\n   // if(prcscl===\"X\"){\r\n   //  isPrcScl=1;\r\n   // }\r\n\r\n   var draftKey = this.getHeaderDraftKey();\r\n   var sCurrentLocale = sap.ui.getCore().getConfiguration().getLanguage();\r\n   if (!language) {\r\n    language = sCurrentLocale;\r\n   }\r\n   var PR = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.dataManager.EntityConstants.DUMMY_PR_KEY;\r\n   this.getRouter().navTo(\"ProductDetails\", {\r\n    OpnCtlgItemID: oProduct,\r\n    view: \"search\",\r\n    Language: language,\r\n    DraftKey: draftKey,\r\n    PurchaseRequisition: PR,\r\n    free: \"0\"\r\n     // isprcscl: isPrcScl \r\n   });\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  closeSecondaryContent: function(oEvent) {\r\n   var oSplitContainer = this.getView().byId(\"mySplitContainer\");\r\n   oSplitContainer.setShowSecondaryContent(!oSplitContainer.getShowSecondaryContent());\r\n   var oFbtn = this.getView().byId(\"filterBtn\");\r\n   oFbtn.toggleStyleClass(\"filterposioning\");\r\n   if (oSplitContainer.getShowSecondaryContent()) {\r\n    oEvent.getSource().setType(\"Emphasized\");\r\n   } else {\r\n    oEvent.getSource().setType(\"Default\");\r\n   }\r\n  },\r\n  successhandleOrderCartPress: function() {\r\n   var that = this;\r\n   MessageBox.show(this.getResourceBundle().getText(\"MSG_SuccessOrder\"), {\r\n    icon: MessageBox.Icon.INFORMATION,\r\n    title: that.getResourceBundle().getText(\"orderCart\"),\r\n    actions: [that.getResourceBundle().getText(\"ok\")],\r\n    onClose: function(oAction) {\r\n     if (oAction === that.getResourceBundle().getText(\"ok\")) {\r\n      this.dataManager.createNewDraft(this.getServiceCallParameter(this.getDraftSuccessCallback, this.serviceFail));\r\n      if (that._oPopover) {\r\n       that._oPopover.destroy();\r\n       that._oPopover.destroyContent();\r\n       that._oPopover = null;\r\n      }\r\n      that.getRouter().navTo(\"Search\");\r\n     } else {\r\n      //do nothing.\r\n     }\r\n    },\r\n    initialFocus: that.getResourceBundle().getText(\"ok\")\r\n   });\r\n  },\r\n\r\n  addToCart: function(oEvent) {\r\n   var path = oEvent.getSource().getBindingContext().getPath().substr(9);\r\n   var reqQuantity = oEvent.getSource().getBindingContext().getModel().oData.results[path].OpnCtlgMinOrderQuantity;\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n   var sMessage = this.getResourceBundle().getText(\"MESSAGE_ERROR_ADDTOCART\");\r\n   //var id= oEvent.getSource().getId();\r\n   var target = \"/\" + reqQuantity + \"/value\";\r\n   var deliveryDateMessage = new sap.ui.core.message.Message({\r\n    message: sMessage,\r\n    type: sap.ui.core.MessageType.Error,\r\n    target: target,\r\n    processor: oMessageProcessor\r\n   });\r\n   oMessageManager.registerMessageProcessor(oMessageProcessor);\r\n   if (reqQuantity > 0 && reqQuantity.match(/^[0-9]{1,10}(\\.\\d{1,3})?$/i)) {\r\n    var oData = {\r\n     RequestedQuantity: reqQuantity,\r\n     ParentDraftUUID: this.getHeaderDraftKey(),\r\n     PurReqnSSPCrossCatalogItem: oEvent.getSource().getBindingContext().getObject().OpnCtlgItemID,\r\n    };\r\n   /* if (this.getExtScenarioFlag()) {\r\n     if (oEvent.getSource().getBindingContext().getObject().PurchasingDocumentType == \"I\" ) {\r\n      oData[\"ExtInfoRecordForPurg\"] = oEvent.getSource().getBindingContext().getObject().OpnCtlgVendorID;\r\n     } else if (oEvent.getSource().getBindingContext().getObject().PurchasingDocumentType == \"K\") {\r\n      oData[\"ExtContractForPurg\"] = oEvent.getSource().getBindingContext().getObject().OpnCtlgVendorID;\r\n     } else {\r\n      oData[\"ExtFixedSupplierForPurg\"] = oEvent.getSource().getBindingContext().getObject().OpnCtlgVendorID;\r\n     }\r\n    }*/\r\n    this.getView().setBusy(true);\r\n    var mParameters = this.getServiceCallParameter(this.successhandleAddtoCartPress, this.serviceFail);\r\n    this.dataManager.createNewItem(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition(), oData);\r\n    oMessageManager.removeAllMessages();\r\n    return true;\r\n\r\n   } else {\r\n    oMessageManager.addMessages(deliveryDateMessage);\r\n    oEvent.getSource().getParent().getParent().getAggregation(\"items\")[0].getAggregation(\"items\")[1].getAggregation(\"items\")[0].setValueState(\r\n     sap.ui.core.ValueState\r\n     .Error);\r\n    var msgBtn = this.getView().byId(\"MsgalrtBtn\");\r\n    msgBtn.firePress();\r\n    return false;\r\n   }\r\n  },\r\n\r\n\r\n  successhandleAddtoCartPress: function() {\r\n   var msgMgr = sap.ui.getCore().getMessageManager();\r\n   var messages = msgMgr.getMessageModel().getData();\r\n   var flag = -1;\r\n   for (var i = 0; i < messages.length; i++) {\r\n    if (messages[i].message && messages[i].code === \"MMPUR_REQ_COMMON/022\") {\r\n     sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCartUpdated\"));\r\n     flag = 1;\r\n     break;\r\n    } else {\r\n     flag = 0;\r\n    }\r\n   }\r\n   if (flag !== 1) {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"AddToCart\"));\r\n   }\r\n   this.dataManager.getHeader(this.getServiceCallParameter(this.successCallback, this.serviceFail), this.getHeaderDraftKey(),\r\n    this.getPurchaseRequisition());\r\n  },\r\n  successCallback: function(data) {\r\n   var prData = data.results ? data.results[0] : data;\r\n   var draftKey = this.getDraftKey(prData, true);\r\n   this.setHeaderDraftKey(draftKey);\r\n   this.setPurchaseRequisition(prData.PurchaseRequisition);\r\n   this.getView().byId(\"headerPanel\").setBusy(false);\r\n\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n   this.getView().byId(\"btnCart\").bindElement(\"/\");\r\n   this.getView().setBusy(false);\r\n   var cartbtn = this.getView().byId(\"btnCart\");\r\n   if (cartbtn.getText() === \"1\") {\r\n    cartbtn.firePress();\r\n   }\r\n\r\n  },\r\n\r\n  PricescaleClick: function(oEvent) {\r\n   if (!this._prcsclPopover) {\r\n    this._prcsclPopover = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\", this);\r\n   }\r\n   var prodId = \"OpnCtlgItemID eq \" + oEvent.getSource().getParent().getParent().getBindingContext().getObject().OpnCtlgItemID;\r\n   this.decimal = oEvent.getSource().getParent().getParent().getBindingContext().getObject().Decimals;\r\n   var quant = oEvent.getSource().getParent().getParent().getItems()[0].getItems()[1].getProperty(\"text\");\r\n   this.curr = \" \" + oEvent.getSource().getParent().getParent().getItems()[0].getItems()[0].getProperty(\"unit\");\r\n   quant = this.getResourceBundle().getText(\"price\") + \" \" + quant;\r\n   var mparameters = this.getServiceCallParameter(this.successPrcScale, this.serviceFail);\r\n\r\n   this.dataManager.priceScalefind(mparameters, prodId);\r\n   this.getView().addDependent(this._prcsclPopover);\r\n\r\n   jQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._prcsclPopover);\r\n\r\n   var oPopoverlink = oEvent.getSource();\r\n   jQuery.sap.delayedCall(0, this, function() {\r\n    this._prcsclPopover.openBy(oPopoverlink);\r\n   });\r\n\r\n   this._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(quant);\r\n\r\n  },\r\n\r\n  successPrcScale: function(data) {\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   var len = oJSModelCart.oData.results.length;\r\n   var i = 0;\r\n   for (i = 0; i < len; i++) {\r\n    oJSModelCart.oData.results[i].Currency = this.curr;\r\n    oJSModelCart.oData.results[i].OpnCtlgItemPrice = parseFloat(oJSModelCart.oData.results[i].OpnCtlgItemPrice).toFixed(this.decimal);\r\n   }\r\n\r\n   this._prcsclPopover.getContent()[0].setModel(oJSModelCart);\r\n   this._prcsclPopover.getContent()[0].bindElement(\"/results\");\r\n  },\r\n  onBack: function() {\r\n   //  var history = window.history;\r\n   // history.go(-2);\r\n   var oCrossAppNavigator = sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"#\"\r\n    }\r\n   });\r\n   // window.history.go(-2);\r\n  },\r\n  onPressDefault: function() {\r\n   var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"UserDefaults\",\r\n     action: \"manage\"\r\n    },\r\n\r\n    params: {\r\n     BusinessObject: \"PR\"\r\n      //  PurchaseRequisitionItem: [selectedLine.Purchaserequisitionitem]\r\n    }\r\n\r\n   });\r\n\r\n  }\r\n\r\n });\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ZAttachment.controller.js": "sap.ui.define([\r\n\t\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n\t\"sap/ui/model/json/JSONModel\"\r\n], function(BaseController, JSONModel) {\r\n\t\"use strict\";\r\n\r\n\treturn BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ZAttachment\", {\r\n\r\n\t\tonInit: function() {\r\n\t\t\talert(\"ZAttach_onInit\");\r\n\t\t},\r\n\t\tonAfterRendering: function() {\r\n\t\t\tconsole.log(\"Draft:\" + this.getHeaderDraftKey());\r\n\t\t\tconsole.log(\"PurchReq:\" + this.getPurchaseRequisition());\r\n\t\t}\r\n\r\n\t});\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/localService/mockserver.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/core/util/MockServer\"],function(M){\"use strict\";var m,_=\"ui/s2p/mm/requisition/maintain/s1/\",a=_+\"localService/mockdata\";return{init:function(){this.MockServerMode=true;var u=jQuery.sap.getUriParameters(),j=\"./mockdata\",s=jQuery.sap.getModulePath(_+\"manifest\",\".json\"),e=\"C_Procurementitems\",E=u.get(\"errorType\"),i=E===\"badRequest\"?400:500,o=jQuery.sap.syncGetJSON(s).data,b=o[\"sap.app\"].dataSources.mainService,c=\"../localService/metadata.xml\",d=/.*\\/$/.test(b.uri)?b.uri:b.uri+\"/\";m=new M({rootUri:d});M.config({autoRespond:true,autoRespondAfter:(u.get(\"serverDelay\")||1000)});m.simulate(c,{sMockdataBaseUrl:j,bGenerateMissingMockData:true});var r=m.getRequests(),R=function(f,g,h){h.response=function(x){x.respond(f,{\"Content-Type\":\"text/plain;charset=utf-8\"},g);};};if(u.get(\"metadataError\")){r.forEach(function(f){if(f.path.toString().indexOf(\"$metadata\")>-1){R(500,\"metadata Error\",f);}});}if(E){r.forEach(function(f){if(f.path.toString().indexOf(e)>-1){R(i,E,f);}});}m.start();jQuery.sap.log.info(\"Running the app with mock data\");},getMockServer:function(){return m;}};});",
		"ui/s2p/mm/requisition/maintain/s1/controller/ErrorHandler-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\",\r\n \"sap/m/MessageBox\"\r\n], function(Object, MessageBox) {\r\n \"use strict\";\r\n\r\n return Object.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ErrorHandler\", {\r\n\r\n  /**\r\n   * Handles application errors by automatically attaching to the model events and displaying errors when needed.\r\n   *\r\n   * @class\r\n   * @param {sap.ui.core.UIComponent} oComponent reference to the app's component\r\n   * @public\r\n   * @alias ui.s2p.mm.requisition.maintain.s1.controller.ErrorHandler\r\n   */\r\n  constructor: function(oComponent) {\r\n   this._oResourceBundle = oComponent.getModel(\"i18n\").getResourceBundle();\r\n   this._oComponent = oComponent;\r\n   this._oModel = oComponent.getModel();\r\n   this._bMessageOpen = false;\r\n   this._sErrorText = this._oResourceBundle.getText(\"errorText\");\r\n\r\n   this._oModel.attachMetadataFailed(function(oEvent) {\r\n    var oParams = oEvent.getParameters();\r\n\r\n    this._showMetadataError(oParams.response);\r\n   }, this);\r\n\r\n   this._oModel.attachRequestFailed(function(oEvent) {\r\n    var oParams = oEvent.getParameters();\r\n\r\n    // An entity that was not found in the service is also throwing a 404 error in oData.\r\n    // We already cover this case with a notFound target so we skip it here.\r\n    // A request that cannot be sent to the server is a technical error that we have to handle though\r\n    if (oParams.response.statusCode !== \"404\" || (oParams.response.statusCode === 404 && oParams.response.responseText.indexOf(\r\n      \"Cannot POST\") === 0)) {\r\n     var sMessage = oParams.response.statusText;\r\n     try {\r\n      if (JSON.parse(oParams.response.responseText).error && JSON.parse(oParams.response.responseText).error.message) {\r\n       var errorCode = JSON.parse(oParams.response.responseText).error.code;\r\n       sMessage = JSON.parse(oParams.response.responseText).error.message.value;\r\n      }else{\r\n\r\n      sMessage = sMessage + \": \" + oParams.response.responseText.substring(oParams.response.responseText.search(\"1>\") + 2, oParams.response\r\n       .responseText.search(\"</h1\"));\r\n      }\r\n     } catch (e) {\r\n      sMessage = this._oResourceBundle.getText(\"errorText\") + \" : \" + sMessage;\r\n     }\r\n     if ( errorCode !== \"005056A509B11EE1B9A8FEC11C23378E\") {\r\n      this._showServiceError(sMessage);\r\n     }\r\n     else{\r\n      sap.ui.getCore().getMessageManager().removeAllMessages();\r\n     }\r\n    }\r\n   }, this);\r\n  },\r\n\r\n  /**\r\n   * Shows a {@link sap.m.MessageBox} when the metadata call has failed.\r\n   * The user can try to refresh the metadata.\r\n   *\r\n   * @param {string} sDetails a technical error to be displayed on request\r\n   * @private\r\n   */\r\n  _showMetadataError: function(sDetails) {\r\n   MessageBox.error(\r\n    this._sErrorText, {\r\n     id: \"metadataErrorMessageBox\",\r\n     details: sDetails,\r\n     styleClass: this._oComponent.getContentDensityClass(),\r\n     actions: [MessageBox.Action.RETRY, MessageBox.Action.CLOSE],\r\n     onClose: function(sAction) {\r\n      if (sAction === MessageBox.Action.RETRY) {\r\n       this._oModel.refreshMetadata();\r\n      }\r\n     }.bind(this)\r\n    }\r\n   );\r\n  },\r\n\r\n  /**\r\n   * Shows a {@link sap.m.MessageBox} when a service call has failed.\r\n   * Only the first error message will be display.\r\n   *\r\n   * @param {string} sDetails a technical error to be displayed on request\r\n   * @private\r\n   */\r\n  _showServiceError: function(sDetails) {\r\n   if (this._bMessageOpen) {\r\n    return;\r\n   }\r\n   this._bMessageOpen = true;\r\n   MessageBox.error(\r\n    sDetails, {\r\n     id: \"serviceErrorMessageBox\",\r\n     styleClass: this._oComponent.getContentDensityClass(),\r\n     actions: [MessageBox.Action.CLOSE],\r\n     onClose: function() {\r\n      this._bMessageOpen = false;\r\n     }.bind(this)\r\n    }\r\n   );\r\n  }\r\n });\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/localService/mockserver-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/core/util/MockServer\"\r\n], function(MockServer) {\r\n \"use strict\";\r\n var oMockServer,\r\n  _sAppModulePath = \"ui/s2p/mm/requisition/maintain/s1/\",\r\n  _sJsonFilesModulePath = _sAppModulePath + \"localService/mockdata\";\r\n\r\n return {\r\n\r\n  /**\r\n   * Initializes the mock server.\r\n   * You can configure the delay with the URL parameter \"serverDelay\".\r\n   * The local mock data in this folder is returned instead of the real data for testing.\r\n   * @public\r\n   */\r\n  init: function() {\r\n   this.MockServerMode = true;\r\n   var oUriParameters = jQuery.sap.getUriParameters(),\r\n    //sJsonFilesUrl = jQuery.sap.getModulePath(_sJsonFilesModulePath),\r\n    sJsonFilesUrl = \"./mockdata\",\r\n    sManifestUrl = jQuery.sap.getModulePath(_sAppModulePath + \"manifest\", \".json\"),\r\n    sEntity = \"C_Procurementitems\",\r\n    sErrorParam = oUriParameters.get(\"errorType\"),\r\n    iErrorCode = sErrorParam === \"badRequest\" ? 400 : 500,\r\n    oManifest = jQuery.sap.syncGetJSON(sManifestUrl).data,\r\n    oMainDataSource = oManifest[\"sap.app\"].dataSources.mainService,\r\n    // sMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + oMainDataSource.settings.localUri.replace(\".xml\", \"\"), \".xml\"),\r\n    // ensure there is a trailing slash\r\n    sMetadataUrl = \"../localService/metadata.xml\",\r\n    sMockServerUrl = /.*\\/$/.test(oMainDataSource.uri) ? oMainDataSource.uri : oMainDataSource.uri + \"/\";\r\n\r\n   oMockServer = new MockServer({\r\n    rootUri: sMockServerUrl\r\n   });\r\n\r\n   // configure mock server with a delay of 1s\r\n   MockServer.config({\r\n    autoRespond: true,\r\n    autoRespondAfter: (oUriParameters.get(\"serverDelay\") || 1000)\r\n   });\r\n\r\n   // load local mock data\r\n   oMockServer.simulate(sMetadataUrl, {\r\n    sMockdataBaseUrl: sJsonFilesUrl,\r\n    bGenerateMissingMockData: true\r\n   });\r\n\r\n   var aRequests = oMockServer.getRequests(),\r\n    fnResponse = function(iErrCode, sMessage, aRequest) {\r\n     aRequest.response = function(oXhr) {\r\n      oXhr.respond(iErrCode, {\r\n       \"Content-Type\": \"text/plain;charset=utf-8\"\r\n      }, sMessage);\r\n     };\r\n    };\r\n\r\n   // handling the metadata error test\r\n   if (oUriParameters.get(\"metadataError\")) {\r\n    aRequests.forEach(function(aEntry) {\r\n     if (aEntry.path.toString().indexOf(\"$metadata\") > -1) {\r\n      fnResponse(500, \"metadata Error\", aEntry);\r\n     }\r\n    });\r\n   }\r\n\r\n   // Handling request errors\r\n   if (sErrorParam) {\r\n    aRequests.forEach(function(aEntry) {\r\n     if (aEntry.path.toString().indexOf(sEntity) > -1) {\r\n      fnResponse(iErrorCode, sErrorParam, aEntry);\r\n     }\r\n    });\r\n   }\r\n   oMockServer.start();\r\n\r\n   jQuery.sap.log.info(\"Running the app with mock data\");\r\n  },\r\n\r\n  /**\r\n   * @public returns the mockserver of the app, should be used in integration tests\r\n   * @returns {sap.ui.core.util.MockServer} the mockserver instance\r\n   */\r\n  getMockServer: function() {\r\n   return oMockServer;\r\n  }\r\n };\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/view/imgDialog.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n <Dialog class=\"sapUiContentPadding\">\r\n  <content>\r\n   <Image src=\"image/a1.jpg\" width=\"100%\" alt=\"{i18n>catalogImage}\"></Image>\r\n  </content>\r\n  <beginButton>\r\n   <Button press=\"onCloseDialog\" text=\"{i18n>CLOSE}\"/>\r\n  </beginButton>\r\n </Dialog>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/AddReview.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n <Dialog close=\"handleClose\" confirm=\"handleClose\" endButton=\"submitReview\" id=\"reviewDialog\" title=\"{i18n>AddReview}\">\r\n  <content>\r\n   <VBox>\r\n    <RatingIndicator class=\"sapUiSmallMargin\" iconSize=\"2rem\" id=\"idProductRating\" maxValue=\"5\"/>\r\n    <TextArea class=\"sapUiSmallMargin\" cols=\"50\" editable=\"true\" enabled=\"true\" id=\"idReviewText\" placeholder=\"{i18n>reviewPlaceholder}\"\r\n     rows=\"5\"></TextArea>\r\n   </VBox>\r\n  </content>\r\n  <beginButton>\r\n   <Button id=\"submitReview\" press=\"submitReview\" text=\"{i18n>ok}\"/>\r\n  </beginButton>\r\n  <endButton>\r\n   <Button id=\"closeButton\" press=\"handleClose\" text=\"{i18n>cancel}\"/>\r\n  </endButton>\r\n </Dialog>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/SearchResults.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- Search Results fragment -->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartField=\"sap.ui.comp.smartfield\"\r\n xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns:smartTable=\"sap.ui.comp.smarttable\" xmlns:table=\"sap.ui.table\" xmlns:u=\"sap.ui.unified\"\r\n xmlns=\"sap.m\">\r\n <VBox class=\"sapUiMediumMarginBeginEnd\">\r\n  <smartTable:SmartTable class=\"sapUiMediumMarginTop\" demandPopin=\"true\" enableAutoBinding=\"true\" header=\"Results\" id=\"\" showRowCount=\"true\"\r\n   tableType=\"ResponsiveTable\" useTablePersonalisation=\"true\" useVariantManagement=\"true\">\r\n   <smartTable:customToolbar >\r\n    <Toolbar class=\"\" height=\"45px\">\r\n     <Title class=\"\" id=\"\" level=\"H2\" text=\"{i18n>RESULTSTEXT}\" titleStyle=\"H4\"/>\r\n     <ToolbarSpacer/>\r\n     <Button class=\"\" icon=\"sap-icon://sort\" press=\"onSortReview\" tooltip=\"{i18n>sortingTooltip}\" type=\"Transparent\"/>\r\n    </Toolbar>\r\n   </smartTable:customToolbar>\r\n   <Table class=\"sapUiSmallMarginBottom\" enableBusyIndicator=\"true\" fixedLayout=\"false\" growing=\"true\" growingScrollToLoad=\"false\"\r\n    growingThreshold=\"20\" id=\"searchTable\" inset=\"false\" items=\"{ path : '', key : 'OpnCtlgItemID'}\" press=\"ProductDetails\" updateFinished=\"onUpdateFinished\">\r\n    <columns class=\"\">\r\n     <Column class=\"\" hAlign=\"Left\" id=\"\" vAlign=\"Top\" width=\"6rem\">\r\n      <header></header>\r\n     </Column>\r\n     <Column class=\"sapUiSmallMarginBottom sapUiSmallMarginTop\" demandPopin=\"true\" hAlign=\"Left\" id=\"\" minScreenWidth=\"Tablet\" vAlign=\"Top\">\r\n      <header></header>\r\n     </Column>\r\n     <Column demandPopin=\"true\" hAlign=\"Left\" id=\"\" minScreenWidth=\"Tablet\" vAlign=\"Top\">\r\n      <header></header>\r\n     </Column>\r\n     <Column demandPopin=\"true\" hAlign=\"Right\" id=\"\" minScreenWidth=\"Tablet\" vAlign=\"Top\">\r\n      <header></header>\r\n     </Column>\r\n    </columns>\r\n    <ColumnListItem class=\"sapUiSmallMarginBottom sapUiSmallMarginTop\" id=\"\" press=\"ProductDetails\" type=\"Navigation\" vAlign=\"middle\">\r\n     <cells>\r\n      <VBox class=\"sapUiSmallMarginEnd sapUiSmallMarginTopBottom \">\r\n       <Image class=\"\" densityAware=\"false\" height=\"6em\" press=\"ViewDetails\"\r\n        src=\"{path: 'OpnCtlgMainImageURL', formatter: '.formatter.imgnotfound'}\" width=\"6em\"/>\r\n      </VBox>\r\n     </cells>\r\n     <cells class=\"\">\r\n      <VBox class=\"sapUiSmallMarginTop\">\r\n       <Label design=\"Bold\" text=\"{ProductDescription}\"/>\r\n       <Label text=\"{OpnCtlgWebServiceName}\"/>\r\n       <Label text=\"{OpnCtlgSupplierName}\"/>\r\n       <Label text=\"\"></Label>\r\n       <RatingIndicator class=\"sapUiSmallMarginBottom\" enabled=\"false\" iconSize=\"0.8rem\" maxValue=\"5\"\r\n        value=\"{ path: 'UsageRating', formatter: '.formatter.rating' }\"/>\r\n      </VBox>\r\n     </cells>\r\n     <cells>\r\n      <Text class=\"sapUiSmallMarginTop\" text=\"{OpnCtlgSrchLongText}\"/>\r\n     </cells>\r\n     <cells></cells>\r\n     <cells>\r\n      <VBox class=\"sapUiMediumMarginEnd sapUiSmallMarginTop\">\r\n       <FlexBox alignItems=\"Start\" class=\"\" justifyContent=\"End\">\r\n        <VBox class=\"sapUiSmallMarginEnd\">\r\n         <ObjectNumber  class=\"\" number=\"{parts:[{path:'OpnCtlgItemPrice'},{path:'Decimals'}], formatter:'.formatter.priceformat'}\" textAlign=\"Right\"\r\n          unit=\"{parts: [{path: 'OpnCtlgItemCurrency'}, {path:'Currency'}]}\"/>\r\n         <Label\r\n          text=\"{parts:[{path:'i18n>CurrencyPer'},{path:'NetPriceQuantity',type : 'sap.ui.model.odata.type.Decimal'},{path:'PurchasingDocumentPriceUnit',type : 'sap.ui.model.odata.type.Decimal'},\r\n          {path:'UnitOfMeasure'},{path:'PurchasingDocumentOrderQty'}],formatter:'.formatter.orderunit'}\"/>\r\n        </VBox>\r\n        <VBox>\r\n         <HBox>\r\n          <!--<Input class=\"sapUiTinyMarginBottom\" textAlign=\"Right\" value=\"{OpnCtlgMinOrderQuantity}\" width=\"5rem\"/>-->\r\n          <smartField:SmartField class=\"sapThemeText-asBorderColor\" showValueStateMessage=\"true\" textAlign=\"Right\" value=\"{OpnCtlgMinOrderQuantity}\"\r\n           width=\"5rem\"/>\r\n          <Label class=\"sapUiTinyMarginTop sapUiTinyMarginBegin\" text=\"{parts:[{path:'UnitOfMeasure'},{path:'BaseUnit'}]}\" textAlign=\"Right\"/>\r\n         </HBox>\r\n         <Link class=\"sapUiTinyMarginBottom\" press=\"PricescaleClick\"\r\n          text=\"{ path: 'OpnCtlgHasPriceScale', formatter: '.formatter.priceRange' }\"/>\r\n        </VBox>\r\n       </FlexBox>\r\n       <FlexBox alignItems=\"Start\" class=\"\" direction=\"\" justifyContent=\"End\">\r\n        <items>\r\n         <Button class=\"\" press=\"addToCart\" text=\"{i18n>addToCart}\" type=\"Emphasized\"/>\r\n        </items>\r\n       </FlexBox>\r\n      </VBox>\r\n     </cells>\r\n    </ColumnListItem>\r\n   </Table>\r\n  </smartTable:SmartTable>\r\n </VBox>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/controller/App.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\"sap/ui/model/json/JSONModel\",'sap/m/MessageBox',\"ui/s2p/mm/requisition/maintain/s1/localService/mockserver\"],function(B,J,M,a){\"use strict\";return B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.App\",{onInit:function(){var v,s,o=this.getView().getBusyIndicatorDelay();v=new J({busy:true,delay:0});this.setModel(v,\"appView\");s=function(){v.setProperty(\"/busy\",false);v.setProperty(\"/delay\",o);};this.oModel=this.getAppModel();this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());this.getOwnerComponent().getModel().metadataLoaded().then(jQuery.proxy(s,this),jQuery.proxy(s,this));if(a.MockServerMode){this.setTestMode(true);}else{this.setTestMode(false);}}});});",
		"ui/s2p/mm/requisition/maintain/s1/view/CatalogGrid.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- Catalog Grid -->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:l=\"sap.ui.layout\" xmlns=\"sap.m\">\r\n <VBox class=\"sapUiSmallMarginTop\">\r\n  <Toolbar class=\"sapUiMediumMarginBeginEnd sapUiSmallMarginTopBottom\" height=\"3.5rem\">\r\n   <Label design=\"Bold\" level=\"H2\" text=\"{i18n>launchCatalogs}\"/>\r\n   <ToolbarSpacer/>\r\n   <Button alt=\"{i18n]catalogImage}\" class=\"\" icon=\"sap-icon://list\" press=\"showCatalogList\" type=\"Transparent\"/>\r\n   <Button alt=\"{i18n]catalogImage}\" class=\"\" enabled=\"false\" icon=\"sap-icon://grid\" press=\"showGridCatalog\" type=\"Emphasized\"/>\r\n  </Toolbar>\r\n  <l:Grid class=\"sapUiSmallMarginBegin\" content=\"{/UserCatalogSet}\" defaultSpan=\"L2 M4 S12\" id=\"\" justifyContent=\"Center\" position=\"Center\">\r\n   <l:content class=\"\" textAlign=\"Center\">\r\n    <List class=\"\" enableBusyIndicator=\"true\" textAlign=\"Center\">\r\n     <CustomListItem class=\"\" press=\"onPressText\" textAlign=\"Center\">\r\n      <Image alt=\"{ServiceId}\" class=\"sapUiTinyMarginTop sapUiTinyMarginBeginEnd\" densityAware=\"true\" height=\"12.5rem\"\r\n       onerror=\"imgError(this)\" press=\"CatalogWindowImg\" src=\"{path: 'IconPath', formatter: '.formatter.imgnotfound'}\" width=\"94%\"/>\r\n      <Link class=\"sapUiTinyMargin\" press=\"onPressText\" text=\"{ServiceId}\" textAlign=\"Center\" width=\"94%\"/>\r\n     </CustomListItem>\r\n    </List>\r\n   </l:content>\r\n  </l:Grid>\r\n </VBox>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/Freetext.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.Freetext\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\"\r\n xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartField=\"sap.ui.comp.smartfield\"\r\n xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns=\"sap.m\">\r\n <semantic:FullscreenPage id=\"page\" navButtonPress=\"onBack\" showNavButton=\"true\" title=\"{i18n>appTitleCreate}\">\r\n  <semantic:customHeaderContent>\r\n   <!--<Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://cart\" id=\"btnCart\" press=\"onPressCart\" text=\"{NumberOfItems}\" tooltip=\"{i18n>PurReq}\"/>-->\r\n   <Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://cart\" id=\"btnCart\" press=\"onPressCart\" text=\"{NumberOfItems}\"\r\n    ariaLabelledBy=\"numberofitems\"/>\r\n   <core:InvisibleText id=\"numberofitems\"/>\r\n  </semantic:customHeaderContent>\r\n  <semantic:content>\r\n   <l:Grid class=\"sapUiSmallMarginTop\" defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>generalData}\" tooltip=\"{i18n>generalData}\"/>\r\n        <ToolbarSpacer/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <f:SimpleForm class=\"editableForm\" columnsL=\"2\" editable=\"true\" id=\"simpleForm\" labelSpanL=\"4\" labelSpanM=\"3\" layout=\"ResponsiveGridLayout\"\r\n       maxContainerCols=\"2\">\r\n       <f:content>\r\n        <core:Title text=\"\"/>\r\n        <smartField:SmartLabel labelFor=\"idMaterial\"/>\r\n        <smartField:SmartField change=\"materialValidation\" id=\"idMaterial\" tooltip=\"{Material}\" value=\"{Material}\"/>\r\n        <smartField:SmartLabel labelFor=\"idExtMaterial\"/>\r\n        <smartField:SmartField change=\"getExtMaterialDetails\" id=\"idExtMaterial\" tooltip=\"{Material}\" value=\"{ExtMaterialForPurg}\"/>\r\n        <smartField:SmartLabel labelFor=\"idMaterialDescription\"/>\r\n        <smartField:SmartField change=\"descvalidation\" id=\"idMaterialDescription\" maxLength=\"40\" showValueHelp=\"false\" tooltip=\"{PurchaseRequisitionItemText}\" value=\"{PurchaseRequisitionItemText}\"/>\r\n        <smartField:SmartLabel labelFor=\"idMaterialGroup\"/>\r\n        <FlexBox>\r\n         <smartField:SmartField change=\"matGrpValidation\" id=\"idMaterialGroup\" tooltip=\"{MaterialGroup}\" value=\"{MaterialGroup}\" width=\"10rem\"/>\r\n         <Input class=\"sapUiTinyMarginBegin\" enabled=\"false\" id=\"idMaterialGroupText\" type=\"Text\" value=\"{MaterialGroup_Text}\" width=\"98%\">\r\n          <layoutData>\r\n           <FlexItemData growFactor=\"1\"/>\r\n          </layoutData>\r\n         </Input>\r\n        </FlexBox>\r\n        <smartField:SmartLabel labelFor=\"price\"/>\r\n        <smartField:SmartField change=\"priceValidation\" id=\"price\" mandatory=\"true\"\r\n         value=\"{path : 'PurchaseRequisitionPrice',type : 'sap.ui.model.odata.type.Decimal'}\"/>\r\n        <smartField:SmartLabel labelFor=\"quantity\"/>\r\n        <smartField:SmartField change=\"quantityValidation\" id=\"quantity\"  value=\"{path: 'RequestedQuantity'}\"/>\r\n        <smartField:SmartLabel labelFor=\"idDeliveryDate\"/>\r\n        <smartField:SmartField id=\"idDeliveryDate\"\r\n         tooltip=\"{path:'DeliveryDate' ,formatter:'.formatter.deliveryDateFormartting'}\" value=\"{path: 'DeliveryDate'}\"\r\n         visible=\"{path :'ProductType' , formatter:'.formartVisiblityDateSelector'}\">\r\n         <smartField:configuration>\r\n          <smartField:Configuration controlType=\"datePicker\" id=\"idDeliveryDatePicker\"/>\r\n         </smartField:configuration>\r\n        </smartField:SmartField>\r\n        <core:Title text=\"\"/>\r\n        <Label text=\"{i18n>generalType}\" tooltip=\"{i18n>generalType}\"/>\r\n        <!--<RadioButtonGroup select=\"selctedkey\">\r\n                                                                                                                                                <buttons>\r\n                                                                                                                                                                <RadioButton id=\"productMaterial\" text=\"{i18n>generalProductMaterial}\"/>\r\n                                                                                                                                                                <RadioButton id=\"generalService\" text=\"{i18n>generalService}\"/>\r\n                                                                                                                                                </buttons>\r\n                                                                                                                                </RadioButtonGroup>-->\r\n        <Select change=\"selectionChanged\" id=\"productTypeSelect\" selectedKey='0'>\r\n         <core:Item key='0' text=\"{i18n>generalProductMaterial}\" tooltip=\"{i18n>generalProductMaterial}\"/>\r\n         <core:Item key='1' text=\"{i18n>generalService}\" tooltip=\"{i18n>generalService}\"/>\r\n        </Select>\r\n        <smartField:SmartLabel labelFor=\"idServicePerformer\"/>\r\n        <smartField:SmartField id=\"idServicePerformer\" tooltip=\"{i18n>ServicePerformer}\" value=\"{ServicePerformer}\" change=\"servicePerformerChange\"\r\n         visible=\"{path :'ProductType' , formatter:'.formartServiceTypeVisiblity'}\"/>\r\n        <Label labelFor=\"idDeliveryDateRange\" text=\"{i18n>validityPeriod}\" tooltip=\"{i18n>validityPeriod}\"/>\r\n        <DateRangeSelection change=\"DateRangeValidation\" dateValue=\"{path:'PerformancePeriodStartDate'}\" id=\"idDeliveryDateRange\"\r\n         secondDateValue=\"{path:'PerformancePeriodEndDate'}\"\r\n         tooltip=\"{parts:[{path:'PerformancePeriodStartDate'},{path:'PerformancePeriodEndDate'}],formatter:'.formatter.miniCartDateRangeFormartting'}\"\r\n         visible=\"{path :'ProductType' , formatter:'.formartServiceTypeVisiblity'}\"/>\r\n       </f:content>\r\n      </f:SimpleForm>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiMediumMarginBeginEnd sapUiNoContentPadding\" id=\"sourceOfSupply\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <content>\r\n         <Title level=\"H2\" text=\"{i18n>sourceOfSupply}\" tooltip=\"{i18n>sourceOfSupply}\"/>\r\n         <ToolbarSpacer/>\r\n         <Button icon=\"sap-icon://add\" id=\"addSupplier1\" press=\"onSupplier\"/>\r\n        </content>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <content>\r\n       <List noDataText=\"{i18n>supplier}\" tooltip=\"{i18n>supplier}\"></List>\r\n      </content>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel id=\"zAttachments\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <content>\r\n         <Title level=\"H2\" text=\"{i18n>Attachments}\" tooltip=\"{i18n>Attachments}\"/>\r\n        </content>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <content>\r\n       <core:Fragment fragmentName=\"ui.s2p.mm.requisition.maintain.s1.fragment.ZAttachment\" controller=\"ZAttachment\" type=\"XML\"/>\r\n      </content>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiMediumMarginBeginEnd sapUiSmallMarginTop\" width=\"auto\" id=\"notes\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>NOTES}\" tooltip=\"{i18n>NOTES}\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <IconTabBar applyContentPadding=\"false\" expandable=\"false\" expanded=\"true\" id=\"idIconTabBarNoIcons\" items=\"{/C_Sspprmaint_Itmtexttypes}\"\r\n       select=\"onSelect\">\r\n       <items>\r\n        <IconTabFilter key=\"{DocumentText}\" text=\"{DocumentText_Text}\" tooltip=\"{DocumentText_Text}\">\r\n         <content>\r\n          <TextArea change=\"onChange\" cols=\"400\" id=\"textArea\" rows=\"10\" visible=\"true\"/>\r\n         </content>\r\n        </IconTabFilter>\r\n       </items>\r\n      </IconTabBar>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n  </semantic:content>\r\n  <semantic:messagesIndicator>\r\n   <semantic:MessagesIndicator press=\"showMessageLogPopover\"/>\r\n  </semantic:messagesIndicator>\r\n  <semantic:customFooterContent>\r\n   <Button class=\"sapUiSmallMarginEnd\" id=\"addCart\" press=\"handleAddtoCart\" text=\"{i18n>addToCart}\" tooltip=\"{i18n>addToCart}\"\r\n    type=\"Emphasized\"/>\r\n  </semantic:customFooterContent>\r\n </semantic:FullscreenPage>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/controller/CartOverview-dbg.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/*global history*/\r\njQuery.sap.require(\"sap.ui.core.mvc.Controller\");\r\njQuery.sap.require(\"sap.m.TablePersoController\");\r\njQuery.sap.require(\"sap.ui.core.message.MessageManager\");\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\r\n \"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\",\r\n \"sap/ui/model/json/JSONModel\",\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\r\n 'sap/m/MessageToast',\r\n 'sap/m/MessageBox',\r\n \"sap/ui/Device\"\r\n], function(BaseController, JSONModel, formatter, MessageToast, MessageBox, Device) {\r\n \"use strict\";\r\n\r\n return BaseController.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.CartOverview\", {\r\n\r\n  formatter: formatter,\r\n\r\n  onInit: function() {\r\n\r\n   var viewModel = new sap.ui.model.json.JSONModel();\r\n   var mode = {\r\n    editable: false\r\n   };\r\n   if (this.getMode() === \"edit\") {\r\n\r\n    viewModel.setData(mode);\r\n    this.getView().setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"columnListItem\").setModel(viewModel, \"viewProperties\");\r\n\r\n   } else {\r\n    mode = {\r\n     editable: true\r\n    };\r\n    viewModel.setData(mode);\r\n    this.getView().setModel(viewModel, \"viewProperties\");\r\n    this.getView().byId(\"columnListItem\").setModel(viewModel, \"viewProperties\");\r\n\r\n   }\r\n   this.oModel = this.getAppModel();\r\n\r\n   this._oView = this.getView();\r\n   this._oComponent = sap.ui.component(sap.ui.core.Component.getOwnerIdFor(this._oView));\r\n   this.getRouter().getRoute(\"CartOverview\").attachPatternMatched(this._handleRouteMatched, this);\r\n   this._oCartTable = this.byId(\"productsTable\");\r\n   this._oItemTemplate = this.byId(\"columnListItem\").clone();\r\n   this.firstTime = true;\r\n\r\n  },\r\n\r\n  _handleRouteMatched: function(oEvent) {\r\n\r\n   if (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n    this.setSourcePage(\"CartOverview\");\r\n   }\r\n\r\n   this.getView().setBusyIndicatorDelay(0);\r\n   this.getView().setBusy(true);\r\n   this.setHeaderDraftKey(oEvent.getParameter(\"arguments\").DraftKey);\r\n   this.setPurchaseRequisition(oEvent.getParameter(\"arguments\").PurchaseRequisition);\r\n   this.currentPRNumber = this.getPurchaseRequisition();\r\n   if (this.getTestMode()) {\r\n    this.genInfoCart();\r\n   } else {\r\n    var mParameters = this.getServiceCallParameter(this.genInfoCart, this.errorServiceFail);\r\n    // var mListParameters = this.getServiceCallParameter(this.genInfoCart1, this.errorServiceFail1);\r\n    this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n    // this.dataManager.getItems(mListParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n   }\r\n\r\n  },\r\n  // genInfoCart1: function() {\r\n\r\n  //  if ((this.prNumber) && (this.currentPRNumber)) {\r\n  //   this.cartService();\r\n  // if (this.prNumber === this.currentPRNumber) {\r\n  //  this.dataManager.getItems(this.getServiceCallParameter(this.genInfoCart2, this.errorServiceFail), this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n  // } else {\r\n  //  this.cartService();\r\n  // }\r\n  //  }\r\n\r\n  // },\r\n  // genInfoCart2: function() {\r\n  // do nothing\r\n\r\n  // },\r\n\r\n  onUpdateFinished: function() {\r\n\r\n   var bEnabled = !this._hasInvalidQuantityValues();\r\n   this.byId(\"btnCheckOut\").setEnabled(bEnabled);\r\n   this.byId(\"btnDeleteCart\").setEnabled(bEnabled);\r\n   var items = this.getView().byId(\"productsTable\").getItems();\r\n   this.styleClass = this._oComponent.getContentDensityClass();\r\n   for (var i = 0; i < items.length; i++) {\r\n\r\n    var ChkPrc = this.getView().byId(\"productsTable\").getItems()[i].getBindingContext().getObject().OpnCtlgHasPriceScale;\r\n    if (ChkPrc == 'X') {\r\n     items[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[1].setVisible(true);\r\n    } else {\r\n     items[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[1].setVisible(false);\r\n    }\r\n    if (!items[i].getBindingContext().getProperty(\"PurReqnSSPCrossCatalogItem\")) {\r\n     items[i].getAggregation(\"cells\")[1].getAggregation(\"items\")[0].setEnabled(false);\r\n    }\r\n    if (this.styleClass === \"sapUiSizeCozy\") { // apply compact mode if touch is not supported; this could me made configurable for the user on \"combi\" devices with touch AND mouse\r\n     items[i].getAggregation(\"cells\")[0].removeStyleClass(\"sapUiSmallMarginTopBottom\");\r\n    }\r\n    if (this.getPurchaseRequisition() && items[i].getAggregation(\"cells\")[3].getAggregation(\"items\")[0].getEditable()) {\r\n     this.getView().byId(\"btnCheckOut\").setEnabled(true);\r\n    }\r\n    if (this.getPurchaseRequisition()) {\r\n     var itemno = this.getView().byId(\"productsTable\").getItems()[i].getBindingContext().getObject().PurchaseRequisitionItem;\r\n     this.ItemStatus = this.getLifeCycleStatus(itemno);\r\n     // this.getView().byId(\"productsTable\").getItems()[i].getBindingContext().getObject().PurReqnItemLifeCycleStatus\r\n     if(this.ItemStatus === \"B\" || this.ItemStatus === \"A\" || this.ItemStatus === \"K\" || this.ItemStatus === \"L\" || this.ItemStatus === \"R\" || this.ItemStatus === \"S\" ){\r\n      items[i].getAggregation(\"cells\")[2].getAggregation(\"items\")[0].setVisible(true);\r\n      this.getView().byId(\"productsTable\").getColumns()[2].getHeader().setVisible(true);\r\n    }\r\n     else {\r\n      items[i].getAggregation(\"cells\")[2].getAggregation(\"items\")[0].setVisible(false);\r\n      this.getView().byId(\"productsTable\").getColumns()[2].getHeader().setVisible(false);\r\n      // items[i].getAggregation(\"cells\")[2].getAggregation(\"items\")[0].setEnabled(false);\r\n     }\r\n\r\n    }\r\n   }\r\n   this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());\r\n   this.updatecartItems(this.getView().byId(\"productsTable\").getItems());\r\n   if (this.getView().byId(\"productsTable\").getItems().length > 0) {\r\n    this.getView().byId('btnCart').setType(\"Emphasized\");\r\n   } else {\r\n    this.getView().byId('btnCart').setType(\"Default\");\r\n   }\r\n   this.getView().setBusy(false);\r\n   if (!this.getTestMode()) {\r\n    this.getView().byId(\"btnDeleteCart\").setEnabled(this.getView().getBindingContext().getObject().Delete_ac);\r\n    this.getView().byId(\"btnCheckOut\").setEnabled(this.getView().getBindingContext().getObject().Delete_ac && bEnabled);\r\n   }\r\n  },\r\n\r\n  _hasInvalidQuantityValues: function() {\r\n   var productsTable = this.getView().byId(\"productsTable\");\r\n   var iQuantityColumnIndex = productsTable.indexOfColumn(this.byId(\"quantityColumn\"));\r\n   if (iQuantityColumnIndex === -1) {\r\n    return false;\r\n   }\r\n   var i, aItems = productsTable.getItems();\r\n   for (i = 0; i < aItems.length; i++) {\r\n    if (aItems[i].getAggregation(\"cells\")[iQuantityColumnIndex].getAggregation(\"items\")[0].getValueState() === \"Error\")  {\r\n     return true;\r\n    }\r\n   }\r\n   return false;\r\n  },\r\n\r\n  cartService: function() {\r\n   this.dataManager.cartService(this._oCartTable, this._oItemTemplate, [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n    \"'\", false\r\n   ]);\r\n   // this._oCartTable.bindItems({\r\n   //  path: \"/\" + this.entityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + this.getPurchaseRequisition() +\r\n   //   \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() +\r\n   //   \"')/\" + this.entityConstants.getEntityNavigationName('item'),\r\n   //  template: this._oItemTemplate\r\n   // });\r\n  },\r\n\r\n  /* Function to display the information at top of the screen */\r\n\r\n  genInfoCart: function(data) {\r\n   // Checking the PR status at header level to enable and disable the return delivery button\r\n   if (this.currentPRNumber !== \"\") {\r\n    if (!this.getTestMode()) {\r\n     // this.getView().byId(\"btnReturn\").setVisible(true);\r\n     if (data.PurReqnLifeCycleStatus === \"G\") {\r\n\r\n      this.getView().byId(\"btnReturn\").setEnabled(true);\r\n\r\n     } else {\r\n\r\n      this.getView().byId(\"btnReturn\").setEnabled(false);\r\n     }\r\n    }\r\n   }\r\n\r\n   // Checking the PR status at header level to enable and disable the Confirm Good Reciept button\r\n   if (this.currentPRNumber !== \"\") {\r\n    if (!this.getTestMode()) {\r\n     // this.getView().byId(\"btnConfirm\").setVisible(true);\r\n     if (data.PurReqnLifeCycleStatus === \"C\") {\r\n\r\n      this.getView().byId(\"btnConfirm\").setEnabled(true);\r\n\r\n     } else {\r\n\r\n      this.getView().byId(\"btnConfirm\").setEnabled(false);\r\n     }\r\n    }\r\n   }\r\n   this.dataManager.genInfoCartView(this.getView(), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() + \"'\", false]);\r\n   // this.getView().bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" +\r\n   //  this.getPurchaseRequisition() +\r\n   //  \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n\r\n   this.dataManager.genInfoCartButton(this.getView().byId(\"btnCart\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n    \"'\", false\r\n   ]);\r\n   // this.getView().byId(\"btnCart\").bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" +\r\n   //  this\r\n   //  .getPurchaseRequisition() +\r\n   //  \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n\r\n   /* this.getView().byId(\"totalPrice\").bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" +\r\n    this.getPurchaseRequisition() +\r\n    \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");*/\r\n   if (!this.getTestMode()) {\r\n    this.getView().getBindingContext().getObject();\r\n   }\r\n   this.getView().setBusy(false);\r\n   if (this.firstTime) {\r\n    this.cartService();\r\n    this.firstTime = false;\r\n   } else {\r\n    this.cartService();\r\n    this.getView().byId(\"productsTable\").getBinding(\"items\").refresh();\r\n    // var mListParameters = this.getServiceCallParameter(this.genInfoCart1, this.errorServiceFail1);\r\n    // this.dataManager.getItems(mListParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n   }\r\n\r\n  },\r\n\r\n  /* Function executed when cart items are pressed to see the item details. */\r\n\r\n  onCartItemPressed: function(oEvent) {\r\n   this.setItemStatus(this.ItemStatus);\r\n   this.getOrderDelete();\r\n   // var oCatalogKey = oEvent.getSource().getBindingContext().getObject().PurReqnSSPCrossCatalogItem;\r\n   try {\r\n    var oCatalogKey = oEvent.getSource().getBindingContext().getProperty(\"PurReqnSSPCrossCatalogItem\");\r\n   } catch (e) { // this is OPA scenario\r\n    oCatalogKey = '6334';\r\n   }\r\n\r\n   try {\r\n    var itemKey = oEvent.getSource().getBindingContext().getProperty(\"DraftUUID\");\r\n    var items = oEvent.getSource().getBindingContext().getPath().substr(1);\r\n    var PurchaseRequisitionItem = oEvent.getSource().getBindingContext().getProperty(\"PurchaseRequisitionItem\");\r\n    var editable = oEvent.getSource().getAggregation(\"cells\")[3].getAggregation(\"items\")[0].getEditable();\r\n   } catch (e) { // this is OPA scenario\r\n    itemKey = 'c23e13de-8504-4180-88ba-d4f664219426';\r\n    items =\r\n     \"C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition%208',PurchaseRequisitionItem='PurchaseRequisitionItem%201',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";\r\n    PurchaseRequisitionItem = 'PurchaseRequisitionItem 1';\r\n    editable = true;\r\n   }\r\n\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n   this.prNumber = purchaseRequisition;\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n\r\n   this.getRouter().navTo(\"ItemDetails\", {\r\n    DraftKey: this.getHeaderDraftKey(),\r\n    PurchaseRequisition: purchaseRequisition,\r\n    OpnCtlgItemID: oCatalogKey,\r\n    DraftUUID: itemKey,\r\n    items: items, // oEvent.getSource().getBindingContext().getPath().substr(1),\r\n    PurchaseRequisitionItem: PurchaseRequisitionItem, //oEvent.getSource().getBindingContext().getProperty(\"PurchaseRequisitionItem\"),\r\n    Editable: editable\r\n   });\r\n   // }\r\n   //logic to populate the items table array\r\n   var items1 = this.getView().byId(\"productsTable\").getItems();\r\n\r\n   var tableList = [];\r\n\r\n   for (var i = 0; i < items1.length; i++) {\r\n    var oData = items1[i].getBindingContext().getObject();\r\n    tableList.push(oData);\r\n   }\r\n   var oModelTable = new sap.ui.model.json.JSONModel();\r\n   oModelTable.setData(tableList);\r\n   sap.ui.getCore().setModel(oModelTable);\r\n\r\n  },\r\n\r\n  /* Function executed to go back to the previous page on click of the arrow back button */\r\n\r\n  onBack: function() {\r\n   if (this.getPurchaseRequisition() === '') {\r\n    this.setSourcePage('FreeText');\r\n   } else {\r\n    this.setSourcePage('PurReqList');\r\n   }\r\n   //this.setSourcePage('');\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n   this.prNumber = purchaseRequisition;\r\n   this.setOrderDelete('dontStopNav');\r\n   window.history.back();\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  onExit: function() {\r\n   this.setOrderDelete('dontStopNav');\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  /* To get the total number of items in the cart */\r\n\r\n  updatecartItems: function(data) {\r\n   var count = data.length;\r\n   if (data.length >= 1) {\r\n    this.getView().byId(\"table\").setText(\"Items (\" + count + \")\");\r\n   } else {\r\n    this.getView().byId(\"table\").setText(\"Items (\" + count + \")\");\r\n   }\r\n\r\n  },\r\n\r\n  /* To get the total price of the cart */\r\n\r\n  totalPriceCart: function(data) {\r\n   var total = 0;\r\n   if (data.length >= 1) {\r\n    for (var i = 0; i < data.length; i++) {\r\n     total = total + Number(data[i].getBindingContext().getProperty(\"TotalNetAmount\"));\r\n    }\r\n    total = total.toFixed(2);\r\n   } else {}\r\n  },\r\n\r\n  onPRNameChanged: function() {\r\n   // var oData = this.getView().getModel().getData(\"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n   //  \"(PurchaseRequisition='\" +\r\n   //  this.getPurchaseRequisition() +\r\n   //  \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n   this.getView().setBusy(true);\r\n   //delete transient fields.\r\n\r\n   var payload = {\r\n    PurReqnDescription: this.getView().byId(\"PRName\").getValue()\r\n   };\r\n\r\n   this.dataManager.updateHeader(this.getServiceCallParameter(this.successOnPRNameChanged, this.serviceFail), this.getHeaderDraftKey(),\r\n    this.getPurchaseRequisition(), payload);\r\n\r\n  },\r\n\r\n  successOnPRNameChanged: function() {\r\n   this.getView().setBusy(false);\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"updatePRDesc\"));\r\n  },\r\n\r\n  onQuantityChanged: function(oEvent) {\r\n   var quantity = oEvent.getSource().getValue();\r\n   quantity = quantity.split('.').join('');\r\n   quantity = quantity.split(',').join('');\r\n   if (quantity.length > 13 || (Number(quantity) <= 0 || isNaN(Number(quantity)))) {\r\n    this.getView().byId(oEvent.getSource().getId()).setValueState(sap.ui.core.ValueState.Error);\r\n    this.getView().byId(oEvent.getSource().getId()).setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n    this.getView().byId(\"productsTable\").getModel().refresh(true);\r\n\r\n   } else {\r\n    oEvent.getSource().setValueState(sap.ui.core.ValueState.None);\r\n    var oBinding = this.getView().byId(\"productsTable\").getBinding(\"items\");\r\n    oBinding.attachChange(function() {\r\n     this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());\r\n     this.updatecartItems(this.getView().byId(\"productsTable\").getItems());\r\n    }.bind(this));\r\n    var draftItemKey = oEvent.getSource().getBindingContext().getObject().DraftUUID;\r\n    var itemNumber = oEvent.getSource().getBindingContext().getObject().PurchaseRequisitionItem;\r\n    var oData = oEvent.getSource().getBindingContext().getObject();\r\n    oData = this.adjustPayload(oData);\r\n    this.dataManager.updateItemDetails(this.getServiceCallParameter(this.successOnQuantityChanged, this.serviceFail), draftItemKey,\r\n     this.getPurchaseRequisition(), oData, itemNumber);\r\n   }\r\n\r\n  },\r\n\r\n  successOnQuantityChanged: function() {\r\n   var msgMgr = sap.ui.getCore().getMessageManager();\r\n   var messages = msgMgr.getMessageModel().getData();\r\n   var flag = -1;\r\n   for (var i = 0; i < messages.length; i++) {\r\n    if (messages[i].message && messages[i].code === \"MMPUR_REQ_COMMON/022\") {\r\n     sap.m.MessageToast.show(messages[i].message);\r\n     flag = 1;\r\n     break;\r\n    } else {\r\n     flag = 0;\r\n    }\r\n   }\r\n   this.getView().byId(\"productsTable\").getModel().refresh(true);\r\n   this.oModel.refresh(true);\r\n   if (flag !== 1) {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"update\"));\r\n   }\r\n  },\r\n\r\n  deleteItemPressed: function(oEvent) {\r\n   var oItem = oEvent.getParameter('listItem');\r\n   var oList = oEvent.getSource();\r\n   var that = this;\r\n   var sPath;\r\n\r\n   if (this.getTestMode()) {\r\n    sPath =\r\n     \"/C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";\r\n    this.deleteSuccess(oList, sPath);\r\n   } else {\r\n    this.deleteItemId = oEvent.getParameter('listItem').getId();\r\n    this.deletable = oEvent.getSource().getBindingContext().getObject().Delete_mc;\r\n    this.deletable = true; //should be deleted once more info about delete_mc is available\r\n    sPath = oItem.getBindingContext().getPath();\r\n    if (this.deletable) {\r\n     var headerCount = parseInt(this.getView().byId(\"btnCart\").getText());\r\n     if (headerCount === 1) {\r\n      if (this.getPurchaseRequisition() === '') {\r\n       sap.m.MessageBox.show(\r\n        that.getResourceBundle().getText(\"msgDeleteLastItemCart\"), {\r\n         icon: sap.m.MessageBox.Icon.WARNING,\r\n         title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n         actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n         styleClass: \"sapUiSizeCompact\",\r\n         onClose: function(oAction) {\r\n          if (oAction === sap.m.MessageBox.Action.OK) {\r\n           that.deleteSuccess(oList, sPath);\r\n           setTimeout(function() {\r\n            that.getDraftSuccessCallback();\r\n           }, 2000);\r\n          }\r\n\r\n         },\r\n         initialFocus: sap.m.MessageBox.Action.OK\r\n        }\r\n       );\r\n      } else {\r\n       that.deleteSuccess(oList, sPath);\r\n       setTimeout(function() {\r\n        that.getDraftSuccessCallback();\r\n       }, 2000);\r\n\r\n      }\r\n     } else {\r\n      this.deleteSuccess(oList, sPath);\r\n     }\r\n    } else {\r\n     MessageBox.show(this.getResourceBundle().getText(\"deleteFailed\"), {\r\n      icon: MessageBox.Icon.INFORMATION,\r\n      title: that.getResourceBundle().getText(\"overviewDelete\"),\r\n      actions: [that.getResourceBundle().getText(\"ok\")],\r\n      onClose: function(oAction) {\r\n       if (oAction === that.getResourceBundle().getText(\"ok\")) {\r\n        // do nothing\r\n       }\r\n      },\r\n      initialFocus: that.getResourceBundle().getText(\"ok\")\r\n     });\r\n\r\n    }\r\n   }\r\n  },\r\n\r\n  deleteSuccess: function(oList, sPath) {\r\n   var that = this;\r\n   var oBinding = this.getView().byId(\"productsTable\").getBinding(\"items\");\r\n   oBinding.attachChange(function() {\r\n    this.totalPriceCart(this.getView().byId(\"productsTable\").getItems());\r\n    this.updatecartItems(this.getView().byId(\"productsTable\").getItems());\r\n   }.bind(this));\r\n   oList.getModel().remove(sPath);\r\n   oList.attachEventOnce('updateFinished', oList.focus, oList);\r\n   this.refreshMinicart();\r\n   setTimeout(function() {\r\n    sap.m.MessageToast.show(that.getResourceBundle().getText(\"delete\"));\r\n   }, 1000);\r\n   // sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n  },\r\n\r\n  handleDeleteCartPress: function() {\r\n   var that = this;\r\n   sap.m.MessageBox.show(\r\n    that.getResourceBundle().getText(\"msgDiscardCart\"), {\r\n     icon: sap.m.MessageBox.Icon.WARNING,\r\n     title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n     actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n     styleClass: \"sapUiSizeCompact\",\r\n     onClose: function(oAction) {\r\n      if (oAction === sap.m.MessageBox.Action.OK) {\r\n       that.dataManager.deleteDraft(that.getServiceCallParameter(that.onSuccessDeleteHeader, that.serviceFail),\r\n        that.getHeaderDraftKey(), that.getPurchaseRequisition());\r\n       that.setOrderDelete(true);\r\n       that.getView().setBusy(true);\r\n       if (this._oMiniCart) {\r\n        this._oMiniCart.destroy();\r\n        this._oMiniCart = null;\r\n       }\r\n\r\n      }\r\n\r\n     },\r\n     initialFocus: sap.m.MessageBox.Action.OK\r\n    }\r\n   );\r\n  },\r\n\r\n  onSuccessDeleteHeader: function() {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"deleteAll\"));\r\n   if (this.getTestMode()) {\r\n    this.getRouter().navTo(\"Search\");\r\n   } else {\r\n    if (this.getPurchaseRequisition() === '') {\r\n     this.getRouter().navTo(\"Search\");\r\n    } else {\r\n     this.getRouter().navTo(\"PurReqList\");\r\n    }\r\n   }\r\n   // this.dataManager.createNewDraft(this.getServiceCallParameter(this.getDraftSuccessCallback, this.serviceFail));\r\n  },\r\n\r\n  getDraftSuccessCallback: function() {\r\n   var that = this;\r\n   if (this.getPurchaseRequisition() === '') {\r\n    that.getRouter().navTo(\"Search\");\r\n   } else {\r\n\r\n    sap.m.MessageBox.show(\r\n     that.getResourceBundle().getText(\"myPRmsgDeleteLastItemCart\"), {\r\n      icon: sap.m.MessageBox.Icon.WARNING,\r\n      title: that.getResourceBundle().getText(\"msgBoxTitle\"),\r\n      actions: [sap.m.MessageBox.Action.OK],\r\n      styleClass: \"sapUiSizeCompact\",\r\n      onClose: function(oAction) {\r\n       if (oAction === sap.m.MessageBox.Action.OK) {\r\n\r\n        //do nothing\r\n       }\r\n\r\n      },\r\n      initialFocus: sap.m.MessageBox.Action.OK\r\n     }\r\n    );\r\n    // this.getRouter().navTo(\"PurReqList\");\r\n   }\r\n\r\n  },\r\n  PricescaleClick: function(oEvent) {\r\n   if (!this._prcsclPopover) {\r\n    this._prcsclPopover = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\", this);\r\n   }\r\n   var prodId = \"OpnCtlgItemID eq \" + oEvent.getSource().getParent().getParent().getBindingContext().getObject().PurReqnSSPCrossCatalogItem;\r\n   var quant = oEvent.getSource().getParent().getParent().getBindingContext().getObject().NetPriceQuantity;\r\n   this.curr = \" \" + oEvent.getSource().getParent().getParent().getBindingContext().getObject().Currency;\r\n   var baseUnit = oEvent.getSource().getParent().getParent().getBindingContext().getObject().BaseUnit;\r\n   quant = this.getResourceBundle().getText(\"price\") + \" \" + this.getResourceBundle().getText(\"CurrencyPer\") + \" \" + quant + \" \" +\r\n    baseUnit;\r\n   var mparameters = this.getServiceCallParameter(this.successPrcScale, this.serviceFail);\r\n\r\n   this.dataManager.priceScalefind(mparameters, prodId);\r\n   this.getView().addDependent(this._prcsclPopover);\r\n\r\n   jQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._prcsclPopover);\r\n\r\n   var oPopoverlink = oEvent.getSource();\r\n   jQuery.sap.delayedCall(0, this, function() {\r\n    this._prcsclPopover.openBy(oPopoverlink);\r\n   });\r\n\r\n   this._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(quant);\r\n\r\n  },\r\n\r\n  successPrcScale: function(data) {\r\n   var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n   var len = oJSModelCart.oData.results.length;\r\n   var i = 0;\r\n   for (i = 0; i < len; i++) {\r\n    oJSModelCart.oData.results[i].Currency = this.curr;\r\n   }\r\n\r\n   this._prcsclPopover.getContent()[0].setModel(oJSModelCart);\r\n   this._prcsclPopover.getContent()[0].bindElement(\"/results\");\r\n  },\r\n\r\n  ViewDetails: function(oEvent) {\r\n   this.setOrderDelete('stopNav');\r\n   var oCatalogKey = oEvent.getSource().getBindingContext().getObject().PurReqnSSPCrossCatalogItem;\r\n   var sCurrentLocale = sap.ui.getCore().getConfiguration().getLanguage();\r\n   sCurrentLocale = sCurrentLocale.substr(0, 2).toUpperCase();\r\n   var itemKey = oEvent.getSource().getBindingContext().getObject().DraftUUID;\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n   this.prNumber = purchaseRequisition;\r\n   if (oCatalogKey) {\r\n    this.getRouter().navTo(\"ProductDetails\", {\r\n     DraftKey: this.getHeaderDraftKey(),\r\n     PurchaseRequisition: purchaseRequisition,\r\n     view: \"cartOverview\",\r\n     OpnCtlgItemID: oCatalogKey,\r\n     Language: sCurrentLocale,\r\n     free: itemKey\r\n    });\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n\r\n  },\r\n\r\n  handleReturnPress: function() {\r\n   var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"GoodsReceipt\",\r\n     action: \"return\"\r\n    },\r\n    params: {\r\n     PurchaseRequisition: [this.currentPRNumber]\r\n    }\r\n   });\r\n  },\r\n\r\n  handleConfirmPress: function() {\r\n   var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   oCrossAppNavigator.toExternal({\r\n    target: {\r\n     semanticObject: \"GoodsReceipt\",\r\n     action: \"create\"\r\n    },\r\n    params: {\r\n     PurchaseRequisition: [this.currentPRNumber]\r\n    }\r\n   });\r\n  },\r\n  showStatus: function(oEvent) {\r\n   this.getView().setBusy(true);\r\n   this.oButton = oEvent.getSource();\r\n   var prNum = oEvent.getSource().getBindingContext().getObject().PurchaseRequisition;\r\n\r\n   var prItemNum = oEvent.getSource().getBindingContext().getObject().PurchaseRequisitionItem;\r\n\r\n   this.statusFromCO_Cntrls();// preparing controls\r\n   this.statusFromCO_DBind(prNum, prItemNum); //binding data\r\n\r\n\r\n  },\r\n  adjustPayload: function(oData) {\r\n   for (var prop in oData) {\r\n    if (prop.search('_fc') < 0) {\r\n     var property = prop.toString() + \"_fc\";\r\n     if (oData[property] === 1 || oData[property] === 0) {\r\n      delete oData[prop];\r\n      delete oData[property];\r\n     }\r\n    }\r\n   }\r\n   return oData;\r\n  },\r\n\r\n  handleClose: function() {\r\n   //this._historyDialog.destroy();\r\n  }\r\n\r\n });\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/view/SourceOfSupply.fragment.xml": "<?xml version=\"1.0\"?>\r\n<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n <Table id=\"idProductsTable\" inset=\"false\" items=\"{ path: '/SourceOfSupplySet'}\" noDataText=\"{i18n>supplier}\"\r\n  updateFinished=\"onUpdateFinished\">\r\n  <columns>\r\n   <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"5rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"17rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Center\" minScreenWidth=\"Tablet\" width=\"14rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Tablet\" width=\"14rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Tablet\" width=\"\">\r\n    <header></header>\r\n   </Column>\r\n  </columns>\r\n  <ColumnListItem vAlign=\"Middle\">\r\n   <core:Icon size=\"5rem\" src=\"sap-icon://customer-and-supplier\"></core:Icon>\r\n   <HBox>\r\n    <ObjectHeader>\r\n     <attributes>\r\n      <ObjectAttribute text=\"{Supplyingvendorname}\"/>\r\n      <ObjectAttribute text=\"{Fixedsupplier}\"/>\r\n      <ObjectAttribute text=\"{Supplier}\"/>\r\n      <ObjectAttribute\r\n       text=\"{parts:[{path:'Purchasinginforecord'},{path:'Purchasingdocument'},{path:'Purcahnsingdocumentitem'} ],formatter:'.formatter.SourceOfSupply'}\"/>\r\n     </attributes>\r\n    </ObjectHeader>\r\n   </HBox>\r\n   <Text/>\r\n   <ObjectHeader>\r\n    <attributes>\r\n     <ObjectAttribute text=\"{parts:[{path:'Netprice'},{path:'Purreqnitemcurrency'}], formatter:'.formatter.netPrice'}\" title=\"{i18n>NetPrice}\"/>\r\n    </attributes>\r\n   </ObjectHeader>\r\n   <Button press=\"onAssign\" text=\"{i18n>Assign}\" visible=\"true\"/>\r\n  </ColumnListItem>\r\n </Table>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/controller/ItemDetails.controller.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nsap.ui.define([\"ui/s2p/mm/requisition/maintain/s1/controller/BaseController\", \"sap/ui/model/json/JSONModel\",\r\n\t'sap/m/UploadCollectionParameter', 'sap/m/MessageToast', 'sap/m/MessageBox', \"ui/s2p/mm/requisition/maintain/s1/model/formatter\"\r\n], function(B, J, f) {\r\n\t\"use strict\";\r\n\treturn B.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.ItemDetails\", {\r\n\t\t// <!-- ADDED BY C4P -->\r\n\t\tvhr_ZZPURCHREQ: function() {\r\n\t\t\tthis.getSearchHelpMetaData(\"ZZPURCHREQ\", \"ZNMM_SH_ZNZ\");\r\n\t\t},\r\n\t\tisDate: function(oDate) {\r\n\t\t\treturn oDate.constructor.toString().indexOf(\"Date\") > -1;\r\n\t\t},\r\n\t\ttoJSONLocal: function(oDate) {\r\n\t\t\tfunction addZ(n) {\r\n\t\t\t\treturn (n < 10 ? '0' : '') + n;\r\n\t\t\t}\r\n\t\t\tif (oDate == null) {\r\n\t\t\t\tvar oDate = new Date(1, 1, 1);\r\n\t\t\t}\r\n\t\t\tif (!this.isDate(oDate)) {\r\n\t\t\t\tif (oDate.match(/\\./g) && oDate.match(/\\./g).length == 2) {\r\n\t\t\t\t\tvar vDate = oDate.split(\".\")[2] + '-' + oDate.split(\".\")[1] + '-' + oDate.split(\".\")[0];\r\n\t\t\t\t\toDate = new Date(vDate);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toDate = new Date(oDate);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn oDate.getFullYear() + '-' +\r\n\t\t\t\taddZ(oDate.getMonth() + 1) + '-' +\r\n\t\t\t\taddZ(oDate.getDate()) + 'T02:00:00';\r\n\t\t},\r\n\r\n\t\tshlpDialog: null,\r\n\t\toValueHelpElement: null,\r\n\t\toDataVHFields: null,\r\n\t\toSHLPDefVals: {\r\n\t\t\t\"values\": []\r\n\t\t},\r\n\t\tgetFormValue: function(fieldId) {\r\n\t\t\tvar oElement = this.getView().byId(fieldId);\r\n\t\t\tif (!oElement) {\r\n\t\t\t\tvar oElement = sap.ui.getCore().byId(fieldId);\r\n\t\t\t}\r\n\t\t\tif (!oElement) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tvar oElementType = oElement.getMetadata().getName();\r\n\t\t\tswitch (oElementType) {\r\n\t\t\t\tcase \"sap.m.Input\":\r\n\t\t\t\t\treturn oElement.getValue();\r\n\t\t\t\tcase \"sap.m.ComboBox\":\r\n\t\t\t\t\treturn oElement.getSelectedKey();\r\n\t\t\t\tcase \"sap.m.Select\":\r\n\t\t\t\t\treturn oElement.getSelectedKey();\r\n\t\t\t\tcase \"sap.m.CheckBox\":\r\n\t\t\t\t\treturn oElement.getSelected();\r\n\t\t\t\tcase \"sap.m.DatePicker\":\r\n\t\t\t\t\treturn this.toJSONLocal(oElement.getDateValue());\r\n\t\t\t\t\t//return oElement.getValue();\r\n\t\t\t\tcase \"sap.m.Switch\":\r\n\t\t\t\t\treturn oElement.getState();\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn oElement.getValue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetFormValue: function(fieldId, iValue) {\r\n\t\t\tvar oElement = this.getView().byId(fieldId);\r\n\t\t\tif (!oElement) {\r\n\t\t\t\tvar oElement = sap.ui.getCore().byId(fieldId);\r\n\t\t\t}\r\n\t\t\tif (!oElement) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\tvar oElementType = oElement.getMetadata().getName();\r\n\t\t\tswitch (oElementType) {\r\n\t\t\t\tcase \"sap.m.Input\":\r\n\t\t\t\t\toElement.setValue(iValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"sap.m.ComboBox\":\r\n\t\t\t\t\toElement.setSelectedKey(iValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"sap.m.CheckBox\":\r\n\t\t\t\t\toElement.setSelected(iValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"sap.m.DatePicker\":\r\n\t\t\t\t\toElement.getDateValue(iValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"sap.m.Switch\":\r\n\t\t\t\t\toElement.setState(iValue);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn oElement.setValue(iValue);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\treadSHLPData: function(that, uri, params, afterFunction) {\r\n\t\t\tvar busy = new sap.m.BusyDialog();\r\n\t\t\tbusy.open();\r\n\t\t\tsetTimeout(\r\n\t\t\t\tfunction() {\r\n\t\t\t\t\tvar url = \"/sap/opu/odata/sap/ZNMM_SHLP_SRV\";\r\n\t\t\t\t\tvar oModel = new sap.ui.model.odata.v2.ODataModel(url);\r\n\t\t\t\t\tvar oModelJsonArray = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\toModel.read(uri, {\r\n\t\t\t\t\t\turlParameters: params,\r\n\t\t\t\t\t\tsuccess: function(oData, oResponse) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\toModelJsonArray.setData(oData);\r\n\t\t\t\t\t\t\tif ((oModelJsonArray.getData() != undefined) && (oModelJsonArray.getData().results != undefined) && (oModelJsonArray.getData()\r\n\t\t\t\t\t\t\t\t\t.results.length > 100)) {\r\n\t\t\t\t\t\t\t\toModelJsonArray.setSizeLimit(oModelJsonArray.getData().results.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tafterFunction(that, oModelJsonArray);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terror: function(error) {\r\n\t\t\t\t\t\t\tbusy.close();\r\n\t\t\t\t\t\t\tif (error.response) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tvar vMessages = $(error.response.body).find('message').first().text().match(/{(.*)}/)[0];\r\n\t\t\t\t\t\t\t\t\tif (vMessages) {\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsgS(that, vMessages);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar vMessage = $(error.response.body).find('message').first().text();\r\n\t\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", vMessage);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.message);\r\n\t\t\t\t\t\t\t\t\tthat.addMsg(that, \"E\", error.response.body);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.showMsg(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t250\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetSearchHelpMetaData: function(iElementId, iShlpName) {\r\n\t\t\tthis.oValueHelpElement = this.getView().byId(iElementId);\r\n\t\t\tvar uri = \"/ShlpDescrSet\";\r\n\t\t\tvar params = {\r\n\t\t\t\t\"$filter\": \"Shlpname eq '\" + iShlpName + \"'\"\r\n\t\t\t};\r\n\t\t\tthis.readSHLPData(this, uri, params, this.createSearchHelpDialog);\r\n\t\t},\r\n\t\tcreateSearchHelpDialog: function(that, oModel) {\r\n\t\t\tthat.oDataVHFields = oModel.oData;\r\n\t\t\tvar oI18n = that.getView().getModel(\"i18n\").getResourceBundle();\r\n\t\t\tif (that.oDataVHFields.results[0] && that.oDataVHFields.results[0].Shlptext) {\r\n\t\t\t\tvar vTitle = that.oDataVHFields.results[0].Shlptext;\r\n\t\t\t} else {\r\n\t\t\t\tvar vTitle = \"Search help\";\r\n\t\t\t}\r\n\t\t\tif (!that.shlpDialog) {\r\n\t\t\t\tthat.shlpDialog = new sap.m.Dialog({\r\n\t\t\t\t\ttitle: vTitle,\r\n\t\t\t\t\tbuttons: [\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\tid: \"btn_shlpsearch\",\r\n\t\t\t\t\t\t\ttext: oI18n.getText(\"StartSearch\"),\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\tthat.shlpSearchValues(that);\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\tid: \"btn_shlpformopen\",\r\n\t\t\t\t\t\t\ttext: oI18n.getText(\"OpenFormSearch\"),\r\n\t\t\t\t\t\t\tvisible: false,\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\tthat.shlpSearchForm(that);\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\tid: \"btn_shlpclose\",\r\n\t\t\t\t\t\t\ttext: oI18n.getText(\"Close\"),\r\n\t\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\t\tthat.shlpDialog.close();\r\n\t\t\t\t\t\t\t\tthat.shlpDialog.destroy(false);\r\n\t\t\t\t\t\t\t\tthat.shlpDialog = null;\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t\tvar oSimpleForm = new sap.ui.layout.form.SimpleForm(\"sf_shlpattrs\");\r\n\t\t\t\tfor (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n\t\t\t\t\toSimpleForm.addContent(new sap.m.Label({\r\n\t\t\t\t\t\tid: \"lbl_\" + that.oDataVHFields.results[i].Fieldname,\r\n\t\t\t\t\t\ttext: that.oDataVHFields.results[i].ScrtextM\r\n\t\t\t\t\t}));\r\n\t\t\t\t\tswitch (that.oDataVHFields.results[i].Datatype) {\r\n\t\t\t\t\t\tcase \"CHAR\":\r\n\t\t\t\t\t\t\toSimpleForm.addContent(new sap.m.Input({\r\n\t\t\t\t\t\t\t\tid: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"DATS\":\r\n\t\t\t\t\t\t\toSimpleForm.addContent(new sap.m.DatePicker({\r\n\t\t\t\t\t\t\t\tid: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\toSimpleForm.addContent(new sap.m.Input({\r\n\t\t\t\t\t\t\t\tid: \"inp_\" + that.oDataVHFields.results[i].Fieldname\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\toSimpleForm.addContent(new sap.m.Label({\r\n\t\t\t\t\tid: \"lbl_maxrows\",\r\n\t\t\t\t\ttext: oI18n.getText(\"MaxRows\")\r\n\t\t\t\t}));\r\n\t\t\t\toSimpleForm.addContent(new sap.m.Input({\r\n\t\t\t\t\tid: \"inp_maxrows\",\r\n\t\t\t\t\tvalue: 10\r\n\t\t\t\t}));\r\n\t\t\t\tthat.shlpDialog.addContent(oSimpleForm);\r\n\t\t\t\t//>add default values from form&nbsp;\r\n\t\t\t\tfor (var i = 0; i < that.oSHLPDefVals.values.length; i++) {\r\n\t\t\t\t\tvar oElement = sap.ui.getCore().byId(\"inp_\" + that.oSHLPDefVals.values[i].name);\r\n\t\t\t\t\tif (oElement) {\r\n\t\t\t\t\t\toElement.setValue(that.oSHLPDefVals.values[i].value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//<\r\n\t\t\t\tthat.shlpDialog.oVC = that;\r\n\t\t\t\tthat.shlpDialog.open();\r\n\t\t\t}\r\n\t\t},\r\n\t\tshlpSearchValues: function(that) {\r\n\t\t\tif (!this.oDataVHFields) {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tvar vFilter = \"\";\r\n\t\t\t\tvar vShlpname = this.oDataVHFields.results[0].Shlpname;\r\n\t\t\t\tfor (var i = 0; i < this.oDataVHFields.results.length; i++) {\r\n\t\t\t\t\tvFilter = vFilter + this.oDataVHFields.results[i].Fieldname + '=' + this.getFormValue(\"inp_\" + this.oDataVHFields.results[i].Fieldname) +\r\n\t\t\t\t\t\t';';\r\n\t\t\t\t}\r\n\t\t\t\tvFilter = vFilter + 'maxrows=' + this.getFormValue(\"inp_maxrows\");\r\n\t\t\t\tvFilter = encodeURI(vFilter);\r\n\t\t\t\tvar uri = \"/ShlpValueSet\";\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\t\"$filter\": \"Shlpname eq '\" + vShlpname + \"' and Values eq '\" + vFilter + \"'\"\r\n\t\t\t\t};\r\n\t\t\t\tthis.readSHLPData(this, uri, params, this.createSearchValueTable);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshlpSearchForm: function(that) {\r\n\t\t\tthat.setVisible(\"sf_shlpattrs\", true);\r\n\t\t\tthat.setVisible(\"btn_shlpformopen\", false);\r\n\t\t\tthat.setVisible(\"btn_shlpsearch\", true);\r\n\t\t},\r\n\t\tcreateSearchValueTable: function(that, oModel) {\r\n\t\t\t//console.log(oModel);\r\n\t\t\tfor (var i = 0; i < oModel.oData.results.length; i++) {\r\n\t\t\t\toModel.oData.results[i].Values = JSON.parse(oModel.oData.results[i].Values);\r\n\t\t\t\tfor (var l = 0; l < that.oDataVHFields.results.length; l++) {\r\n\t\t\t\t\toModel.oData.results[i][that.oDataVHFields.results[l].Fieldname.toLowerCase()] = oModel.oData.results[i].Values[that.oDataVHFields\r\n\t\t\t\t\t\t.results[l].Fieldname.toLowerCase()];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().byId(\"tbl_SearchValue\") != undefined) {\r\n\t\t\t\tsap.ui.getCore().byId(\"tbl_SearchValue\").destroy();\r\n\t\t\t}\r\n\t\t\tvar oSearchValueTable = new sap.m.Table({\r\n\t\t\t\tid: \"tbl_SearchValue\",\r\n\t\t\t\tmode: sap.m.ListMode.SingleSelectLeft,\r\n\t\t\t\tselectionChange: that.onSearchValueSelected\r\n\t\t\t});\r\n\t\t\tfor (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n\t\t\t\toSearchValueTable.addColumn(new sap.m.Column({\r\n\t\t\t\t\t//width : \"60px\",\r\n\t\t\t\t\theader: new sap.m.Label({\r\n\t\t\t\t\t\ttext: that.oDataVHFields.results[i].ScrtextM\r\n\t\t\t\t\t})\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tvar oTemplate = new sap.m.ColumnListItem();\r\n\t\t\tfor (var i = 0; i < that.oDataVHFields.results.length; i++) {\r\n\t\t\t\toTemplate.addCell(new sap.m.Text({\r\n\t\t\t\t\ttext: {\r\n\t\t\t\t\t\tpath: that.oDataVHFields.results[i].Fieldname.toLowerCase()\r\n\t\t\t\t\t},\r\n\t\t\t\t\twrapping: false\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\toSearchValueTable.setModel(oModel);\r\n\t\t\toSearchValueTable.bindItems(\"/results\", oTemplate);\r\n\t\t\tthat.shlpDialog.addContent(oSearchValueTable);\r\n\t\t\tif (oModel.oData.results.length > 0) {\r\n\t\t\t\tthat.setVisible(\"sf_shlpattrs\", false);\r\n\t\t\t\tthat.setVisible(\"btn_shlpformopen\", true);\r\n\t\t\t\tthat.setVisible(\"btn_shlpsearch\", false);\r\n\t\t\t} else {}\r\n\t\t},\r\n\t\tonSearchValueSelected: function(oEvent) {\r\n\t\t\tvar oSelectedItem = oEvent.getSource().getSelectedItem().getBindingContext().getObject();\r\n\t\t\tvar that = oEvent.getSource().oParent.oVC;\r\n\t\t\tif (!that.oValueHelpElement) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar vValue = oSelectedItem[oSelectedItem.Retfieldname.toLowerCase()];\r\n\t\t\tthat.oValueHelpElement.setValue(vValue);\r\n\t\t\tthat.setDataDescription(that, that.oValueHelpElement, vValue);\r\n\t\t\tthat.shlpDialog.close();\r\n\t\t\tthat.shlpDialog.destroy(false);\r\n\t\t\tthat.shlpDialog = null;\r\n\t\t},\r\n\t\tsetDataDescr: function(that, iElement) {\r\n\t\t\tvar vValue = this.getFormValue(iElement);\r\n\t\t\tvar uri = \"/ValueDescrSet\";\r\n\t\t\tvar params = {\r\n\t\t\t\t\"$filter\": \"Fieldname eq '\" + iElement + \"' and Value eq '\" + vValue + \"'\"\r\n\t\t\t};\r\n\t\t\tthat.readSHLPData(this, uri, params, this.setValueDescription);\r\n\t\t},\r\n\t\tsetDataDescription: function(that, oElement, iValue) {\r\n\t\t\tif (iValue == \"\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar aFName = oElement.getId().split(\"-\");\r\n\t\t\tvar vFieldname = aFName[aFName.length - 1];\r\n\t\t\tvar uri = \"/ValueDescrSet\";\r\n\t\t\tvar params = {\r\n\t\t\t\t\"$filter\": \"Fieldname eq '\" + vFieldname + \"' and Value eq '\" + iValue + \"'\"\r\n\t\t\t};\r\n\t\t\tthat.readSHLPData(that, uri, params, that.setValueDescription);\r\n\t\t},\r\n\t\tsetValueDescription: function(that, oModel) {\r\n\t\t\ttry {\r\n\t\t\t\tfor (var i = 0; i < oModel.oData.results.length; i++) {\r\n\t\t\t\t\tvar vFieldname = oModel.oData.results[i].Fieldname;\r\n\t\t\t\t\tvar vFieldnameD = oModel.oData.results[i].Fieldname + \"_D\";\r\n\t\t\t\t\tvar vDescr = oModel.oData.results[i].Description;\r\n\t\t\t\t\tvar vValue = oModel.oData.results[i].Value;\r\n\t\t\t\t\tif (vDescr != \"\") {\r\n\t\t\t\t\t\tvar oElement = that.getView().byId(vFieldnameD);\r\n\t\t\t\t\t\toElement.setText(vDescr);\r\n\t\t\t\t\t\toElement.setVisible(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (vValue != \"\") {\r\n\t\t\t\t\t\tthat.setFormValue(vFieldname, vValue);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {}\r\n\t\t},\r\n\t\tsetVisible: function(iElement, xVisible) {\r\n\t\t\ttry {\r\n\t\t\t\tvar oEl = this.getView().byId(iElement);\r\n\t\t\t\tif (!oEl) {\r\n\t\t\t\t\tvar oEl = sap.ui.getCore().byId(iElement);\r\n\t\t\t\t}\r\n\t\t\t\toEl.setVisible(xVisible);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tvar oEl = sap.ui.getCore().byId(iElement);\r\n\t\t\t\tif (oEl) {\r\n\t\t\t\t\toEl.setVisible(xVisible);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// <!-- END ADDED BY C4P -->\r\n\t\t_loadattachments: function() {\r\n\t\t\tvar P = this.getPurchaseRequisition();\r\n\t\t\tvar i;\r\n\t\t\tvar a = 'C';\r\n\t\t\tif (!this.editable) {\r\n\t\t\t\ta = \"D\";\r\n\t\t\t}\r\n\t\t\tif (P) {\r\n\t\t\t\twhile (P.length < 10) {\r\n\t\t\t\t\tP = \"0\" + P;\r\n\t\t\t\t}\r\n\t\t\t\tvar b = this.prItem;\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\ti = P.concat(b);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ti = this.itemDraftUUID;\r\n\t\t\t\t}\r\n\t\t\t\t/*ADDED by C4P*/\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\t\"$filter\": \"DocObjid eq '\" + i.substr(0, 10) + \"' and DocItem eq '\" + i.substr(10, 5) + \"'\"\r\n\t\t\t\t};\r\n\t\t\t\t/*END ADDED by C4P*/\r\n\t\t\t} else {\r\n\t\t\t\t/* COMMENTED BY C4P*/\r\n\t\t\t\t// i = this.itemDraftUUID;\r\n\t\t\t\t/* END COMMENTED BY C4P*/\r\n\t\t\t\t/*ADDED by C4P*/\r\n\t\t\t\tif (this.itemDraftUUID) {\r\n\t\t\t\t\ti = this.itemDraftUUID;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ti = this.draftKey;\r\n\t\t\t\t}\r\n\t\t\t\ti = i.replace(/-/g, \"\").toUpperCase();\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\t\"$filter\": \"GUID eq '\" + i + \"'\"\r\n\t\t\t\t};\r\n\t\t\t\t/*END ADDED by C4P*/\r\n\t\t\t}\r\n\t\t\ti = i.replace(/-/g, \"\");\r\n\t\t\tvar s = this.getView();\r\n\t\t\tvar A;\r\n\t\t\tvar t = this;\r\n\t\t\t/*ADDED by C4P*/\r\n\t\t\tvar uri = \"/AttachmentSet\";\r\n\r\n\t\t\tt.readData(t, uri, params, null, t.setAttachsAfterUpload);\r\n\t\t\t/*END ADDED by C4P*/\r\n\r\n\t\t\t/* COMMENTED BY C4P*/\r\n\t\t\t/*if ((A !== null) && (A) && (A.getId() === \"attachmentsrv.ItemDetails\")) {\r\n\t\t\t\tA.refresh(a, \"EBAN\", i);\r\n\t\t\t} else {\r\n\t\t\t\tA = this.getOwnerComponent().createComponent({\r\n\t\t\t\t\tusage: \"attachmentReuseComponent\",\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tmode: a,\r\n\t\t\t\t\t\tobjectKey: i,\r\n\t\t\t\t\t\tobjectType: \"EBAN\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tA.then(function(c) {\r\n\t\t\t\t\tt.byId(\"attachmentCompContainer\").setComponent(c);\r\n\t\t\t\t});\r\n\t\t\t}*/\r\n\t\t\t/* END COMMENTED BY C4P*/\r\n\t\t\tthis.prcsclPresent();\r\n\t\t},\r\n\t\tonInit: function() {\r\n\t\t\tthis.getView().addEventDelegate({\r\n\t\t\t\tonafterHide: function(e) {\r\n\t\t\t\t\tthis.oModel.resetChanges();\r\n\t\t\t\t\tthis.Model.refresh();\r\n\t\t\t\t},\r\n\t\t\t\tonbeforeHide: function() {\r\n\t\t\t\t\tthis.oModel.resetChanges();\r\n\t\t\t\t\tthis.Model.refresh();\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t\tthis.getView().setBusyIndicatorDelay(0);\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis._notes = [];\r\n\t\t\tthis.batch_update = [];\r\n\t\t\tthis.batch_create = [];\r\n\t\t\tthis.accSection = false;\r\n\t\t\tthis.oModel = this.getAppModel();\r\n\t\t\tthis.oModel.setSizeLimit(500);\r\n\t\t\tvar r = sap.ui.core.UIComponent.getRouterFor(this);\r\n\t\t\tr.getRoute(\"ItemDetails\").attachPatternMatched(this._onObjectMatched, this);\r\n\t\t\tvar m = new sap.ui.model.json.JSONModel({\r\n\t\t\t\t\"Salutation\": [{\r\n\t\t\t\t\t\"Key\": \"0001\",\r\n\t\t\t\t\t\"Name\": \"Ms.\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"Key\": \"0002\",\r\n\t\t\t\t\t\"Name\": \"Mr.\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"Key\": \"0003\",\r\n\t\t\t\t\t\"Name\": \"Company\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"Key\": \"0004\",\r\n\t\t\t\t\t\"Name\": \"Mr. and Mrs.\"\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t\tthis.getView().setModel(m, \"Title\");\r\n\t\t},\r\n\t\tDateRangeValidation: function(e) {\r\n\t\t\tvar d = e.getSource();\r\n\t\t\tvar i = e.getParameter('valid');\r\n\t\t\tif (i === true) {\r\n\t\t\t\tvar F = e.getSource().getDateValue();\r\n\t\t\t\tvar c = new Date(Date.UTC(F.getFullYear(), F.getMonth(), F.getDate()));\r\n\t\t\t\tvar t = e.getSource().getSecondDateValue();\r\n\t\t\t\tvar C = new Date(Date.UTC(t.getFullYear(), t.getMonth(), t.getDate()));\r\n\t\t\t\tvar p = d.getBinding(\"dateValue\");\r\n\t\t\t\tp.setValue(c);\r\n\t\t\t\tvar P = d.getBinding(\"secondDateValue\");\r\n\t\t\t\tP.setValue(C);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPressApplyChange: function() {\r\n\t\t\tthis.saveApplyChange = true;\r\n\t\t\tthis.invokeMassChange();\r\n\t\t},\r\n\t\tonCancelChanges: function() {\r\n\t\t\tthis.ApplyChange.onCancelChanges();\r\n\t\t},\r\n\t\tonSelectItemsApplyChange: function() {\r\n\t\t\tsap.ui.getCore().byId(\"massChangeDialog\").setTitle(this.getResourceBundle().getText(\"selectItems\"));\r\n\t\t\tthis.ApplyChange.onSelectItems(this.getPurchaseRequisition(), this.getHeaderDraftKey(), this);\r\n\t\t},\r\n\t\tgoBacktoSectionsPage: function() {\r\n\t\t\tsap.ui.getCore().byId(\"massChangeDialog\").setTitle(this.getResourceBundle().getText(\"selectChanges\"));\r\n\t\t\tthis.ApplyChange.goBacktoSectionsPage();\r\n\t\t},\r\n\t\tonSaveChanges: function() {\r\n\t\t\tthis.ApplyChange.onSaveChanges(this);\r\n\t\t},\r\n\t\tupdateMassItemCount: function(e) {\r\n\t\t\tthis.ApplyChange.onUpdateSelectedItemsCount(e);\r\n\t\t},\r\n\t\tonSearchMassChange: function(e) {\r\n\t\t\tthis.ApplyChange.onSearchMassChange(e);\r\n\t\t},\r\n\t\tprepareStatusUI: function() {\r\n\t\t\tthis.statusFromID_DBind();\r\n\t\t},\r\n\t\t_onObjectMatched: function(E) {\r\n\t\t\tthis.readItemTextTypesMasterSet();\r\n\t\t\tif (this.getOwnerComponent().getComponentData().changingSourcePageAllowed) {\r\n\t\t\t\tthis.setSourcePage(\"ItemDetails\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// ADDED BY C4P\r\n\t\t\tvar ac4p = this.getOwnerComponent().getComponentData().purchaseRequisition.substr(0, 1);\r\n\t\t\tif (ac4p === \"1\") {\r\n\t\t\t\tvar vc4p = true;\r\n\t\t\t} else {\r\n\t\t\t\tvc4p = false;\r\n\t\t\t}\r\n\t\t\t// ADDED BY C4P\r\n\t\t\t\r\n\t\t\tvar v = new sap.ui.model.json.JSONModel();\r\n\t\t\tvar m = {\r\n\t\t\t\teditable: false,\r\n\t\t\t\t// ADDED BY C4P\r\n\t\t\t\tvisible: vc4p\r\n\t\t\t\t// ADDED BY C4P\t\t\t\t\r\n\t\t\t};\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tif (this.getMode() === \"edit\") {\r\n\t\t\t\tv.setData(m);\r\n\t\t\t\tthis.getView().setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm1\").setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm2\").setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm3\").setModel(v, \"viewProperties\");\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (this.getAppModel().oData[E.getParameter('arguments').items].RequestedQuantity_fc == \"1\") {\r\n\t\t\t\t\t\tm = {\r\n\t\t\t\t\t\t\teditable: true,\r\n\t\t\t\t\t\t\tenabled: false,\r\n\t\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t\t\tvisible: vc4p\r\n\t\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tm = {\r\n\t\t\t\t\t\t\teditable: true,\r\n\t\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t\t\tvisible: vc4p\r\n\t\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm = {\r\n\t\t\t\t\t\teditable: true,\r\n\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t\t\tvisible: vc4p\r\n\t\t\t\t\t\t// ADDED BY C4P\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tv.setData(m);\r\n\t\t\t\tthis.getView().setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm1\").setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm2\").setModel(v, \"viewProperties\");\r\n\t\t\t\tthis.getView().byId(\"smartForm3\").setModel(v, \"viewProperties\");\r\n\t\t\t}\r\n\t\t\tthis.save = false;\r\n\t\t\tthis.accSection = false;\r\n\t\t\tthis.supplierNamesos = \"\";\r\n\t\t\tif (this._oContent_Supplier) {\r\n\t\t\t\tthis._oContent_Supplier.destroy(true);\r\n\t\t\t\tthis._oContent_Supplier = null;\r\n\t\t\t}\r\n\t\t\tif (this.productList) {\r\n\t\t\t\tthis.productList.destroy(true);\r\n\t\t\t\tthis.productList = null;\r\n\t\t\t}\r\n\t\t\tif (this._ocontent) {\r\n\t\t\t\tthis._ocontent.destroy(true);\r\n\t\t\t\tthis._ocontent = null;\r\n\t\t\t}\r\n\t\t\tthis.setHeaderDraftKey(E.getParameter(\"arguments\").DraftKey);\r\n\t\t\tthis.setPurchaseRequisition(E.getParameter(\"arguments\").PurchaseRequisition);\r\n\t\t\tthis.itemDraftUUID = E.getParameter(\"arguments\").DraftUUID;\r\n\t\t\tthis.getOwnerComponent().getComponentData().purReqnItemDraft = this.itemDraftUUID;\r\n\t\t\tthis.itmKey = E.getParameter(\"arguments\").OpnCtlgItemID;\r\n\t\t\tthis.prItem = E.getParameter(\"arguments\").PurchaseRequisitionItem;\r\n\t\t\tthis.getOwnerComponent().getComponentData().purReqnItem = this.prItem;\r\n\t\t\tthis.itemPath = E.getParameter(\"arguments\").items;\r\n\t\t\tif (E.getParameter(\"arguments\").Editable === \"true\") {\r\n\t\t\t\tthis.editable = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.editable = false;\r\n\t\t\t}\r\n\t\t\tthis.getOwnerComponent().getComponentData().PRitemPath = this.itemPath;\r\n\t\t\tthis.itemBindingPath = \"/\" + this.itemPath + \"/\" + \"to_PurReqnAccAssignment_WD\";\r\n\t\t\tvar n = E.getParameter(\"name\");\r\n\t\t\tif (n === \"ItemDetails\") {\r\n\t\t\t\tif (!this.getTestMode()) {\r\n\t\t\t\t\tthis._loadattachments();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"smartForm1\").bindElement({\r\n\t\t\t\tpath: \"/\" + this.itemPath\r\n\t\t\t});\r\n\t\t\tthis.getView().byId(\"smartForm2\").bindElement({\r\n\t\t\t\tpath: \"/\" + this.itemPath\r\n\t\t\t});\r\n\t\t\tthis.checkAccAssignment();\r\n\t\t\tthis.getApprovalPreviewSet();\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.dataManager.getNotes(this.getServiceCallParameter(this.onSuccessNotes, this.serviceFail), this.itemDraftUUID, this.getPurchaseRequisition(),\r\n\t\t\t\tthis.prItem);\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tthis.showSource();\r\n\t\t\tvar c = this.getView().byId(\"smartForm1\").getBindingContext().getObject().Material;\r\n\t\t\tif ((c === \"\") || (c === null)) {\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setEnabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idMaterialDescription\").setEnabled(false);\r\n\t\t\t}\r\n\t\t\tif (this.getPurchaseRequisition()) {\r\n\t\t\t\tthis.getView().byId(\"addSupplier\").setEnabled(this.getView().byId(\"idDescription\").getEditable());\r\n\t\t\t}\r\n\t\t\tthis.deletable = this.getView().byId(\"smartForm1\").getBindingContext().getObject().delete_ac;\r\n\t\t\tthis.getView().byId(\"idDeleteButton\").setEnabled(this.deletable);\r\n\t\t\tthis.getView().byId(\"idSaveButton\").setEnabled(this.deletable);\r\n\t\t\tif (this.getPurchaseRequisition()) {\r\n\t\t\t\tif (sap.ui.getCore().byId(\"itemProcessFlow\")) {\r\n\t\t\t\t\tsap.ui.getCore().byId(\"itemProcessFlow\").destroy();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.getPurchaseRequisition() !== \"PurchaseRequisition 8\") {}\r\n\t\t\t}\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t}\r\n\t\t\tvar p = this.getServiceCallParameter(this.successItemDetails, this.errorServiceFail);\r\n\t\t\tthis.dataManager.getItemDetails(p, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem, false);\r\n\t\t\tif (this.getPurchaseRequisition()) {\r\n\t\t\t\tvar s = this.getItemStatus();\r\n\t\t\t\tif (s === \"B\" || s === \"A\" || s === \"K\" || s === \"L\" || s === \"R\" || s === \"S\") {\r\n\t\t\t\t\tthis.getView().byId(\"idItemLevelStatus\").setVisible(true);\r\n\t\t\t\t\tthis.prepareStatusUI();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"idItemLevelStatus\").setVisible(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.checkSupplierAssigned()) {\r\n\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(false);\r\n\t\t\t}\r\n\t\t\tif (this.getView().byId(\"idServicePerformerDet\")) {\r\n\t\t\t\tif (this.getView().byId(\"idServicePerformerDet\").getValue()) {\r\n\t\t\t\t\tif (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0]) {\r\n\t\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\tthis.getView().byId(\"productTypeSelect\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idApplychangeButton\").setVisible(false);\r\n\t\t\t}\r\n\t\t\tthis.supplierPendingCanges = false;\r\n\t\t\tthis.oModel.resetChanges();\r\n\t\t},\r\n\t\tcheckSupplierAssigned: function() {\r\n\t\t\tvar b, d;\r\n\t\t\tvar s = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\tif (sap.ui.getCore().byId(\"idProductsTable\")) {\r\n\t\t\t\tb = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n\t\t\t\tfor (var i = 0; i <= b - 1; i++) {\r\n\t\t\t\t\tif (s === sap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[2].getText()) {\r\n\t\t\t\t\t\td = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.getView().byId(\"sourceOfSupply\").getContent().length > 0) {\r\n\t\t\t\t\tb = this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = 0;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var a = 0; a <= b - 1; a++) {\r\n\t\t\t\t\tif (s === this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[a].getCells()[2].getText()) {\r\n\t\t\t\t\t\td = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var c = 0; c <= b - 1; c++) {\r\n\t\t\t\tif (s === d) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tsuccessItems: function(d) {\r\n\t\t\tif (d.results.length > 0) {\r\n\t\t\t\tvar a = [];\r\n\t\t\t\tfor (var i = 0; i < d.results.length; i++) {\r\n\t\t\t\t\tif (d.results[i].DraftUUID != this.itemDraftUUID) {\r\n\t\t\t\t\t\ta.push(d.results[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar b = {\r\n\t\t\t\t\"items\": a\r\n\t\t\t};\r\n\t\t\tthis.oItemsList = new sap.ui.model.json.JSONModel(b);\r\n\t\t\tif (a.length > 0) {\r\n\t\t\t\tthis.getView().byId('idApplychangeButton').setEnabled(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId('idApplychangeButton').setEnabled(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\terrorServiceFailitems: function() {\r\n\t\t\tsap.m.MessageToast.show(this.oTextBundle.getText(\"readFailed\"));\r\n\t\t},\r\n\t\tsuccessItemDetails: function(d) {\r\n\t\t\ttry {\r\n\t\t\t\tvar p = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ProductType\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tp = \"\";\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t}\r\n\t\t\tvar P = this.getServiceCallParameter(this.successItems, this.errorServiceFailitems);\r\n\t\t\tthis.dataManager.getItemsforProductType(P, this.getPurchaseRequisition(), this.getHeaderDraftKey(), false, p);\r\n\t\t},\r\n\t\tcheckAccAssignment: function() {\r\n\t\t\tvar a = this.getView().byId('accAssCategory').getValue();\r\n\t\t\tvar p = this.getView().byId(\"idLocation\").getValue();\r\n\t\t\tvar e = this.getView().byId(\"idExtLocation\").getValue();\r\n\t\t\tif ((a === null) || (a === \"\") || ((p === null) || (p === \"\")) && ((e === null) || (e === \"\"))) {\r\n\t\t\t\tthis.getView().byId(\"listAccAssignment\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"formAccAssignment\").setVisible(false);\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.dataManager.getAccAssignmentValue(this.getServiceCallParameter(this.checkAccountCategory, this.serviceFail), a);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckAccountCategory: function(d) {\r\n\t\t\tif (d.results[0] !== undefined) {\r\n\t\t\t\tthis.accValue = d.results[0].ConsumptionPosting;\r\n\t\t\t\tif (this.accValue === 'U') {\r\n\t\t\t\t\tthis.getView().byId(\"listAccAssignment\").setVisible(false);\r\n\t\t\t\t\tthis.getView().byId(\"formAccAssignment\").setVisible(false);\r\n\t\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t\t\tthis.accSection = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar p = this.getServiceCallParameter(this.successAccRead, this.errorServiceFail);\r\n\t\t\t\t\tthis.dataManager.getAccounting(p, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem, false);\r\n\t\t\t\t\tthis.getAppModel().read(this.itemBindingPath, {});\r\n\t\t\t\t\tthis.getView().byId(\"listAccAssignment\").setVisible(true);\r\n\t\t\t\t\tif (!this.getTestMode()) {\r\n\t\t\t\t\t\tthis.createAccComponent();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sFin = false;\r\n\t\t\t\t\tif (this.sFin === true) {\r\n\t\t\t\t\t\tthis.getView().byId(\"sFinlistAccAssignment\").setVisible(true);\r\n\t\t\t\t\t\tthis.createAccComponentsFin();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t\t\tthis.accSection = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"listAccAssignment\").setVisible(false);\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessAccRead: function(d) {\r\n\t\t\tvar a = d.results[0];\r\n\t\t},\r\n\t\tcreateAccComponentsFin: function() {\r\n\t\t\tvar F = sap.ui.getCore().createComponent({\r\n\t\t\t\t\"name\": \"sap.fin.acc.lib.codingblock.component\",\r\n\t\t\t\tcomponentData: {\r\n\t\t\t\t\t\"entitySetName\": \"C_Sspprmaint_Accassign\",\r\n\t\t\t\t\t\"entityTypeName\": \"C_Sspprmaint_AccassignType\",\r\n\t\t\t\t\t\"parentEntitySetName\": \"C_Sspprmaint_Itm\",\r\n\t\t\t\t\t\"parentEntityKey\": {\r\n\t\t\t\t\t\t\"PurchaseRequisition\": this.getPurchaseRequisition(),\r\n\t\t\t\t\t\t\"PurchaseRequisitionItem\": this.prItem,\r\n\t\t\t\t\t\t\"PurReqnItemDraftUUID\": this.itemDraftUUID\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"navigationName\": \"to_PurReqnAccAssignment_WD\",\r\n\t\t\t\t\t\"UIMode\": \"TABLE\",\r\n\t\t\t\t\t\"enableRowEditButtons\": false\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tF.attachCodingBlockAttributeChanged(jQuery.proxy(this.onCodingBlockChange, this));\r\n\t\t\tthis.getView().byId(\"sFinaccAssignmentCompContainer\").setComponent(F);\r\n\t\t},\r\n\t\tonCodingBlockChange: function(E) {\r\n\t\t\tvar O = E.getParameter(\"codingBlockEvent\").getSource().getModel().getData(E.getParameter(\"codingBlockEvent\").getSource().getBindingContext()\r\n\t\t\t\t.sPath);\r\n\t\t\tvar p;\r\n\t\t\ttry {\r\n\t\t\t\tdelete O.HasDraftEntity;\r\n\t\t\t\tdelete O.DraftAdministrativeDataUUID;\r\n\t\t\t\tdelete O.IsActiveEntity;\r\n\t\t\t\tdelete O.HasActiveEntity;\r\n\t\t\t\tdelete O.MultipleAcctAssgmtDistrPercent;\r\n\t\t\t\tdelete O.CompanyCode;\r\n\t\t\t\tdelete O.CostElement;\r\n\t\t\t\tfor (p in O)\r\n\t\t\t\t\tif (typeof(O[p]) === \"object\") {\r\n\t\t\t\t\t\tdelete O[p];\r\n\t\t\t\t\t}\r\n\t\t\t\tfor (p in O) {\r\n\t\t\t\t\tif (p.search('UxFc') !== -1) {\r\n\t\t\t\t\t\tdelete O[p];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t\tvar a = E.getParameter(\"codingBlockEvent\").getSource().getBindingContext().sPath;\r\n\t\t\tvar m = E.getParameter(\"codingBlockEvent\").getSource().getModel();\r\n\t\t\tif (m) {\r\n\t\t\t\tm.update(a, O, {\r\n\t\t\t\t\t\"success\": jQuery.proxy(this.successHandler, this),\r\n\t\t\t\t\t\"error\": jQuery.proxy(this.errorHandler, this)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessHandler: function(e) {\r\n\t\t\tsap.m.MessageToast.show(this.oTextBundle.getText(\"updateSuccess\"));\r\n\t\t\te.getParameter(\"codingBlockEvent\").getSource().getModel().refresh();\r\n\t\t},\r\n\t\terrorHandler: function() {},\r\n\t\tnetPriceValidation: function() {\r\n\t\t\tvar q = this.getView().byId(\"idNetPriceQuantity\").getValue();\r\n\t\t\tq = q.split('.').join('');\r\n\t\t\tq = q.split(',').join('');\r\n\t\t\tq = Number(q);\r\n\t\t\tif (q <= 0 || isNaN(q)) {\r\n\t\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\t\tvar c = d.PurReqnSSPCrossCatalogItem;\r\n\t\t\t\tif (c) {\r\n\t\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tthis.getView().byId(\"idNetPriceQuantity\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar b = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath).BaseUnit;\r\n\t\t\t\tif (b === \"\") {\r\n\t\t\t\t\tthis.getView().byId(\"idNetPriceQuantity\").setUomEditState(0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"idNetPriceQuantity\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpriceValidation: function() {\r\n\t\t\tvar p = this.getView().byId(\"idPrice\").getValue();\r\n\t\t\tp = p.split('.').join('');\r\n\t\t\tp = p.split(',').join('');\r\n\t\t\tp = Number(p);\r\n\t\t\tif (p <= 0 || isNaN(p)) {\r\n\t\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\t\tvar c = d.PurReqnSSPCrossCatalogItem;\r\n\t\t\t\tif (c) {\r\n\t\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\t\tthis.getView().byId(\"idPrice\").setValueStateText(this.getResourceBundle().getText(\"priceError\"));\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquantityValidation: function() {\r\n\t\t\tvar q = this.getView().byId(\"idDescription\").getValue();\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\tq = \"3,348.640\";\r\n\t\t\t}\r\n\t\t\tq = q.split('.').join('');\r\n\t\t\tq = q.split(',').join('');\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\tvar c = d.PurReqnSSPCrossCatalogItem;\r\n\t\t\tif (q.length > 13) {\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tq = Number(q);\r\n\t\t\tif (q <= 0 || isNaN(q)) {\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (c) {\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (this.getView().byId(\"idDescription\").getUnitOfMeasure().trim() === \"\") {\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setUomEditState(0);\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idDescription\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmandatoryFieldValidation: function() {\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\tvar D = {};\r\n\t\t\tvar s = this.getView().byId(\"smartForm1\").getSmartFields();\r\n\t\t\tvar a = this.getView().byId(\"smartForm2\").getSmartFields();\r\n\t\t\tvar b = s.concat(a);\r\n\t\t\tfor (var i = 0; i < b.length; i++) {\r\n\t\t\t\tvar k = b[i].getDataProperty().typePath;\r\n\t\t\t\tvar v = b[i].getValue();\r\n\t\t\t\tD[k] = v;\r\n\t\t\t\tif (k === \"NetPriceQuantity\" || k === \"RequestedQuantity\") {\r\n\t\t\t\t\tif (d.PurReqnSSPCrossCatalogItem) {\r\n\t\t\t\t\t\tD[\"BaseUnit\"] = d.BaseUnit;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tD[\"BaseUnit\"] = b[i].getUnitOfMeasure();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar c = Object.keys(d);\r\n\t\t\tfor (i = 0; i < c.length; i++) {\r\n\t\t\t\tk = c[i].split(\"_\");\r\n\t\t\t\tif (k[k.length - 1] === \"fc\") {\r\n\t\t\t\t\tif (d[c[i]] === 7) {\r\n\t\t\t\t\t\tif (!D[k[0]]) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ((d['Plant_fc'] === 7) && this.getView().byId('idCompany').getValue() == '') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgetApprovalPreviewSet: function() {\r\n\t\t\tvar p = this.getPurchaseRequisition();\r\n\t\t\tif (p.length !== 0) {\r\n\t\t\t\tthis.dataManager.getApprovalPreviewSet(this.getServiceCallParameter(this.showApprovalPreview, this.serviceFail), p, this.prItem);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"processflow2\").setVisible(false);\r\n\t\t\t\tthis.destroyContent(\"processflow2\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tshowApprovalPreview: function(d) {\r\n\t\t\tif (d.results.length !== 0) {\r\n\t\t\t\tvar a = d.results;\r\n\t\t\t\tvar D = {};\r\n\t\t\t\tvar o = [];\r\n\t\t\t\tvar l = d.results.length;\r\n\t\t\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\t\t\tvar b = {};\r\n\t\t\t\t\tb.id = i;\r\n\t\t\t\t\tif (a.length > 0) {\r\n\t\t\t\t\t\tb.icon = \"sap-icon://order-status\";\r\n\t\t\t\t\t\tb.label = a[i].Stext;\r\n\t\t\t\t\t\tb.Userid = a[i].Objid;\r\n\t\t\t\t\t\tb.UserType = a[i].Otype;\r\n\t\t\t\t\t\tb.position = i;\r\n\t\t\t\t\t\to.push(b);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (o.length > 0) {\r\n\t\t\t\t\tD.oDataProcessFlow = o;\r\n\t\t\t\t\tvar m = new sap.ui.model.json.JSONModel();\r\n\t\t\t\t\tm.setData(D);\r\n\t\t\t\t\tthis.getView().byId(\"processflow1\").setModel(m, \"pf2\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"processflow2\").setVisible(false);\r\n\t\t\t\t\tthis.destroyContent(\"processflow2\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"processflow2\").setVisible(false);\r\n\t\t\t\tthis.destroyContent(\"processflow2\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tonApproverClick: function(e) {\r\n\t\t\tthis.oEventSrc = e.getSource();\r\n\t\t\tvar a = this.byId('processflow1').getModel().getProperty('Userid', e.getSource().getBindingContext());\r\n\t\t\tthis.dataManager.getApproverDetails(this.getServiceCallParameter(this.openApproverBusinessCard, this.serviceFail), a, this.getPurchaseRequisition(),\r\n\t\t\t\tthis.prItem);\r\n\t\t},\r\n\t\topenApproverBusinessCard: function(d) {\r\n\t\t\tvar j = new sap.ui.model.json.JSONModel(d);\r\n\t\t\tif (!this._oApproverPopover) {\r\n\t\t\t\tthis._oApproverPopover = sap.ui.xmlfragment(\"F1600.view.approverBusinessCard\", this);\r\n\t\t\t\tthis.getView().addDependent(this._oApproverPopover);\r\n\t\t\t}\r\n\t\t\tthis._oApproverPopover.setModel(j);\r\n\t\t\tthis._oApproverPopover.setContentHeight('auto');\r\n\t\t\tthis._oApproverPopover.openBy(this.oEventSrc);\r\n\t\t},\r\n\t\tonCallBusinessCard: function(e) {\r\n\t\t\tsap.m.URLHelper.triggerTel(e.getSource().getText());\r\n\t\t},\r\n\t\tonEmailBusinessCard: function(e) {\r\n\t\t\tsap.m.URLHelper.triggerEmail(e.getSource().getText());\r\n\t\t},\r\n\t\tmaterialValidation: function() {\r\n\t\t\tvar m = this.getView().byId(\"idProductId\").getValue();\r\n\t\t\tvar M = this.getView().byId(\"idMaterialDescription\").getValue();\r\n\t\t\tif (m === \"\") {\r\n\t\t\t\tif (M.length > this.getView().byId(\"idMaterialDescription\").getProperty('maxLength')) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessMaterial: function(d) {\r\n\t\t\tvar p = d.results ? d.results[0] : d;\r\n\t\t\tthis.materialText = p.Material_Text;\r\n\t\t\tthis.getView().byId(\"idMaterialDescription\").setValue(this.materialText);\r\n\t\t\tthis.getView().byId(\"idName\").setValue(p.MaterialGroup);\r\n\t\t\tthis.getView().byId(\"idName\").setEnabled(false);\r\n\t\t\tthis.saveItem();\r\n\t\t},\r\n\t\tshowSource: function() {\r\n\t\t\tthis.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtMaterialForPurg\");\r\n\t\t\tif (this.material === \"\") {\r\n\t\t\t\tthis.material = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Material\");\r\n\t\t\t}\r\n\t\t\tthis.plant = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtPlantForPurg\");\r\n\t\t\tif (this.plant === \"\") {\r\n\t\t\t\tthis.plant = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Plant\");\r\n\t\t\t}\r\n\t\t\tvar a = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"FixedSupplier\");\r\n\t\t\tvar s = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"SupplierName\");\r\n\t\t\tvar p = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchasingInfoRecord\");\r\n\t\t\tvar b = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchaseContract\");\r\n\t\t\tvar c = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurchaseContractItem\");\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Supplier\");\r\n\t\t\tvar e = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtFixedSupplierForPurg\");\r\n\t\t\tvar g = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"ExtDesiredSupplierForPurg\");\r\n\t\t\tvar D = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\tif (((a === '') || (a === undefined)) & ((p === '') || (p === undefined)) & ((b === '') || (b === undefined)) & ((c === '') || (c ===\r\n\t\t\t\t\tundefined) || (c === '00000')) & ((d === '') || (d === undefined)) & ((e === '') || (e === undefined)) & ((g === '') || (g ===\r\n\t\t\t\t\tundefined))) {\r\n\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(true);\r\n\t\t\t\tif (!this._ocontent) {\r\n\t\t\t\t\tthis._ocontent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.SourceOfSupply\", this);\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this._ocontent);\r\n\t\t\t\tvar t = sap.ui.getCore().byId(\"idProductsTable\").getBinding(\"items\");\r\n\t\t\t\tvar h = [];\r\n\t\t\t\th.push(new sap.ui.model.Filter(\"Material\", \"EQ\", this.material));\r\n\t\t\t\th.push(new sap.ui.model.Filter(\"Plant\", \"EQ\", this.plant));\r\n\t\t\t\tt.filter(h);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\t\tvar F = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"FixedSupplier\");\r\n\t\t\t\tvar i = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"Supplier\");\r\n\t\t\t\tvar j = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"PurReqnSSPCatalog\");\r\n\t\t\t\tif (F !== '') {\r\n\t\t\t\t\tthis.text = this.getResourceBundle().getText(\"Fixed\");\r\n\t\t\t\t\tthis.sText = F;\r\n\t\t\t\t} else if (i !== '') {\r\n\t\t\t\t\tthis.text = this.getResourceBundle().getText(\"Preferred\");\r\n\t\t\t\t\tthis.sText = i;\r\n\t\t\t\t} else if (e !== '') {\r\n\t\t\t\t\tthis.text = this.getResourceBundle().getText(\"Fixed\");\r\n\t\t\t\t\tthis.sText = e;\r\n\t\t\t\t} else if (g !== '') {\r\n\t\t\t\t\tthis.text = this.getResourceBundle().getText(\"Preferred\");\r\n\t\t\t\t\tthis.sText = g;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dataManager.getSupplierName(this.getServiceCallParameter(this.successSupplier, this.serviceFail), this.sText);\r\n\t\t\t\tif (!this.productList) {\r\n\t\t\t\t\tthis.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this.productList);\r\n\t\t\t\t}\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tvar k = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"InfoRecord\") + \":\" + p;\r\n\t\t\t\t} else if (b) {\r\n\t\t\t\t\tvar k = this.getOwnerComponent().getModel(\"i18n\").getResourceBundle().getText(\"agreementNumber\") + \"/\" + this.getOwnerComponent()\r\n\t\t\t\t\t\t.getModel(\"i18n\").getResourceBundle().getText(\"item\") + \":\" + b + \"/\" + c;\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(s);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(k);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[3].setText(this.text);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n\t\t\t\t\t\"assigned\"));\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n\t\t\t\tvar O = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"OpnCtlgSupplierID\");\r\n\t\t\t\tvar l = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"OpnCtlgSupplierName\");\r\n\t\t\t\tif (!(j === \"\") & (!O === undefined || !l === undefined)) {\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setVisible(false);\r\n\t\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setVisible(true);\r\n\t\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdateFinished: function() {\r\n\t\t\tvar a = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n\t\t\tif (this.getPurchaseRequisition()) {\r\n\t\t\t\tfor (var i = 0; i < a; i++) {\r\n\t\t\t\t\tsap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[4].setEnabled(this.editable);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdisableSections: function(e) {\r\n\t\t\tif ((this.getPurchaseRequisition()) && (e.getSource().getEditable() === false)) {\r\n\t\t\t\tthis.getView().byId(\"textArea\").setEnabled(false);\r\n\t\t\t\tthis.getView().byId(\"addSupplier\").setEnabled(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessSupplier: function(d) {\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").setBusy(true);\r\n\t\t\tvar p = d.results ? d.results[0] : d;\r\n\t\t\tif (p) {\r\n\t\t\t\tthis.supplierNamesos = p.SupplierName;\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierNamesos);\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").setBusy(false);\r\n\t\t},\r\n\t\tonPressSave: function(e) {\r\n\t\t\tvar t = this.getView().byId(\"idTitle\").getValue();\r\n\t\t\tif (this.priceValidation() && this.quantityValidation() && this.netPriceValidation() && this.mandatoryFieldValidation() && this.materialValidation()) {\r\n\t\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getObject(\"/\" + this.itemPath, {\r\n\t\t\t\t\tselect: \"*\"\r\n\t\t\t\t});\r\n\t\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\t\tif (this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length > 0) d = this.ExternalPurchasing.updateModel(this, d);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!(this.Fixedsupplier1 === undefined)) {\r\n\t\t\t\t\t\td.FixedSupplier = this.Fixedsupplier1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!(this.Supplier1 === undefined)) {\r\n\t\t\t\t\t\td.Supplier = this.Supplier1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.bFlag) {\r\n\t\t\t\t\td.FixedSupplier = \"\";\r\n\t\t\t\t\td.Supplier = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif (d.PurchasingDocumentItemCategory == \"9\") {\r\n\t\t\t\t\td.PurchasingDocumentItemCategory = \"\";\r\n\t\t\t\t}\r\n\t\t\t\td.FormOfAddress = t;\r\n\t\t\t\td.PurchasingInfoRecord = this.PurchasingInfoRecord;\r\n\t\t\t\td.PurchaseContract = this.PurchaseContract;\r\n\t\t\t\td.PurchaseContractItem = this.PurchaseContractItem;\r\n\t\t\t\tthis.getView().setBusy(true);\r\n\t\t\t\tvar p = {\r\n\t\t\t\t\t\"success\": jQuery.proxy(this.successOnUpdate, this)\r\n\t\t\t\t};\r\n\t\t\t\tthis.captureItemNoteTextsChanges();\r\n\t\t\t\tfor (var i = 0; i < this.batch_update.length; i++) {\r\n\t\t\t\t\tthis.dataManager.updateNotes(this.getServiceCallParameter(this.successOnUpdate, this.serviceFail), this.getAppModel(), this.batch_update[\r\n\t\t\t\t\t\ti].DraftUUID, this.getPurchaseRequisition(), this.batch_update[i], this.prItem, this.batch_update[i].DocumentText);\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = 0; i < this.batch_create.length; i++) {\r\n\t\t\t\t\tthis.dataManager.createNotes(this.getServiceCallParameter(this.successOnUpdate, this.serviceFail), this.getAppModel(), this.itemDraftUUID,\r\n\t\t\t\t\t\tthis.getPurchaseRequisition(), this.batch_create[i], this.prItem);\r\n\t\t\t\t}\r\n\t\t\t\td = this.adjustPayload(d);\r\n\t\t\t\tthis.dataManager.updateItemDetails(this.getServiceCallParameter(this.successItemUpdate, this.serviceFail), this.itemDraftUUID,\r\n\t\t\t\t\tthis.getPurchaseRequisition(), d, this.prItem);\r\n\t\t\t\tthis.dataManager.getNotes(this.getServiceCallParameter(this.onSuccessNotes, this.serviceFail), this.itemDraftUUID, this.getPurchaseRequisition(),\r\n\t\t\t\t\tthis.prItem);\r\n\t\t\t} else if (!this.mandatoryFieldValidation()) {\r\n\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"MandatoryFields\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessUpdate: function() {\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tvar p = this.getServiceCallParameter(this.successItemDetails, this.errorServiceFail);\r\n\t\t\tthis.dataManager.getItemDetails(p, this.getHeaderDraftKey(), this.itemDraftUUID, this.getPurchaseRequisition(), this.prItem, false);\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"update\"));\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tthis.save = true;\r\n\t\t},\r\n\t\tinvokeMassChange: function() {\r\n\t\t\tif (this.saveApplyChange) {\r\n\t\t\t\tthis.getView().setBusy(false);\r\n\t\t\t\tthis.saveApplyChange = false;\r\n\t\t\t\tvar m = sap.ui.getCore().getMessageManager().getMessageModel().getData();\r\n\t\t\t\tvar a = false;\r\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\r\n\t\t\t\t\tif (m[i].getType() === \"Error\") {\r\n\t\t\t\t\t\ta = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.mandatoryFieldValidation() === true) {\r\n\t\t\t\t\tif (a) {\r\n\t\t\t\t\t\tvar t = this;\r\n\t\t\t\t\t\tsap.m.MessageBox.show(this.getResourceBundle().getText(\"errorBeforeCopy\"), {\r\n\t\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\t\ttitle: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n\t\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\t\tonClose: function(A) {\r\n\t\t\t\t\t\t\t\tif (A === sap.m.MessageBox.Action.YES) {\r\n\t\t\t\t\t\t\t\t\tt.ApplyChange.onPressApplyChangeMass(t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tinitialFocus: sap.m.MessageBox.Action.YES\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.ApplyChange.onPressApplyChangeMass(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessItemUpdate: function() {\r\n\t\t\tif (this.getTestMode()) {\r\n\t\t\t\twindow.history.back();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.accSection) {\r\n\t\t\t\tif (!this.getView().byId(\"smartForm1\").getBindingContext().getProperty('AccountAssignmentCategory') == \"\") {\r\n\t\t\t\t\tthis.accAssignComp.updateAccList(this.successAccUpdate, this.serviceFail, this);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.successUpdate();\r\n\t\t\t}\r\n\t\t\tthis.supplierPendingCanges = false;\r\n\t\t\tthis.oModel.resetChanges();\r\n\t\t},\r\n\t\tsuccessAccUpdate: function(o) {\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tvar p = o.getServiceCallParameter(o.successItemDetails, o.errorServiceFail);\r\n\t\t\to.dataManager.getItemDetails(p, o.getHeaderDraftKey(), o.itemDraftUUID, o.getPurchaseRequisition(), o.prItem, false);\r\n\t\t\tp = o.getServiceCallParameter(o.successAccRead, o.errorServiceFail);\r\n\t\t\to.dataManager.getAccounting(p, o.getHeaderDraftKey(), o.itemDraftUUID, o.getPurchaseRequisition(), o.prItem, false);\r\n\t\t\to.getAppModel().read(o.itemBindingPath, {});\r\n\t\t\to.getView().setBusy(false);\r\n\t\t\tsap.m.MessageToast.show(o.getResourceBundle().getText(\"update\"));\r\n\t\t\to.bFlag = false;\r\n\t\t\to.save = true;\r\n\t\t},\r\n\t\tonSupplier: function() {\r\n\t\t\tvar b, d;\r\n\t\t\tvar s = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\tthis.cFlag = true;\r\n\t\t\tif (sap.ui.getCore().byId(\"idProductsTable\")) {\r\n\t\t\t\tb = sap.ui.getCore().byId(\"idProductsTable\").getItems().length;\r\n\t\t\t\tfor (var i = 0; i <= b - 1; i++) {\r\n\t\t\t\t\tif (s === sap.ui.getCore().byId(\"idProductsTable\").getItems()[i].getCells()[2].getText()) {\r\n\t\t\t\t\t\td = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.getView().byId(\"sourceOfSupply\").getContent().length > 0) {\r\n\t\t\t\t\tb = this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems().length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = 0;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var a = 0; a <= b - 1; a++) {\r\n\t\t\t\t\tif (s === this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[a].getCells()[2].getText()) {\r\n\t\t\t\t\t\td = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var c = 0; c <= b - 1; c++) {\r\n\t\t\t\tif (s === d) {\r\n\t\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"unAssignMessage\"));\r\n\t\t\t\t\tthis.cFlag = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.cFlag) {\r\n\t\t\t\tif (!this._oContent_Supplier) {\r\n\t\t\t\t\tthis._oContent_Supplier = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.Supplier\", this);\r\n\t\t\t\t\tsap.ui.getCore().byId('simpleForm').bindElement({\r\n\t\t\t\t\t\tpath: \"/\" + this.itemPath\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getView().addDependent(this._oContent_Supplier);\r\n\t\t\t\t}\r\n\t\t\t\tsap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n\t\t\t\tthis._oContent_Supplier.getButtons()[0].setEnabled(true);\r\n\t\t\t\tvar e = this.getView().byId(\"smartForm1\").getBindingContext().getProperty(\"DraftUUID\");\r\n\t\t\t\tthis._oContent_Supplier.bindElement(\"/\" + this.entityConstants.getEntityName('itemEntity') +\r\n\t\t\t\t\t\"(PurchaseRequisition='',PurchaseRequisitionItem='00000',DraftUUID=guid'\" + e + \"',IsActiveEntity=\" + false + \")\");\r\n\t\t\t\tjQuery.sap.syncStyleClass(\"sapUiSizeCompact\", this.getView(), this._oContent_Supplier);\r\n\t\t\t\tthis._oContent_Supplier.open();\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeContent();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAddSupplier: function(e) {\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").removeContent();\r\n\t\t\tthis.sText = \"\";\r\n\t\t\tthis.sText = sap.ui.getCore().byId(\"supplier\").getValue();\r\n\t\t\tvar p = sap.ui.getCore().byId(\"preferred\").getSelected();\r\n\t\t\tif (p === true) {\r\n\t\t\t\tthis.text = sap.ui.getCore().byId(\"preferred\").getText();\r\n\t\t\t\tthis.Supplier = this.sText;\r\n\t\t\t\tthis.Fixedsupplier = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.text = sap.ui.getCore().byId(\"fixed\").getText();\r\n\t\t\t\tthis.Fixedsupplier = this.sText;\r\n\t\t\t\tthis.Supplier = \"\";\r\n\t\t\t}\r\n\t\t\tif (!this.productList) {\r\n\t\t\t\tthis.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n\t\t\t\tthis.getView().addDependent(this.productList);\r\n\t\t\t}\r\n\t\t\tvar s = sap.ui.getCore().byId(\"supplier\");\r\n\t\t\tvar a = s.getBindingContext().getModel().oData;\r\n\t\t\tvar b = \"C_MM_SupplierValueHelp('\" + this.sText + \"')\";\r\n\t\t\tfor (var o in a) {\r\n\t\t\t\tif (a[o].Supplier == this.sText) {\r\n\t\t\t\t\tvar c = a[o].SupplierName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\tthis.getView().byId(\"addSupplier\").setVisible(false);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(c);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\r\n\t\t\t\t\"assigned\"));\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t\tthis.bFlag = false;\r\n\t\t\tthis._oContent_Supplier.close();\r\n\t\t\tthis.supplierPendingCanges = true;\r\n\t\t\tthis.onPressSave();\r\n\t\t},\r\n\t\tonCancelSupplier: function() {\r\n\t\t\tsap.ui.getCore().byId(\"supplier\").setValue(\"\");\r\n\t\t\tthis._oContent_Supplier.close();\r\n\t\t},\r\n\t\tonUnAssign: function() {\r\n\t\t\tthis.supplierPendingCanges = true;\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\tvar c = new sap.m.List({\r\n\t\t\t\tnoDataText: this.getResourceBundle().getText(\"supplier\")\r\n\t\t\t});\r\n\t\t\tthis.getView().byId(\"addSupplier\").setVisible(true);\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(c);\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\td.FixedSupplier = \"\";\r\n\t\t\td.SupplierName = \"\";\r\n\t\t\td.Supplier = \"\";\r\n\t\t\td.ExtFixedSupplierForPurg = \"\";\r\n\t\t\td.ExtDesiredSupplierForPurg = \"\";\r\n\t\t\tthis.bFlag = true;\r\n\t\t\tif (!this._ocontent) {\r\n\t\t\t\tthis._ocontent = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.SourceOfSupply\", this);\r\n\t\t\t}\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this._ocontent);\r\n\t\t\tvar t = sap.ui.getCore().byId(\"idProductsTable\").getBinding(\"items\");\r\n\t\t\tvar a = [];\r\n\t\t\ta.push(new sap.ui.model.Filter(\"Material\", \"EQ\", this.material));\r\n\t\t\ta.push(new sap.ui.model.Filter(\"Plant\", \"EQ\", this.plant));\r\n\t\t\tt.filter(a);\r\n\t\t},\r\n\t\tonSelect: function(e) {\r\n\t\t\tvar k = e.getParameter(\"selectedKey\");\r\n\t\t\tfor (var i = 0; i < this._notes.length; i++) {\r\n\t\t\t\tif (this._notes[i].DocumentText === k) {\r\n\t\t\t\t\te.getParameters().item.getContent()[0].setValue(this._notes[i].PurReqnItemLongtext);\r\n\t\t\t\t\tif ((this.getPurchaseRequisition()) && (!this.getView().byId(\"idDescription\").getEditable())) {\r\n\t\t\t\t\t\te.getParameters().item.getContent()[0].setEnabled(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.getParameters().item.getContent()[0].setValue(\"\");\r\n\t\t\t\t\tif ((this.getPurchaseRequisition()) && (!this.getView().byId(\"idDescription\").getEditable())) {\r\n\t\t\t\t\t\te.getParameters().item.getContent()[0].setEnabled(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChange: function(e) {\r\n\t\t\tvar k = e.getSource().getBindingContext().getProperty(\"DocumentText\");\r\n\t\t\tvar t = e.getSource().getValue();\r\n\t\t\tvar i;\r\n\t\t\tvar a = this._notes.map(function(x) {\r\n\t\t\t\treturn x.DocumentText;\r\n\t\t\t}).indexOf(k);\r\n\t\t\tvar o = this._notes[a];\r\n\t\t\tvar v = this.getView().byId(\"idPrice\").getValue();\r\n\t\t\tvar b = v.replace(/,/g, \"\");\r\n\t\t\tb = Number(b);\r\n\t\t\tif (isNaN(b)) {\r\n\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idPrice\").setValueState(sap.ui.core.ValueState.None);\r\n\t\t\t}\r\n\t\t\tif (a != '-1') {\r\n\t\t\t\tthis._notes[a].PurReqnItemLongtext = t;\r\n\t\t\t\tvar c = this.batch_update.map(function(x) {\r\n\t\t\t\t\treturn x.DocumentText;\r\n\t\t\t\t}).indexOf(k);\r\n\t\t\t\tif (c != '-1') {\r\n\t\t\t\t\tthis.batch_update[c].PurReqnItemLongtext = t;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.batch_update.push({\r\n\t\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\t\tDraftUUID: this._notes[a].DraftUUID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis._notes.push({\r\n\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\tParentDraftUUID: this.itemDraftUUID\r\n\t\t\t\t});\r\n\t\t\t\tvar c = this.batch_create.map(function(x) {\r\n\t\t\t\t\treturn x.DocumentText;\r\n\t\t\t\t}).indexOf(k);\r\n\t\t\t\tif (c != '-1') {\r\n\t\t\t\t\tthis.batch_create[c].PurReqnItemLongtext = t;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.batch_create.push({\r\n\t\t\t\t\t\tDocumentText: k,\r\n\t\t\t\t\t\tPurReqnItemLongtext: t,\r\n\t\t\t\t\t\tParentDraftUUID: this.itemDraftUUID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessOnUpdate: function() {\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar a = m.getMessageModel().getData();\r\n\t\t\tvar b = -1;\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tif (a[i].message && a[i].code === \"MMPUR_REQ_COMMON/022\") {\r\n\t\t\t\t\tsap.m.MessageToast.show(a[i].message);\r\n\t\t\t\t\tb = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (b !== 1) {\r\n\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"itemDetailUpdate\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBack: function() {\r\n\t\t\tif (!this.mandatoryFieldValidation()) {\r\n\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"MandatoryFields\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this._oContent) {\r\n\t\t\t\tthis._oContent.destroy();\r\n\t\t\t\tthis._oContent = null;\r\n\t\t\t}\r\n\t\t\tvar t = this;\r\n\t\t\tif (this._oContent_Supplier) {\r\n\t\t\t\tthis._oContent_Supplier.destroy(true);\r\n\t\t\t\tthis._oContent_Supplier = null;\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\")) {}\r\n\t\t\tif (sap.ui.getCore().byId(\"buttonUnAssign1\")) {\r\n\t\t\t\tsap.ui.getCore().byId(\"buttonUnAssign1\").destroy();\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().byId(\"textArea\")) {\r\n\t\t\t\tsap.ui.getCore().byId(\"textArea\").destroy();\r\n\t\t\t}\r\n\t\t\tif (this.oModel.hasPendingChanges() || this.batch_update.length > 0 || this.batch_create.length > 0 || this.supplierPendingCanges) {\r\n\t\t\t\tvar c = !!this.getView().$().closest(\".sapUiSizeCompact\").length;\r\n\t\t\t\tsap.m.MessageBox.show(this.getResourceBundle().getText(\"MESSAGE_DATA_LOST_POPUP\"), {\r\n\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\ttitle: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n\t\t\t\t\tactions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\tif (t.quantityValidation() && t.priceValidation() && t.netPriceValidation()) {\r\n\t\t\t\t\t\t\t\tt.oModel.resetChanges();\r\n\t\t\t\t\t\t\t\tt.oModel.refresh();\r\n\t\t\t\t\t\t\t\twindow.history.back();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstyleClass: c ? \"sapUiSizeCompact\" : \"\"\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.back();\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalidateFax: function() {\r\n\t\t\tvar a = /^[+\\-0-9()/A-Z ]+$/;\r\n\t\t\tvar b = this.getView().byId(\"fax\").getValue();\r\n\t\t\tvar m = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar M = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar s = this.getResourceBundle().getText(\"MESSAGE_ERROR_TELEFAX_NUMBER\");\r\n\t\t\tvar c = new sap.ui.core.message.Message({\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\ttarget: \"/fax/value\",\r\n\t\t\t\tprocessor: m\r\n\t\t\t});\r\n\t\t\tM.registerMessageProcessor(m);\r\n\t\t\tif (b.length === 0 || !a.test(b)) {\r\n\t\t\t\tM.addMessages(c);\r\n\t\t\t\tthis.getView().byId(\"fax\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tM.removeAllMessages();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\treadItemTextTypesMasterSet: function() {\r\n\t\t\tvar t = this.getView().getModel(\"Notes\");\r\n\t\t\tif (!t || t === undefined) {\r\n\t\t\t\tthis.oNotesJSModel = new sap.ui.model.json.JSONModel();\r\n\t\t\t\tthis.getView().setModel(this.oNotesJSModel, \"Notes\");\r\n\t\t\t}\r\n\t\t\tvar o = this.getAppModel().getDeferredGroups();\r\n\t\t\to[o.length] = \"itemMetaInfoRead\";\r\n\t\t\tthis.getAppModel().setDeferredGroups(o);\r\n\t\t\tthis.getAppModel().read(\"/C_Sspprmaint_Itmtexttypes\", {\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tgroupId: \"itemMetaInfoRead\"\r\n\t\t\t});\r\n\t\t\tthis.getAppModel().submitChanges({\r\n\t\t\t\tgroupId: \"itemMetaInfoRead\",\r\n\t\t\t\tsuccess: jQuery.proxy(this.onItemTextTypesMasterDataLoadSuccess, this),\r\n\t\t\t\terror: function() {}\r\n\t\t\t});\r\n\t\t},\r\n\t\tonItemTextTypesMasterDataLoadSuccess: function(d) {\r\n\t\t\tvar a = [];\r\n\t\t\tif (d.__batchResponses[\"0\"] && d.__batchResponses[\"0\"].data && d.__batchResponses[\"0\"].data.results) {\r\n\t\t\t\tvar n = d.__batchResponses[\"0\"].data.results;\r\n\t\t\t\tfor (var i = 0; i < n.length; i++) {\r\n\t\t\t\t\tvar b = {};\r\n\t\t\t\t\tb.key = n[i].DocumentText;\r\n\t\t\t\t\tb.name = n[i].DocumentText_Text;\r\n\t\t\t\t\tb.value = \"\";\r\n\t\t\t\t\ta.push(b);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getView().getModel(\"Notes\").setProperty(\"/itemTextTypes\", a);\r\n\t\t},\r\n\t\tonSuccessNotes: function(d) {\r\n\t\t\tthis.backEndItemNoteTexts = [];\r\n\t\t\tif (d.results && d.results.length > 0) {\r\n\t\t\t\tvar e = d.results;\r\n\t\t\t\tfor (var j = 0; j < e.length; j++) {\r\n\t\t\t\t\tvar k = \"\";\r\n\t\t\t\t\tif (e[j].DocumentText !== \"\") {\r\n\t\t\t\t\t\tk = e[j].DocumentText;\r\n\t\t\t\t\t\tthis.backEndItemNoteTexts[k.toString()] = e[j];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar a = this.getView().getModel(\"Notes\").getProperty(\"/itemTextTypes\");\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tvar b = this.backEndItemNoteTexts[a[i].key.toString()];\r\n\t\t\t\tif (b) {\r\n\t\t\t\t\ta[i].value = b.PurReqnItemLongtext;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta[i].value = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getView().getModel(\"Notes\").setProperty(\"/itemTextTypes\", a);\r\n\t\t\tthis.getView().byId(\"idIconTabBarNoIcons\").setExpanded(true);\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t},\r\n\t\tcaptureItemNoteTextsChanges: function() {\r\n\t\t\tthis.batch_update = [];\r\n\t\t\tthis.batch_create = [];\r\n\t\t\tvar a = this.getView().getModel(\"Notes\").getProperty(\"/itemTextTypes\");\r\n\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\tvar b = this.backEndItemNoteTexts[a[i].key.toString()];\r\n\t\t\t\tif (b && a[i].value !== b.PurReqnItemLongtext) {\r\n\t\t\t\t\tthis.batch_update.push({\r\n\t\t\t\t\t\tDocumentText: b.DocumentText,\r\n\t\t\t\t\t\tPurReqnItemLongtext: a[i].value,\r\n\t\t\t\t\t\tDraftUUID: b.DraftUUID\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (!b && a[i].value !== \"\") {\r\n\t\t\t\t\tthis.batch_create.push({\r\n\t\t\t\t\t\tDocumentText: a[i].key,\r\n\t\t\t\t\t\tPurReqnItemLongtext: a[i].value,\r\n\t\t\t\t\t\tParentDraftUUID: this.itemDraftUUID\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMaterialGroupUpdate: function() {\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\tthis.dataManager.updateItemDetails(this.getServiceCallParameter(this.checkAccAssignment, this.serviceFail), this.itemDraftUUID,\r\n\t\t\t\tthis.getPurchaseRequisition(), d, this.prItem);\r\n\t\t},\r\n\t\tvalidatePhone: function() {\r\n\t\t\tvar p = /^[+\\-0-9()/A-Z ]+$/;\r\n\t\t\tvar a = this.getView().byId(\"phone\").getValue();\r\n\t\t\tvar m = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar M = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar s = this.getResourceBundle().getText(\"MESSAGE_ERROR_TELEPHONE_NUMBER\");\r\n\t\t\tvar b = new sap.ui.core.message.Message({\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\ttarget: \"/phone/value\",\r\n\t\t\t\tprocessor: m\r\n\t\t\t});\r\n\t\t\tM.registerMessageProcessor(m);\r\n\t\t\tif (a.length === 0 || !p.test(a)) {\r\n\t\t\t\tM.addMessages(b);\r\n\t\t\t\tthis.getView().byId(\"phone\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tM.removeAllMessages();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAssign: function(e) {\r\n\t\t\tvar l = e.getSource().getParent().getParent().getItems().length;\r\n\t\t\tvar s = this.getResourceBundle().getText(\"assigned\");\r\n\t\t\tvar a = false;\r\n\t\t\tif (!(e.getSource().getText() === this.getResourceBundle().getText(\"unAssign\"))) {\r\n\t\t\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\t\t\tif (s === e.getSource().getParent().getParent().getItems()[i].getCells()[2].getText()) {\r\n\t\t\t\t\t\ta = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!a) {\r\n\t\t\t\tif (e.getSource().getText() === this.getResourceBundle().getText(\"assign\")) {\r\n\t\t\t\t\te.getSource().getParent().getCells()[2].setText(this.getResourceBundle().getText(\"assigned\"));\r\n\t\t\t\t\te.getSource().setText(this.getResourceBundle().getText(\"unAssign\"));\r\n\t\t\t\t\te.getSource().setType(this.getResourceBundle().getText(\"reject\"));\r\n\t\t\t\t\tthis.Fixedsupplier1 = e.getSource().getParent().getCells()[1].getItems()[0].getAttributes()[1].getText();\r\n\t\t\t\t\tthis.Supplier1 = e.getSource().getParent().getCells()[1].getItems()[0].getAttributes()[2].getText();\r\n\t\t\t\t\tvar E = this.ExternalPurchasing.updateExtSupplierInfo(e, this);\r\n\t\t\t\t\tif (this.getExtScenarioFlag()) {\r\n\t\t\t\t\t\tthis.ExtInfoRecord = E[\"ExtInfoRecord\"];\r\n\t\t\t\t\t\tthis.ExtContract = E[\"ExtContract\"];\r\n\t\t\t\t\t\tthis.ExtContractItem = E[\"ExtContractItem\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.PurchasingInfoRecord = E[\"ExtInfoRecord\"];\r\n\t\t\t\t\t\tthis.PurchaseContract = E[\"ExtContract\"];\r\n\t\t\t\t\t\tthis.PurchaseContractItem = E[\"ExtContractItem\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.getSource().getParent().getCells()[2].setText(\"\");\r\n\t\t\t\t\te.getSource().setText(this.getResourceBundle().getText(\"assign\"));\r\n\t\t\t\t\te.getSource().setType(\"Default\");\r\n\t\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(true);\r\n\t\t\t\t\tthis.Fixedsupplier1 = \"\";\r\n\t\t\t\t\tthis.Supplier1 = \"\";\r\n\t\t\t\t\tthis.ExtInfoRecord = \"\";\r\n\t\t\t\t\tthis.ExtContract = \"\";\r\n\t\t\t\t\tthis.ExtContractItem = \"\";\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"unAssignMessage\"));\r\n\t\t\t}\r\n\t\t\tthis.supplierPendingCanges = true;\r\n\t\t\tthis.onPressSave();\r\n\t\t},\r\n\t\tvalidateEmail: function() {\r\n\t\t\tvar e = this.getView().byId(\"email\").getValue();\r\n\t\t\tvar m = /^\\w+[\\w-\\.]*\\@\\w+((-\\w+)|(\\w*))((\\.([a-z]{2,3}))|(\\.[a-z]{2,3}\\.[a-z]{2,3})|(\\.[a-z]{2,3}\\.[a-z]{2,3}\\.[a-z]{2,3}))$/;\r\n\t\t\tvar M = new sap.ui.core.message.ControlMessageProcessor();\r\n\t\t\tvar o = sap.ui.getCore().getMessageManager();\r\n\t\t\tvar s = this.getResourceBundle().getText(\"MESSAGE_ERROR_EMAIL\");\r\n\t\t\tvar a = new sap.ui.core.message.Message({\r\n\t\t\t\tmessage: s,\r\n\t\t\t\ttype: sap.ui.core.MessageType.Error,\r\n\t\t\t\ttarget: \"/email/value\",\r\n\t\t\t\tprocessor: M\r\n\t\t\t});\r\n\t\t\to.registerMessageProcessor(M);\r\n\t\t\tif (!m.test(e) || e.length === 0) {\r\n\t\t\t\to.addMessages(a);\r\n\t\t\t\tthis.getView().byId(\"email\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\to.removeAllMessages();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAccCategoryUpdate: function() {\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getObject(\"/\" + this.itemPath, {\r\n\t\t\t\tselect: \"*\"\r\n\t\t\t});\r\n\t\t\td.FixedSupplier = this.Fixedsupplier;\r\n\t\t\td.Supplier = this.Supplier;\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.adjustPayload(d);\r\n\t\t\tthis.dataManager.updateItemDetails(this.getServiceCallParameter(this.checkAccAssignment, this.serviceFail), this.itemDraftUUID,\r\n\t\t\t\tthis.getPurchaseRequisition(), d, this.prItem);\r\n\t\t},\r\n\t\tonPressDelete: function() {\r\n\t\t\tvar p = this.getServiceCallParameter(this.checkItemCount, this.errorServiceFail);\r\n\t\t\tthis.dataManager.getHeader(p, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n\t\t},\r\n\t\tcheckItemCount: function(d) {\r\n\t\t\tvar t = this;\r\n\t\t\tvar p = d.results ? d.results[0] : d;\r\n\t\t\tthis.itemCount = (p.NumberOfItems);\r\n\t\t\tif (!this.getPurchaseRequisition() === '') {\r\n\t\t\t\tif (this.itemCount - 1 === 0) {\r\n\t\t\t\t\tsap.m.MessageBox.show(t.getResourceBundle().getText(\"msgDeleteLastItemCartMyPR\"), {\r\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: t.getResourceBundle().getText(\"msgBoxTitle\"),\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n\t\t\t\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tvar m = t.getServiceCallParameter(t.successDelete, t.serviceFail);\r\n\t\t\t\t\t\t\t\tt.dataManager.deleteItem(m, t.itemDraftUUID, t.getPurchaseRequisition(), t.prItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitialFocus: sap.m.MessageBox.Action.OK\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsap.m.MessageBox.show(t.getResourceBundle().getText(\"msgText\"), {\r\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: t.getResourceBundle().getText(\"msgBoxTitle\"),\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.YES) {\r\n\t\t\t\t\t\t\t\tvar m = t.getServiceCallParameter(t.successDelete, t.serviceFail);\r\n\t\t\t\t\t\t\t\tt.dataManager.deleteItem(m, t.itemDraftUUID, t.getPurchaseRequisition(), t.prItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitialFocus: sap.m.MessageBox.Action.YES\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (this.itemCount - 1 === 0) {\r\n\t\t\t\t\tif (this.getPurchaseRequisition() != \"\") {\r\n\t\t\t\t\t\tvar l = t.getResourceBundle().getText(\"msgDeleteLastItemCartAndOrder\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tl = t.getResourceBundle().getText(\"msgDeleteLastItemCart\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsap.m.MessageBox.show(l, {\r\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: t.getResourceBundle().getText(\"msgBoxTitle\"),\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n\t\t\t\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.OK) {\r\n\t\t\t\t\t\t\t\tvar m = t.getServiceCallParameter(t.successDelete, t.serviceFail);\r\n\t\t\t\t\t\t\t\tt.dataManager.deleteItem(m, t.itemDraftUUID, t.getPurchaseRequisition(), t.prItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitialFocus: sap.m.MessageBox.Action.OK\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsap.m.MessageBox.show(t.getResourceBundle().getText(\"msgText\"), {\r\n\t\t\t\t\t\ticon: sap.m.MessageBox.Icon.WARNING,\r\n\t\t\t\t\t\ttitle: t.getResourceBundle().getText(\"msgBoxTitle\"),\r\n\t\t\t\t\t\tactions: [sap.m.MessageBox.Action.YES, sap.m.MessageBox.Action.NO],\r\n\t\t\t\t\t\tstyleClass: \"sapUiSizeCompact\",\r\n\t\t\t\t\t\tonClose: function(a) {\r\n\t\t\t\t\t\t\tif (a === sap.m.MessageBox.Action.YES) {\r\n\t\t\t\t\t\t\t\tvar m = t.getServiceCallParameter(t.successDelete, t.serviceFail);\r\n\t\t\t\t\t\t\t\tt.dataManager.deleteItem(m, t.itemDraftUUID, t.getPurchaseRequisition(), t.prItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitialFocus: sap.m.MessageBox.Action.YES\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuccessDelete: function() {\r\n\t\t\tsap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n\t\t\tif ((this.getPurchaseRequisition() === '') && (this.itemCount - 1 === 0)) {\r\n\t\t\t\tthis.getRouter().navTo(\"Search\");\r\n\t\t\t} else {\r\n\t\t\t\twindow.history.back();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateAccComponent: function() {\r\n\t\t\tvar e = this.editable;\r\n\t\t\tvar a = sap.ui.getCore().createComponent({\r\n\t\t\t\tname: \"sap.ui.s2p.mm.lib.reuse.accounting.component\",\r\n\t\t\t\tcomponentData: {\r\n\t\t\t\t\tsAccEntitySetName: \"C_Sspprmaint_Accassign\",\r\n\t\t\t\t\tsAccEntityTypeName: \"C_Sspprmaint_AccassignType\",\r\n\t\t\t\t\tsAccBindingPathEntityType: \"\",\r\n\t\t\t\t\tsAccBindingPathEntitySet: this.itemBindingPath,\r\n\t\t\t\t\toModel: this.getAppModel(),\r\n\t\t\t\t\toRouter: this.oRouter,\r\n\t\t\t\t\tbEditMode: e,\r\n\t\t\t\t\tbAccDetailsAsPopup: false,\r\n\t\t\t\t\tsCurrentView: \"list\",\r\n\t\t\t\t\tbShowListHeader: true,\r\n\t\t\t\t\tbIsExtPurgScenario: this.getExtScenarioFlag()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ta.attachDetailNavigation(jQuery.proxy(this.accDetailsnavigation, this));\r\n\t\t\tthis.getView().byId(\"accAssignmentCompContainer\").setComponent(a);\r\n\t\t\tthis.accAssignComp = a;\r\n\t\t},\r\n\t\taccDetailsnavigation: function(e) {\r\n\t\t\tif (this.oModel.hasPendingChanges) this.onAccCategoryUpdate();\r\n\t\t\tvar a = e.getParameter('bindpath');\r\n\t\t\tthis.getRouter().navTo(\"Account_Asisgnment_Detail\", {\r\n\t\t\t\tformBindingPath: a.substr(1)\r\n\t\t\t});\r\n\t\t},\r\n\t\tPricescaleClick: function(e) {\r\n\t\t\tif (!this._prcsclPopover) {\r\n\t\t\t\tthis._prcsclPopover = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PriceRange\", this);\r\n\t\t\t}\r\n\t\t\tvar i = \"OpnCtlgItemID eq \" + this.itmKey;\r\n\t\t\tvar q = e.getSource().getParent().getParent().getParent().getBindingContext().getObject().NetPriceQuantity;\r\n\t\t\tvar b = e.getSource().getParent().getParent().getParent().getBindingContext().getObject().BaseUnit;\r\n\t\t\tthis.curr = e.getSource().getParent().getParent().getParent().getBindingContext().getObject().Currency;\r\n\t\t\tq = this.getResourceBundle().getText(\"price\") + \" \" + this.getResourceBundle().getText(\"CurrencyPer\") + \" \" + q + \" \" + b;\r\n\t\t\tvar m = this.getServiceCallParameter(this.successPrcScale, this.serviceFail);\r\n\t\t\tthis.dataManager.priceScalefind(m, i);\r\n\t\t\tthis.getView().addDependent(this._prcsclPopover);\r\n\t\t\tvar p = e.getSource();\r\n\t\t\tjQuery.sap.delayedCall(0, this, function() {\r\n\t\t\t\tthis._prcsclPopover.openBy(p);\r\n\t\t\t});\r\n\t\t\tthis._prcsclPopover.setPlacement(\"Right\");\r\n\t\t\tthis._prcsclPopover.getAggregation(\"content\")[0].getAggregation(\"columns\")[1].getAggregation(\"header\").setText(q);\r\n\t\t},\r\n\t\tsuccessPrcScale: function(d) {\r\n\t\t\tvar j = new sap.ui.model.json.JSONModel(d);\r\n\t\t\tvar l = j.oData.results.length;\r\n\t\t\tvar i = 0;\r\n\t\t\tfor (i = 0; i < l; i++) {\r\n\t\t\t\tj.oData.results[i].Currency = this.curr;\r\n\t\t\t}\r\n\t\t\tthis._prcsclPopover.getContent()[0].setModel(j);\r\n\t\t\tthis._prcsclPopover.getContent()[0].bindElement(\"/results\");\r\n\t\t},\r\n\t\tprcsclPresent: function() {\r\n\t\t\tvar i = \"OpnCtlgItemID eq \" + this.itmKey;\r\n\t\t\tvar m = this.getServiceCallParameter(this.successPrcScalePresent, this.serviceFail);\r\n\t\t\tthis.dataManager.priceScalefind(m, i);\r\n\t\t},\r\n\t\tsuccessPrcScalePresent: function(d) {\r\n\t\t\tif (d.results.length) {\r\n\t\t\t\tthis.getView().byId(\"l_prcscale\").setVisible(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"l_prcscale\").setVisible(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonExit: function() {\r\n\t\t\tif (this._oContent_Supplier) {\r\n\t\t\t\tthis._oContent_Supplier.destroy(true);\r\n\t\t\t\tthis._oContent_Supplier = null;\r\n\t\t\t}\r\n\t\t\tif (sap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\")) {\r\n\t\t\t\tsap.ui.getCore().getComponent(\"attachmentsrv.ItemDetails\").destroy(true);\r\n\t\t\t}\r\n\t\t\tif (this.productList) {\r\n\t\t\t\tthis.productList.destroy(true);\r\n\t\t\t\tthis.productList = null;\r\n\t\t\t}\r\n\t\t\tif (this._ocontent) {\r\n\t\t\t\tthis._ocontent.destroy(true);\r\n\t\t\t\tthis._ocontent = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tformartVisiblityDetailsPerformer: function(p) {\r\n\t\t\tvar v = false;\r\n\t\t\tif (p != undefined) {\r\n\t\t\t\tif (p === '2') {\r\n\t\t\t\t\tv = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t},\r\n\t\tformartVisiblityDetailsDateRange: function(p) {\r\n\t\t\tvar v = false;\r\n\t\t\tif (p != undefined) {\r\n\t\t\t\tif (p === '2') {\r\n\t\t\t\t\tv = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t},\r\n\t\tformartVisiblityDetailsDate: function(p) {\r\n\t\t\tvar v = true;\r\n\t\t\tif (p != undefined) {\r\n\t\t\t\tif (p === '2') {\r\n\t\t\t\t\tv = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn v;\r\n\t\t},\r\n\t\tselectionChangedDet: function(e) {\r\n\t\t\tvar s = e.getSource().getValue();\r\n\t\t\tthis.itemType = parseInt(s);\r\n\t\t\tif (this.itemType === 9) {\r\n\t\t\t\tvar c = e.getSource().getBindingContext();\r\n\t\t\t\te.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"2\", c);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformerDet\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformerDet\").setShowLabel(true);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRangeDet\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRangeDet\").getParent().setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idDate\").setVisible(false);\r\n\t\t\t} else {\r\n\t\t\t\tvar c = e.getSource().getBindingContext();\r\n\t\t\t\te.getSource().getBindingContext().oModel.setProperty(\"ProductType\", \"\", c);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformerDet\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRangeDet\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idDeliveryDateRangeDet\").getParent().setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"idDate\").setVisible(true);\r\n\t\t\t\tthis.getView().byId(\"idDate\").setShowLabel(true);\r\n\t\t\t}\r\n\t\t\tthis.onPressSave();\r\n\t\t},\r\n\t\tcheckDropDownEnabled: function(P) {\r\n\t\t\tvar i = true;\r\n\t\t\tif (P !== \"\") {\r\n\t\t\t\ti = false;\r\n\t\t\t}\r\n\t\t\treturn i;\r\n\t\t},\r\n\t\tformartPurchasingDocumentItemCategory: function(p, a) {\r\n\t\t\tif (a == \"2\") {\r\n\t\t\t\tp = \"9\";\r\n\t\t\t\tif (this.getView().byId(\"smartForm1\") != undefined) {\r\n\t\t\t\t\tvar i = this.getView().byId(\"smartForm1\").getBindingContext();\r\n\t\t\t\t\tthis.getView().byId(\"smartForm1\").getBindingContext().oModel.setProperty(\"PurchasingDocumentItemCategory\", \"9\", i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\tchangeName: function(e) {\r\n\t\t\te.getSource().setTextLabel(this.getResourceBundle().getText(\"companyCode\"));\r\n\t\t},\r\n\t\tsaveItem: function(S) {\r\n\t\t\tvar t = this.getView().byId(\"idTitle\").getValue();\r\n\t\t\tvar d = this.getView().byId(\"smartForm1\").getModel().getData(\"/\" + this.itemPath);\r\n\t\t\td.PurchaseRequisitionPrice = \"0.00\";\r\n\t\t\tif (!(this.Fixedsupplier1 === undefined)) {\r\n\t\t\t\td.FixedSupplier = this.Fixedsupplier1;\r\n\t\t\t}\r\n\t\t\tif (!(this.Supplier1 === undefined)) {\r\n\t\t\t\td.Supplier = this.Supplier1;\r\n\t\t\t}\r\n\t\t\tif (this.bFlag) {\r\n\t\t\t\td.FixedSupplier = \"\";\r\n\t\t\t\td.Supplier = \"\";\r\n\t\t\t}\r\n\t\t\td.FormOfAddress = t;\r\n\t\t\td = this.adjustPayload(d);\r\n\t\t\tthis.getView().setBusy(true);\r\n\t\t\tthis.dataManager.updateItemDetails(this.getServiceCallParameter(this.successItem(S), this.serviceFail), this.itemDraftUUID, this.getPurchaseRequisition(),\r\n\t\t\t\td, this.prItem);\r\n\t\t},\r\n\t\tsuccessItem: function(d) {\r\n\t\t\tthis.getAppModel().read(\"/\" + this.itemPath, {\r\n\t\t\t\tsuccess: jQuery.proxy(this.updateBasicData, this),\r\n\t\t\t\terror: jQuery.proxy(this.serviceFail, this)\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateBasicData: function(d) {\r\n\t\t\tthis.getView().byId(\"idPrice\").setValue(d.PurchaseRequisitionPrice);\r\n\t\t\tthis.getView().setBusy(false);\r\n\t\t},\r\n\t\tadjustPayload: function(d) {\r\n\t\t\tvar m = sap.ui.getCore().getMessageManager();\r\n\t\t\tm.removeAllMessages();\r\n\t\t\tfor (var p in d) {\r\n\t\t\t\tif (p.search('_fc') < 0) {\r\n\t\t\t\t\tvar a = p.toString() + \"_fc\";\r\n\t\t\t\t\tif (d[a] === 1 || d[a] === 0) {\r\n\t\t\t\t\t\tdelete d[p];\r\n\t\t\t\t\t\tdelete d[a];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},\r\n\t\tshowItemStatus: function() {},\r\n\t\tsetDefaultValue: function(e) {\r\n\t\t\tif (e.getSource().getDataProperty().typePath === \"AddressStreetName\") {\r\n\t\t\t\te.getSource().setTextLabel(this.getResourceBundle().getText(\"houseNumber\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tservicePerformerChange: function(e) {\r\n\t\t\tvar s = this.getView().byId(\"idServicePerformerDet\").getValue();\r\n\t\t\tif (s) {\r\n\t\t\t\tvar m = this.getModel();\r\n\t\t\t\tm.read(\"/C_MM_ServicePerformerValueHelp\", {\r\n\t\t\t\t\turlParameters: {\r\n\t\t\t\t\t\t\"$filter\": \"ServicePerformer eq '\" + s + \"'\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: jQuery.proxy(this.supplierReadSuccess, this),\r\n\t\t\t\t\terror: jQuery.proxy(this.supplierReadFailure, this)\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].removeAllItems();\r\n\t\t\t\tthis.getView().byId(\"addSupplier1\").setVisible(true);\r\n\t\t\t\tif (this.productList) {\r\n\t\t\t\t\tthis.productList.destroy();\r\n\t\t\t\t\tthis.productList = null;\r\n\t\t\t\t\tvar c = new sap.m.List({\r\n\t\t\t\t\t\tnoDataText: this.getResourceBundle().getText(\"supplier\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsupplierReadSuccess: function(d) {\r\n\t\t\tif (d.results.length) {\r\n\t\t\t\tvar s = d.results[0];\r\n\t\t\t\tthis.text = \"Fixed\";\r\n\t\t\t\tthis.Fixedsupplier = s.Supplier;\r\n\t\t\t\tthis.Supplier = \"\";\r\n\t\t\t\tthis.Fixedsupplier1 = this.Fixedsupplier;\r\n\t\t\t\tthis.Supplier1 = this.Supplier;\r\n\t\t\t\tif (!this.productList) {\r\n\t\t\t\t\tthis.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n\t\t\t\t\tthis.getView().addDependent(this.productList);\r\n\t\t\t\t}\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(s.SupplierName);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(s.Supplier);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n\t\t\t\tthis.getView().byId(\"addSupplier\").setVisible(false);\r\n\t\t\t\tthis.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setEnabled(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setValueState(sap.ui.core.ValueState.Error);\r\n\t\t\t\tthis.getView().byId(\"idServicePerformer\").setValueStateText(this.getResourceBundle().getText(\"servicePerformerError\"));\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/view/CatalogList.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- List catalog -->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartTable=\"sap.ui.comp.smarttable\" xmlns=\"sap.m\">\r\n <VBox class=\"sapUiMediumMarginBeginEnd sapUiMediumMarginTop\">\r\n  <smartTable:SmartTable >\r\n   <smartTable:customToolbar>\r\n    <Toolbar class=\"\" height=\"3.5rem\">\r\n     <Label design=\"Bold\" level=\"H2\" text=\"{i18n>launchCatalogs}\"/>\r\n     <ToolbarSpacer/>\r\n     <Button alt=\"{i18n]catalogImage}\" enabled=\"false\" icon=\"sap-icon://list\" press=\"showCatalogList\" type=\"Emphasized\"/>\r\n     <Button alt=\"{i18n]catalogImage}\" icon=\"sap-icon://grid\" press=\"showGridCatalog\" tooltip=\"{i18n>gridCatalog}\" type=\"Transparent\"/>\r\n    </Toolbar>\r\n   </smartTable:customToolbar>\r\n   <Table backgroundDesign=\"\" class=\"\" inset=\"false\" items=\"{path: '/UserCatalogSet'}\">\r\n    <columns class=\"\">\r\n     <Column class=\"\" hAlign=\"Left\" width=\"6rem\">\r\n      <header></header>\r\n     </Column>\r\n     <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"7rem\">\r\n      <header></header>\r\n     </Column>\r\n     <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\">\r\n      <header></header>\r\n     </Column>\r\n    </columns>\r\n    <ColumnListItem id=\"\" press=\"onCatalogNavClick\" type=\"Active\" vAlign=\"Middle\">\r\n     <cells class=\"\">\r\n      <VBox class=\"sapUiSmallMarginTopBottom\">\r\n       <Image alt=\"{i18n>catalogImage}\" class=\"\" densityAware=\"true\" height=\"6rem\" src=\"{path: 'IconPath', formatter: '.formatter.imgnotfound'}\"\r\n        width=\"6rem\"/>\r\n      </VBox>\r\n     </cells>\r\n     <cells >\r\n      <VBox class=\"sapUiSmallMarginTopBottom\">\r\n       <Link emphasized=\"true\" press=\"onPressText\" text=\"{ServiceId}\"/>\r\n      </VBox>\r\n     </cells>\r\n     <cells >\r\n      <VBox class=\"sapUiSmallMarginTopBottom\">\r\n       <Text text=\"{ServiceDescription}\"/>\r\n      </VBox>\r\n     </cells>\r\n    </ColumnListItem>\r\n   </Table>\r\n  </smartTable:SmartTable>\r\n </VBox>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/NoserachResult.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- No Search Result -->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns=\"sap.m\">\r\n <FlexBox justifyContent='Center'>\r\n  <l:FixFlex class=\"\">\r\n   <l:fixContent>\r\n    <HBox>\r\n     <Title class=\"sapUiMediumMarginTopBottom\" design=\"bold\" text=\"{i18n>Nomatching}\" titleStyle=\"H2\"/>\r\n    </HBox>\r\n    <HBox>\r\n     <Label text=\"{i18n>NoResultsText1}\"/>\r\n     <Label class=\"sapUiTinyMarginBeginEnd\" text=\"{i18n>NoResultsText2}\"/>\r\n     <Link press=\"goToFreetext\" text=\"{i18n>appTitleCreate}\"/>\r\n    </HBox>\r\n   </l:fixContent>\r\n  </l:FixFlex>\r\n </FlexBox>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/PurReqList.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.PurReqList\" xmlns:core=\"sap.ui.core\"\r\n xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:smartTable=\"sap.ui.comp.smarttable\" xmlns:smartfilterbar=\"sap.ui.comp.smartfilterbar\" xmlns:table=\"sap.ui.table\" xmlns=\"sap.m\">\r\n <Page enableScrolling=\"true\" id=\"page\" navButtonPress=\"onNavBack\" showNavButton=\"true\" title=\"{i18n>MainTitle}\">\r\n  <content>\r\n   <smartfilterbar:SmartFilterBar basicSearchFieldName=\"searchField\" class=\"sapUiSizeCompact\" enableBasicSearch=\"true\"\r\n    entityType=\"C_PurchaseRequisition_WLType\" filterBarExpanded=\"false\" filterChange=\"\" id=\"idSmartFilterPRList\" initialise=\"onInitDone\"\r\n    persistencyKey=\"F1643.controller.PurReqList\" reset=\"ResetFields\" search=\"onSearchPRList\" cancel=\"cancelFilter\">\r\n    <smartfilterbar:controlConfiguration>\r\n     <smartfilterbar:ControlConfiguration controlType=\"auto\" groupId=\"_BASIC\" hasValueHelpDialog=\"true\" index=\"1\" key=\"PurchaseRequisition\"\r\n      label=\"{i18n>PurReq}\" preventInitialDataFetchInValueHelpDialog=\"false\" visible=\"true\"></smartfilterbar:ControlConfiguration>\r\n    </smartfilterbar:controlConfiguration>\r\n    <smartfilterbar:controlConfiguration>\r\n     <smartfilterbar:ControlConfiguration controlType=\"auto\" groupId=\"_BASIC\" hasValueHelpDialog=\"true\" index=\"2\" key=\"Supplier\"\r\n      label=\"{i18n>Supplier}\" preventInitialDataFetchInValueHelpDialog=\"false\" visible=\"true\"></smartfilterbar:ControlConfiguration>\r\n    </smartfilterbar:controlConfiguration>\r\n    <smartfilterbar:controlConfiguration>\r\n     <smartfilterbar:ControlConfiguration controlType=\"auto\" groupId=\"_BASIC\" hasValueHelpDialog=\"true\" index=\"3\" key=\"Material\"\r\n      label=\"{i18n>Material}\" preventInitialDataFetchInValueHelpDialog=\"false\" visible=\"true\"></smartfilterbar:ControlConfiguration>\r\n    </smartfilterbar:controlConfiguration>\r\n    <smartfilterbar:controlConfiguration>\r\n     <smartfilterbar:ControlConfiguration controlType=\"dropDownList\" groupId=\"_BASIC\" hasValueHelpDialog=\"true\" index=\"4\"\r\n      key=\"PurReqnLifeCycleStatus\" label=\"{i18n>Status}\" preventInitialDataFetchInValueHelpDialog=\"false\" visible=\"true\"></smartfilterbar:ControlConfiguration>\r\n    </smartfilterbar:controlConfiguration>\r\n    <smartfilterbar:controlConfiguration> \r\n     <smartfilterbar:ControlConfiguration groupId=\"_BASIC\" hasValueHelpDialog=\"true\" index=\"5\" key=\"CreationDate\" label=\"{i18n>timeFrame}\"\r\n      preventInitialDataFetchInValueHelpDialog=\"false\" visible=\"true\">\r\n      <smartfilterbar:customControl>\r\n       <DateRangeSelection id=\"timeRangeFilter\" change=\"checkDateNow\"/>\r\n      </smartfilterbar:customControl>\r\n     </smartfilterbar:ControlConfiguration>\r\n    </smartfilterbar:controlConfiguration>\r\n   </smartfilterbar:SmartFilterBar>\r\n   <smartTable:SmartTable class=\"sapFioriListReportSmartTable\" enableAutoBinding=\"true\" enableCustomFilter=\"true\"\r\n    entitySet=\"C_PurchaseRequisition_WL\" header=\"{i18n>PurReqHeader}\" id=\"idSmartTablePRList\" ignoredFields=\"PurReqnLifeCycleStatus,Cnt,Id\"\r\n    persistencyKey=\"RequisitionsTable.controller.PurReqList\" showRowCount=\"true\" smartFilterId=\"\" useExportToExcel=\"true\" beforeExport=\"onBeforeExport\"\r\n    useTablePersonalisation=\"false\" ignoreFromPersonalisation =\"NumberOfItems\" requestAtLeastFields=\"IsExtPurgScenario\">\r\n    <smartTable:customToolbar width=\"20%\">\r\n     <Toolbar class=\"sapUiMediumMarginBegin sapUiMediumMarginEnd\" design=\"Transparent\" height=\"60px\">\r\n      <ToolbarSpacer/>\r\n      <Link align=\"Right\" class=\"sapUiTinyMarginBegin sapUiTinyMarginEnd\" enabled=\"false\" id=\"deleteReqLinkId\" press=\"onPressDeleteRequisition\"\r\n       text=\"{i18n>overviewDelete}\"/>\r\n      <!--<Link enabled=\"false\" id=\"EditReqLinkId\" press=\"fnNavigateEditItemList\" text=\"{i18n>edit}\"/>-->\r\n      <Link enabled=\"false\" id=\"ConfirmGRLinkId\" press=\"fnNavigateConfirmGR\" text=\"{i18n>confirmGR}\"/>\r\n      <Link enabled=\"false\" id=\"ReturnGRLinkId\" press=\"fnNavigateReturnGR\" text=\"{i18n>returnGR}\"/>\r\n     </Toolbar>\r\n    </smartTable:customToolbar>\r\n    <Table class=\"sapUiMediumMarginBegin sapUiMediumMarginEnd\" enableBusyIndicator=\"true\" growing=\"true\" growingScrollToLoad=\"true\"\r\n     id=\"idRequisitionItemsTable\" mode=\"SingleSelectLeft\" selectionChange=\"onPressRow\" visible=\"true\" width=\"auto\">\r\n     <columns>\r\n      <Column demandPopin=\"true\" id=\"idRequisitionColumn\" minScreenWidth=\"Phone\">\r\n       <Text text=\"{i18n>PurReq}\"/>\r\n       <customData>\r\n        <core:CustomData key=\"p13nData\"\r\n         value='\\{\"columnKey\":\"requisitionNumberColKey\", \"leadingProperty\":\"PurchaseRequisition\", \"additionalProperty\":\"PurReqnDescription\", \"sortProperty\":\"PurchaseRequisition\", \"filterProperty\":\"PurchaseRequisition\" }'/>\r\n       </customData>\r\n      </Column>\r\n      <Column demandPopin=\"true\" hAlign=\"End\" id=\"idItemsCountColumn\" minScreenWidth=\"Tablet\">\r\n       <Text class=\"sapUiLargeMarginEnd\" text=\"{i18n>numOfItems}\"/>\r\n       <customData>\r\n        <core:CustomData key=\"p13nData\"\r\n         value='\\{\"columnKey\":\"itemsCountColKey\", \"leadingProperty\":\"NumberOfItems\", \"sortProperty\":\"NumberOfItems\", \"filterProperty\":\"NumberOfItems\" }'/>\r\n       </customData>\r\n      </Column>\r\n      <Column demandPopin=\"true\" id=\"idStatusColumn\" minScreenWidth=\"Tablet\">\r\n       <Text text=\"{i18n>Status}\"/>\r\n       <customData>\r\n        <core:CustomData key=\"p13nData\"\r\n         value='\\{\"columnKey\":\"requisitionStatusColKey\", \"leadingProperty\":\"PurReqnLifeCycleStatus\", \"additionalProperty\":\"PurReqnLifeCycleStatusName\", \"sortProperty\":\"PurReqnLifeCycleStatus\", \"filterProperty\":\"PurReqnLifeCycleStatus\" }'/>\r\n       </customData>\r\n      </Column>\r\n      <Column demandPopin=\"true\" id=\"idCreationDateColumn\" minScreenWidth=\"Tablet\">\r\n       <Text text=\"{i18n>createdOn}\"/>\r\n       <customData>\r\n        <core:CustomData key=\"p13nData\"\r\n         value='\\{\"columnKey\":\"requisitionCreationDateColKey\", \"leadingProperty\":\"CreationDate\", \"sortProperty\":\"CreationDate\", \"filterProperty\":\"CreationDate\", \"type\":\"date\" }'/>\r\n       </customData>\r\n      </Column>\r\n      <Column demandPopin=\"true\" hAlign=\"End\" id=\"idTotalValueColumn\" minScreenWidth=\"Tablet\">\r\n       <Text class=\"sapUiMediumMarginEnd\" text=\"{i18n>totalValue}\"/>\r\n       <customData>\r\n        <core:CustomData key=\"p13nData\"\r\n         value='\\{\"columnKey\":\"totalValueColKey\", \"leadingProperty\":\"TotalNetAmount\", \"additionalProperty\":\"Currency\", \"sortProperty\":\"TotalNetAmount\", \"filterProperty\":\"TotalNetAmount\" }'/>\r\n       </customData>\r\n      </Column>\r\n     </columns>\r\n     <items>\r\n      <ColumnListItem press=\"fnNavigateItemList\" type=\"Navigation\">\r\n       <cells>\r\n        <!--<VerticalLayout xmlns=\"sap.ui.layout\" class=\"sapUiSmallMarginTop sapUiSmallMarginBottom\">-->\r\n        <!--        <Link press=\"handlePRFactSheetNavigation\" text=\"{PurchaseRequisition}\" xmlns=\"sap.m\"/>-->\r\n        <!--        <Label text=\"{PurReqnDescription}\" xmlns=\"sap.m\"/>-->\r\n        <!--</VerticalLayout>-->\r\n        <ObjectIdentifier class=\"sapUiSmallMarginTop sapUiSmallMarginBottom\" text=\"{PurReqnDescription}\" title=\"{PurchaseRequisition}\"\r\n         titleActive=\"true\" titlePress=\"handlePRFactSheetNavigation\"/>\r\n        <Link class=\"sapUiLargeMarginEnd sapUiSmallMarginTop sapUiSmallMarginBottom\"\r\n        text=\"{path: 'NumberOfItems', formatter:'.formatter.formatNumberOfItems'} \" press=\"handleStatusPress\"/>\r\n        <Text class=\"sapUiSmallMarginTop sapUiSmallMarginBottom\" text=\"{PurReqnLifeCycleStatusName}\"/>\r\n        <Text class=\"sapUiSmallMarginTop sapUiSmallMarginBottom\" text=\"{parts:[{path:'CreationDate'}],formatter:'.formatter.formatCreatedDate'}\"/>\r\n        <ObjectNumber class=\"sapUiMediumMarginEnd sapUiSmallMarginTop sapUiSmallMarginBottom\"\r\n         number=\"{parts:[{path:'TotalNetAmount'},{path:'Currency'}],formatter:'.formatter.formatTotalValue'}\" unit=\"{Currency}\"/>\r\n\r\n       </cells>\r\n      </ColumnListItem>\r\n     </items>\r\n    </Table>\r\n   </smartTable:SmartTable>\r\n  </content>\r\n </Page>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/view/Account_Asisgnment_Detail.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.Account_Asisgnment_Detail\" xmlns:core=\"sap.ui.core\"\r\n xmlns:l=\"sap.ui.layout\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns=\"sap.m\">\r\n <semantic:FullscreenPage class=\"sapUiFioriObjectPage\" enableScrolling=\"true\" height=\"100%\" id=\"page\" navButtonPress=\"onBack\"\r\n  showNavButton=\"true\" title=\"{i18n>accountDetails}\">\r\n  <semantic:customHeaderContent>\r\n   <!--        <Button class=\"sapUiSmallMarginEnd\" enabled=\"true\" icon=\"sap-icon://cart\" id=\"btnCart\" text=\"\" tooltip=\"{i18n]CART}\" type=\"Emphasized\"/>-->\r\n  </semantic:customHeaderContent>\r\n  <semantic:content>\r\n   <l:Grid class=\"sapUiMediumMarginBeginEnd\" defaultSpan=\"L12 M12 S12\" id=\"idPanelAttachments\" width=\"auto\">\r\n    <l:content>\r\n     <core:Fragment fragmentName=\"ui.s2p.mm.requisition.maintain.s1.fragment.AccountingDetails\" type=\"XML\"/>\r\n    </l:content>\r\n   </l:Grid>\r\n  </semantic:content>\r\n  <semantic:customFooterContent>\r\n   <!--<Button press=\"onPressSave\" text=\"{i18n>save}\" type=\"Emphasized\"/>-->\r\n  </semantic:customFooterContent>\r\n </semantic:FullscreenPage>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/view/AssignedSupplier.fragment.xml": "<?xml version=\"1.0\"?>\r\n<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n <Table inset=\"false\">\r\n  <columns>\r\n   <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"5rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"17rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Center\" minScreenWidth=\"Tablet\" width=\"14rem\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Tablet\" width=\"\">\r\n    <header></header>\r\n   </Column>\r\n   <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Tablet\" width=\"\">\r\n    <header></header>\r\n   </Column>\r\n  </columns>\r\n  <ColumnListItem vAlign=\"Middle\">\r\n   <core:Icon size=\"5rem\" src=\"sap-icon://customer-and-supplier\"></core:Icon>\r\n   <HBox>\r\n    <ObjectHeader>\r\n     <attributes>\r\n      <ObjectAttribute/>\r\n      <ObjectAttribute/>\r\n      <ObjectAttribute/>\r\n      <ObjectAttribute/>\r\n      <ObjectAttribute/>\r\n     </attributes>\r\n    </ObjectHeader>\r\n   </HBox>\r\n   <Text/>\r\n   <ObjectHeader>\r\n    <attributes>\r\n     <ObjectAttribute/>\r\n    </attributes>\r\n   </ObjectHeader>\r\n   <Button press=\"onUnAssign\" text=\"{i18n>Unassign}\" enabled=\"{viewProperties>/enabled}\"/>\r\n  </ColumnListItem>\r\n </Table>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/App.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<mvc:View\r\n xmlns:mvc=\"sap.ui.core.mvc\"\r\n controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.App\"\r\n displayBlock=\"true\"\r\n xmlns=\"sap.m\">\r\n <App id=\"app\"\r\n   busy=\"{appView>/busy}\"\r\n   busyIndicatorDelay=\"{appView>/delay}\"/>\r\n</mvc:View>",
		"ui/s2p/mm/requisition/maintain/s1/view/ObjectNotFound.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<mvc:View\r\n controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.BaseController\"\r\n xmlns:mvc=\"sap.ui.core.mvc\"\r\n xmlns=\"sap.m\">\r\n <MessagePage\r\n  title=\"{i18n>objectTitle}\"\r\n  text=\"{i18n>noObjectFoundText}\"\r\n  icon=\"{sap-icon://product}\"\r\n  description=\"\"\r\n  id=\"page\">\r\n  <customDescription>\r\n   <Link id=\"link\" text=\"{i18n>backToWorklist}\" press=\"myNavBack\" />\r\n  </customDescription>\r\n </MessagePage>\r\n</mvc:View>",
		"ui/s2p/mm/requisition/maintain/s1/controller/BaseController-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/*Base controller*/\r\njQuery.sap.require(\"sap.ca.ui.message.message\");\r\nvar oMessagePopover;\r\nvar oSearchterm, callInitAfterDeleteOrder;\r\nsap.ui.define([\r\n \"sap/ui/core/mvc/Controller\",\r\n \"sap/ui/core/routing/History\",\r\n \"ui/s2p/mm/requisition/maintain/s1/model/formatter\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/MassChange\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/ExternalPurchasing\",\r\n \"sap/ui/model/json/JSONModel\",\r\n \"sap/m/MessageBox\",\r\n \"sap/m/Button\"\r\n], function(Controller, History, formatter, DataManager, ApplyChange, ExternalPurchasing, JSONModel, MessageBox, Button) {\r\n \"use strict\";\r\n return Controller.extend(\"ui.s2p.mm.requisition.maintain.s1.controller.BaseController\", {\r\n\r\n  dataManager: DataManager,\r\n  entityConstants: DataManager.EntityConstants,\r\n  formatter: formatter,\r\n  ApplyChange: ApplyChange,\r\n  ExternalPurchasing: ExternalPurchasing,\r\n  /**\r\n   * Convenience method for accessing the router.\r\n   * @public\r\n   * @returns {sap.ui.core.routing.Router} the router for this component\r\n   **/\r\n\r\n  getRouter: function() {\r\n   return sap.ui.core.UIComponent.getRouterFor(this);\r\n  },\r\n  setTestMode: function(bBool) {\r\n   this.getOwnerComponent().getComponentData().testMode = bBool;\r\n  },\r\n\r\n  getTestMode: function() {\r\n   return this.getOwnerComponent().getComponentData().testMode;\r\n  },\r\n\r\n  /**\r\n   * Setter for the Search Text .\r\n   * @public\r\n   */\r\n  setSearchterm: function(searchterm) {\r\n   oSearchterm = searchterm;\r\n  },\r\n\r\n  /**\r\n   * Getter for the Search Text .\r\n   * @public\r\n   * @returns search text\r\n   */\r\n  getSearchterm: function() {\r\n   return oSearchterm;\r\n  },\r\n\r\n  /**\r\n   * Triggers a Update request once the mini cart list has been updated\r\n   */\r\n  listUpdated: function() {\r\n   if (this.getView().byId(\"btnCart\").getText() > 0) {\r\n    sap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].focus();\r\n    sap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].setEnabled(true);\r\n    sap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[2].setEnabled(true);\r\n    this.retrieveMessages();\r\n   } else {\r\n    sap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[1].setEnabled(false);\r\n    sap.ui.getCore().byId(\"popover\").getFooter().getAggregation(\"content\")[2].setEnabled(false);\r\n   }\r\n   if (!(this.sourcePage === \"FreeText\" && this.isMaterial())) {\r\n    if (this.getView().byId(\"price\")) {\r\n     this.getView().byId(\"price\").setValue(\"\");\r\n    }\r\n   }\r\n\r\n  },\r\n  storeMessages: function(data, headers) {\r\n   this.headers = headers;\r\n  },\r\n  retrieveMessages: function() {\r\n   // this.headers;\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n   if (!(this.getView().byId(\"btnCart\").getText() === \"0\")) {\r\n    if (this.headers) {\r\n\r\n     if (this.headers.headers[\"sap-message\"]) {\r\n      var oMessageProcessor = new sap.ui.core.message.ControlMessageProcessor();\r\n      var messages = [];\r\n      messages.push(JSON.parse(this.headers.headers[\"sap-message\"]).message);\r\n\r\n      if (this.headers.headers[\"sap-message\"].search(\"details\")) {\r\n       var errors = JSON.parse(this.headers.headers[\"sap-message\"]);\r\n       for (var i = 0; i < errors.details.length; i++) {\r\n        messages.push(errors.details[i].message);\r\n       }\r\n      }\r\n\r\n      for (i = 0; i < messages.length; i++) {\r\n       var code = \"\";\r\n       if (errors.details.length > 1 && i < errors.details.length) {\r\n        code = errors.details[i][\"code\"];\r\n       }\r\n       var errorMessage = new sap.ui.core.message.Message({\r\n        message: messages[i],\r\n        type: sap.ui.core.MessageType.Error,\r\n        id: \"1\",\r\n        code: code,\r\n        persistent: true,\r\n        // target: \"/idMaterialDescription/value\",\r\n        processor: oMessageProcessor\r\n       });\r\n       oMessageManager.addMessages(errorMessage);\r\n      }\r\n     }\r\n    }\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Convenience method for getting the view model by name.\r\n   * @public\r\n   * @param {string} [sName] the model name\r\n   * @returns {sap.ui.model.Model} the model instance\r\n   */\r\n  getModel: function(sName) {\r\n   return this.getView().getModel(sName);\r\n  },\r\n\r\n  /**\r\n   * Convenience method for setting the view model.\r\n   * @public\r\n   * @param {sap.ui.model.Model} oModel the model instance\r\n   * @param {string} sName the model name\r\n   * @returns {sap.ui.mvc.View} the view instance\r\n   */\r\n  setModel: function(oModel, sName) {\r\n   return this.getView().setModel(oModel, sName);\r\n  },\r\n\r\n  /**\r\n   * Getter for the resource bundle.\r\n   * @public\r\n   * @returns {sap.ui.model.resource.ResourceModel} the resourceModel of the component\r\n   */\r\n  getResourceBundle: function() {\r\n   return this.getOwnerComponent().getModel(\"i18n\").getResourceBundle();\r\n  },\r\n\r\n  /**\r\n   * Navigates back in the browser history, if the entry was created by this app.\r\n   * If not, it navigates to a route passed to this function.\r\n   *\r\n   * @public\r\n   * @param {string} sRoute the name of the route if there is no history entry\r\n   * @param {object} mData the parameters of the route, if the route does not need parameters, it may be omitted.\r\n   */\r\n  myNavBack: function(sRoute, mData) {\r\n   var oHistory = History.getInstance();\r\n   var sPreviousHash = oHistory.getPreviousHash();\r\n\r\n   if (sPreviousHash !== undefined) {\r\n    // The history contains a previous entry\r\n    history.go(-1);\r\n   } else {\r\n    // Otherwise we go backwards with a forward history\r\n    var bReplace = true;\r\n    this.getRouter().navTo(sRoute, mData, bReplace);\r\n   }\r\n  },\r\n\r\n  /**\r\n   * Event handler when the share by E-Mail button has been clicked\r\n   * @public\r\n   */\r\n  onShareEmailPress: function() {\r\n   var oViewModel = (this.getModel(\"objectView\") || this.getModel(\"worklistView\"));\r\n   sap.m.URLHelper.triggerEmail(\r\n    null,\r\n    oViewModel.getProperty(\"/shareSendEmailSubject\"),\r\n    oViewModel.getProperty(\"/shareSendEmailMessage\")\r\n   );\r\n  },\r\n  /**\r\n   * Setter method to set the draft guid\r\n   * @public\r\n   *\r\n   * @param{draftKey}his. Draft Key fo the application\r\n   *\r\n   */\r\n  setHeaderDraftKey: function(draftKey) {\r\n   this.draftKey = draftKey;\r\n   this.getOwnerComponent().getComponentData().draftKey = draftKey;\r\n  },\r\n\r\n  /**\r\n   * Getter method which returns the draft guid\r\n   * @public\r\n   *\r\n   */\r\n  getHeaderDraftKey: function() {\r\n   if (this.getOwnerComponent().getComponentData().draftKey) {\r\n    return this.getOwnerComponent().getComponentData().draftKey;\r\n   } else {\r\n    return this.draftKey;\r\n   }\r\n  },\r\n\r\n  setKeys: function(param) {\r\n\r\n   var keys = param.startupParameters[\"Keys\"];\r\n\r\n   if (keys) {\r\n    // var pattern =param.startupParameters[\"page\"];\r\n    this.sourcePage = keys[0];\r\n    this.draftKey = keys[1];\r\n    this.purchaseRequisition = keys[2];\r\n   }\r\n\r\n  },\r\n  setSourcePage: function(page) {\r\n   this.sourcePage = page;\r\n   this.getOwnerComponent().getComponentData().sourcePage = page;\r\n  },\r\n  getSourcePage: function() {\r\n   if (this.getOwnerComponent().getComponentData().sourcePage) {\r\n    return this.getOwnerComponent().getComponentData().sourcePage;\r\n   } else {\r\n    return this.sourcePage;\r\n   }\r\n  },\r\n  navToSourcePage: function() {\r\n   if (this.getSourcePage() === \"FreeText\") {\r\n    this.goToFreetext();\r\n   } else if (this.getSourcePage() === \"CartOverview\" || this.getSourcePage() === \"ItemDetails\") {\r\n    this.handleViewCartPress();\r\n   } else if (this.getSourcePage() === \"PurReqList\") {\r\n    this.getRouter().navTo(\"PurReqList\");\r\n   } else if (this.getSourcePage() === \"Search\") {\r\n    this.getRouter().navTo(\"Search\");\r\n    this.getView().setVisible(true);\r\n   }\r\n   // else {\r\n   //  var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n   //  this.prNumber = purchaseRequisition;\r\n   //  this.prItemNo = this.getOwnerComponent().getComponentData().purReqnItem;\r\n   //  this.ItemDraft = this.getOwnerComponent().getComponentData().purReqnItemDraft;\r\n   //  this.itemPath = this.getOwnerComponent().getComponentData().PRitemPath;\r\n   //  this.getRouter().navTo(\"ItemDetails\", {\r\n   //   DraftKey: this.getHeaderDraftKey(),\r\n   //   PurchaseRequisition: purchaseRequisition,\r\n   //   OpnCtlgItemID: 0,\r\n   //   PurReqnItemDraftUUID: this.ItemDraft,\r\n   //   items: this.itemPath,\r\n   //   PurchaseRequisitionItem: this.prItemNo\r\n   //  });\r\n   // }\r\n   this.setSourcePage('');\r\n   this.getOwnerComponent().getComponentData().changingSourcePageAllowed = true;\r\n  },\r\n  goToFreetext: function() {\r\n   var oSearchValue = this.getView().byId(\"searchItems\").getValue();\r\n   if (oSearchValue.length === 0) {\r\n    oSearchValue = \" \";\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n   if (this._oPopover) {\r\n    this._oPopover.destroy();\r\n    this._oPopover.destroyContent();\r\n    this._oPopover = null;\r\n   }\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.dataManager.EntityConstants.DUMMY_PR_KEY;\r\n   this.getRouter().navTo(\"Freetext\", {\r\n    DraftKey: this.getHeaderDraftKey(),\r\n    PurchaseRequisition: purchaseRequisition,\r\n    SearchValue: oSearchValue\r\n   });\r\n\r\n  },\r\n\r\n  /**\r\n   * Setter method to set the Purchase Requisition Number\r\n   * @public\r\n   * @param{prNo} Purchase Requisition Number fo the application\r\n   */\r\n\r\n  setPurchaseRequisition: function(prNo) {\r\n   if (prNo === this.entityConstants.DUMMY_PR_KEY) {\r\n    this.purchaseRequisition = '';\r\n   } else {\r\n    this.purchaseRequisition = prNo;\r\n   }\r\n   this.getOwnerComponent().getComponentData().purchaseRequisition = this.purchaseRequisition;\r\n  },\r\n\r\n  /**\r\n   * Getter method to get the Purchase Requisition Number\r\n   * @public\r\n   * @return Purchase Requisition Number\r\n   */\r\n\r\n  getPurchaseRequisition: function() {\r\n   if (this.getOwnerComponent().getComponentData().purchaseRequisition) {\r\n    return this.getOwnerComponent().getComponentData().purchaseRequisition;\r\n   } else {\r\n    if (this.purchaseRequisition === undefined) {\r\n     return '';\r\n    } else {\r\n     return this.purchaseRequisition;\r\n    }\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * Setter method to set the currently logged in User Id\r\n   * @public\r\n   * @param{userId} User logged in the application\r\n   */\r\n  setUserID: function(userId) {\r\n   this.userId = userId;\r\n  },\r\n  /**\r\n   * Getter method to get the currently logged in User Id\r\n   * @public\r\n   * @return User Id\r\n   */\r\n  getUserID: function() {\r\n   return this.userId;\r\n  },\r\n\r\n  /**\r\n   * Returns an object which will be passed to the DataManager with properties\r\n   * oParentObject - Parent Controller,\r\n   * successHandler - OData service success handler\r\n   * errorHandler - OData service error handler\r\n   *\r\n   * @param{successHandler} : Success Handler function callback, this is called after the service call returns SUCCESS(Status Code : 200, 201)\r\n   * @param{errorHandler} : Error handler function callback, called when service fails(Status Codes : 400, 500, 401)\r\n   */\r\n  getServiceCallParameter: function(successHandler, errorHandler) {\r\n   return {\r\n    oParentObject: this,\r\n    successHandler: successHandler,\r\n    errorHandler: errorHandler\r\n   };\r\n\r\n  },\r\n\r\n  /**\r\n   * Convenience method which will navigate to Cart Overview Screen\r\n   * @public\r\n   */\r\n\r\n  handleViewCartPress: function() {\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart = null;\r\n   }\r\n   if (this._oContent) {\r\n    this._oContent.destroy();\r\n    this._oContent = null;\r\n   }\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n   var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n   this.getRouter().navTo(\"CartOverview\", {\r\n    DraftKey: this.getHeaderDraftKey(),\r\n    PurchaseRequisition: purchaseRequisition\r\n   });\r\n\r\n  },\r\n\r\n  /**\r\n   * Getter method which will return the model details\r\n   * @public\r\n   * return oData model\r\n   */\r\n  getAppModel: function() {\r\n   var oModel = this.getOwnerComponent().getModel();\r\n   oModel.setDefaultBindingMode(\"TwoWay\");\r\n   return oModel;\r\n  },\r\n\r\n  /**\r\n   * Setter method which will set the variable \"callInitAfterDeleteOrder\" when we delete the cart from Cart Overview screen\r\n   * @public\r\n   */\r\n  setOrderDelete: function(uid) {\r\n   callInitAfterDeleteOrder = uid;\r\n  },\r\n\r\n  /**\r\n   * Getter method which will returns the variable \"callInitAfterDeleteOrder\"\r\n   * @public\r\n   * return callInitAfterDeleteOrder\r\n   */\r\n  getOrderDelete: function() {\r\n   return callInitAfterDeleteOrder;\r\n  },\r\n\r\n  /**\r\n   * Trigger a request which will trigger when we delete the item from mini cart list\r\n   */\r\n  deleteItem: function(oEvent) {\r\n   var oItem = oEvent.getParameter('listItem');\r\n   var oList = oEvent.getSource();\r\n   var sPath;\r\n   if (this.getTestMode()) {\r\n    sPath =\r\n     \"/C_Sspprmaint_Itm(PurchaseRequisition='PurchaseRequisition 8',PurchaseRequisitionItem='PurchaseRequisitionItem 1',DraftUUID=guid'c23e13de-8504-4180-88ba-d4f664219426',IsActiveEntity=false)\";\r\n   } else {\r\n    this.deleteItemId = oEvent.getParameter('listItem').getId();\r\n    sPath = oItem.getBindingContext().getPath();\r\n   }\r\n\r\n   oList.getModel().remove(sPath);\r\n   oList.attachEventOnce('updateFinished', oList.focus, oList);\r\n   this.refreshMinicart();\r\n  },\r\n\r\n  /**\r\n   * Trigger a request which will update the no. of items in your mini cart\r\n   */\r\n  refreshMinicart: function() {\r\n   var mParameters = this.getServiceCallParameter(this.headerSuccess, this.serviceFail);\r\n   this.dataManager.getHeader(mParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n  },\r\n  firstMiniCartOpen: function() {\r\n\r\n   var cartbtn = this.getView().byId(\"btnCart\");\r\n   if (cartbtn.getText() === \"1\") {\r\n    cartbtn.firePress();\r\n    cartbtn.setType(\"Emphasized\");\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * This is the success callback which will trigger once the service in refresh Mini Cart will executed successfully\r\n   */\r\n  headerSuccess: function(data) {\r\n   var viewName = this.getView().getId().toString();\r\n   if (viewName.search(\"Search\") > 0) {\r\n    var oJSModelCart = new sap.ui.model.json.JSONModel(data);\r\n    this.getView().byId(\"btnCart\").setModel(oJSModelCart);\r\n    this.getView().byId(\"btnCart\").bindElement(\"/\");\r\n   } else {\r\n    this.dataManager.headerSuccess(this.getView().byId(\"btnCart\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n     \"'\", false\r\n    ]);\r\n    // this.getView().byId('btnCart').bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n    //  \"(PurchaseRequisition='\" + this.getPurchaseRequisition() + \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n   }\r\n\r\n   if (viewName.search(\"Freetext\") > 0) {\r\n    var purData = data;\r\n    if (purData.NumberOfItems > 1) {\r\n     var oText = purData.NumberOfItems + \" \" + this.getResourceBundle().getText(\"items\") + \" \" + this.getResourceBundle().getText(\r\n      \"itemcount\");\r\n    } else {\r\n     var oText = purData.NumberOfItems + \" \" + this.getResourceBundle().getText(\"item\") + \" \" + this.getResourceBundle().getText(\r\n      \"itemcount\");\r\n    }\r\n    var itemsInCart = this.getView().byId(\"numberofitems\");\r\n    itemsInCart.setText(oText);\r\n   }\r\n\r\n   if (Number(this.getView().byId('btnCart').getText()) > 0) {\r\n    this.getView().byId('btnCart').setType(\"Emphasized\");\r\n   } else {\r\n    this.getView().byId('btnCart').setType(\"Default\");\r\n   }\r\n   var prData = data.results ? data.results[0] : data;\r\n   this.setUserID(prData.PurReqnSSPAuthor);\r\n  },\r\n\r\n  /**\r\n   * trigger a delete request which will display the message and call\r\n   * the other function to update the mini cart\r\n   */\r\n  deleteSuccess: function() {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"delete\"));\r\n   this.deleteItemId = null;\r\n   this.refreshMinicart();\r\n  },\r\n\r\n  validateQuantity: function() {\r\n   var quantity;\r\n   var items = this.getView().byId(\"productsTable\").getItems().length;\r\n   for (var i = 0; i < items; i++) {\r\n    quantity = this.getView().byId(\"productsTable\").getItems()[i].getCells()[3].getItems()[0].getValue();\r\n    quantity = quantity.split('.').join('');\r\n    quantity = quantity.split(',').join('');\r\n    quantity = Number(quantity);\r\n    if (quantity <= 0 || isNaN(quantity)) {\r\n     this.getView().byId(\"productsTable\").getItems()[i].getCells()[3].getItems()[0].setValueState(sap.ui.core.ValueState.Error);\r\n     // this.getView().byId(\"productsTable\").getItems()[i].getCells()[3].getItems()[0].setValueStateText(this.getResourceBundle().getText(\"quantityError\"));\r\n     return false;\r\n    }\r\n   }\r\n   return true;\r\n  },\r\n\r\n  /**\r\n   * trigger a order request when we click on Order button in Mini cart List\r\n   */\r\n  handleOrderCartPress: function() {\r\n   var bflag = true;\r\n   if (this.getView().getId().search(\"CartOverview\") > 0) {\r\n    bflag = this.validateQuantity();\r\n   }\r\n   if (bflag) {\r\n    var that = this;\r\n    this.getView().setBusy(true);\r\n    if (this.getTestMode()) {\r\n     var a, b;\r\n     this.orderCartSuccessCallback(a, b);\r\n    }\r\n    var purchaseRequisition = this.getPurchaseRequisition() ? this.getPurchaseRequisition() : this.entityConstants.DUMMY_PR_KEY;\r\n    this.prNumber = purchaseRequisition;\r\n    var mParameters = this.getServiceCallParameter(this.orderCartSuccessCallback, this.serviceFail);\r\n    setTimeout(function() {\r\n     that.dataManager.activateDocument(mParameters, that.getHeaderDraftKey(), that.getPurchaseRequisition());\r\n    }, 3000);\r\n   }\r\n\r\n  },\r\n\r\n  /**\r\n   * trigger a successcall back request when the service in handleOrderCartPress will executed successfully\r\n   */\r\n  orderCartSuccessCallback: function(data, headers) {\r\n   var that = this;\r\n   var text;\r\n   var viewName = this.getView().getId().toString();\r\n   this.getView().setBusy(false);\r\n   if (!this.getTestMode()) {\r\n    if (headers.headers['sap-message']) {\r\n     var s = JSON.parse(headers.headers['sap-message']);\r\n     if (((s['code'])) && ((s['code'] == '06/402') || (s['code'] == '06/403'))) {\r\n      text = JSON.parse(headers.headers['sap-message']).message;\r\n     } else if (JSON.parse(headers.headers['sap-message']).details[0].code === '06/402') {\r\n      text = JSON.parse(headers.headers['sap-message']).details[0].message;\r\n     } else if (JSON.parse(headers.headers['sap-message']).details[0].code === '06/403') {\r\n      text = JSON.parse(headers.headers['sap-message']).details[0].message;\r\n     } else {\r\n      text = that.getResourceBundle().getText(\"MSG_SuccessOrder\");\r\n     }\r\n    }\r\n   } else {\r\n    text = \"Purchase Requisition 10133876 Created\";\r\n   }\r\n\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n   MessageBox.show(text, {\r\n    icon: MessageBox.Icon.INFORMATION,\r\n    title: that.getResourceBundle().getText(\"orderCart\"),\r\n    actions: [that.getResourceBundle().getText(\"ok\")],\r\n    onClose: function(oAction) {\r\n     if (oAction === that.getResourceBundle().getText(\"ok\")) {\r\n      that.refreshView();\r\n      that.setOrderDelete(true);\r\n      if (viewName.search(\"Search\") > 0) {\r\n       that._handleRouteMatched();\r\n      } else {\r\n       //do nothing\r\n      }\r\n      if (that.getPurchaseRequisition() === '') {\r\n       that.getRouter().navTo(\"Search\");\r\n      } else {\r\n       that.getRouter().navTo(\"PurReqList\");\r\n      }\r\n\r\n     } else {\r\n      //do nothing. \r\n     }\r\n    },\r\n    initialFocus: that.getResourceBundle().getText(\"ok\")\r\n   });\r\n  },\r\n\r\n  refreshView: function() {\r\n   //this.getView().getModel().remove(this.getView().getBindingContext().getPath());\r\n   if (this._oPopover) {\r\n    this._oPopover.destroy();\r\n    this._oPopover.destroyContent();\r\n    this._oPopover = null;\r\n   }\r\n   if (this._oMiniCart) {\r\n    this._oMiniCart.destroy();\r\n    this._oMiniCart.destroyContent();\r\n    this._oMiniCart = null;\r\n   }\r\n  },\r\n\r\n  updateMiniCartTotal: function() {\r\n   this.dataManager.updateMiniCartTotal(sap.ui.getCore().byId(\"minicartTotal\"), [this.getPurchaseRequisition(), \"guid'\" + this.getHeaderDraftKey() +\r\n    \"'\", false\r\n   ]);\r\n   // sap.ui.getCore().byId(\"minicartTotal\").bindElement(\"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n   //  \"(PurchaseRequisition='\" +\r\n   //  this.getPurchaseRequisition() +\r\n   //  \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')\");\r\n  },\r\n  prepareMiniCart: function() {\r\n   this._oMiniCart = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.PopoverCart\", this);\r\n   //commenting as part of change for IntIncident 1770460409 & 1770572448\r\n   //this._oItemTemplate = this._oMiniCart.getContent()[0].getAggregation('items')[0].getItems()[0];\r\n   this.getView().addDependent(this._oMiniCart);\r\n   this._oMiniCart.setContentHeight(\"auto\");\r\n   //change as part of IntIncident 1770460409 & 1770572448\r\n   //this._oItemTemplate = this._oMiniCart.getContent()[0].getAggregation('items')[0].getItems()[0];\r\n   this._oItemTemplate = this._oMiniCart.getContent()[0].getAggregation('items')[0].getItems()[0].clone();\r\n   this.getView().addDependent(this._oMiniCart);\r\n   //change as part of IntIncident 1770460409 & 1770572448\r\n   //this._oMiniCart.getContent()[0].getAggregation('items')[0].removeAllItems();\r\n   this._oMiniCart.getContent()[0].getAggregation('items')[0].destroyItems();\r\n   if (this.getTestMode()) {\r\n    this.setPurchaseRequisition(\"PurchaseRequisition 8\");\r\n   }\r\n\r\n   this.dataManager.prepareMiniCart(this._oMiniCart.getContent()[0].getAggregation('items')[0], this._oItemTemplate, [this.getPurchaseRequisition(),\r\n    \"guid'\" + this.getHeaderDraftKey() + \"'\", false\r\n   ]);\r\n   // this._oMiniCart.getContent()[0].getAggregation('items')[0].bindItems({\r\n   //  path: \"/\" + this.entityConstants.getEntityName('headerEntity') +\r\n   //   \"(PurchaseRequisition='\" + this.getPurchaseRequisition() + \"',PurReqnDraftUUID=guid'\" + this.getHeaderDraftKey() + \"')/\" + this\r\n   //   .entityConstants\r\n   //   .getEntityNavigationName('item'),\r\n   //  template: this._oItemTemplate\r\n   // });\r\n\r\n  },\r\n  openMiniCart: function(oEvent) {\r\n   var oEventSrc = oEvent.getSource();\r\n   this._oMiniCart.openBy(oEventSrc);\r\n  },\r\n\r\n  //Opening minicart when dataloss popup is displayed\r\n  openMiniCart_V2: function(eventSource) {\r\n   this._oMiniCart.openBy(eventSource);\r\n  },\r\n\r\n  getMiniCartData: function() {\r\n   // var mListParameters = this.getServiceCallParameter(this.genInfoCart1, this.errorServiceFail1);\r\n   // this.dataManager.getItems(mListParameters, this.getHeaderDraftKey(), this.getPurchaseRequisition());\r\n   sap.ui.getCore().byId(\"minicartList\").getBinding(\"items\").refresh();\r\n   var viewName = this.getView().getId().toString();\r\n   if (viewName.search(\"Freetext\") > 0) {\r\n    this.oModel.resetChanges();\r\n    this.getView().byId(\"idMaterial\").setValue(this.dummy.Material);\r\n    this.getView().byId(\"idMaterialDescription\").setValue(this.dummy.PurchaseRequisitionItemText);\r\n    this.getView().byId(\"idMaterialDescription\").setEditable(true);\r\n    this.getView().byId(\"idMaterialGroup\").setValue(this.dummy.MaterialGroup);\r\n    this.getView().byId(\"idMaterialGroup\").setEditable(true);\r\n    this.getView().byId(\"idMaterialGroupText\").setValue(this.dummy.MaterialGroup_Text);\r\n    // this.getDummyItem();\r\n   }\r\n  },\r\n  genInfoCart1: function() {\r\n\r\n  },\r\n  errorServiceFail1: function() {\r\n\r\n  },\r\n\r\n  onPressCart: function(oEvent) {\r\n   if (this.getView().byId(\"btnCart\").getText() > 0) {\r\n    if (!this._oMiniCart) {\r\n     this.prepareMiniCart();\r\n    }\r\n    this.eventSource = oEvent.getSource();\r\n    var that = this;\r\n    var navFlag = true;\r\n    if (this.getSourcePage() === \"FreeText\") {\r\n     navFlag = this.checkPendingChanges();\r\n    } else {\r\n     navFlag = false;\r\n    }\r\n    if (navFlag) {\r\n     var bCompact = !!this.getView().$().closest(\".sapUiSizeCompact\").length;\r\n     sap.m.MessageBox.show(\r\n      this.getResourceBundle().getText(\"MESSAGE_DATA_LOST_POPUP_1\"), {\r\n       icon: sap.m.MessageBox.Icon.WARNING,\r\n       title: this.getResourceBundle().getText(\"MESSAGE_SEVERITY_WARNING\"),\r\n       actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],\r\n       onClose: function(oAction) {\r\n        if (oAction === sap.m.MessageBox.Action.OK) {\r\n         that.oModel.resetChanges();\r\n         that.getMiniCartData();\r\n         that.updateMiniCartTotal();\r\n         //Passing the EventSource \r\n         that.openMiniCart_V2(that.eventSource);\r\n         that.makeJSONModel(that.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n        }\r\n       },\r\n       styleClass: bCompact ? \"sapUiSizeCompact\" : \"\"\r\n      });\r\n\r\n    } else {\r\n     this.getMiniCartData();\r\n     this.updateMiniCartTotal();\r\n     this.openMiniCart(oEvent);\r\n\r\n    }\r\n   } else {\r\n    sap.m.MessageToast.show(this.getResourceBundle().getText(\"noItemsText\"));\r\n   }\r\n   if (this.getTestMode()) {\r\n    this.getView().byId(\"btnCart\").setText(\"1\");\r\n   }\r\n  },\r\n\r\n  onPressCart1: function(oEvent) {\r\n   sap.m.MessageToast.show(this.getResourceBundle().getText(\"noItemsText\"));\r\n\r\n  },\r\n  beforeDialogOpen: function() {\r\n   sap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n   this.supplierValid = false;\r\n  },\r\n  onSupplierChange: function(oEvent) {\r\n   if (this.getExtScenarioFlag()) {\r\n    ExternalPurchasing.addSupplier(this, oEvent);\r\n   } else {\r\n    this.supplierValid = false;\r\n    var supplier = sap.ui.getCore().byId(\"supplier\").getValue();\r\n    var supplierId = sap.ui.getCore().byId(\"supplier\");\r\n    this.supplierNameoData = supplierId.getBindingContext().getModel().oData;\r\n    this.supplierEntity = supplier; //Temporarily holding value of supplier. \r\n\r\n    if (!(supplier === '' || supplier === \" \" || supplier.toString().trim().length === 0)) {\r\n     sap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(false);\r\n     this.dataManager.getSupplierName(this.getServiceCallParameter(this.intrimSupplierCheckSuccess, this.supplierCheckFailure),\r\n      supplier);\r\n    } else {\r\n     this.supplierValid = false;\r\n    }\r\n   }\r\n  },\r\n  //Function to overcome the TypeCase Problem of Supplier.\r\n  findCorrectSupplier: function(supplier, data) {\r\n   for (var temp in data.results) {\r\n    if (data.results[temp].Supplier === supplier) {\r\n     return supplier;\r\n    }\r\n    if (data.results[temp].Supplier.toUpperCase() === supplier) {\r\n     return supplier.toLowerCase();\r\n    }\r\n   }\r\n  },\r\n  //intrim check for SupplierName\r\n  intrimSupplierCheckSuccess: function(data) {\r\n   var supplierIDCheck = this.findCorrectSupplier(this.supplierEntity, data);\r\n   if (data && supplierIDCheck) {\r\n    this.supplierCheckSuccess(data);\r\n   } else {\r\n    this.dataManager.checkSupplierName(this.getServiceCallParameter(this.supplierCheckSuccess, this.supplierCheckFailure), this.supplierEntity);\r\n   }\r\n  },\r\n  supplierCheckSuccess: function(data) {\r\n   var supplierIDCheck = this.findCorrectSupplier(this.supplierEntity, data);\r\n   this.supplierEntity = \"C_MM_SupplierValueHelp('\" + supplierIDCheck + \"')\";\r\n   // Enabling the button after the validation.\r\n   sap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n   if (data.results.length > 0) {\r\n    if (this.supplierNameoData[data.results[0].__metadata.uri.split('SRV/')[1]]) {\r\n     this.supplierValid = true;\r\n     // this.supplierName = this.supplierNameoData[this.supplierEntity].SupplierName;\r\n     for (var obj in this.supplierNameoData) {\r\n      if (this.supplierNameoData[obj].Supplier == supplierIDCheck) {\r\n       this.supplierName = this.supplierNameoData[obj].SupplierName;\r\n       break;\r\n      }\r\n     }\r\n     this.onAddSupplier();\r\n    } else {\r\n     this.supplierValid = false;\r\n     sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n     sap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n    }\r\n   } else {\r\n    this.supplierValid = false;\r\n    sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n    sap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n   }\r\n  },\r\n\r\n  supplierCheckFailure: function(data) {\r\n   // Enabling the button after the validation.\r\n   sap.ui.getCore().byId(\"btnaddSupplier\").setEnabled(true);\r\n   sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n   sap.ui.getCore().byId(\"supplier\").setValueStateText(this.getResourceBundle().getText(\"invalidSupplier\"));\r\n  },\r\n\r\n  popOverSuccessHandler: function() {\r\n   this._oMiniCart.openBy(this.oEventSrc);\r\n   this._oMiniCart.setContentHeight(\"auto\");\r\n   this.enableDisableBtnInCart();\r\n  },\r\n\r\n  onAddSupplier: function(oEvent) {\r\n   if (this.getTestMode()) {\r\n    this.supplierValid = true;\r\n   }\r\n   if (this.supplierValid) {\r\n    this.getView().byId(\"sourceOfSupply\").removeContent();\r\n    this.sText = sap.ui.getCore().byId(\"supplier\").getValue();\r\n    if (this.getTestMode()) {\r\n     this.sText = \"SUPPLIER 1\";\r\n    }\r\n    var preferred = sap.ui.getCore().byId(\"preferred\").getSelected();\r\n    var fixed = sap.ui.getCore().byId(\"fixed\").getSelected();\r\n\r\n    if (preferred === true) {\r\n     this.text = sap.ui.getCore().byId(\"preferred\").getText();\r\n     this.Supplier = this.sText;\r\n     this.Fixedsupplier = \"\";\r\n\r\n    } else {\r\n     this.text = sap.ui.getCore().byId(\"fixed\").getText();\r\n     this.Fixedsupplier = this.sText;\r\n     this.Supplier = \"\";\r\n\r\n    }\r\n\r\n    if (!this.productList) {\r\n     this.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", this);\r\n     this.getView().addDependent(this.productList);\r\n    }\r\n    // oEvent.getSource().getParent().getParent().getParent().byId(\"sourceOfSupply\").removeAllContent();\r\n    this.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n    this.getView().byId(\"addSupplier1\").setVisible(false);\r\n    this.getView().byId(\"sourceOfSupply\").addContent(this.productList);\r\n\r\n    var supplier = sap.ui.getCore().byId(\"supplier\").getValue();\r\n    var supplierId = sap.ui.getCore().byId(\"supplier\");\r\n    if (!this.getTestMode())\r\n     var supplierNameoData = supplierId.getBindingContext().getModel().oData;\r\n\r\n    var supplierEntity = \"C_MM_SupplierValueHelp('\" + supplier + \"')\";\r\n\r\n    try {\r\n     if (this.getTestMode()) {\r\n      this.supplierName = \"Test Supplier\";\r\n     } \r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n      this.supplierName);\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this\r\n       .sText);\r\n      this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this\r\n       .text);\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\"assigned\"));\r\n     this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n     oEvent.getSource().getParent().close();\r\n        this.Fixedsupplier1 = this.Fixedsupplier;\r\n     this.Supplier1 = this.Supplier;\r\n\r\n    } catch (e) {\r\n     this.dataManager.getSupplierDescription(this.getServiceCallParameter(this.supplierDescSuccess, this.supplierDescFailure),\r\n      supplier,\r\n      oEvent);\r\n    }\r\n    // this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n    //  this.supplierName);\r\n\r\n    // this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n    // this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n    // this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n    // this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n    // oEvent.getSource().getParent().close();\r\n    // this.Fixedsupplier1 = this.Fixedsupplier;\r\n    // this.Supplier1 = this.Supplier;\r\n    this.bFlag = false;\r\n   }\r\n\r\n  },\r\n  supplierDescSuccess: function(data) {\r\n   var suppdata = data.results ? data.results[0] : data;\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n    suppdata.SupplierName);\r\n\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\"assigned\"));\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n   // oEvent.getSource().getParent().getParent().close();\r\n   this._oContent.close();\r\n   this.Fixedsupplier1 = this.Fixedsupplier;\r\n   this.Supplier1 = this.Supplier;\r\n  },\r\n  supplierDescFailure: function(data) {\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(this.supplierName);\r\n\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(this.sText);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(this.text);\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(this.getResourceBundle().getText(\"assigned\"));\r\n   this.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n   this._oContent.close();\r\n   this.Fixedsupplier1 = this.Fixedsupplier;\r\n   this.Supplier1 = this.Supplier;\r\n   var oMessageManager = sap.ui.getCore().getMessageManager();\r\n   oMessageManager.removeAllMessages();\r\n  },\r\n  serviceFail: function(oError) {\r\n   this.getView().setBusy(false);\r\n\r\n  },\r\n\r\n  createFragment: function(fragmentPath, ContentId) {\r\n   this.catalog = this.getView().byId(ContentId);\r\n   this.catalog.removeAllContent();\r\n   var oFragment = sap.ui.xmlfragment(fragmentPath, this);\r\n   this.getView().addDependent(oFragment);\r\n   this.catalog.addContent(oFragment);\r\n  },\r\n  destroyContent: function(ContentId) {\r\n   var ContainerId = this.getView().byId(ContentId).getContent();\r\n   if (ContainerId.length) {\r\n    this.getView().byId(ContentId).destroyContent();\r\n   }\r\n  },\r\n\r\n  bindCatalog: function(Idtobind) {\r\n   var catalogModel = this.getAppModel();\r\n   this.getView().byId(Idtobind).setModel(catalogModel);\r\n  },\r\n\r\n  getMode: function() {\r\n\r\n   return \"read\";\r\n  },\r\n\r\n  _MessagePopoverInitialise: function() {\r\n   oMessagePopover = new sap.m.MessagePopover({\r\n    items: {\r\n     path: \"message>/\",\r\n     template: new sap.m.MessagePopoverItem({\r\n      description: \"{message>description}\",\r\n      type: \"{message>type}\",\r\n      title: \"{message>message}\"\r\n     })\r\n    }\r\n   });\r\n\r\n  },\r\n  showMessageLogPopover: function(oEvent) {\r\n   /*Message Popover */\r\n   this._MessagePopoverInitialise();\r\n   var viewModel = new JSONModel();\r\n   viewModel.setData({\r\n    messagesLength: sap.ui.getCore().getMessageManager().getMessageModel().oData.length\r\n   });\r\n   sap.ui.getCore().byId(oEvent.getSource().getId()).setModel(viewModel);\r\n\r\n   oMessagePopover.setModel(sap.ui.getCore().getMessageManager().getMessageModel(), \"message\");\r\n   if (!this.oMessagePopover) {\r\n    oMessagePopover.openBy(oEvent.getSource());\r\n   }\r\n  },\r\n  statusFromCO_Cntrls: function() {\r\n   if (!this._historyDialog) {\r\n    this._historyDialog = sap.ui.xmlfragment(\r\n     \"ui.s2p.mm.requisition.maintain.s1.fragment.BusinessProcess\",\r\n     this\r\n    );\r\n\r\n    var oButton = new Button({\r\n     text: 'Close',\r\n     press: function() {\r\n      this.getParent().close();\r\n      this.getParent().getParent().setBusy(false);\r\n     }\r\n    });\r\n    this._historyDialog.setAggregation('endButton', oButton);\r\n\r\n   } // end of if condition\r\n\r\n  },\r\n\r\n  statusFromCO_DBind: function(PRNum, PRItemNum) {\r\n   var oUIModel = this.prepareJSONModelforStatus(PRNum, PRItemNum);\r\n   this._historyDialog.setModel(oUIModel, \"UIModel\");\r\n   this.getView().addDependent(this._historyDialog);\r\n   oUIModel.refresh();\r\n   this.getView().setBusy(false);\r\n   this._historyDialog.open();\r\n\r\n  },\r\n\r\n  statusFromMYPR_Cntrls: function() {\r\n   // controls are handled using Navigation Container with pages p1 and P2, see how na\r\n   //-vigation works in Dbind method.\r\n  },\r\n\r\n  statusFromMYPR_DBind: function(PRNum, PRItemNum, navCon) {\r\n\r\n   var oUIModel = this.prepareJSONModelforStatus(PRNum, PRItemNum);\r\n   sap.ui.getCore().byId(\"BusProcessCompContainerMyPR\").setModel(oUIModel, \"UIModel\");\r\n   navCon.to(\"p2\");\r\n  },\r\n\r\n  statusFromID_Cntrls: function() {\r\n   // controls are embedded within view XML\r\n  },\r\n\r\n  statusFromID_DBind: function() {\r\n\r\n   var oUIModel = this.prepareJSONModelforStatus(this.getPurchaseRequisition(), this.prItem);\r\n   this.getView().byId(\"BusProcessCompContainerID\").setModel(oUIModel, \"UIModel\");\r\n\r\n  },\r\n  prepareJSONModelforStatus: function(PRNum, PRItemNum) {\r\n\r\n   if (this.getExtScenarioFlag()) {\r\n    // var data = \"C_PurReqnProcessFlow\";\r\n    var data = \"PR_HISTORYSet\";\r\n    var data2 = PRNum;\r\n    var data3 = PRItemNum;\r\n    var data4 = \"MM_PUR_REQ_HISTORY\";\r\n\r\n    var data1 = {\r\n     serviceField: data4,\r\n     key: data,\r\n     key2: data2,\r\n     Item: data3,\r\n     KeyName: \"PurchaseRequisition\",\r\n     ItemKeyName: \"PurchaseRequisitionItem\"\r\n    };\r\n   } else {\r\n    var data = \"C_PurReqnProcessFlow\";\r\n    var data2 = PRNum;\r\n    var data3 = PRItemNum;\r\n    // var data4 = \"MM_PUR_REQ_HISTORY\";\r\n\r\n    var data1 = {\r\n     //  serviceField: data4,\r\n     key: data,\r\n     key2: data2,\r\n     Item: data3,\r\n     KeyName: \"PurchaseRequisition\",\r\n     ItemKeyName: \"PurchaseRequisitionItem\"\r\n    };\r\n   }\r\n\r\n   var oUIModel = new JSONModel(data1);\r\n   return oUIModel;\r\n\r\n  },\r\n\r\n  statusData: function(PRNum, PRItemNum, navCon) {\r\n   // this._historyDialog = sap.ui.xmlfragment(\r\n   //  \"ui.s2p.mm.requisition.maintain.s1.fragment.BusinessProcess\",\r\n   //  this\r\n   // );\r\n\r\n   // var oButton = new Button({\r\n   //  text: 'Close',\r\n   //  press: function() {\r\n   //   this.getParent().close();\r\n   //   this.getParent().getParent().getView().setBusy(false);\r\n   //  }\r\n   // });\r\n   // this._historyDialog.setAggregation('endButton', oButton);\r\n\r\n   // var data = \"C_PurReqnProcessFlow\";\r\n   // var data2 = PRNum;\r\n   // var data3 = PRItemNum;\r\n\r\n   // var data1 = {\r\n   //  key: data,\r\n   //  key2: data2,\r\n   //  Item: data3,\r\n   //  KeyName: \"PurchaseRequisition\",\r\n   //  ItemKeyName: \"PurchaseRequisitionItem\"\r\n   // };\r\n\r\n   // var oUIModel = new JSONModel(data1);\r\n   // sap.ui.getCore().byId(\"BusProcessCompContainerD\").setModel(oUIModel, \"UIModel\");\r\n   // this.getView().addDependent(this._historyDialog);\r\n   // this.getView().setBusy(false);\r\n   // this._historyDialog.open();\r\n\r\n  },\r\n\r\n  statusSuccessHandler: function(data) {\r\n\r\n  },\r\n\r\n  getStatusModel: function() {\r\n   return this.statusModel;\r\n  },\r\n  prepareStatusData: function(statusData) {\r\n   var status = {};\r\n   var node = [];\r\n   var lane = [];\r\n   var docs = statusData.results;\r\n   for (var i = 0; i < docs.length; i++) {\r\n    var docNodes = {};\r\n    var docLanes = {};\r\n    docNodes.id = i + 1;\r\n    docNodes.lane = i;\r\n    docNodes.title = docs[i].Documentnumber; //this.getTitle(docs[i].Documenttype);\r\n    docNodes.state = sap.suite.ui.commons.ProcessFlowNodeState.Positive;\r\n    docNodes.stateText = this.getResourceBundle().getText(\"created\");\r\n    docNodes.children = this.getChildren(i + 1, docs.length);\r\n    docs[i].Documentcreationdate = new Date(docs[i].Documentcreationdate);\r\n    docNodes.texts = [(docs[i].Documentcreationdate).toDateString()];\r\n\r\n    node.push(docNodes);\r\n\r\n    docLanes.id = i;\r\n    docLanes.icon = this.getIcon(docs[i].Documenttype);\r\n    docLanes.label = this.getLabel(docs[i].Documenttype);\r\n    docLanes.position = i;\r\n    lane.push(docLanes);\r\n\r\n   }\r\n   if (lane[i - 1].label === \"Invoice\" || lane[i - 1].label === \"Goods Issue\") {\r\n    delete node[i - 1].children;\r\n   } else {\r\n    var nextNode = {};\r\n    nextNode.id = i + 1;\r\n    nextNode.lane = i;\r\n    nextNode.state = sap.suite.ui.commons.ProcessFlowNodeState.Neutral;\r\n    nextNode.stateText = this.getResourceBundle().getText(\"inProcess\");\r\n\r\n    var nextLane = {};\r\n    nextLane.id = i;\r\n    nextLane.icon = this.getIcon(parseInt(docs[i - 1].Documenttype) + 1);\r\n    nextLane.label = this.getLabel(parseInt(docs[i - 1].Documenttype) + 1);\r\n    nextLane.position = i;\r\n\r\n    node.push(nextNode);\r\n    lane.push(nextLane);\r\n   }\r\n\r\n   status.nodes = node;\r\n   status.lanes = lane;\r\n\r\n   var statusModel = new sap.ui.model.json.JSONModel();\r\n   statusModel.setData(status);\r\n   return statusModel;\r\n\r\n  },\r\n  getChildren: function(nodeID, length) {\r\n   if (nodeID <= length) {\r\n    nodeID++;\r\n    return [nodeID.toString()];\r\n   } else {\r\n    return [];\r\n   }\r\n\r\n  },\r\n  getIcon: function(docType) {\r\n   switch (docType) {\r\n    case \"0\":\r\n     return \"sap-icon://sales-document\";\r\n\r\n    case \"1\":\r\n     return \"sap-icon://receipt\";\r\n    case \"2\":\r\n     return \"sap-icon://sales-order\";\r\n    case \"*\":\r\n     return \"sap-icon://sales-order-item\";\r\n    case \"+\":\r\n     return \"sap-icon://order-status\";\r\n    case \"-\":\r\n     return \"sap-icon://sales-quote\";\r\n    default:\r\n     return \"sap-icon://documents\";\r\n   }\r\n  },\r\n  getLabel: function(docType) {\r\n   switch (docType) {\r\n    case \"0\":\r\n     return this.getResourceBundle().getText(\"appTitle\");\r\n     // return this.getResourceBundle().getText(\"PurchaseOrder\");\r\n    case \"1\":\r\n     return this.getResourceBundle().getText(\"GoodsReceipt\");\r\n    case \"2\":\r\n     return this.getResourceBundle().getText(\"Invoice\");\r\n    case \"*\":\r\n     return this.getResourceBundle().getText(\"PurchaseOrder\");\r\n    case \"+\":\r\n     return this.getResourceBundle().getText(\"Reservation\");\r\n    case \"-\":\r\n     return this.getResourceBundle().getText(\"GoodsIssue\");\r\n    default:\r\n     return this.getResourceBundle().getText(\"FollowOn\");\r\n   }\r\n  },\r\n  processFlowZoomIn: function() {\r\n   sap.ui.getCore().byId(\"processflow\").zoomIn();\r\n  },\r\n  processFlowZoomOut: function() {\r\n   sap.ui.getCore().byId(\"processflow\").zoomOut();\r\n  },\r\n  onNodePress: function(oEvent) {\r\n   var node = oEvent.getParameters().getNodeId();\r\n   node = Number(node);\r\n   var sourcePage = this.sourcePage;\r\n   var navAction = \"displayFactSheet\";\r\n   if (sourcePage === \"ItemDetails\") {\r\n    var doctype = oEvent.getParameters().getBindingContext(\"pf3\").getModel().getData().lanes[node - 1].label;\r\n   } else {\r\n    doctype = oEvent.getParameters().getBindingContext(\"pf1\").getModel().getData().lanes[node - 1].label;\r\n   }\r\n   // if (doctype === \"Purchase Order\" || doctype === \"Invoice\" || doctype === \"Reservation\") {\r\n\r\n   // if (doctype === \"Invoice\") {\r\n   //  doctype = \"Supplier Invoice\";\r\n   // }\r\n\r\n   // if (doctype === \"Reservation\") {\r\n   //  navAction = \"display\";\r\n   // }\r\n   switch (doctype) {\r\n    case \"Invoice\":\r\n     doctype = \"SupplierInvoice\";\r\n     break;\r\n    case \"Reservation\":\r\n     navAction = \"display\";\r\n     break;\r\n    case \"Goods Issue\":\r\n    case \"Goods Receipt\":\r\n     doctype = \"MaterialMovement\";\r\n     navAction = \"displayFactSheet\";\r\n     break;\r\n    default:\r\n     break;\r\n   }\r\n\r\n   doctype = doctype.replace(/ /g, \"\");\r\n   var docnumber = oEvent.getParameters().getTitle();\r\n   var docYear = new Date(oEvent.getParameters().getTexts()[0]);\r\n   docYear = (new Date(oEvent.getParameters().getTexts()[0])).getFullYear();\r\n\r\n   var oCrossAppNavigator = sap.ushell && sap.ushell.Container && sap.ushell.Container.getService(\"CrossApplicationNavigation\");\r\n   var navObject = {};\r\n   navObject.target = {\r\n    semanticObject: doctype,\r\n    action: navAction\r\n   };\r\n   navObject.params = new Object();\r\n   if (doctype === \"MaterialMovement\") {\r\n    navObject.params[\"MaterialDocument\"] = [docnumber];\r\n    navObject.params[\"MaterialDocumentYear\"] = [docYear];\r\n   } else if (doctype === \"SupplierInvoice\") {\r\n    navObject.params[doctype] = [docnumber];\r\n    navObject.params[\"FiscalYear\"] = [docYear];\r\n   } else {\r\n    navObject.params[doctype] = [docnumber];\r\n   }\r\n   if (!isNaN(docYear)) {\r\n    oCrossAppNavigator.toExternal(navObject);\r\n   }\r\n   // }\r\n  },\r\n  getDraftKey: function(obj, header) {\r\n   if (obj && header) {\r\n    var keys = this.entityConstants.getKeys(\"headerEntity\");\r\n    for (var i = 0; i < keys.length; i++) {\r\n     if (this.getView().getId().search(\"PurReqList\") >= 0) {\r\n      if (obj[keys[i]].length > 10) {\r\n       return obj[keys[i]];\r\n      }\r\n     } else {\r\n\r\n      if (obj[keys[i]]) {\r\n       return obj[keys[i]];\r\n      }\r\n     }\r\n    }\r\n   } else {\r\n    return;\r\n   }\r\n  },\r\n  setLifeCycleStatus: function(obj) {\r\n   var oModel = this.getAppModel();\r\n   var prNumber = obj.getProperty(\"PurchaseRequisition\");\r\n   oModel.read(\"/C_Sspprmaint_Hdr\", {\r\n    urlParameters: {\r\n     \"$filter\": \"IsActiveEntity eq true and PurchaseRequisition eq '\" + prNumber + \"'\",\r\n     \"$expand\": \"to_Purchaserequisitionitem_Wd\"\r\n    },\r\n    success: jQuery.proxy(this.itemsSuccessHandler, this),\r\n    error: jQuery.proxy(this.statusErrorHandler, this)\r\n   });\r\n\r\n   // var status = obj.getProperty(\"PurReqnLifeCycleStatusName\");\r\n   // sap.ui.getCore().LifeCyscleStatus.push(status);\r\n  },\r\n  itemsSuccessHandler: function(data) {\r\n   try {\r\n    sap.ui.getCore().LifeCycleStatus = [];\r\n    var items = data.results[0].to_Purchaserequisitionitem_Wd.results;\r\n    for (var i = 0; i < items.length; i++) {\r\n     var status = items[i].PurReqnItemLifeCycleStatus;\r\n     var itemno = items[i].PurchaseRequisitionItem;\r\n     sap.ui.getCore().LifeCycleStatus[itemno] = status;\r\n    }\r\n   } catch (e) {\r\n    //do nothing gracefully exit\r\n   }\r\n  },\r\n  getLifeCycleStatus: function(i) {\r\n   return sap.ui.getCore().LifeCycleStatus[i];\r\n  },\r\n\r\n  setItemStatus: function(data) {\r\n   sap.ui.getCore().ItemStatus = data;\r\n  },\r\n\r\n  getItemStatus: function() {\r\n   return sap.ui.getCore().ItemStatus;\r\n  },\r\n\r\n  makeJSONModel: function(data) {\r\n   if (data) {\r\n    this.backUpData = data;\r\n   }\r\n  },\r\n\r\n  checkPendingChanges: function() {\r\n   var pendingFLAG = false;\r\n   var data = this.getView().byId(\"simpleForm\").getBindingContext().getObject();\r\n   var parameters = [\"PurchaseRequisitionItemText\", \"Material\", \"MaterialGroup\", \"RequestedQuantity\", \"BaseUnit\",\r\n    \"PurchaseRequisitionPrice\", \"Currency\", \"DeliveryDate\", \"ServicePerformer\", \"PerformancePeriodStartDate\",\r\n    \"PerformancePeriodEndDate\"\r\n   ];\r\n   for (var i = 0; i < parameters.length; i++) {\r\n    if (data[parameters[i]] != this.backUpData[parameters[i]]) {\r\n     pendingFLAG = true;\r\n     break;\r\n    }\r\n   }\r\n   return pendingFLAG;\r\n  },\r\n\r\n  afterMiniCartOpen: function() {\r\n   this.makeJSONModel(this.getView().byId(\"simpleForm\").getBindingContext().getObject());\r\n  },\r\n\r\n  setExtScenarioFlag: function(isExtPurgScenario) {\r\n   this.getOwnerComponent().getComponentData().isExtPurgScenario = isExtPurgScenario;\r\n   this.isExtPurgScenario = isExtPurgScenario;\r\n  },\r\n\r\n  getExtScenarioFlag: function() {\r\n   if (this.getOwnerComponent().getComponentData().isExtPurgScenario) {\r\n    return this.getOwnerComponent().getComponentData().isExtPurgScenario;\r\n   } else {\r\n    return this.isExtPurgScenario;\r\n   }\r\n  }\r\n\r\n });\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/view/approverBusinessCard.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:app=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\" xmlns:core=\"sap.ui.core\"\r\n xmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns:l=\"sap.ui.layout\" xmlns=\"sap.m\">\r\n <Popover contentWidth=\"320px\" placement=\"Auto\" showHeader=\"true\" title=\"{i18n>APRVR}\" verticalScrolling=\"false\">\r\n  <content>\r\n   <StandardListItem icon=\"sap-icon://person-placeholder\" iconDensityAware=\"false\" iconInset=\"false\" title=\"{/Fullname}\"/>\r\n   <ObjectHeader title=\"{i18n>CNDT}\">\r\n    <attributes>\r\n     <ObjectAttribute id=\"businessMobile\" text=\"{i18n>Mobile}\"/>\r\n     <ObjectAttribute active=\"true\" id=\"businessMobilenum\" press=\"onCallBusinessCard\" text=\"{/Mobile}\"/>\r\n     <ObjectAttribute id=\"businessWork\" text=\"{i18n>Work}\"/>\r\n     <ObjectAttribute active=\"true\" id=\"businessTelephone\" press=\"onCallBusinessCard\"\r\n      text=\"{parts:[{path:'/Tel1Numbr'},{path:'/Tel1Ext'}],formatter:'.formatter.concat'}\"/>\r\n     <ObjectAttribute id=\"businessEmail\" text=\"{i18n>Email}\"/>\r\n     <ObjectAttribute active=\"true\" id=\"businessEmailAddr\" press=\"onEmailBusinessCard\" text=\"{/EMail}\"/>\r\n    </attributes>\r\n   </ObjectHeader>\r\n  </content>\r\n </Popover>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/FilterSearch.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- fragment search -->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:l=\"sap.ui.layout\" xmlns=\"sap.m\">\r\n <List headerText=\"{i18n>Filter}\" includeItemInSelection=\"true\"\r\n  items=\"{ path: '/results', sorter: { path: 'PropertyCategory', descending: false, group: true }, groupHeaderFactory: '.getGroupHeader' }\"\r\n  mode=\"MultiSelect\" selectionChange=\"onSelectionFilter\">\r\n  <StandardListItem counter=\"{path: 'TotalHits', formatter: '.formatter.convertInt' }\" iconInset=\"true\" title=\"{PropertyValue}\"/>\r\n  <layoutData><l:SplitterLayoutData size=\"400px\"/></layoutData>\r\n </List>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/ProductDetails.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.ProductDetails\" id=\"ProductDetails\" xmlns:core=\"sap.ui.core\"\r\n xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns=\"sap.m\">\r\n <semantic:FullscreenPage id=\"page\" navButtonPress=\"onBack\" showNavButton=\"true\" title=\"{i18n>productDetails}\">\r\n  <semantic:customHeaderContent>\r\n   <Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://cart\" id=\"btnCart\" press=\"onPressCart\" text=\"{NumberOfItems}\"/>\r\n  </semantic:customHeaderContent>\r\n  <semantic:content>\r\n   <ObjectHeader class=\"sapUiMediumMarginBeginEnd\" id=\"idHeader\"\r\n    number=\"{parts:[{path:'OpnCtlgItemPrice'},{path:'Decimals'}], formatter:'.formatter.priceformat', type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n    numberUnit=\"{parts:[{path:'OpnCtlgItemCurrency'},{path:'Currency'} ]}\" title=\"{ProductDescription}\">\r\n    <statuses>\r\n     <ObjectStatus state=\"Success\" text=\"{ path: 'LeadTimeAnncmntDueInDays', formatter: '.formatter.formatDeliveryDays' }\"/>\r\n    </statuses>\r\n   </ObjectHeader>\r\n   <l:Grid busyIndicatorDelay=\"0\" class=\"sapUiMediumMarginBeginEnd\" defaultSpan=\"L6 M12 S12\" id=\"productDetails\">\r\n    <l:content>\r\n     <IconTabBar class=\"sapUiNoMarginBegin sapUiNoMarginEnd\" expandable=\"false\" expanded=\"true\" id=\"iconTabbar\" select=\"handleTabSelect\"\r\n      width=\"100%\">\r\n      <items>\r\n       <IconTabFilter id=\"general\" key=\"generalkey\" expanded=\"true\" text=\"{i18n>tabTitle1}\">\r\n        <l:Grid defaultSpan=\"L6 M6 S12\" width=\"auto\">\r\n         <l:content>\r\n          <f:SimpleForm id=\"articleDetailsid\" labelSpanM=\"4\" layout=\"ResponsiveGridLayout\" maxContainerCols=\"2\" title=\"{i18n>articleDetails}\">\r\n           <f:content>\r\n            <Label text=\"{i18n>description}\"/>\r\n            <Text text=\"{OpnCtlgSrchLongText}\"/>\r\n            <Label class=\"sapUiTinyMarginTop\" text=\"{i18n>reviewRating}\"/>\r\n            <HBox class=\"sapUiNoContentPadding\">\r\n             <RatingIndicator enabled=\"false\" iconSize=\"0.7rem\" id=\"rating\" maxValue=\"5\" value=\"{ path: 'UsageRating', formatter: '.formatter.rating' }\"/>\r\n             <Text class=\"sapUiTinyMarginTop\" id=\"reviewCount\" text=\"{()}\"/>\r\n            </HBox>\r\n            <Label text=\"{i18n>productSupplier}\"/>\r\n            <Text text=\"{OpnCtlgSupplierName}\"/>\r\n            <Label text=\"{i18n>productManufacturer}\"/>\r\n            <Text text=\"{ManufacturerName}\"/>\r\n            <Label text=\"{i18n>SupplierProductNumber}\"/>\r\n            <Text text=\"{OpnCtlgMaterialIDByVendor}\"/>\r\n            <Label text=\"{i18n>productManufacturerNum}\"/>\r\n            <Text text=\"{ManufacturerMaterial}\"/>\r\n            <Label text=\"{i18n>productCategory}\"/>\r\n            <Text text=\"{MaterialGroup}\"/>\r\n            <Label text=\"{i18n>catalog} \"/>\r\n            <Text text=\"{OpnCtlgWebServiceName}\"/>\r\n           </f:content>\r\n          </f:SimpleForm>\r\n          <f:SimpleForm id=\"productImageid\" labelSpanM=\"4\" layout=\"ResponsiveGridLayout\" maxContainerCols=\"2\" title=\"{i18n>productImages}\">\r\n           <f:content>\r\n            <Carousel height=\"18rem\" id=\"carousel\" loop=\"true\" pages=\"{path: '/I_CatalogItemAttachment'}\">\r\n             <pages>\r\n              <Image alt=\"{i18n>catalogImage}\" class=\"\" densityAware=\"false\" height=\"10rem\"\r\n               src=\"{path: 'OpnCtlgMainImageURL', formatter: '.formatter.imgnotfound'}\" width=\"10rem\"/>\r\n             </pages>\r\n            </Carousel>\r\n           </f:content>\r\n          </f:SimpleForm>\r\n          <f:SimpleForm id=\"orderDetailsid\" labelSpanM=\"4\" layout=\"ResponsiveGridLayout\" title=\"{i18n>orderDetails}\">\r\n           <f:content>\r\n            <Label text=\"{i18n>unitMeasure} \"/>\r\n            <Text text=\"{parts:[{path:'UnitOfMeasure'},{path:'BaseUnit'}]}\"/>\r\n            <Label text=\"{i18n>minQuantity} \"/>\r\n            <Text text=\"{OpnCtlgMinOrderQuantity}\"/>\r\n            <Label text=\"{i18n>lotSize} \"/>\r\n            <Text text=\"{MaterialFixedLotSizeQuantity}\"/>\r\n           </f:content>\r\n          </f:SimpleForm>\r\n          <f:SimpleForm id=\"priceDetailsid\" labelSpanM=\"4\" layout=\"ResponsiveGridLayout\" maxContainerCols=\"2\" title=\"{i18n>priceDetails}\">\r\n           <f:content>\r\n            <Label text=\"{i18n>tax} \"/>\r\n            <Text text=\"{ path: 'TaxTolerancePercent', formatter: '.formatter.tax'}\"/>\r\n            <Label text=\"{i18n>priceValidFrom} \"/>\r\n            <Text text=\"{ path: 'OpnCtlgPrcValidityStartDate', formatter: '.formatter.date' }\"/>\r\n            <Label text=\"{i18n>priceValidTo} \"/>\r\n            <Text text=\"{ path: 'OpnCtlgPrcValidityEndDate', formatter: '.formatter.date' }\"/>\r\n           </f:content>\r\n          </f:SimpleForm>\r\n         </l:content>\r\n        </l:Grid>\r\n       </IconTabFilter>\r\n       <IconTabFilter class=\"sapUiResponsiveContentPadding\" id=\"sustainabilityTab\" text=\"{i18n>tabTitle2}\" key=\"tab2\">\r\n        <f:SimpleForm columnsL=\"12\" emptySpanL=\"9\" layout=\"ResponsiveGridLayout\">\r\n         <f:content>\r\n          <Label text=\"{i18n>sustainabilityIndicator} \"/>\r\n          <Text id=\"sustainability\" text=\"{OpnCtlgItemSustainCompliance}\"/>\r\n          <Label text=\"{i18n>directEmission} \"/>\r\n          <Text id=\"directEms\" text=\"{OpnCtlgDirectEmissionValue}\"/>\r\n          <Label text=\"{i18n>indirectEmission} \"/>\r\n          <Text id=\"indirectEms\" text=\"{OpnCtlgIndrctEmissionValue}\"/>\r\n          <Label text=\"{i18n>thirdPartyEmission} \"/>\r\n          <Text id=\"tempEms\" text=\"{OpnCtlgTempEmissionValue}\"/>\r\n          <Label text=\"{i18n>recycleContent} \"/>\r\n          <Text id=\"recycleContent\" text=\"{OpnCtlgRecycleValue}\"/>\r\n          <Label text=\"{i18n>waterConsumption} \"/>\r\n          <Text id=\"waterUsage\" text=\"{OpnCtlgWaterConsumptionValue}\"/>\r\n          <Label text=\"{i18n>energyConsumption} \"/>\r\n          <Text id=\"energyUsage\" text=\"{OpnCtlgEnergyConsumptionValue}\"/>\r\n          <Label text=\"{i18n>wasteGenerated} \"/>\r\n          <Text id=\"waste\" text=\"{OpnCtlgWasteGeneratedValue}\"/>\r\n         </f:content>\r\n        </f:SimpleForm>\r\n       </IconTabFilter>\r\n       <IconTabFilter id=\"technicalDetails\" text=\"{i18n>tabTitle3}\">\r\n        <content>\r\n         <Text id=\"idAttribute\" textAlign=\"Center\"/>\r\n        </content>\r\n       </IconTabFilter>\r\n       <IconTabFilter class=\"sapUiNoContentPadding\" id=\"reviewsTab\" key=\"review\" text=\"{i18n>tabTitle4}\">\r\n        <Table class=\"sapUiNoContentPadding\" growingScrollToLoad=\"true\" growingThreshold=\"10\" id=\"idReviewTable\" inset=\"false\"\r\n         items=\"{path: '/C_Reviews'}\" noDataText=\"{i18n>noReviewText}\" updateFinished=\"onUpdateFinished\">\r\n         <headerToolbar>\r\n          <Toolbar>\r\n           <ToolbarSpacer/>\r\n           <Button enabled=\"true\" icon=\"sap-icon://add\" id=\"btnAddReview\" press=\"onAddReview\" tooltip=\"{i18n>AddReview}\"/>\r\n           <Button icon=\"sap-icon://sort\" press=\"onSortReview\" tooltip=\"{i18n>sortReview}\"/>\r\n          </Toolbar>\r\n         </headerToolbar>\r\n         <columns>\r\n          <Column vAlign=\"Top\" width=\"6rem\"></Column>\r\n          <Column hAlign=\"Right\" vAlign=\"Top\" width=\"8rem\"></Column>\r\n          <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" vAlign=\"Top\"></Column>\r\n         </columns>\r\n         <ColumnListItem id=\"idreviewColumns\">\r\n          <cells>\r\n           <RatingIndicator class=\"sapUiTinyMarginTop\" enabled=\"false\" iconSize=\"1rem\" maxValue=\"5\"\r\n            value=\"{path: 'UsageRating', formatter: '.formatter.rating' }\"/>\r\n           <Label class=\"sapUiTinyMarginTopBottom\" design=\"Bold\" text=\"{path: 'UserID', formatter: '.formatter.totalText'}\" textAlign=\"Right\"\r\n            tooltip=\"{UserID}\"/>\r\n           <VBox class=\"sapUiTinyMarginTopBottom\">\r\n            <Text text=\"{path: 'ReviewedByUser'}\"/>\r\n            <HBox class=\"sapUiTinyMarginTopBottom\">\r\n             <Label level=\"H6\" text=\"{i18n>Posted}\" textAlign=\"End\"/>\r\n             <ObjectIdentifier level=\"H5\" text=\"{path: 'ChangedDateTime', formatter: '.formatter.reviewDate' }\"/>\r\n            </HBox>\r\n           </VBox>\r\n          </cells>\r\n         </ColumnListItem>\r\n        </Table>\r\n       </IconTabFilter>\r\n       <IconTabFilter class=\"sapUiNoContentPadding\" id=\"prcscltab\" key=\"prcScl\" text=\"{i18n>tabTitle5}\">\r\n        <Table class=\"sapUiMediumMargin\" id=\"idPrcSclTable\" items=\"{ path : ''}\" vAlign=\"center\" visible=\"true\" width=\"35%\">\r\n         <columns>\r\n          <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Phone\" width=\"40%\">\r\n           <Text text=\"{i18n>quantity}\"></Text>\r\n          </Column>\r\n          <Column demandPopin=\"true\" hAlign=\"Center\" minScreenWidth=\"Phone\">\r\n           <Text\r\n            text=\"{parts:[{path:'i18n>CurrencyPer'},{path:'NetPriceQuantity',type : 'sap.ui.model.odata.type.Decimal'},{path:'UnitOfMeasure'}], formatter:'.formatter.formatPer'}\"></Text>\r\n          </Column>\r\n         </columns>\r\n         <ColumnListItem id=\"prcScalColList\">\r\n          <cells>\r\n           <Text text=\"{parts : [{path:'DomainValueLow'},{path:'DomainValueHigh'}], formatter:'.formatter.pricerangelimit'}\"></Text>\r\n           <FlexBox alignItems=\"Start\" class=\"\" direction=\"\" justifyContent=\"Center\">\r\n            <HBox>\r\n             <Label design=\"Bold\" text=\"{OpnCtlgItemPrice}\"></Label>\r\n             <Text class=\"sapUiTinyMarginBegin\" text=\"{Currency}\"></Text>\r\n            </HBox>\r\n           </FlexBox>\r\n          </cells>\r\n         </ColumnListItem>\r\n        </Table>\r\n       </IconTabFilter>\r\n      </items>\r\n      <layoutData>\r\n       <l:GridData linebreakM=\"true\" linebreakS=\"true\" span=\"L12 M12 S12\"/>\r\n      </layoutData>\r\n     </IconTabBar>\r\n    </l:content>\r\n   </l:Grid>\r\n  </semantic:content>\r\n  <semantic:messagesIndicator>\r\n   <semantic:MessagesIndicator press=\"showMessageLogPopover\"/>\r\n  </semantic:messagesIndicator>\r\n  <semantic:customFooterContent>\r\n   <Button class=\"sapUiSmallMarginEnd\" id=\"idAddToCart\" press=\"addToCart\" text=\"{i18n>addToCart}\" type=\"Emphasized\" visible=\"false\"/>\r\n   <Button icon=\"sap-icon://action\" press=\"handlePopoverPress\"/>\r\n  </semantic:customFooterContent>\r\n </semantic:FullscreenPage>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/view/MassChange.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:l=\"sap.ui.layout\" xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns=\"sap.m\">\r\n <Dialog cancel=\"handleClose\" contentHeight=\"420px\" contentWidth=\"300px\" resizable=\"true\" id=\"massChangeDialog\" showHeader=\"false\">\r\n  <content>\r\n   <NavContainer id=\"Dialog_Nc_ApplyChange\">\r\n    <Page id=\"p1\" showHeader=\"true\" title=\"{i18n>selectChanges}\">\r\n     <List id=\"selectedItemsSections\" selectionChange=\"updateMassItemCount\" mode=\"MultiSelect\" includeItemInSelection=\"true\">\r\n      <infoToolbar>\r\n       <Toolbar visible=\"false\" id=\"selSectionsToolbar\">\r\n        <Label id=\"selChangesPage1\"/>\r\n       </Toolbar>\r\n      </infoToolbar>\r\n      <items>\r\n       <CustomListItem id=\"generalDataSection\">\r\n        <FlexBox alignItems=\"Start\" class=\"sapUiSmallMarginBegin sapUiSmallMarginTop\" justifyContent=\"Start\">\r\n         <items>\r\n          <VBox class=\"sapUiSmallMarginBottom\">\r\n           <Title text=\"{i18n>generalDataMassChange}\"/>\r\n           <HBox visible=\"{path: '/ProductType', formatter: '.formatter.formartOnMaterialVisibility' }\">\r\n            <Text text=\"{path: 'i18n>overviewDelDate'}\"/>\r\n            <Text fieldGroupIds=\"generalData\"\r\n             text=\"{path: '/DeliveryDate',type: 'sap.ui.model.type.Date',formatOptions:{style: 'short'},formatter : '.formatter.totalTextApplyChange'}\"/>\r\n           </HBox>\r\n           <HBox visible=\"{path: '/ProductType', formatter: '.formatter.formartOnServiceVisibility' }\">\r\n            <Text text=\"{path: 'i18n>servicePerformer'}\"/>\r\n            <Text fieldGroupIds=\"generalData\" text=\"{path: '/ServicePerformer', formatter : '.formatter.totalTextApplyChange' }\"/>\r\n           </HBox>\r\n           <HBox visible=\"{path: '/ProductType', formatter: '.formatter.formartOnServiceVisibility' }\">\r\n            <Text text=\"{path: 'i18n>validityPeriod', formatter : '.formatter.totalText'}\"/>\r\n            <Text fieldGroupIds=\"generalData\"\r\n             text=\"{parts:[{path:'/PerformancePeriodStartDate'},{path:'/PerformancePeriodEndDate'}],formatter:'.formatter.miniCartDateRangeFormartting'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text text=\"{path: 'i18n>Plant'}\"/>\r\n            <Text fieldGroupIds=\"generalData\" text=\"{path: '/Plant', formatter : '.formatter.totalTextApplyChange'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text text=\"{path: 'i18n>purchasinGroup'}\"/>\r\n            <Text fieldGroupIds=\"generalData\" text=\"{path: '/PurchasingGroup', formatter : '.formatter.totalTextApplyChange'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text text=\"{path: 'i18n>purchasingOrg'}\"/>\r\n            <Text fieldGroupIds=\"generalData\" text=\"{path: '/PurchasingOrganization', formatter : '.formatter.totalTextApplyChange'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text text=\"{path: 'i18n>companyCode'}\"/>\r\n            <Text fieldGroupIds=\"generalData\" text=\"{path: '/CompanyCode', formatter: '.formatter.companycode'}\"/>\r\n           </HBox>\r\n          </VBox>\r\n         </items>\r\n        </FlexBox>\r\n       </CustomListItem>\r\n       <CustomListItem id=\"deliveryAddressListItem\">\r\n        <FlexBox alignItems=\"Start\" class=\"sapUiSmallMarginBegin sapUiSmallMarginTop\" justifyContent=\"Start\">\r\n         <items>\r\n          <VBox id=\"Applychangedeliveryaddress\" class=\"sapUiSmallMarginBottom\">\r\n           <Title design=\"Bold\" text=\"{path: 'i18n>overviewDeliveryAddress', formatter : '.formatter.totalText'}\"/>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\" text=\"{parts : [{path:'/salutationName'},{path:'/FullName'}], formatter:'.formatter.AddressFormatter'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\"\r\n             text=\"{parts : [{path:'/AddressStreetName'},{path:'/AddressHouseNumber'}], formatter:'.formatter.AddressFormatter'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\"\r\n             text=\"{parts : [{path:'/AddressPostalCode'},{path:'/AddressCityName'},{path:'/countryName'}], formatter:'.formatter.AddressFormatter'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\" text=\"{/FaxNumber}\" visible=\"{path:'/FaxNumber', formatter: '.formatter.fieldVisiblity'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\" text=\"{/regionText}\" visible=\"{path:'/regionText', formatter: '.formatter.fieldVisiblity'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\" text=\"{/PhoneNumber1}\" visible=\"{path:'/PhoneNumber1', formatter: '.formatter.fieldVisiblity'}\"/>\r\n           </HBox>\r\n           <HBox>\r\n            <Text fieldGroupIds=\"delvAddress\" text=\"{/EmailAddress}\" visible=\"{path:'/EmailAddress', formatter: '.formatter.fieldVisiblity'}\"/>\r\n           </HBox>\r\n          </VBox>\r\n         </items>\r\n        </FlexBox>\r\n       </CustomListItem>\r\n       <CustomListItem id=\"sourceofSupply\">\r\n        <FlexBox alignItems=\"Start\" class=\"sapUiSmallMarginBegin sapUiSmallMarginTop\" justifyContent=\"Start\">\r\n         <items>\r\n          <VBox id=\"sourceofSupplyApplychange\" class=\"sapUiSmallMarginBottom\">\r\n           <Title design=\"Bold\" text=\"{path: 'i18n>sourceOfSupply', formatter : '.formatter.totalText'}\"/>\r\n           <HBox>\r\n            <Text text=\"{path: 'i18n>SupplierName'}\"/>\r\n            <Text text=\"{parts : [{path:'/Supplier'},{path:'/FixedSupplier'}], formatter:'.formatter.supplierType'}\"/>\r\n           </HBox>\r\n          </VBox>\r\n         </items>\r\n        </FlexBox>\r\n       </CustomListItem>\r\n      </items>\r\n     </List>\r\n     <footer>\r\n      <Toolbar>\r\n       <ToolbarSpacer/>\r\n       <Button enabled=\"false\" press=\"onSelectItemsApplyChange\" text=\"{i18n>selectItems}\" id=\"onSelectBtnPG1\" width=\"50%\"/>\r\n       <Button press=\"onCancelChanges\" text=\"{i18n>cancel}\" width=\"50%\"/>\r\n      </Toolbar>\r\n     </footer>\r\n    </Page>\r\n    <Page id=\"p2\" title=\"{i18n>selectedItems}\" showNavButton=\"true\" navButtonPress=\"goBacktoSectionsPage\">\r\n     <Panel class=\"sapUiNoContentPadding\" id=\"idItemStatus\"></Panel>\r\n     <subHeader>\r\n      <Toolbar>\r\n       <SearchField id=\"searchinput\" liveChange=\"onSearchMassChange\" width=\"100%\"/>\r\n      </Toolbar>\r\n     </subHeader>\r\n     <List id=\"otherItemsList\" selectionChange=\"updateMassItemCount\" mode=\"MultiSelect\" items=\"{ path: 'b>/items' }\" includeItemInSelection=\"true\">\r\n      <infoToolbar>\r\n       <Toolbar visible=\"false\" id=\"selItemsToolbar\">\r\n        <Label id=\"selChangesPage2\"/>\r\n       </Toolbar>\r\n      </infoToolbar>\r\n      <items>\r\n       <StandardListItem title=\"{b>PurchaseRequisitionItemText}\" description=\"{b>Material}\"\r\n        icon=\"{path: 'b>OpnCtlgMainImageURL', formatter: '.formatter.imgnotfound'}\" iconDensityAware=\"false\" width=\"3rem\"/>\r\n      </items>\r\n     </List>\r\n     <footer>\r\n      <Toolbar>\r\n       <ToolbarSpacer/>\r\n       <Button enabled=\"false\" press=\"onSaveChanges\" text=\"{i18n>ok}\" id=\"onSelectBtnPG2\" width=\"50%\"/>\r\n       <Button press=\"onCancelChanges\" text=\"{i18n>cancel}\" width=\"50%\"/>\r\n      </Toolbar>\r\n     </footer>\r\n    </Page>\r\n   </NavContainer>\r\n  </content>\r\n </Dialog>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/PriceRange.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n <ResponsivePopover class=\"sapUiPopupWithPadding\" contentWidth=\"400px\" placement=\"Left\" title=\"{i18n>pricescale}\">\r\n  <endButton>\r\n   <Button enabled=\"false\"/>\r\n  </endButton>\r\n  <content>\r\n   <Table class=\"\" items=\"{ path : ''}\" visible=\"true\" width=\"auto\">\r\n    <columns>\r\n     <Column demandPopin=\"true\" hAlign=\"Right\" id=\"\" minScreenWidth=\"Phone\">\r\n      <Text text=\"{i18n>quantity}\"></Text>\r\n     </Column>\r\n     <Column demandPopin=\"true\" hAlign=\"Right\" id=\"\" minScreenWidth=\"Phone\" width=\"200px\">\r\n      <Text text=\"{i18n>price}\"></Text>\r\n     </Column>\r\n    </columns>\r\n    <items>\r\n     <ColumnListItem>\r\n      <cells>\r\n       <Text text=\"{parts : [{path:'DomainValueLow'},{path:'DomainValueHigh'}], formatter:'.formatter.pricerangelimit'}\"></Text>\r\n      </cells>\r\n      <cells>\r\n       <!--<Text text=\"{parts : [{path:'OpnCtlgItemPrice'},{path:'Currency'}], formatter:'.formatter.appendCurrency'}\"></Text>-->\r\n       <FlexBox alignItems=\"Start\" class=\"\" direction=\"\" justifyContent=\"End\">\r\n        <HBox>\r\n         <Label design=\"Bold\" text=\"{OpnCtlgItemPrice}\"></Label>\r\n         <Text class=\"sapUiTinyMarginBegin\" text=\"{Currency}\"></Text>\r\n        </HBox>\r\n       </FlexBox>\r\n      </cells>\r\n     </ColumnListItem>\r\n    </items>\r\n   </Table>\r\n  </content>\r\n </ResponsivePopover>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/ItemDetails.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.ItemDetails\"\r\n xmlns:app=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\"\r\n xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:process=\"sap.suite.ui.commons\"\r\n xmlns:semantic=\"sap.m.semantic\" xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns=\"sap.m\">\r\n <semantic:FullscreenPage class=\"sapUiFioriObjectPage\" enableScrolling=\"true\" height=\"100%\" id=\"page\" navButtonPress=\"onBack\"\r\n  showNavButton=\"true\" title=\"{i18n>itemDetails}\">\r\n  <semantic:customHeaderContent>\r\n   <!--        <Button class=\"sapUiSmallMarginEnd\" enabled=\"true\" icon=\"sap-icon://cart\" id=\"btnCart\" text=\"\" tooltip=\"{i18n]CART}\" type=\"Emphasized\"/>-->\r\n  </semantic:customHeaderContent>\r\n  <semantic:content>\r\n   <l:Grid class=\"sapUiSmallMarginTop\" defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding\" id=\"iPanelGeneralData\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>generalData}\" tooltip=\"{i18n>generalData} \"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <smartForm:SmartForm app:defaultDropDownDisplayBehaviour=\"idAndDescription\" class=\"editableForm\" columnsL=\"4\" columnsM=\"2\" editable=\"true\"\r\n       emptySpanL=\"8\" emptySpanM=\"4\" id=\"smartForm1\" labelSpanL=\"3\" labelSpanM=\"3\" maxContainerCols=\"2\">\r\n       <smartForm:Group>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"materialValidation\" editable=\"{viewProperties>/editable}\" id=\"idProductId\" tooltip=\"{Material}\"\r\n          value=\"{Material}\"></smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"extmaterialValidation\" editable=\"{viewProperties>/editable}\" id=\"idExtProductId\" tooltip=\"{Material}\"\r\n          value=\"{ExtMaterialForPurg}\"></smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idMaterialDescription\" maxLength=\"40\" showValueHelp=\"false\"\r\n          tooltip=\"{PurchaseRequisitionItemText}\" value=\"{PurchaseRequisitionItemText}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"selectionChangedDet\" id=\"productTypeSelect\"\r\n          tooltip=\"{parts:[{path:'PurchasingDocumentItemCategory'},{path:'ProductType'}],formatter:'.formartPurchasingDocumentItemCategory'}\"\r\n          value=\"{parts:[{path:'PurchasingDocumentItemCategory'},{path:'ProductType'}],formatter:'.formartPurchasingDocumentItemCategory'}\"\r\n          enabled=\"{path:'PurReqnSSPCatalog',formatter:'.checkDropDownEnabled'}\">\r\n          <smartField:configuration>\r\n           <smartField:Configuration change=\"selectionChangedDet\" controlType=\"selection\" displayBehaviour=\"descriptionOnly\"\r\n            enabled=\"{path : 'PurReqnSSPCatalog ',formatter :'.checkDropDownEnabled'}\" tooltip=\"{PurReqnSSPCatalog}\"/>\r\n          </smartField:configuration>\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change = \"onMaterialGroupUpdate\" editable=\"{viewProperties>/editable}\" id=\"idName\" tooltip=\"{MaterialGroup}\" value=\"{MaterialGroup}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"priceValidation\" id=\"idPrice\" mandatory=\"true\" tooltip=\"{PurchaseRequisitionPrice}\"\r\n          value=\"{path : 'PurchaseRequisitionPrice',type : 'sap.ui.model.odata.type.Currency'}\" valueListChanged=\"sample\"></smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"netPriceValidation\" class=\"sapUiNoContentPadding\" editable=\"{viewProperties>/editable}\"\r\n          id=\"idNetPriceQuantity\" tooltip=\"{NetPriceQuantity}\" value=\"{NetPriceQuantity}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"quantityValidation\" editable=\"{viewProperties>/editable}\" id=\"idDescription\" tooltip=\"{RequestedQuantity}\"\r\n          value=\"{RequestedQuantity}\" editableChanged=\"disableSections\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement id=\"l_prcscale\" visible=\"false\">\r\n         <Link id=\"\" press=\"PricescaleClick\" text=\"{i18n>pricescale}\" textAlign=\"Right\" tooltip=\"{i18n>pricescale}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idDate\"\r\n          tooltip=\"{path:'DeliveryDate' ,formatter:'.formatter.deliveryDateFormartting'}\" value=\"{path: 'DeliveryDate'}\"\r\n          visible=\"{path :'ProductType' , formatter:'.formartVisiblityDetailsDate'}\">\r\n          <smartField:configuration>\r\n           <smartField:Configuration controlType=\"datePicker\"/>\r\n          </smartField:configuration>\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"servicePerformerChange\" editable=\"{viewProperties>/editable}\" id=\"idServicePerformerDet\"\r\n          tooltip=\"{ProductType}\" value=\"{ServicePerformer}\" visible=\"{path :'ProductType' , formatter:'.formartVisiblityDetailsPerformer'}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement label=\"{i18n>validityPeriod}\" visible=\"{path :'ProductType' , formatter:'.formartVisiblityDetailsDateRange'}\">\r\n         <DateRangeSelection dateValue=\"{path:'PerformancePeriodStartDate'}\" editable=\"{viewProperties>/editable}\" id=\"idDeliveryDateRangeDet\"\r\n          change=\"DateRangeValidation\" secondDateValue=\"{path:'PerformancePeriodEndDate'}\"\r\n          tooltip=\"{parts:[{path:'PerformancePeriodStartDate'},{path:'PerformancePeriodEndDate'}],formatter:'.formatter.miniCartDateRangeFormartting'}\"/>\r\n        </smartForm:GroupElement>\r\n       </smartForm:Group>\r\n       <smartForm:Group>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idPurchasing\" mandatory=\"false\" tooltip=\"{PurchasingGroup}\"\r\n          value=\"{PurchasingGroup}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idPurchasingOrg\" mandatory=\"false\" tooltip=\"{PurchasingOrganization}\"\r\n          value=\"{PurchasingOrganization}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idExtPurchasingOrg\" mandatory=\"false\" tooltip=\"{PurchasingOrganization}\"\r\n          value=\"{ExtPurgOrgForPurg}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idCompany\" tooltip=\"{CompanyCode}\" value=\"{CompanyCode}\"\r\n          initialise=\"changeName\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idExtCompany\" tooltip=\"{CompanyCode}\" value=\"{ExtCompanyCodeForPurg}\"\r\n          initialise=\"changeName\"></smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idLocation\" tooltip=\"{Plant}\" value=\"{Plant}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"idExtLocation\" value=\"{ExtPlantForPurg}\">\r\n          <!--<smartField:configuration>-->\r\n          <!-- <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n          <!--</smartField:configuration>-->\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"onAccCategoryUpdate\" editable=\"{viewProperties>/editable}\" id=\"accAssCategory\"\r\n          tooltip=\"{AccountAssignmentCategory}\" value=\"{AccountAssignmentCategory}\"/>\r\n        </smartForm:GroupElement>\r\n        <!--ADDED BY C4P!-->\r\n        <!--<smartForm:GroupElement label=\"{ZZPURCHREQ/#@sap:label}\">-->\r\n        <!-- <Input editable=\"{viewProperties>/editable}\" id=\"ZZPURCHREQ\" tooltip=\"{ZZPURCHREQ}\" value=\"{ZZPURCHREQ}\" fieldWidth=\"75%\"-->\r\n        <!--  showValueHelp=\"true\" valueHelpRequest=\"vhr_ZZPURCHREQ\" visible=\"{viewProperties>/visible}\"/>-->\r\n        <!--</smartForm:GroupElement>-->\r\n        <!--<smartForm:GroupElement label=\"{ZZREQTILL/#@sap:label}\">-->\r\n        <!-- <DatePicker id=\"ZZREQTILL\"-->\r\n        <!--  value=\"{path: 'ZZREQTILL', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy', strictParsing: true , UTC: true}}\" visible=\"{viewProperties>/visible}\"/>-->\r\n        <!--</smartForm:GroupElement>-->\r\n        <!--ADDED BY C4P!-->\r\n       </smartForm:Group>\r\n      </smartForm:SmartForm>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding\" id=\"idPanelDeliveryAddress\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>overviewDeliveryAddress}\" tooltip=\"{i18n>overviewDeliveryAddress}\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <smartForm:SmartForm app:defaultDropDownDisplayBehaviour=\"idAndDescription\" class=\"editableForm\" columnsL=\"2\" columnsM=\"2\" editable=\"true\"\r\n       emptySpanL=\"4\" emptySpanM=\"4\" id=\"smartForm2\" labelSpanL=\"3\" labelSpanM=\"2\" maxContainerCols=\"2\">\r\n       <smartForm:Group>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField id=\"idTitle\" tooltip=\"{FormOfAddress}\" value=\"{FormOfAddress}\">\r\n          <smartField:configuration>\r\n           <smartField:Configuration controlType=\"selection\" displayBehaviour=\"descriptionOnly\"/>\r\n          </smartField:configuration>\r\n         </smartField:SmartField>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"fullName\" tooltip=\"{FullName}\" value=\"{FullName}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"validatePhone\" editable=\"{viewProperties>/editable}\" id=\"phone\" tooltip=\"{PhoneNumber1}\"\r\n          value=\"{PhoneNumber1}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"validateFax\" editable=\"{viewProperties>/editable}\" id=\"fax\" tooltip=\"{FaxNumber}\" value=\"{FaxNumber}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField MaxLength=\"241\" change=\"validateEmail\" editable=\"{viewProperties>/editable}\" id=\"email\" tooltip=\"{EmailAddress}\"\r\n          type=\"Email\" value=\"{EmailAddress}\"/>\r\n        </smartForm:GroupElement>\r\n       </smartForm:Group>\r\n       <smartForm:Group>\r\n        <smartForm:GroupElement >\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"houseNo\" tooltip=\"{AddressStreetName}\" value=\"{AddressStreetName}\"\r\n          initialise=\"setDefaultValue\"/>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"houseNumber\" tooltip=\"{AddressHouseNumber}\" value=\"{AddressHouseNumber}\"/>\r\n         <!--<Input id=\"houseNumber\" text=\"{AddressHouseNumber}\" width=\"100%\"/>-->\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"district\" tooltip=\"{AddressCityName}\" value=\"{AddressCityName}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"poCity\" tooltip=\"{AddressPostalCode}\" value=\"{AddressPostalCode}\"/>\r\n        </smartForm:GroupElement>\r\n        <!--<smartForm:GroupElement>-->\r\n        <!-- <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"poBox\" value=\"{AddressPostalCode}\"/>-->\r\n        <!--</smartForm:GroupElement>-->\r\n        <!--<smartForm:GroupElement>-->\r\n        <!-- <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"country\" tooltip=\"{AddressCountry}\" value=\"{AddressCountry}\">-->\r\n        <!--  <smartField:configuration>-->\r\n        <!--   <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n        <!--  </smartField:configuration>-->\r\n        <!-- </smartField:SmartField>-->\r\n        <!--</smartForm:GroupElement>-->\r\n        <!--<smartForm:GroupElement>-->\r\n        <!-- <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"region\" tooltip=\"{AddressRegion}\" value=\"{AddressRegion}\">-->\r\n        <!--  <smartField:configuration>-->\r\n        <!--   <smartField:Configuration controlType=\"dropDownList\" displayBehaviour=\"descriptionAndId\"/>-->\r\n        <!--  </smartField:configuration>-->\r\n        <!-- </smartField:SmartField>-->\r\n        <!--</smartForm:GroupElement>-->\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"onChangeCountry\" editable=\"{viewProperties>/editable}\" id=\"country\" tooltip=\"{AddressCountry}\"\r\n          value=\"{AddressCountry}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"region\" tooltip=\"{AddressRegion}\" value=\"{AddressRegion}\"/>\r\n        </smartForm:GroupElement>\r\n       </smartForm:Group>\r\n      </smartForm:SmartForm>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid defaultSpan=\"L12 M12 S12\" id=\"formAccAssignment\" visible=\"false\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding sapUiSmallMarginTopBottom\" id=\"idPanelAccAssignment\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>accountingAssignment}\" tooltip=\"{i18n>accountingAssignment}\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <smartForm:SmartForm app:defaultDropDownDisplayBehaviour=\"idAndDescription\" class=\"editableForm\" columnsL=\"2\" columnsM=\"2\" editable=\"true\"\r\n       emptySpanL=\"4\" emptySpanM=\"4\" id=\"smartForm3\" labelSpanL=\"3\" labelSpanM=\"2\" maxContainerCols=\"2\">\r\n       <smartForm:Group>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField change=\"glAccountDescription\" editable=\"{viewProperties>/editable}\" id=\"glaAccount\" tooltip=\"{GLAccount}\"\r\n          value=\"{GLAccount}\"/>\r\n         <smartField:SmartField editable=\"false\" id=\"lblGLAccount\" tooltip=\"{GLAccount_Text}\" value=\"{GLAccount_Text}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"businessArea\" tooltip=\"{BusinessArea}\" value=\"{BusinessArea}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"commitmentItem\" tooltip=\"{CommitmentItem}\" value=\"{CommitmentItem}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"controllingArea\" tooltip=\"{ControllingArea}\" value=\"{ControllingArea}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"costCenter\" tooltip=\"{CostCenter}\" value=\"{CostCenter}\"/>\r\n         <smartField:SmartField editable=\"false\" id=\"costCenterDesc\" tooltip=\"{CostCenter_Text}\" value=\"{CostCenter_Text}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"fixedAsset\" tooltip=\"{FixedAsset}\" value=\"{FixedAsset}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"functionArea\" tooltip=\"{FunctionalArea}\" value=\"{FunctionalArea}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"funds\" tooltip=\"{Fund}\" value=\"{Fund}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"fundsCenter\" tooltip=\"{FundsCenter}\" value=\"{FundsCenter}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"masterFixedAsset\" tooltip=\"{MasterFixedAsset}\" value=\"{MasterFixedAsset}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"orderID\" tooltip=\"{OrderID}\" value=\"{OrderID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"profitCenter\" tooltip=\"{ProfitCenter}\" value=\"{ProfitCenter}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"projectNetwork\" tooltip=\"{ProjectNetwork}\" value=\"{ProjectNetwork}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"networkActivity\" tooltip=\"{NetworkActivity}\" value=\"{NetworkActivity}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"sdDocument\" tooltip=\"{SDDocument}\" value=\"{SDDocument}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"sdItem\" tooltip=\"{SalesDocumentItem}\" value=\"{SalesDocumentItem}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"scheduleLine\" tooltip=\"{ScheduleLine}\" value=\"{ScheduleLine}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"profitSegment\" tooltip=\"{ProfitabilitySegment}\"\r\n          value=\"{ProfitabilitySegment}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"wbsElementID\" tooltip=\"{WBSElementInternalID}\"\r\n          value=\"{WBSElementInternalID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"projectNetworkID\" tooltip=\"{ProjectNetworkInternalID}\"\r\n          value=\"{ProjectNetworkInternalID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"goodsRecipientName\" tooltip=\"{GoodsRecipientName}\"\r\n          value=\"{GoodsRecipientName}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"networkActID\" tooltip=\"{NetworkActivityInternalID}\"\r\n          value=\"{NetworkActivityInternalID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"orderIntID\" tooltip=\"{OrderInternalID}\" value=\"{OrderInternalID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"OrderIntBillOpertnItem\" tooltip=\"{OrderIntBillOfOperationsItem}\"\r\n          value=\"{OrderIntBillOfOperationsItem}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"earmarkedFundsDoc\" tooltip=\"{EarmarkedFundsDocument}\"\r\n          value=\"{EarmarkedFundsDocument}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"costCtrActivityType\" tooltip=\"{CostCtrActivityType}\"\r\n          value=\"{CostCtrActivityType}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"businessProcess\" tooltip=\"{BusinessProcess}\" value=\"{BusinessProcess}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"grantID\" tooltip=\"{GrantID}\" value=\"{GrantID}\"/>\r\n        </smartForm:GroupElement>\r\n        <smartForm:GroupElement>\r\n         <smartField:SmartField editable=\"{viewProperties>/editable}\" id=\"unloadingPointName\" tooltip=\"{UnloadingPointName}\"\r\n          value=\"{UnloadingPointName}\"/>\r\n        </smartForm:GroupElement>\r\n       </smartForm:Group>\r\n       <smartForm:Group></smartForm:Group>\r\n      </smartForm:SmartForm>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiMediumMarginBeginEnd\" defaultSpan=\"L12 M12 S12\" id=\"listAccAssignment\" visible=\"false\" width=\"auto\">\r\n    <l:content>\r\n     <core:Fragment fragmentName=\"ui.s2p.mm.requisition.maintain.s1.fragment.AccountAssignment\" type=\"XML\"/>\r\n    </l:content>\r\n   </l:Grid>\r\n   <!-- sFIN Accounting component -->\r\n   <l:Grid class=\"sapUiMediumMarginBeginEnd\" defaultSpan=\"L12 M12 S12\" id=\"sFinlistAccAssignment\" visible=\"true\" width=\"auto\">\r\n    <l:content>\r\n     <core:Fragment fragmentName=\"ui.s2p.mm.requisition.maintain.s1.fragment.sFinAccountAssignment\" type=\"XML\"/>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiMediumMarginBeginEnd\" defaultSpan=\"L12 M12 S12\" id=\"idPanelAttachments\" width=\"auto\">\r\n    <l:content>\r\n     <Panel id=\"zAttachments\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <content>\r\n         <Title level=\"H2\" text=\"{i18n>Attachments}\" tooltip=\"{i18n>Attachments}\"/>\r\n        </content>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <content>\r\n       <core:Fragment fragmentName=\"ui.s2p.mm.requisition.maintain.s1.fragment.ZAttachment\" controller=\"ZAttachment\" type=\"XML\"/>\r\n      </content>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiSmallMarginTop\" defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>sourceOfSupply}\" tooltip=\"{i18n>sourceOfSupply}\"/>\r\n        <ToolbarSpacer/>\r\n        <Button icon=\"sap-icon://add\" id=\"addSupplier\" tooltip=\"{i18n>addSourceOfSupply}\" press=\"onSupplier\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <Panel class=\"sapUiNoContentPadding\" id=\"sourceOfSupply\">\r\n       <content/>\r\n      </Panel>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiResponsiveMargin sapUiNoContentPadding\" defaultSpan=\"L12 M12 S12\" id=\"processflow2\" width=\"auto\">\r\n    <l:content>\r\n     <Panel >\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>approvalProcessOverview}\" tooltip=\"{i18n>approvalProcessOverview}\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <process:ProcessFlow id=\"processflow1\" lanes=\"{pf2>/oDataProcessFlow}\" scrollable=\"false\" zoomLevel=\"Two\">\r\n       <process:lanes>\r\n        <process:ProcessFlowLaneHeader headerPress=\"onApproverClick\" iconSrc=\"{pf2>icon}\" laneId=\"{pf2>id}\" position=\"{pf2>position}\"\r\n         text=\"{parts : [{path:'pf2>label'},{path:'pf2>Userid'}], formatter:'.formatter.approvalText'}\" tooltip=\"{pf2>label}\"/>\r\n       </process:lanes>\r\n      </process:ProcessFlow>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiResponsiveMargin\" defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n    <l:content>\r\n     <Panel id=\"idPanelNotes\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>NOTES}\" tooltip=\"{i18n>NOTES}\"/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <IconTabBar applyContentPadding=\"false\" expandable=\"false\" expanded=\"true\" id=\"idIconTabBarNoIcons\" items=\"{Notes>/itemTextTypes}\" >\r\n       <items>\r\n        <IconTabFilter key=\"{Notes>key}\" text=\"{Notes>name}\" tooltip=\"{Notes>name}\">\r\n         <content>\r\n          <TextArea value=\"{Notes>value}\" cols=\"400\" id=\"textArea\" placeholder=\"{i18n]SPACE}\" rows=\"10\" visible=\"true\"/>\r\n         </content>\r\n        </IconTabFilter>\r\n       </items>\r\n      </IconTabBar>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n   <l:Grid class=\"sapUiSmallMarginTop\" defaultSpan=\"L12 M12 S12\" width=\"auto\" visible=\"false\" id=\"idItemLevelStatus\">\r\n    <l:content>\r\n     <Panel class=\"sapUiResponsiveMargin sapUiNoContentPadding\" width=\"auto\">\r\n      <headerToolbar>\r\n       <Toolbar>\r\n        <Title level=\"H2\" text=\"{i18n>itemLevelStatus}\" tooltip=\"{i18n>itemLevelStatus}\"/>\r\n        <ToolbarSpacer/>\r\n       </Toolbar>\r\n      </headerToolbar>\r\n      <Panel class=\"sapUiNoContentPadding\" id=\"idItemStatus\">\r\n       <core:ComponentContainer id=\"BusProcessCompContainerID\" name=\"sap.s4.cfnd.lib.businessprocessflow.component.freestyle\" propagateModel=\"true\"\r\n        settings=\"\\{&quot;layoutId&quot;:&quot;\\{UIModel&gt;/key\\}&quot;, &quot;docId&quot;:&quot;\\{UIModel&gt;/key2\\}&quot;, &quot;Item&quot;:&quot;\\{UIModel&gt;/Item\\}&quot;, &quot;KeyName&quot;:&quot;\\{UIModel&gt;/KeyName\\}&quot;, &quot;ItemKeyName&quot;:&quot;\\{UIModel&gt;/ItemKeyName\\}&quot;, &quot;FiscalYear&quot;:&quot;\\{UIModel&gt;/FiscalYear\\}&quot;, &quot;CompanyCode&quot;:&quot;\\{UIModel&gt;/CompanyCode\\}&quot;, &quot;FiscalYearKey&quot;:&quot;\\{UIModel&gt;/FiscalYearKey\\}&quot;, &quot;CompanyCodeKey&quot;:&quot;\\{UIModel&gt;/CompanyCodeKey\\}&quot; \\}\"/>\r\n      </Panel>\r\n     </Panel>\r\n    </l:content>\r\n   </l:Grid>\r\n  </semantic:content>\r\n  <semantic:messagesIndicator>\r\n   <semantic:MessagesIndicator press=\"showMessageLogPopover\"/>\r\n  </semantic:messagesIndicator>\r\n  <semantic:customFooterContent>\r\n   <Button press=\"onPressSave\" text=\"{i18n>save}\" tooltip=\"{i18n>save}\" type=\"Emphasized\" id=\"idSaveButton\"/>\r\n   <Button press=\"onPressApplyChange\" text=\"{i18n>applyChanges}\" id=\"idApplychangeButton\"/>\r\n   <Button ariaDescribedBy=\"defaultButtonDescription genericButtonDescription\" class=\"sapUiSmallMarginEnd\" press=\"onPressDelete\"\r\n    text=\"{i18n>overviewDelete}\" tooltip=\"{i18n>overviewDelete}\" type=\"Default\" id=\"idDeleteButton\"/>\r\n  </semantic:customFooterContent>\r\n </semantic:FullscreenPage>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/view/Supplier.fragment.xml": "<?xml version=\"1.0\"?>\r\n<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns=\"sap.m\">\r\n <Dialog cancel=\"handleClose\" contentHeight=\"10rem\" initialVisiblePanelType=\"sort\" ok=\"handleClose\" reset=\"handleReset\" showReset=\"true\"\r\n  title=\"{i18n>supplierHeading}\" beforeOpen=\"beforeDialogOpen\" >\r\n  <content>\r\n   <f:SimpleForm id=\"simpleForm\">\r\n    <f:content>\r\n     <HBox>\r\n      <smartField:SmartLabel class=\"sapUiTinyMarginTop\" text=\"{i18n>miniSupplier}\"/>\r\n      <smartField:SmartField id=\"supplier\" showValueHelp=\"true\" value=\"{FixedSupplier}\" width=\"14rem\"/>\r\n     </HBox>\r\n    </f:content>\r\n   </f:SimpleForm>\r\n   <f:SimpleForm>\r\n    <f:content>\r\n     <VBox>\r\n      <RadioButtonGroup>\r\n       <buttons>\r\n        <RadioButton id=\"preferred\" selected=\"true\" text=\"{i18n>Preferred}\" tooltip = \"{i18n>Preferred}\"/>\r\n        <RadioButton id=\"fixed\" text=\"{i18n>Fixed}\" tooltip = \"{i18n>Fixed}\"/>\r\n       </buttons>\r\n      </RadioButtonGroup>\r\n     </VBox>\r\n    </f:content>\r\n   </f:SimpleForm>\r\n  </content>\r\n  <beginButton>\r\n   <Button  id=\"btnaddSupplier\" press=\"onSupplierChange\" text=\"{i18n>Add}\"/>\r\n  </beginButton>\r\n  <endButton ><Button press=\"onCancelSupplier\" text=\"{i18n>cancel}\"/></endButton>\r\n </Dialog>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/PopoverCart.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns=\"sap.m\">\r\n <Popover class=\"\" id=\"popover\" placement=\"Bottom\" title=\"{i18n>miniCartTitle}\" afterOpen=\"afterMiniCartOpen\">\r\n  <footer>\r\n   <Toolbar>\r\n    <ToolbarSpacer/>\r\n    <Button enabled=\"false\" press=\"handleOrderCartPress\" text=\"{i18n>orderCart}\" type=\"Emphasized\"/>\r\n    <Button enabled=\"false\" press=\"handleViewCartPress\" text=\"{i18n>viewCart}\"/>\r\n   </Toolbar>\r\n  </footer>\r\n  <VBox>\r\n   <List delete=\"deleteItem\" id=\"minicartList\" mode=\"Delete\" updateFinished=\"listUpdated\" width=\"100%\">\r\n    <CustomListItem class=\"\">\r\n     <HBox class=\"sapUiSmallMarginBeginEnd sapUiSmallMarginTop\">\r\n      <Image alt=\"{i18n>catalogImage}\" class=\"\" densityAware=\"false\" height=\"4rem\"\r\n       src=\"{path: 'OpnCtlgMainImageURL', formatter: '.formatter.imgnotfound'}\" width=\"4rem\"></Image>\r\n      <FlexBox alignItems=\"Start\" class=\"sapUiSmallMarginBegin\" justifyContent=\"Start\">\r\n       <items>\r\n        <VBox class=\"sapUiSmallMarginBottom\">\r\n         <Text maxLines=\"1\" text=\"{PurchaseRequisitionItemText}\" tooltip=\"{PurchaseRequisitionItemText}\" width=\"15rem\"/>\r\n         <HBox>\r\n          <Text text=\"{path: 'i18n>miniSupplier', formatter : '.formatter.totalText'}\"/>\r\n          <Text class=\"sapUiTinyMarginBegin\" text=\"{parts:[{path:'FixedSupplier'},{path:'Supplier'},{path:'ExtFixedSupplierForPurg'},{path:'ExtDesiredSupplierForPurg'},{path:'ExtInfoRecordForPurg'},{path:'ExtContractForPurg'}],formatter:'.formatter.Supplier' }\"/>\r\n         </HBox>\r\n         <HBox visible=\"{path: 'ProductType', formatter: '.formatter.formartOnMaterialVisibility' }\">\r\n          <Text class=\"\"\r\n           text=\"{path: 'i18n>overviewDelDate', formatter : '.formatter.totalText'} {path: 'DeliveryDate', type: 'sap.ui.model.type.Date', formatOptions: { style: 'medium', UTC: true }}\"/>\r\n         </HBox>\r\n         <HBox visible=\"{path: 'ProductType', formatter: '.formatter.formartOnServiceVisibility' }\">\r\n          <Text text=\"{path: 'i18n>validityPeriod', formatter : '.formatter.totalText'}\"/>\r\n          <Text class=\"sapUiTinyMarginBegin\"\r\n           text=\"{parts:[{path:'PerformancePeriodStartDate'},{path:'PerformancePeriodEndDate'}],formatter:'.formatter.miniCartDateRangeFormartting'}\"/>\r\n         </HBox>\r\n         <HBox>\r\n          <Text text=\"{path: 'i18n>overviewQuantity', formatter : '.formatter.totalText'}\"/>\r\n          <!--<Text class=\"sapUiTinyMarginBegin\" text=\"{parts : [{path:'RequestedQuantity'}, {path:'BaseUnit'}], formatter: '.formatter.concat'}\"/>-->\r\n          <smartField:SmartField contextEditable=\"false\" value=\"{path:'RequestedQuantity'}\"/>\r\n         </HBox>\r\n         <ObjectNumber emphasized=\"true\"\r\n          number=\"{parts:[{path:'TotalNetAmount'},{path:'Currency'} ], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n          textAlign=\"Right\" unit=\"{Currency}\"/>\r\n        </VBox>\r\n       </items>\r\n      </FlexBox>\r\n     </HBox>\r\n    </CustomListItem>\r\n   </List>\r\n   <FlexBox alignItems=\"Start\" class=\"sapUiSmallMarginTopBottom\" justifyContent=\"End\" width=\"21rem\">\r\n    <Label class=\"sapUiTinyMarginEnd\" design=\"Bold\" text=\"{path: 'i18n>totalMiniCart',formatter: '.formatter.totalText'}\"/>\r\n    <ObjectNumber emphasized=\"true\" id=\"minicartTotal\"\r\n     number=\"{parts:[{path:'TotalNetAmount'},{path:'Currency'} ], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n     unit=\"{Currency}\"/>\r\n   </FlexBox>\r\n  </VBox>\r\n </Popover>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/view/CartOverview.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.CartOverview\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\"\r\n xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:page=\"sap.m.page\" xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns:smartTable=\"sap.ui.comp.smarttable\"\r\n xmlns:table=\"sap.ui.table\" xmlns:ui=\"sap.ca.ui\" xmlns=\"sap.m\">\r\n <semantic:FullscreenPage id=\"page\" navButtonPress=\"onBack\" showNavButton=\"true\" title=\"{i18n>overviewTitle}\">\r\n  <semantic:customHeaderContent>\r\n   <Button class=\"sapUiSmallMarginEnd\" enabled=\"false\" icon=\"sap-icon://cart\" id=\"btnCart\" text=\"{NumberOfItems}\" tooltip=\"{i18n>PurReq}\"/>\r\n  </semantic:customHeaderContent>\r\n  <semantic:content>\r\n   <VBox class=\"sapUiSmallMarginBeginEnd\">\r\n    <ObjectHeader\r\n     number=\"{parts:[{path:'TotalNetAmount'},{path:'Currency'} ], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n     numberUnit=\"{Currency}\" title=\"{path:'EmployeeFullName', formatter: '.formatter.setTitle'}\" unit=\"{Currency}\">\r\n     <statuses>\r\n      <ObjectStatus state=\"Success\" text=\"{PurReqnLifeCycleStatusName}\"/>\r\n     </statuses>\r\n     <attributes>\r\n      <ObjectAttribute text=\"{PurchaseRequisition}\"/>\r\n     </attributes>\r\n    </ObjectHeader>\r\n    <f:SimpleForm class=\"editableForm sapUiRespGrid sapUiRespGridHSpace1\" columnsL=\"2\" editable=\"true\" emptySpanL=\"8\"\r\n     layout=\"ResponsiveGridLayout\" title=\"{i18n>overviewGeneral}\">\r\n     <f:content>\r\n      <Label text=\"{i18n>overviewPRName}\" tooltip=\"{i18n>overviewPRName}\"/>\r\n      <!--<Input change=\"onPRNameChanged\" editable=\"false\" id=\"PRName\" tooltip=\"{i18n>PurReqnDescription}\"-->\r\n      <!-- value=\"{PurReqnDescription}\"></Input>-->\r\n      <smartField:SmartField change=\"onPRNameChanged\" id=\"PRName\" tooltip=\"{i18n>PurReqnDescription}\" value=\"{PurReqnDescription}\"/>\r\n     </f:content>\r\n    </f:SimpleForm>\r\n    <l:Grid defaultSpan=\"L12 M12 S12\" width=\"auto\">\r\n     <l:content>\r\n      <!--<Title class=\"sapUiSmallMarginBegin sapUiSmallMarginTop sapUiSmallMarginBottom\" design=\"Bold\" id=\"table\" level=\"H3\" text=\"{i18n>ITEMS}\"/>-->\r\n      <Table delete=\"deleteItemPressed\" growing=\"true\" growingScrollToLoad=\"false\" growingThreshold=\"10\" id=\"productsTable\" inset=\"false\"\r\n       mode=\"Delete\" updateFinished=\"onUpdateFinished\">\r\n       <headerToolbar>\r\n        <Toolbar>\r\n         <Title design=\"Bold\" id=\"table\" level=\"H3\" text=\"{i18n>ITEMS}\" tooltip=\"{i18n>ITEMS}\"/>\r\n        </Toolbar>\r\n       </headerToolbar>\r\n       <columns>\r\n        <Column hAlign=\"Left\" width=\"8rem\">\r\n         <header></header>\r\n        </Column>\r\n        <Column demandPopin=\"true\" hAlign=\"Left\" minScreenWidth=\"Tablet\" width=\"20rem\">\r\n         <header><Label text=\"{i18n>description}\" textAlign=\"Center\" tooltip=\"{i18n>description}\"/></header>\r\n        </Column>\r\n        <Column demandPopin=\"true\" hAlign=\"Center\" minScreenWidth=\"Tablet\">\r\n         <header><Label text=\"{i18n>Status}\" textAlign=\"Center\" tooltip=\"{i18n>Status}\" visible=\"false\"/></header>\r\n        </Column>\r\n        <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Tablet\" width=\"12rem\" id=\"quantityColumn\">\r\n         <header><Label text=\"{i18n>overviewQuantity}\" tooltip=\"{i18n>overviewQuantity}\"/></header>\r\n        </Column>\r\n        <Column demandPopin=\"true\" hAlign=\"Right\" minScreenWidth=\"Desktop\" width=\"12rem\">\r\n         <header><Label text=\"{i18n>overviewUnitPrice}\" tooltip=\"{i18n>overviewUnitPrice}\"/></header>\r\n        </Column>\r\n        <Column hAlign=\"Right\" width=\"8rem\">\r\n         <header><Label text=\"{i18n>overviewSubTotal}\" tooltip=\"{i18n>overviewSubTotal}\"/></header>\r\n        </Column>\r\n       </columns>\r\n       <ColumnListItem id=\"columnListItem\" press=\"onCartItemPressed\" type=\"Navigation\">\r\n        <cells>\r\n         <HBox class=\"sapUiSmallMarginTopBottom\">\r\n          <Image densityAware=\"false\" height=\"6em\" press=\"ViewDetails\" src=\"{path: 'OpnCtlgMainImageURL', formatter: '.formatter.imgnotfound'}\"\r\n           width=\"6em\"/>\r\n         </HBox>\r\n         <VBox class=\"sapUiContentPadding\">\r\n          <Link class=\"sapUiTinyMarginBottom\" press=\"ViewDetails\" text=\"{PurchaseRequisitionItemText}\"></Link>\r\n\r\n             <HBox>\r\n                 <Label text=\"{path:'i18n>overviewSupplierName', formatter:'.formatter.reviewID'}\" tooltip=\"{i18n>overviewSupplierName}\" ></Label>\r\n           <Text class=\"sapUiTinyMarginBegin\" text=\"{path:'SupplierName'}\" width=\"80em\"></Text>\r\n          </HBox>\r\n          <HBox>\r\n           <Label text=\"{path:'i18n>overviewSupplier', formatter:'.formatter.reviewID'}\" tooltip=\"{i18n>overviewSupplier}\"></Label>\r\n           <Text class=\"sapUiTinyMarginBegin\" text=\"{parts:[{path:'FixedSupplier'},{path:'Supplier'},{path:'ExtFixedSupplierForPurg'},{path:'ExtDesiredSupplierForPurg'},{path:'ExtInfoRecordForPurg'},{path:'ExtContractForPurg'}],formatter:'.formatter.Supplier' }\"\r\n            tooltip=\"{FixedSupplier}\"></Text>\r\n                            </HBox>\r\n          <HBox visible=\"{path: 'ProductType', formatter: '.formatter.formartOnMaterialVisibility'}\">\r\n           <Label text=\"{path:'i18n>overviewDelDate', formatter:'.formatter.reviewID'}\" tooltip=\"{i18n>overviewDelDate}\"></Label>\r\n           <Text class=\"sapUiTinyMarginBegin\" text=\"{path: 'DeliveryDate',type: 'sap.ui.model.type.Date',formatOptions:{style: 'short', UTC: true}}\"\r\n            tooltip=\"{path:'DeliveryDate' ,formatter:'.formatter.deliveryDateFormartting'}\"></Text>\r\n          </HBox>\r\n          <HBox visible=\"{path: 'ProductType', formatter: '.formatter.formartOnServiceVisibility' }\">\r\n           <Label text=\"{path: 'i18n>validityPeriod', formatter : '.formatter.totalText'}\"/>\r\n           <Text class=\"sapUiTinyMarginBegin\"\r\n            text=\"{parts:[{path:'PerformancePeriodStartDate'},{path:'PerformancePeriodEndDate'}],formatter:'.formatter.miniCartDateRangeFormartting'}\"/>\r\n          </HBox>\r\n         </VBox>\r\n         <VBox>\r\n          <Link text=\"{i18n>showStatus}\" press=\"showStatus\" id=\"idStatus\" visible=\"false\"/>\r\n         </VBox>\r\n         <VBox class=\"sapUiContentPadding\">\r\n          <smartField:SmartField change=\"onQuantityChanged\" controlType=\"dropDownList\" editable=\"{viewProperties>/editable}\" id=\"idQuantity\"\r\n           textAlign=\"End\" tooltip=\"{i18n>requestedQuantity}\" value=\"{path:'RequestedQuantity', type:'sap.ui.model.type.Decimal'}\"/>\r\n          <Link class=\"sapUiTinyMarginTop\" id=\"cw_prcscale\" press=\"PricescaleClick\" text=\"{i18n>pricescale}\" tooltip=\"{i18n>pricescale}\"\r\n           visible=\"false\"></Link>\r\n         </VBox>\r\n         <ObjectNumber emphasized=\"true\"\r\n          number=\"{parts:[{path:'PurchaseRequisitionPrice'},{path:'Currency'} ], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n          unit=\"{Currency}\"/>\r\n         <ObjectNumber emphasized=\"true\"\r\n          number=\"{parts:[{path:'TotalNetAmount'},{path:'Currency'} ], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false} }\"\r\n          unit=\"{Currency}\"/>\r\n        </cells>\r\n       </ColumnListItem>\r\n      </Table>\r\n     </l:content>\r\n    </l:Grid>\r\n   </VBox>\r\n  </semantic:content>\r\n  <semantic:messagesIndicator>\r\n   <semantic:MessagesIndicator class=\"sapUiMarginBegin\" press=\"showMessageLogPopover\"/>\r\n  </semantic:messagesIndicator>\r\n  <semantic:customFooterContent>\r\n   <Button class=\"sapUiSmallMarginEnd\" enabled=\"false\" id=\"btnConfirm\" press=\"handleConfirmPress\" text=\"{i18n>confirmGR}\" visible=\"false\"\r\n    tooltip=\"{i18n>confirmGR}\"/>\r\n   <Button class=\"sapUiSmallMarginEnd\" enabled=\"false\" id=\"btnReturn\" press=\"handleReturnPress\" text=\"{i18n>returnGR}\" visible=\"false\"\r\n    tooltip=\"{i18n>returnGR}\"/>\r\n   <Button enabled=\"false\" id=\"btnCheckOut\" press=\"handleOrderCartPress\" text=\"{i18n>overviewOrder}\" tooltip=\"{i18n>overviewOrder}\"\r\n    type=\"Emphasized\"/>\r\n   <Button class=\"sapUiSmallMarginEnd\" enabled=\"false\" id=\"btnDeleteCart\" press=\"handleDeleteCartPress\" text=\"{i18n>discard}\"\r\n    tooltip=\"{i18n>overviewDelete}\"/>\r\n  </semantic:customFooterContent>\r\n </semantic:FullscreenPage>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/model/formatter-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n//Formatter\r\nsap.ui.define([\"sap/ui/core/format/DateFormat\"], function() {\r\n \"use strict\";\r\n\r\n return {\r\n  /**\r\n   * Rounds the number unit value to 2 digits\r\n   *\r\n   * @public\r\n   * @param {string} sValue the number string to be rounded\r\n   * @returns {string} sValue with 2 digits rounded\r\n   */\r\n  numberUnit: function(sValue) {\r\n   if (!sValue) {\r\n    return \"\";\r\n   }\r\n\r\n   return parseFloat(sValue).toFixed(2);\r\n  },\r\n  quantity: function(value1, value2, value3) {\r\n\r\n   return value1 + \":\" + value2 + \" \" + value3;\r\n\r\n  },\r\n\r\n  price :function(value1 , value2 )\r\n  {\r\n   if (value1 !== \"0.0000\") {\r\n    return value1;\r\n   } else if (value2 !== \"0.0000\") {\r\n    return value2;\r\n   } \r\n   else{\r\n    return value1;\r\n   }\r\n  },\r\n\r\n  priceformat :function(value1 , value2 )\r\n  {\r\n   return parseFloat(value1).toFixed(value2);\r\n\r\n  },\r\n   orderunit :function(value1 , value2 , value3 , value4 ,value5 )\r\n  { \r\n   var priceunit = \"\";\r\n   var orderunit = \"\";\r\n      if (value2 !== \"0\") {\r\n    priceunit= value2;\r\n   } else if (value3 !== \"0\") {\r\n    priceunit = value3;\r\n   } \r\n\r\n   else{\r\n   priceunit = value2;\r\n   }\r\n   if (value4) {\r\n    orderunit = value4;\r\n   } \r\n    else if(value5){\r\n    orderunit = value5;\r\n   }\r\n   return value1 + \" \" + priceunit + \" \" + orderunit;\r\n\r\n  },\r\n  totalText: function(value1) {\r\n   return value1 + \":\";\r\n  },\r\n  Supplier: function(fixedSupplier, prefferedSupplier, extFixedSupplier, extDesiredSupplier, extInfoRecord, extContract) {\r\n   if (fixedSupplier) {\r\n    return fixedSupplier;\r\n   } else if (prefferedSupplier) {\r\n    return prefferedSupplier;\r\n   } else if (extFixedSupplier) {\r\n    return extFixedSupplier;\r\n   } else if (extDesiredSupplier) {\r\n    return extDesiredSupplier;\r\n   } else if (extInfoRecord) {\r\n    return extInfoRecord;\r\n   } else if (extContract) {\r\n    return extContract;\r\n   }\r\n  },\r\n  SourceOfSupply: function(infoRecord, agreementNumber, itemNumber) {\r\n\r\n   if (infoRecord) {\r\n\r\n    return this.getResourceBundle().getText(\"InfoRecord\") + \":\" + infoRecord;\r\n   } else {\r\n    return this.getResourceBundle().getText(\"agreementNumber\") + \"/\" + this.getResourceBundle().getText(\"item\") + \":\" + agreementNumber +\r\n     \"/\" + itemNumber;\r\n   }\r\n\r\n  },\r\n\r\n  date: function(value) {\r\n   if (value) {\r\n    var Year = value.substr(0, 4);\r\n    var Month = value.substr(4, 2);\r\n    var date = value.substr(6, 2);\r\n    return date + \".\" + Month + \".\" + Year;\r\n   } else {\r\n    return value;\r\n   }\r\n  },\r\n  setTitle: function(value1) {\r\n   if (value1) {\r\n    return (this.getResourceBundle().getText(\"PurReqfor\")) + \" \" + value1;\r\n   } else {\r\n    return (this.getResourceBundle().getText(\"PurReqfor\"));\r\n   }\r\n  },\r\n  netPrice: function(value1, value2) {\r\n\r\n   return value1 + \" \" + value2;\r\n  },\r\n  ItemPrice: function(value1, value2, value3, value4) {\r\n   var value5 = \"per\";\r\n\r\n   return value1 + \" \" + value2 + \" \" + value5 + \" \" + value3 + \" \" + value4;\r\n  },\r\n  rating: function(value) {\r\n   if (value) {\r\n    return parseFloat(value);\r\n   } else {\r\n    return 0;\r\n   }\r\n\r\n  },\r\n  setTotal: function(value) {\r\n   var total = this.getResourceBundle().getText(\"totalMiniCart\");\r\n   return total + \": \" + value;\r\n\r\n  },\r\n\r\n  tax: function(value) {\r\n   if (value === 0) {\r\n    return \"Data is not maintained\";\r\n   } else {\r\n    return value;\r\n   }\r\n  },\r\n\r\n  totalValue: function(value) {\r\n   if (value) {\r\n    var num = parseFloat(value);\r\n    var number = num.toFixed(2);\r\n    return number;\r\n   } else {\r\n    return 0;\r\n   }\r\n  },\r\n\r\n  convertInt: function(value) {\r\n   if (value) {\r\n    return parseInt(value);\r\n   } else {\r\n    return 0;\r\n   }\r\n  },\r\n  imgnotfound: function(value) {\r\n   if (value) {\r\n    return value;\r\n   } else {\r\n    try {\r\n     return this.getOwnerComponent().getManifest()[\"sap.platform.abap\"].uri + \"/images/dummyImg.png\";\r\n    } catch (e) {\r\n     return \"./images/dummyImg.png\";\r\n    }\r\n   }\r\n  },\r\n  supplierImage: function(value) {\r\n   if (value) {\r\n    return value;\r\n   } else {\r\n    try {\r\n     return this.getOwnerComponent().getManifest()[\"sap.platform.abap\"].uri + \"/images/Capture.JPG\";\r\n    } catch (e) {\r\n     return \"./images/Capture.JPG\";\r\n    }\r\n   }\r\n\r\n  },\r\n\r\n  currency: function(value1, value2) {\r\n   if (value1) {\r\n    if (value2) {\r\n     return value1 + \" \" + value2;\r\n    }\r\n   }\r\n  },\r\n\r\n  formatCreatedDate: function(vDate) {\r\n\r\n   if (vDate) {\r\n    var sysLang = sap.ui.getCore().getConfiguration().getLanguage();\r\n    var oLocale = new sap.ui.core.Locale(sysLang);\r\n    var formattedDate = sap.ui.core.format.DateFormat.getDateInstance({\r\n     style: \"medium\"\r\n    }, oLocale).format(new Date(vDate),true);\r\n    return formattedDate;\r\n   } else {\r\n    return \"\";\r\n   }\r\n  },\r\n  formatTotalValue: function(value1, value2) {\r\n   // sap.ui.core.format.NumberFormat.getCurrencyInstance \r\n   var nFormattedAmount = sap.ui.core.format.NumberFormat.getCurrencyInstance();\r\n   return nFormattedAmount.format(value1);\r\n  },\r\n  reviewDate: function(value) {\r\n   if (value) {\r\n    var Year = value.substr(0, 4);\r\n    var Month = value.substr(4, 2);\r\n    var date = value.substr(6, 2);\r\n    var hour = value.substr(8, 2);\r\n    var mins = value.substr(10, 2);\r\n    var completeDate = Year + \"/\" + Month + \"/\" + date + \",\" + hour + \":\" + mins;\r\n    // a=new Date(\"2015/12/12,12:53\")\r\n    completeDate = new Date(completeDate);\r\n    var oDateFormat = sap.ui.core.format.DateFormat.getDateInstance({\r\n     style: \"medium\"\r\n    });\r\n    return \": \" + oDateFormat.format(completeDate);\r\n   } else {\r\n    return \": \" + this.getResourceBundle().getText(\"dataNotMaintained\");\r\n   }\r\n\r\n  },\r\n  getGroupHeader: function(oGroup) {\r\n   if (oGroup.key === \"MANUFACTNAME\") {\r\n    oGroup.key = this.getResourceBundle().getText(\"Manufacturer\");\r\n   }\r\n   if (oGroup.key === \"VENDOR\") {\r\n    oGroup.key = this.getResourceBundle().getText(\"Supplier\");\r\n   }\r\n   if (oGroup.key === \"INTCATALOGNAME\") {\r\n    oGroup.key = this.getResourceBundle().getText(\"Catalog\");\r\n   }\r\n   if (oGroup.key === \"Z-Price Range\") {\r\n    oGroup.key = this.getResourceBundle().getText(\"PriceRange\");\r\n   }\r\n   return new sap.m.GroupHeaderListItem({\r\n    title: oGroup.key,\r\n    upperCase: false\r\n   });\r\n  },\r\n  formatMiniCart: function(value1, value2) {\r\n   return value1 + \": \" + value2;\r\n  },\r\n  formatMiniCartQuantity: function(value1, value2, value3) {\r\n   return value1 + \": \" + value2 + \" \" + value3;\r\n  },\r\n  formatWelcomeText: function(value1, value2) {\r\n   return value1 + \",  \" + value2;\r\n  },\r\n  formatPer: function(value1, value2, value3) {\r\n   if (value2) {\r\n    return value1 + \" \" + value2 + \" \" + value3;\r\n   }\r\n  },\r\n  formatDeliveryDate: function(value1, value2) {\r\n   if (value2) {\r\n    value2 = value2.toDateString().substr(4);\r\n    return value1 + \": \" + value2;\r\n   }\r\n  },\r\n\r\n  formatDeliveryDays: function(value) {\r\n   if (value) {\r\n    return this.getResourceBundle().getText(\"DeliveryDateText\") + \" \" + value + \" \" + this.getResourceBundle().getText(\"Days\");\r\n   }\r\n  },\r\n\r\n  concat: function(vTeleNo, vExtNo) {\r\n   return vTeleNo + \" \" + vExtNo;\r\n  },\r\n\r\n  formatEditDeleteLink: function(value) {\r\n   if (value) {\r\n    return true;\r\n   } else {\r\n    return false;\r\n   }\r\n  },\r\n  reviewID: function(value) {\r\n   if (value) {\r\n    return value + \":\";\r\n   } else {\r\n    return \" : \";\r\n   }\r\n  },\r\n  reviewText: function(value) {\r\n   if (value) {\r\n    value = \" \" + value;\r\n    return value;\r\n   } else {\r\n    return \" \";\r\n   }\r\n  },\r\n\r\n  priceRange: function(value) {\r\n   if (value === \"X\") {\r\n    return this.getResourceBundle().getText(\"pricescale\");\r\n   }\r\n  },\r\n\r\n  pricerangelimit: function(value1, value2) {\r\n   if (value2 > 0) {\r\n    return value1 + \" - \" + value2;\r\n   } else {\r\n    return value1 + \" \" + this.getResourceBundle().getText(\"andAbove\");\r\n   }\r\n  },\r\n\r\n  appendCurrency: function(value1, value2) {\r\n   return value1 + \" \" + value2;\r\n  },\r\n  formartOnMaterialVisibility: function(productType) {\r\n   var isVisible = true;\r\n   if (productType !== undefined) {\r\n    if (productType == \"2\") {\r\n     isVisible = false;\r\n    }\r\n   }\r\n   return isVisible;\r\n  },\r\n\r\n  formartOnServiceVisibility: function(productType) {\r\n   var isVisible = false;\r\n   if (productType !== undefined) {\r\n    if (productType == \"2\") {\r\n     isVisible = true;\r\n    }\r\n   }\r\n   return isVisible;\r\n  },\r\n\r\n  materialFieldVisibilitySwitch: function(servicePerformer) {\r\n   if (servicePerformer === \"\") {\r\n    return true;\r\n   } else {\r\n    return false;\r\n   }\r\n  },\r\n\r\n  serviceFieldVisibilitySwitch: function(servicePerformer) {\r\n   if (servicePerformer === \"\") {\r\n    return false;\r\n   } else {\r\n    return true;\r\n   }\r\n  },\r\n\r\n  miniCartDateRangeFormartting: function(fromDate, toDate) {\r\n   var finalDate = \"\";\r\n   var sysLang = sap.ui.getCore().getConfiguration().getLanguage();\r\n   var oLocale = new sap.ui.core.Locale(sysLang);\r\n\r\n   if (fromDate != null && toDate != null) {\r\n    var oFromDate = sap.ui.core.format.DateFormat.getDateInstance({\r\n     style: \"medium\"\r\n    }, oLocale).format(fromDate,true);\r\n\r\n    var oToDate = sap.ui.core.format.DateFormat.getDateInstance({\r\n     style: \"medium\"\r\n    }, oLocale).format(toDate,true);\r\n\r\n    finalDate = oFromDate + \" - \" + oToDate;\r\n   }\r\n\r\n   return finalDate;\r\n  },\r\n  deliveryDateFormartting: function(oDate) {\r\n   var finalDate = \"\";\r\n   var sysLang = sap.ui.getCore().getConfiguration().getLanguage();\r\n   var oLocale = new sap.ui.core.Locale(sysLang);\r\n\r\n   if (oDate != null) {\r\n    var oFormattedDate = sap.ui.core.format.DateFormat.getDateInstance({\r\n     style: \"medium\"\r\n    }, oLocale).format(oDate,true);\r\n\r\n    finalDate = oFormattedDate;\r\n   }\r\n\r\n   return finalDate;\r\n  },\r\n  formatStatusLink: function(value) {\r\n   if (value === 'Follow on Document Created')\r\n    return true;\r\n   else\r\n    return false;\r\n  },\r\n\r\n  // formatShowSatus: function(Status)\r\n  //            if (status === '' )\r\n\r\n  formatNumberOfItems: function(value1) {\r\n   if (value1 === 1) {\r\n    return value1 + \" \" + this.getResourceBundle().getText(\"item\");\r\n   } else {\r\n    return value1 + \" \" + this.getResourceBundle().getText(\"ITEMS\");\r\n   }\r\n  },\r\n  approvalText: function(value1, value2) {\r\n   if (value2 === null) {\r\n    return value1;\r\n   } else {\r\n    return value1 + \" - \" + value2;\r\n   }\r\n  },\r\n  companycode: function(value1) {\r\n   if (value1) {\r\n    return \":\" + \" \" + \"  Code(\" + value1 + \")\";\r\n   } else {\r\n    return \"\";\r\n   }\r\n  },\r\n\r\n  supplierType: function(value1, value2) {\r\n   if (value2) {\r\n    return \":\" + \" \" + value2 + \" (Fixed)\";\r\n   } else if (value1) {\r\n    return \":\" + \" \" + value1 + \" (Preferred)\";\r\n   } else {\r\n    return \"\";\r\n   }\r\n  },\r\n\r\n  fieldVisiblity: function(value1, value2, value3) {\r\n   if (value1 || value2 || value3) {\r\n    return true;\r\n   } else {\r\n    return false;\r\n   }\r\n  },\r\n\r\n  totalTextApplyChange: function(value1) {\r\n   return \":\" + \" \" + value1;\r\n  },\r\n\r\n  AddressFormatter: function(value1, value2, value3) {\r\n   var temp1 = \"\";\r\n   var temp2 = \"\";\r\n   if (value1) {\r\n    temp1 = value1 + \" \";\r\n   }\r\n   if (value2) {\r\n    temp2 = value2 + \", \";\r\n   }\r\n\r\n   if (value3) {\r\n    return temp1 + temp2 + value3;\r\n   } else {\r\n    return temp1 + temp2;\r\n   }\r\n\r\n   return temp1 + temp2 + value3;\r\n  }\r\n\r\n };\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/misc/URLproperties-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\"\r\n], function(Object) {\r\n\r\n var URLproperties = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.URLproperties\");\r\n // URLProperties.getHeaderKeys = function() {\r\n //  var headerKeys = {\r\n //   draftUUID : draftUUID\r\n //   PurchaseRequisition\r\n //  };\r\n //  URLProperties.headerKeys = headerKeys;\r\n // };\r\n\r\n URLproperties.prototype.getFilters = function(scenario, arrplaceholder) {\r\n  var prop = arrplaceholder[0];\r\n  var returnValue;\r\n  switch (scenario) {\r\n\r\n   case \"Header_WorkingDraft\":\r\n    if (!prop) { // property is PR Number\r\n     returnValue = \"IsActiveEntity eq false and HasActiveEntity eq false \";\r\n    } else {\r\n     returnValue = \"IsActiveEntity eq false and PurchaseRequisition eq '\" + prop + \"'\";\r\n    }\r\n\r\n    break;\r\n   case \"materialPrice\":\r\n    if (!prop) { // property is material\r\n     prop = \"0000\";\r\n    }\r\n    returnValue = {\r\n     \"Material\": prop,\r\n     \"Plant\": \"0000\",\r\n     \"Requestor\": \"000000000\"\r\n    };\r\n    break;\r\n   case \"searchMain\":\r\n    if (prop) {\r\n     returnValue = \"ProductDescription eq '\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"FilterMain\":\r\n    if (prop) {\r\n     returnValue = \"ValueDesc eq '\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"matgrpdesc\":\r\n    if (prop) {\r\n     returnValue = \"MaterialGroup eq '\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"accAssignVal\":\r\n    if (prop) {\r\n     returnValue = \"AccountAssignmentCategory eq \" + \"'\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"materialDesc\":\r\n    if (prop) {\r\n     returnValue = \"Material eq \" + \" \" + \"'\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"supplier\":\r\n    if (prop) {\r\n     returnValue = \"startswith(Supplier,'\" + prop + \"')\";\r\n    }\r\n    break;\r\n   case \"supplierCheck\":\r\n    if (prop) {\r\n     returnValue = \"Supplier eq '\" + prop + \"'\";\r\n    }\r\n    break;\r\n   case \"costCentre\":\r\n    if (prop) {\r\n     returnValue = \"CostCenter eq \" + \" \" + \"'\" + prop + \"'& $top eq 1\";\r\n    }\r\n    break;\r\n   case \"approvalPreview\":\r\n    if (prop) {\r\n     returnValue = \"PrNum eq '\" + arrplaceholder[0] + \"' and PrItmNum eq '\" + arrplaceholder[1] + \"'\";\r\n    }\r\n    break;\r\n   case \"itemsforProductType\":\r\n    returnValue = \"ProductType eq '\" + prop + \"'\";\r\n  }\r\n  return returnValue;\r\n\r\n };\r\n URLproperties.prototype.getHeaderKeys = function() {\r\n  return this.headerKeys;\r\n };\r\n\r\n URLproperties.prototype.getStatusFilterOptions = function() {\r\n  return this.headerKeys;\r\n };\r\n\r\n return URLproperties;\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/model/models.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/model/json/JSONModel\",\"sap/ui/Device\"],function(J,D){\"use strict\";return{createDeviceModel:function(){var m=new J(D);m.setDefaultBindingMode(\"OneWay\");return m;},createFLPModel:function(){var g=jQuery.sap.getObject(\"sap.ushell.Container.getUser\"),i=g?g().isJamActive():false,m=new J({isShareInJamActive:i});m.setDefaultBindingMode(\"OneWay\");return m;}};});",
		"ui/s2p/mm/requisition/maintain/s1/view/Search.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<!-- Search View -->\r\n<View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.Search\" xmlns:core=\"sap.ui.core\"\r\n xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:smartForm=\"sap.ui.comp.smartform\" xmlns:smartTable=\"sap.ui.comp.smarttable\" xmlns:table=\"sap.ui.table\" xmlns:u=\"sap.ui.unified\"\r\n xmlns=\"sap.m\">\r\n <Page id=\"pageSearch\" showNavButton=\"true\" title=\"{i18n>appTitleSearch}\">\r\n  <customHeader>\r\n   <Bar>\r\n    <contentLeft>\r\n     <Button class=\"\" icon=\"sap-icon://nav-back\" press=\"onBack\"/>\r\n     <Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://filter\" id=\"filterBtn\" press=\"closeSecondaryContent\"/>\r\n    </contentLeft>\r\n    <contentMiddle>\r\n     <Label text=\"{i18n>appTitleSearch}\"/>\r\n    </contentMiddle>\r\n    <contentRight>\r\n     <!--<Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://cart\" id=\"btnCart\" press=\"onPressCart\" text=\"{NumberOfItems}\" tooltip=\"{i18n>PurReq}\"/>-->\r\n     <Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://cart\" id=\"btnCart\" press=\"onPressCart\" text=\"{NumberOfItems}\" ariaLabelledBy=\"numberofitems\"/>\r\n     <core:InvisibleText id=\"numberofitems\"/>\r\n    <!-- <Button class=\"sapUiSmallMarginEnd\" icon=\"sap-icon://settings\" id=\"userdefaults\" press=\"onPressDefault\" /> -->\r\n    </contentRight>\r\n   </Bar>\r\n  </customHeader>\r\n  <content>\r\n   <u:SplitContainer id=\"mySplitContainer\" showSecondaryContent=\"true\">\r\n    <u:secondaryContent id=\"\">\r\n     <List growing=\"true\" growingThreshold=\"100\" headerText=\"{i18n>Filter}\" id=\"FilterList\" includeItemInSelection=\"true\"\r\n      items=\"{ path: '', sorter: [{ path: 'PropertyCategory', descending: false, group: true }, { path: 'ValueDesc', descending: false, group: false }], groupHeaderFactory: '.formatter.getGroupHeader'}\"\r\n      mode=\"MultiSelect\" selectionChange=\"onSelectionFilter\">\r\n      <StandardListItem counter=\"{path: 'TotalHits', formatter: '.formatter.convertInt' }\" iconInset=\"true\" title=\"{ValueDesc}\"/>\r\n      <layoutData><l:SplitterLayoutData size=\"\"/></layoutData>\r\n     </List>\r\n    </u:secondaryContent>\r\n    <u:content>\r\n     <l:ResponsiveFlowLayout id=\"headerContent\">\r\n      <Panel class=\"sapUiNoContentPadding\" id=\"headerPanel\">\r\n       <FlexBox class=\"sapUiSmallMarginTop\" justifyContent=\"Center\">\r\n        <VBox class=\"sapuiViewDisplayBlock\" width=\"65%\">\r\n         <SearchField class=\"sapUiSmallMarginEnd sapUiNoContentPadding\" id=\"searchItems\" search=\"searchBtnPress\" width=\"98%\">\r\n          <layoutData>\r\n           <FlexItemData growFactor=\"2\"/>\r\n          </layoutData>\r\n         </SearchField>\r\n         <HBox class=\"\">\r\n          <Button class=\"\" press=\"goToFreetext\" text=\"{i18n>appTitleCreate}\" type=\"Transparent\" id=\"freeText\"/>\r\n          <Button class=\"\" id=\"catalogText\" press=\"showCatalogPress\" text=\"{i18n>catalogText}\" type=\"Transparent\"/>\r\n          <layoutData>\r\n           <FlexItemData growFactor=\"2\"/>\r\n          </layoutData>\r\n         </HBox>\r\n        </VBox>\r\n       </FlexBox>\r\n      </Panel>\r\n     </l:ResponsiveFlowLayout>\r\n     <l:ResponsiveFlowLayout id=\"NoSearchresult\"></l:ResponsiveFlowLayout>\r\n     <l:ResponsiveFlowLayout id=\"middleContent\"></l:ResponsiveFlowLayout>\r\n     <!-- If Search result not found-->\r\n    </u:content>\r\n   </u:SplitContainer>\r\n  </content>\r\n  <footer>\r\n   <Toolbar>\r\n    <Button icon=\"sap-icon://alert\" id=\"MsgalrtBtn\" press=\"showMessageLogPopover\" type=\"Emphasized\"/>\r\n    <ToolbarSpacer/>\r\n   </Toolbar>\r\n  </footer>\r\n </Page>\r\n</View>",
		"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\"],function(O){var D=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.DataAccess\");D.prototype.create=function(u,p,P,m){if(m&&p){m.create(u,p,{success:jQuery.proxy(P.successHandler,P.oParentObject),error:jQuery.proxy(P.errorHandler,P.oParentObject)});}else{var M=P.oParentObject.getAppModel();if(p){M.create(u,p,{success:jQuery.proxy(P.successHandler,P.oParentObject),error:jQuery.proxy(P.errorHandler,P.oParentObject)});}else{M.createEntry(u,{batchGroupId:\"neverSubmit\",success:jQuery.proxy(P.successHandler,P.oParentObject),error:jQuery.proxy(P.errorHandler,P.oParentObject)});}}};D.prototype.update=function(u,p,P){var m=P.oParentObject.getAppModel();if(p){m.update(u,p,{success:jQuery.proxy(P.successHandler,P.oParentObject),error:jQuery.proxy(P.errorHandler,P.oParentObject)});}};D.prototype.read=function(U,f,p){var m=p.oParentObject.getAppModel();if(f&&f.length){if(typeof(f[0])===\"string\"){if(f.length===1){m.read(U,{urlParameters:{\"$filter\":f[0]},success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});}if(f.length===2){m.read(U,{urlParameters:{\"$filter\":f[0],\"$expand\":f[1]},success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});}}else if(typeof(f[0])===\"object\"){m.callFunction(U,{urlParameters:f[0],success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject),method:\"POST\"});}}if(f&&f.length===0){m.read(U,{success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});}};D.prototype.deleteAndCreateNewDraft=function(U,a,p){var m=p.oParentObject.getAppModel();m.setUseBatch(true);m.remove(U,{batchGroupId:\"test\",success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});m.createEntry(a,{batchGroupId:\"test\",success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});m.submitChanges();};D.prototype.deleteCurrentDraft=function(U,p){var m=p.oParentObject.getAppModel();m.remove(U,{batchGroupId:1,changeSetId:1,success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});};D.prototype.deleteItemNoteText=function(U,p){var m=p.oParentObject.getAppModel();m.remove(U,{batchGroupId:1,changeSetId:1,success:jQuery.proxy(p.successHandler,p.oParentObject),error:jQuery.proxy(p.errorHandler,p.oParentObject)});};D.prototype.bindElement=function(c,u){c.bindElement(u);};D.prototype.bindItems=function(c,u,t){c.bindItems({path:u,template:t});};return D;});",
		"ui/s2p/mm/requisition/maintain/s1/view/NotFound.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<mvc:View controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.BaseController\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <!--<MessagePage-->\r\n <!-- title=\"{i18n>notFoundTitle}\"-->\r\n <!-- text=\"{i18n>notFoundText}\"-->\r\n <!-- icon=\"{sap-icon://document}\"-->\r\n <!-- id=\"page\"-->\r\n <!-- description=\"\">-->\r\n <!-- <customDescription>-->\r\n <!--  <Link id=\"link\" text=\"{i18n>backToWorklist}\" press=\"myNavBack\" />-->\r\n <!-- </customDescription>-->\r\n <!--</MessagePage>-->\r\n</mvc:View>",
		"ui/s2p/mm/requisition/maintain/s1/misc/MassChange-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * This is a static class which defines all the Apply Changes operations on the App\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\",\r\n \"sap/ui/model/Filter\"\r\n\r\n], function(Object, EntityConstants, URLGenerator, DataAccess, DataManager, Filter) {\r\n \"use strict\";\r\n\r\n var ApplyChange = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.MassChange\");\r\n\r\n //set data in the apply changes screen\r\n ApplyChange.onPressApplyChangeMass = function(ParentController) {\r\n\r\n  //call the mass change dialog and open \r\n  var dialogName = \"ui.s2p.mm.requisition.maintain.s1.view.MassChange\";\r\n\r\n  if (!ParentController.dialog) {\r\n   ParentController.dialog = sap.ui.xmlfragment(dialogName, ParentController);\r\n   ParentController.getView().addDependent(ParentController.dialog);\r\n  }\r\n\r\n  //set the popup globally so that other functions can access\r\n  this.dialog = ParentController.dialog;\r\n\r\n  //Create a model containing item details\r\n  this.oModelItemDetails = ApplyChange.createItemModel(ParentController);\r\n\r\n  this.oParentController = ParentController;\r\n\r\n  // set country text data\r\n  ApplyChange.setCountryTexts(ParentController);\r\n\r\n };\r\n ///////////////////////////////////////country texts///////////////////////////////////////////////////////\r\n ApplyChange.setCountryTexts = function(ParentController) {\r\n  var oObjectDetails = ParentController.getView().byId(\"smartForm1\").getBindingContext().getObject();\r\n  var spath = '/I_CountryText';\r\n  var oModel = ParentController.getAppModel();\r\n  if (oObjectDetails.Language == '') {\r\n   oObjectDetails.Language = 'EN';\r\n  }\r\n\r\n  oModel.read(spath, {\r\n   urlParameters: {\r\n    \"$filter\": \"Country eq '\" + oObjectDetails.AddressCountry + \"'\" + \"  and Language eq '\" + oObjectDetails.Language + \"'\"\r\n   },\r\n   success: jQuery.proxy(ApplyChange.textReadSuccess, this),\r\n   error: jQuery.proxy(ApplyChange.textReadFailure, this)\r\n  });\r\n };\r\n\r\n ApplyChange.textReadSuccess = function(data) {\r\n  if (data.results.length) {\r\n   var countryData = data.results[0];\r\n   var countryName = countryData.CountryName;\r\n\r\n   // set the country text\r\n   this.oModelItemDetails.getData().countryName = countryName;\r\n  }\r\n\r\n  // set the salutation data\r\n  //ApplyChange.setSalutationTexts(this.oParentController);\r\n  ApplyChange.setRegionTexts(this.oParentController);\r\n\r\n };\r\n\r\n ApplyChange.textReadFailure = function() {\r\n  // do nothing\r\n\r\n  // set the salutation data\r\n  //ApplyChange.setSalutationTexts(this.oParentController);\r\n  ApplyChange.setRegionTexts(this.oParentController);\r\n\r\n };\r\n\r\n ApplyChange.setRegionTexts = function(ParentController) {\r\n  var oObjectDetails = ParentController.getView().byId(\"smartForm1\").getBindingContext().getObject();\r\n  var spath = '/I_Region';\r\n  var oModel = ParentController.getAppModel();\r\n\r\n  oModel.read(spath, {\r\n   urlParameters: {\r\n    \"$filter\": \"Region eq '\" + oObjectDetails.AddressRegion + \"'\" + \"  and Country eq '\" + oObjectDetails.AddressCountry + \"'\"\r\n   },\r\n   success: jQuery.proxy(ApplyChange.textRegionReadSuccess, this),\r\n   error: jQuery.proxy(ApplyChange.textRegionReadFailure, this)\r\n  });\r\n };\r\n\r\n ApplyChange.textRegionReadSuccess = function(data) {\r\n  if (data.results.length) {\r\n   var regionData = data.results[0];\r\n   var regionText = regionData.Region_Text;\r\n\r\n   // set the country text\r\n   this.oModelItemDetails.getData().regionText = regionText;\r\n  }\r\n\r\n  // set the region data\r\n  ApplyChange.setSalutationTexts(this.oParentController);\r\n\r\n };\r\n\r\n ApplyChange.textRegionReadFailure = function() {\r\n  // do nothing\r\n\r\n  // set the salutation data\r\n  ApplyChange.setSalutationTexts(this.oParentController);\r\n\r\n };\r\n\r\n /////////////////////////////////////////////salutation details///////////////////////////////\r\n // Read salutation details\r\n ApplyChange.setSalutationTexts = function(ParentController) {\r\n  var oObjectDetails = ParentController.getView().byId(\"smartForm1\").getBindingContext().getObject();\r\n  var spath = '/SalutationTitleSet';\r\n  var oModel = ParentController.getAppModel();\r\n\r\n  oModel.read(spath, {\r\n   urlParameters: {\r\n    \"$filter\": \"Title eq '\" + oObjectDetails.FormOfAddress + \"'\"\r\n   },\r\n   success: jQuery.proxy(ApplyChange.saluReadSuccess, this),\r\n   error: jQuery.proxy(ApplyChange.saluReadFailure, this)\r\n  });\r\n };\r\n\r\n // success function for salutations\r\n ApplyChange.saluReadSuccess = function(data) {\r\n  if (data.results.length) {\r\n   // read salutation text from backend response\r\n   var salu = data.results[0];\r\n   var salutationName = salu.TitleMedi;\r\n\r\n   // set the salutation text\r\n   this.oModelItemDetails.getData().salutationName = salutationName;\r\n\r\n  }\r\n  // set data in the sections\r\n  ApplyChange.setSectionsData(this.oModelItemDetails);\r\n\r\n  //open the apply change fragment\r\n  this.dialog.open();\r\n };\r\n\r\n // error function for salutation text\r\n ApplyChange.saluReadFailure = function() {\r\n  // set existing data in the sections\r\n  ApplyChange.setSectionsData(this.oModelItemDetails);\r\n\r\n  //open the apply change fragment\r\n  this.dialog.open();\r\n\r\n };\r\n ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n //Create a model containing item details\r\n ApplyChange.createItemModel = function(ParentController) {\r\n  var oObjectDetails = ParentController.getView().byId(\"smartForm1\").getBindingContext().getObject();\r\n  this.oModelItemDetails = new sap.ui.model.json.JSONModel(oObjectDetails);\r\n  return this.oModelItemDetails;\r\n };\r\n\r\n //Set all the sections data(general data,delivery address data and source of supply data)\r\n ApplyChange.setSectionsData = function(oModelItemDetails) {\r\n  var ListDetaildel = sap.ui.getCore().byId(\"selectedItemsSections\");\r\n  ListDetaildel.setModel(oModelItemDetails);\r\n };\r\n\r\n //close the popup without making any changes on popup\r\n ApplyChange.onCancelChanges = function() {\r\n  var list1 = sap.ui.getCore().byId(\"selectedItemsSections\").getItems();\r\n  var list2 = sap.ui.getCore().byId(\"otherItemsList\").getItems();\r\n  // Uncheck All Entry.\r\n  for (var i = 0; i < list1.length; i++) {\r\n   list1[i].setSelected(false);\r\n  }\r\n  for (var i = 0; i < list2.length; i++) {\r\n   list2[i].setSelected(false);\r\n  }\r\n  this.dialog.close();\r\n  sap.ui.getCore().byId(\"selSectionsToolbar\").setVisible(false);\r\n  sap.ui.getCore().byId(\"selItemsToolbar\").setVisible(false);\r\n\r\n  // disable the save and choose other items buttons\r\n  sap.ui.getCore().byId(\"onSelectBtnPG1\").setEnabled(false);\r\n  sap.ui.getCore().byId(\"onSelectBtnPG2\").setEnabled(false);\r\n\r\n  ApplyChange.goBacktoSectionsPage();\r\n };\r\n\r\n // set the list of items to the items list page\r\n\r\n\r\n //Open the page containing the other items\r\n ApplyChange.onSelectItems = function(prNum, HeaderDraftKey, ParentController) {\r\n\r\n   // set the json model to items list page\r\n  sap.ui.getCore().byId(\"otherItemsList\").setModel(ParentController.oItemsList, \"b\");\r\n\r\n  //navigate to page 2 containing the other items list\r\n  this.navCon = sap.ui.getCore().byId(\"Dialog_Nc_ApplyChange\");\r\n  this.navCon.to(\"p2\");\r\n\r\n\r\n };\r\n\r\n // Navigate back to first page containing the 3 sections(delivery address,source of supply and general data)\r\n ApplyChange.goBacktoSectionsPage = function() {\r\n  //navigate to page 1\r\n  sap.ui.getCore().byId(\"searchinput\").setValue(\" \");\r\n  sap.ui.getCore().byId(\"Dialog_Nc_ApplyChange\").to(\"p1\");\r\n };\r\n\r\n // Update the selected items count\r\n ApplyChange.onUpdateSelectedItemsCount = function(oEvt) {\r\n  var oList = oEvt.getSource();\r\n  var aContexts = oList.getSelectedItems();\r\n  var bSelected = (aContexts && aContexts.length > 0);\r\n  var oLabel;\r\n  var oInfoToolbar;\r\n  var btn;\r\n\r\n  if (oEvt.getParameter(\"id\") === \"selectedItemsSections\") {\r\n   oLabel = sap.ui.getCore().byId(\"selChangesPage1\");\r\n   oInfoToolbar = sap.ui.getCore().byId(\"selSectionsToolbar\");\r\n   btn = sap.ui.getCore().byId(\"onSelectBtnPG1\");\r\n  } else {\r\n   oLabel = sap.ui.getCore().byId(\"selChangesPage2\");\r\n   oInfoToolbar = sap.ui.getCore().byId(\"selItemsToolbar\");\r\n   btn = sap.ui.getCore().byId(\"onSelectBtnPG2\");\r\n  }\r\n\r\n  var sText = (bSelected) ? aContexts.length + \" selected\" : null;\r\n  if (bSelected) {\r\n   btn.setEnabled(true);\r\n  } else {\r\n   btn.setEnabled(false);\r\n  }\r\n\r\n  oInfoToolbar.setVisible(bSelected);\r\n  oLabel.setText(sText);\r\n };\r\n\r\n ApplyChange.getSmartfields = function(ParentController, sectionid) {\r\n  // Get all the smartfields from general data section\r\n  var oData = ParentController.getView().byId(sectionid).getModel().getData(\"/\" + ParentController.itemPath);\r\n  var smartFields = ParentController.getView().byId(sectionid).getSmartFields();\r\n  return smartFields;\r\n };\r\n\r\n // copy selected data into the final data structure\r\n ApplyChange.preparecopySelectedData = function(item, smartFields, applyChangeFields) {\r\n  for (var i = 0; i < smartFields.length; i++) {\r\n   var key = smartFields[i].getDataProperty().typePath;\r\n   var value = smartFields[i].getValue();\r\n   var obj = this.fieldsForCopy;\r\n\r\n   // Check if the fields in item details section match the fields in the mass change dialog\r\n   if (applyChangeFields.indexOf(key) != -1) {\r\n    if (key === \"DeliveryDate\") {\r\n     obj[key] = item.DeliveryDate;\r\n    } else {\r\n     obj[key] = value;\r\n    }\r\n   }\r\n\r\n  }\r\n };\r\n\r\n ApplyChange.belongstoStandard = function(path) {\r\n  var fields = [\"PurchaseRequisitionPrice\", \"MaterialGroup\", \"NetPriceQuantity\",\r\n   \"AccountAssignmentCategory\", \"Plant\", \"CompanyCode\",\r\n   \"PurchasingOrganization\", \"PurchasingGroup\", \"ServicePerformer\",\r\n   \"DeliveryDate\", \"RequestedQuantity\", \"Material\", \"PurchaseRequisitionItemText\",\r\n   \"FormOfAddress\", \"FullName\", \"PhoneNumber1\", \"FaxNumber\",\r\n   \"EmailAddress\", \"AddressStreetName\", \"AddressHouseNumber\", \"AddressCityName\",\r\n   \"AddressPostalCode\", \"AddressCountry\", \"AddressRegion\"\r\n  ];\r\n\r\n  if (fields.find(path) == undefined) {\r\n   return false;\r\n  } else {\r\n   return true;\r\n  }\r\n };\r\n\r\n ApplyChange.getExtensibilityfields = function(ItemDetailController, sectionid) {\r\n  var extFields = {};\r\n  var smartFields = ItemDetailController.getView().byId(sectionid).getSmartFields();\r\n  for (var j = 0; j < smartFields.length; j++) {\r\n   var bindingInfo = smartFields[j].getBindingInfo(\"text\");\r\n   for (var p = 0; p < bindingInfo.parts.length; p++) {\r\n    var path = bindingInfo.parts[p].path;\r\n    path = path.slice(1, path.length);\r\n    if (!this.belongstoStandard(path)) {\r\n     extFields.push(path);\r\n\r\n    }\r\n   }\r\n\r\n  }\r\n  return extFields;\r\n };\r\n\r\n ///////////////////////////////////////main copy logic of item////////////////////////////////////\r\n // Update other items with data from the selected item\r\n ApplyChange.onSaveChanges = function(ParentController) {\r\n  this.fieldsForCopy = {};\r\n  var objectforCopy = {};\r\n  var fieldsforCopyApplyChange = this.fieldsForCopy;\r\n  var item = this.oModelItemDetails.getData();\r\n  var smartfields = [];\r\n  var applyChangeFields = [];\r\n  var extfieldsGenData = {};\r\n  var extfieldsAddress = {};\r\n\r\n  // get data from the selected sections\r\n  var catTable = sap.ui.getCore().byId(\"selectedItemsSections\");\r\n  var catTableData = catTable.getSelectedItems();\r\n\r\n  //Loop : All selected categories\r\n  for (var i = 0; i < catTableData.length; i++) {\r\n   var id = catTable.indexOfItem(catTableData[i]);\r\n\r\n   //Case : General Data\r\n   if (id === 0) {\r\n    smartfields = ApplyChange.getSmartfields(ParentController, \"smartForm1\");\r\n    try {\r\n     extfieldsGenData = ApplyChange.getExtensibilityfields(ParentController, \"smartForm1\");\r\n    } catch (e) {\r\n     //safeguarding\r\n    }\r\n\r\n    // get fields from the general data section of apply change dialog\r\n    var generalDatafields = sap.ui.getCore().byId(\"generalDataSection\").getControlsByFieldGroupId(\"generalData\");\r\n    for (var j = 0; j < generalDatafields.length; j++) {\r\n     // read the path to get the fields names in the fragment\r\n     var bindingInfo = generalDatafields[j].getBindingInfo(\"text\");\r\n     for (var p = 0; p < bindingInfo.parts.length; p++) {\r\n      var path = bindingInfo.parts[p].path;\r\n      path = path.slice(1, path.length);\r\n      applyChangeFields.push(path);\r\n     }\r\n    }\r\n    try {\r\n     for (var e = 0; e < extfieldsGenData.length; e++) {\r\n      applyChangeFields.push(extfieldsGenData[e]);\r\n     }\r\n    } catch (e) {\r\n     //safeguarding\r\n    }\r\n\r\n    if (item.ProductType === \"2\") {\r\n     this.fieldsForCopy.PerformancePeriodStartDate = item.PerformancePeriodStartDate;\r\n     this.fieldsForCopy.PerformancePeriodEndDate = item.PerformancePeriodEndDate;\r\n    }\r\n   }\r\n\r\n   // delivery address\r\n   if (id === 1) {\r\n    smartfields = ApplyChange.getSmartfields(ParentController, \"smartForm2\");\r\n    try {\r\n     extfieldsAddress = ApplyChange.getExtensibilityfields(ParentController, \"smartForm2\");\r\n    } catch (e) {\r\n     //safeguarding\r\n    }\r\n    // get fields from address data of apply change dialog\r\n    var addressDatafields = sap.ui.getCore().byId(\"Applychangedeliveryaddress\").getControlsByFieldGroupId(\"delvAddress\");\r\n    for (var k = 0; k < addressDatafields.length; k++) {\r\n     // read the path to get the fields names in the fragment\r\n     var bindingInfo = addressDatafields[k].getBindingInfo(\"text\");\r\n     for (var l = 0; l < bindingInfo.parts.length; l++) {\r\n      var path = bindingInfo.parts[l].path;\r\n      path = path.slice(1, path.length);\r\n      applyChangeFields.push(path);\r\n     }\r\n    }\r\n    //copy salutation key and address key\r\n    this.fieldsForCopy.AddressCountry = item.AddressCountry;\r\n    this.fieldsForCopy.FormOfAddress = item.FormOfAddress;\r\n    this.fieldsForCopy.AddressRegion = item.AddressRegion;\r\n\r\n    try {\r\n     for (var e = 0; e < extfieldsAddress.length; e++) {\r\n      applyChangeFields.push(extfieldsAddress[e]);\r\n     }\r\n    } catch (e) {\r\n     //safeguarding\r\n    }\r\n   }\r\n\r\n   // source of supply\r\n   if (id === 2) {\r\n    if (item.Supplier != \"\") {\r\n     this.fieldsForCopy.Supplier = item.Supplier;\r\n    } else if (item.FixedSupplier != \"\") {\r\n     this.fieldsForCopy.FixedSupplier = item.FixedSupplier;\r\n    }\r\n   }\r\n\r\n   // Build the data which needs to be copied\r\n   if (id != 2) {\r\n    ApplyChange.preparecopySelectedData(item, smartfields, applyChangeFields);\r\n   }\r\n  }\r\n\r\n  // get selected items from the list\r\n  var oList = sap.ui.getCore().byId(\"otherItemsList\");\r\n  var aSelectedItems = oList.getSelectedItems();\r\n\r\n  //Copy the selected items data to other items\r\n  for (var j = 0; j < aSelectedItems.length; j++) {\r\n   // get selected items GUID and item\r\n   var selectedItems = oList.getSelectedContexts()[j].getModel().getData().items[j];\r\n\r\n   ApplyChange.copyToItem(ParentController, this.fieldsForCopy, selectedItems.DraftUUID, selectedItems.PurchaseRequisitionItem,\r\n    selectedItems.PurchaseRequisition);\r\n  }\r\n\r\n  ParentController.onPressSave();\r\n  //close the popup\r\n  this.dialog.close();\r\n\r\n  ApplyChange.onCancelChanges();\r\n };\r\n\r\n //copy one item data to another selected item\r\n ApplyChange.copyToItem = function(ParentController, fieldsForCopy, itemDraftUUID, itemNo, purReqn) {\r\n  DataManager.updateItemDetails(ParentController.getServiceCallParameter(ApplyChange.successItemCopy, ApplyChange.itemCopyFail),\r\n   itemDraftUUID,\r\n   purReqn,\r\n   fieldsForCopy,\r\n   itemNo);\r\n };\r\n\r\n //success message on apply changes\r\n ApplyChange.successItemCopy = function() {\r\n  sap.m.MessageToast.show(this.getResourceBundle().getText(\"sucessMessageApplyChange\"));\r\n  // go back to cart overview controller page\r\n  window.history.go(-1);\r\n };\r\n\r\n //if apply change to other items fail give a message\r\n ApplyChange.itemCopyFail = function(data) {\r\n  sap.m.MessageToast.show(this.getResourceBundle().getText(\"failMessageApplyChange\"));\r\n  window.history.go(-1);\r\n\r\n };\r\n\r\n ApplyChange.onSearchMassChange = function(oEvt) {\r\n  var aFilters = [];\r\n  var sQuery = oEvt.getSource().getValue();\r\n  if (sQuery && sQuery.length > 0) {\r\n   var filter = new Filter(\"PurchaseRequisitionItemText\", sap.ui.model.FilterOperator.Contains, sQuery);\r\n   aFilters.push(filter);\r\n  }\r\n\r\n  // update list binding\r\n  var list = sap.ui.getCore().byId(\"otherItemsList\");\r\n  var binding = list.getBinding(\"items\");\r\n  binding.filter(aFilters, \"Application\");\r\n };\r\n\r\n return ApplyChange;\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/view/Object.view.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<mvc:View\r\n controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.Object\"\r\n xmlns=\"sap.m\"\r\n xmlns:mvc=\"sap.ui.core.mvc\"\r\n xmlns:semantic=\"sap.m.semantic\"\r\n xmlns:footerbar=\"sap.ushell.ui.footerbar\">\r\n\r\n <semantic:FullscreenPage\r\n  id=\"page\"\r\n  navButtonPress=\"onNavBack\"\r\n  showNavButton=\"true\"\r\n  title=\"{i18n>objectTitle}\"\r\n  busy=\"{objectView>/busy}\"\r\n  busyIndicatorDelay=\"{objectView>/delay}\">\r\n  <semantic:content>\r\n   <ObjectHeader\r\n    id=\"objectHeader\"\r\n    title=\"{CatalogWebServiceName}\"\r\n\r\n    >\r\n   </ObjectHeader>\r\n  </semantic:content>\r\n  <semantic:sendEmailAction>\r\n   <semantic:SendEmailAction id=\"shareEmail\" press=\"onShareEmailPress\"/>\r\n  </semantic:sendEmailAction>\r\n  <semantic:shareInJamAction>\r\n   <semantic:ShareInJamAction id=\"shareInJam\" visible=\"{FLP>/isShareInJamActive}\" press=\"onShareInJamPress\"/>\r\n  </semantic:shareInJamAction>\r\n\r\n  <semantic:saveAsTileAction>\r\n   <footerbar:AddBookmarkButton id =\"shareTile\" title=\"{objectView>/saveAsTileTitle}\" />\r\n  </semantic:saveAsTileAction>\r\n </semantic:FullscreenPage>\r\n</mvc:View>",
		"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\"],function(O){\"use strict\";var E=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.EntityConstants\");E.DUMMY_PR_KEY='0000000000';E.DUMMY_ITEM_KEY='0000';E.getEntityName=function(e){var a=2;if(a===1){return(this.getBopfEntityName(e));}else{return(this.getConsumptionEntityName(e));}};E.getBopfEntityName=function(e){var r;switch(e){case\"headerEntity\":r=\"I_Purchaserequisition_Wd\";break;case\"supplierEntity\":r=\"C_MM_SupplierValueHelp\";break;case\"itemEntity\":r=\"I_Purchaserequisitionitem_Wd\";break;case\"sosEntity\":r=\"SourceOfSupplySet\";break;case\"accAssignEntity\":r=\"I_PurReqnAccAssignment_WD\";break;case\"notesEntity\":r=\"I_Purreqnitmtexttypestext\";break;case\"notesEntityText\":r=\"I_Purreqnitemtext_Wd\";break;case\"productEntity\":r=\"C_Procurementitems\";break;case\"attributeEntity\":r=\"C_CtlgSrchAttributes\";break;case\"reviewEntity\":r=\"C_Reviews\";break;case\"FilterEntity\":r=\"SearchFilterSet\";break;case\"UserCatalogSet\":r=\"UserCatalogSet\";break;case\"respApproverEntity\":r=\"RespApproverSet\";break;case\"approverDetails\":r=\"ApproverDetailsSet\";break;case\"priceScale\":r=\"C_Prcscale\";break;default:r=\"No entity found\";}return r;};E.getConsumptionEntityName=function(e){var r;switch(e){case\"headerEntity\":r=\"C_Sspprmaint_Hdr\";break;case\"itemEntity\":r=\"C_Sspprmaint_Itm\";break;case\"sosEntity\":r=\"SourceOfSupplySet\";break;case\"materialEntity\":r=\"I_Material\";break;case\"materialGroupEntity\":r=\"I_MaterialGroup\";break;case\"supplierEntity\":r=\"C_MM_SupplierValueHelp\";break;case\"accAssignEntity\":r=\"C_Sspprmaint_Accassign\";break;case\"notesEntity\":r=\"C_Sspprmaint_Itmtexttypes\";break;case\"notesEntityText\":r=\"C_Sspprmaint_Itmtext\";break;case\"productEntity\":r=\"C_Procurementitems\";break;case\"attributeEntity\":r=\"C_CtlgSrchAttributes\";break;case\"reviewEntity\":r=\"C_Reviews\";break;case\"FilterEntity\":r=\"SearchFilterSet\";break;case\"UserCatalogSet\":r=\"UserCatalogSet\";break;case\"respApproverEntity\":r=\"RespApproverSet\";break;case\"priceScale\":r=\"C_Prcscale\";break;case\"materialPrice\":r=\"C_Sspprmaint_ItmCalcprice\";break;default:r=\"No entity found\";}return r;};E.getServiceName=function(s){var r;switch(s){case\"purchaseRequisition\":r=\"/sap/opu/odata/sap/MMPUR_REQ_SSP_MAINTAIN_SRV\";break;case\"externalCatalog\":r=\"/sap/opu/odata/sap/ZOCI_SRV\";break;default:r=\"No service found\";}return r;};E.getEntityNavigationName=function(n){var r;switch(n){case\"item\":r=\"to_Purchaserequisitionitem_Wd\";break;case\"accountAssignment\":r=\"to_PurReqnAccAssignment_WD\";break;case\"itemText\":r=\"to_Purreqnitemtext_Wd\";break;default:r=\"No navigation found\";}return r;};E.getFunctionName=function(f){var r;switch(f){case\"orderFunc\":r=\"I_Purchaserequisition_WdActivation\";break;case\"editDraft\":r=\"C_Sspprmaint_HdrEdit\";break;default:r=\"No funtion found\";}return r;};E.getKeys=function(e){var k=[];switch(e){case\"headerEntity\":k.push(\"PurchaseRequisition\");k.push(\"DraftUUID\");k.push(\"IsActiveEntity\");break;case\"itemEntity\":k.push(\"PurchaseRequisition\");k.push(\"PurchaseRequisitionItem\");k.push(\"DraftUUID\");k.push(\"IsActiveEntity\");break;case\"accountingEntity\":k.push(\"PurchaseRequisition\");k.push(\"PurchaseRequisitionItem\");k.push(\"DraftUUID\");k.push(\"IsActiveEntity\");break;case\"sosEntity\":k.push(\"Supplier\");k.push(\"Purchasingdocument\");k.push(\"Purcahnsingdocumentitem\");k.push(\"Purchasinginforecord\");break;case\"materialEntity\":k.push(\"Material\");break;case\"materialGroupEntity\":k.push(\"MaterialGroup\");break;case\"supplierEntity\":k.push(\"Supplier\");break;case\"accAssignEntity\":k.push(\"PurchaseRequisition\");k.push(\"PurchaseRequisitionItem\");k.push(\"AccountAssignmentNumber\");k.push(\"PurReqnAcctDraftUUID\");break;case\"notesEntity\":k.push(\"Documenttext\");break;case\"notesEntityText\":k.push(\"Documenttext\");break;case\"productEntity\":k.push(\"OpnCtlgItemID\");k.push(\"Language\");break;case\"attributeEntity\":k.push(\"OpnCtlgItemID\");k.push(\"Language\");break;case\"reviewEntity\":k.push(\"OpnCtlgItemID\");k.push(\"UserID\");break;case\"FilterEntity\":break;case\"UserCatalogSet\":break;case\"approverEntity\":break;case\"priceScale\":k.push(\"OpnCtlgItemID\");break;case\"materialPrice\":k.push(\"Material\");k.push(\"Plant\");k.push(\"Requestor\");break;default:break;}return k;};return E;});",
		"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/URLproperties\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\"\r\n\r\n], function(Object, URLProperties, EntityConstants) {\r\n\r\n var URLGenerator = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.URLGenerators\");\r\n\r\n URLGenerator.prototype.setHeaderKeys = function(headerkeysValues) {\r\n  this.headerkeys = headerkeysValues;\r\n };\r\n URLGenerator.prototype.getStatusFilterOptions = function() {\r\n  return this.headerKeys;\r\n };\r\n URLGenerator.prototype.getHeaderURL = function() {\r\n  return this.headerURL;\r\n };\r\n // URLGenerator.prototype.getItems = function(draftKey, prNo) {\r\n //  var values = [prNo, \"guid'\"+ draftKey +\"'\"];\r\n //  var url = URLGenerator.prototype.getURLForBinding(\"getItems\", values);\r\n //  var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" +\r\n //   draftKey + \"')/\" + EntityConstants.getEntityNavigationName('item');\r\n //  return {\r\n //   returnURL: returnURL\r\n //  };\r\n // };\r\n URLGenerator.prototype.updateHeader = function(draftKey, prNo) {\r\n  var values = [prNo, \"guid'\" + draftKey + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"headersuccess\", values);\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n };\r\n URLGenerator.prototype.updateItemDetails = function(draftItemKey, prNo, prItemNumber) {\r\n  var values = [prNo, prItemNumber, \"guid'\" + draftItemKey + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"item\", values);\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" +\r\n  //  prItemNumber + \"',PurReqnItemDraftUUID=guid'\" + draftItemKey + \"')\";\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getMatGrpDesc = function(matgrpID) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('materialGroupEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"matgrpdesc\", [matgrpID]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getHeaderWorkingDraft = function(prNo) {\r\n  var arr = [];\r\n  arr.push(prNo);\r\n  // arr.push(true);\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"Header_WorkingDraft\", arr));\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity');\r\n  return {\r\n   urlParameters: urlParameters,\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.deleteWorkingDraft = function(draftKey, prNo) {\r\n  var values = [prNo, \"guid'\" + draftKey + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"headersuccess\", values);\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" +\r\n  //  draftKey + \"')\";\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n\r\n };\r\n URLGenerator.prototype.createNewDraft = function() {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity');\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n\r\n };\r\n\r\n URLGenerator.prototype.getAccounting = function(draftKey, draftItemKey, prNo, prItem, activeEntity) {\r\n  if (activeEntity === undefined) {\r\n   activeEntity = false;\r\n  }\r\n  var values = [prNo, prItem, \"guid'\" + draftItemKey + \"'\", activeEntity];\r\n  // var returnURL = \"/\" + this.EntityConstants.getEntityName('itemEntity') +\r\n  //  \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prItem + \"',DraftUUID=guid'\" +\r\n  //  draftItemKey + \",IsActiveEntity=false')/\" + this.EntityConstants.getEntityNavigationName('accountAssignment');\r\n  // return {\r\n  //  returnURL: returnURL\r\n  // };\r\n  var url = URLGenerator.prototype.getURLForBinding(\"accounting\", values);\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getItemDetails = function(draftKey, draftItemKey, prNo, prItem, activeEntity) {\r\n\r\n  if (activeEntity === undefined) {\r\n   activeEntity = false;\r\n  }\r\n  var values = [prNo, prItem, \"guid'\" + draftItemKey + \"'\", activeEntity];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"item\", values);\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n\r\n };\r\n\r\n // get the list of similar items based on product type(material/service)\r\n URLGenerator.prototype.getItemsforProductType = function(draftKey,  prNo, activeEntity, ProductType) {\r\n  var url = URLGenerator.prototype.getURLForBinding(\"cartService\", \r\n  [prNo, \"guid'\" +  draftKey + \"'\", false]);\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"itemsforProductType\", [ProductType]));\r\n  return {\r\n   returnURL: url.returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getHeaderData = function(draftKey, prNo, activeEntity) {\r\n  if (activeEntity === undefined) {\r\n   activeEntity = false;\r\n  }\r\n  var values = [prNo, \"guid'\" + draftKey + \"'\", activeEntity];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"headersuccess\", values);\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" +\r\n  //  draftKey + \"')\";\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n\r\n };\r\n URLGenerator.prototype.createNewItem = function(draftKey, prNo) {\r\n  var values = [prNo, \"guid'\" + draftKey + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"cartService\", values);\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('headerEntity') +\r\n  //  \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" + draftKey + \"')/\" +\r\n  //  EntityConstants.getEntityNavigationName('item');\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n\r\n };\r\n URLGenerator.prototype.createNotes = function(draftItemId, prItemNumber, prNo) {\r\n  var values = [prNo, prItemNumber, \"guid'\" + draftItemId + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"itemText\", values);\r\n\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" +\r\n  //  prItemNumber + \"',PurReqnItemDraftUUID=guid'\" + draftItemId + \"')/\" +\r\n  //  EntityConstants.getEntityNavigationName('itemText');\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n\r\n };\r\n\r\n URLGenerator.prototype.getPriceScaleUrl = function(filterparam) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('priceScale');\r\n  var urlParameters = [];\r\n  urlParameters.push(filterparam);\r\n  return {\r\n   urlParameters: urlParameters,\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getSearchResultsUrl = function(filterparam) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('productEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(filterparam);\r\n  return {\r\n   urlParameters: urlParameters,\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getfilterResultsUrl = function(filterparam) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('FilterEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(filterparam);\r\n  return {\r\n   urlParameters: urlParameters,\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getCatalogBindUrl = function(ServiceId, draftKey) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('UserCatalogSet') + \"(LaunchFrom='PUNCH_OUT',ServiceId='\" + ServiceId +\r\n   \"',ParentKey='\" +\r\n   draftKey + \"',ProductId='')\";\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getMaterialPrice = function(material) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('materialPrice');\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"materialPrice\", [material]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getNotes = function(itemKey, prNo, prNoItem) {\r\n  var values = [prNo, prNoItem, \"guid'\" + itemKey + \"'\", false];\r\n  var url = URLGenerator.prototype.getURLForBinding(\"itemText\", values);\r\n  // var returnURL = \"/\" + EntityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" +\r\n  //  prNoItem + \"',PurReqnItemDraftUUID=guid'\" + itemKey + \"')/\" +\r\n  //  EntityConstants.getEntityNavigationName('itemText');\r\n  return {\r\n   returnURL: url.returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getAccAssignmentValue = function(accCategory) {\r\n  var returnURL = \"/I_AccAssgnmtCategory\";\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"accAssignVal\", [accCategory]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getDraftAccountID = function(prNo, prItemNumber, draftItemKey) {\r\n  var returnURL = \"/\" + this.EntityConstants.getEntityName('itemEntity') +\r\n   \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prItemNumber + \"',DraftUUID=guid'\" +\r\n   draftItemKey + \"')/\" + this.EntityConstants.getEntityNavigationName('accountAssignment');\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getCostCentreDescByControllingArea = function(mParameters, controllingArea, costCentreID) {\r\n  var returnURL = \"/I_CostCenter\" + \"(ControllingArea=\" + \"'\" + controllingArea + \"'\" + \",CostCenter=\" + \"'\" + costCentreID + \"'\" + \")\";\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getApproverDetails = function(prNum, prItmNum, sApproverId) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('approverDetails') + \"(PrNum='\" + prNum + \"', PrItmNum='\" + prItmNum +\r\n   \"', Username='\" + sApproverId + \"')/\";\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getMaterialDescription = function(materialID) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('materialEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"materialDesc\", [materialID]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getSupplierName = function(supplierID) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('supplierEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"supplier\", [supplierID]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.checkSupplierName = function(supplierID) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('supplierEntity');\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"supplierCheck\", [supplierID]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.updateAccountAssignment = function(sURL) {\r\n  return {\r\n   returnURL: sURL\r\n  };\r\n };\r\n URLGenerator.prototype.getURLForBinding = function(scenario, values) {\r\n  var sUrl;\r\n  var keys;\r\n  var url;\r\n  switch (scenario) {\r\n   case \"headersuccess\":\r\n   case \"updateMiniCart\":\r\n   case \"genInfoCart\":\r\n   case \"updateHeaderSuccess\":\r\n    keys = EntityConstants.getKeys(\"headerEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"headerEntity\") + \"(\" + url + \")\";\r\n    break;\r\n   case \"prepareMiniCart\":\r\n   case \"cartService\":\r\n    keys = EntityConstants.getKeys(\"headerEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"headerEntity\") + \"(\" + url + \")\";\r\n    sUrl = sUrl + \"/\" + EntityConstants.getEntityNavigationName(\"item\");\r\n    break;\r\n   case \"item\":\r\n    keys = EntityConstants.getKeys(\"itemEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"itemEntity\") + \"(\" + url + \")\";\r\n    break;\r\n   case \"accounting\":\r\n    keys = EntityConstants.getKeys(\"itemEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"itemEntity\") + \"(\" + url + \")\" + \"/to_PurReqnAccAssignment_WD\";\r\n    break;\r\n   case \"itemText\":\r\n    keys = EntityConstants.getKeys(\"itemEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"itemEntity\") + \"(\" + url + \")\";\r\n    sUrl = sUrl + \"/\" + EntityConstants.getEntityNavigationName(\"itemText\");\r\n    break;\r\n   case \"dummyItem\":\r\n    keys = EntityConstants.getKeys(\"itemEntity\");\r\n    url = URLGenerator.prepareURL(keys, values);\r\n    sUrl = \"/\" + EntityConstants.getEntityName(\"itemEntity\") + \"(\" + url + \")\";\r\n  }\r\n  return {\r\n   returnURL: sUrl\r\n  };\r\n };\r\n URLGenerator.prepareURL = function(keys, values) {\r\n  var valueObject = {};\r\n  for (var j = 0; j < keys.length; j++) {\r\n   valueObject[keys[j]] = values[j];\r\n  }\r\n  values = valueObject;\r\n  var url = \"\";\r\n  url = url + keys[0] + \"='\" + values[keys[0]] + \"'\";\r\n  for (var i = 1; i < keys.length; i++) {\r\n   url = url + \",\";\r\n   if (typeof values[keys[i]] !== \"boolean\") {\r\n    if (values[keys[i]].startsWith(\"guid\")) {\r\n     url = url + keys[i] + \"=\" + values[keys[i]];\r\n    } else {\r\n     if (values[keys[i]] === \"false\") {\r\n      values[keys[i]] = false;\r\n      url = url + keys[i] + \"=\" + values[keys[i]];\r\n     } else {\r\n      url = url + keys[i] + \"='\" + values[keys[i]] + \"'\";\r\n     }\r\n    }\r\n   } else {\r\n    url = url + keys[i] + \"=\" + values[keys[i]];\r\n   }\r\n  }\r\n  return url;\r\n };\r\n\r\n URLGenerator.prototype.updateNotes = function(prNo, prItemNumber, draftItemTextId, documentText) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('notesEntityText') + \"(PurchaseRequisition='\" + prNo +\r\n   \"',PurchaseRequisitionItem='\" +\r\n   prItemNumber +\r\n   \"',DraftUUID=guid'\" +\r\n   draftItemTextId +\r\n   \"',DocumentText='\" +\r\n   documentText +\r\n   \"',Language='\" + '' +\r\n   \"',IsActiveEntity=false)\";\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.deleteItem = function(prNo, prItemNo, itemDraftKey) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName('itemEntity') +\r\n   \"(PurchaseRequisition='\" +\r\n   prNo +\r\n   \"',PurchaseRequisitionItem='\" +\r\n   prItemNo +\r\n   \"',DraftUUID=guid'\" +\r\n   itemDraftKey +\r\n   \"',IsActiveEntity=false)\";\r\n  return {\r\n   returnURL: returnURL\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getCostCentreDescription = function(costCentreID) {\r\n  var returnURL = \"/I_CostCenter\";\r\n  var urlParameters = [];\r\n  urlParameters.push(URLProperties.prototype.getFilters(\"costCentre\", [costCentreID]));\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n URLGenerator.prototype.getApprovalPreviewSet = function(prNo, prItemNumber) {\r\n  var returnURL = \"/\" + EntityConstants.getEntityName(\"respApproverEntity\");\r\n  var filters = URLProperties.prototype.getFilters(\"approvalPreview\", [prNo, prItemNumber]);\r\n  var urlParameters = [];\r\n  urlParameters.push(filters);\r\n\r\n  return {\r\n   returnURL: returnURL,\r\n   urlParameters: urlParameters\r\n  };\r\n };\r\n\r\n return URLGenerator;\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/model/models-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n  \"sap/ui/model/json/JSONModel\",\r\n  \"sap/ui/Device\"\r\n ], function (JSONModel, Device) {\r\n \"use strict\";\r\n\r\n return {\r\n  createDeviceModel: function () {\r\n   var oModel = new JSONModel(Device);\r\n   oModel.setDefaultBindingMode(\"OneWay\");\r\n   return oModel;\r\n  },\r\n  createFLPModel: function () {\r\n   var fnGetUser = jQuery.sap.getObject(\"sap.ushell.Container.getUser\"),\r\n    bIsShareInJamActive = fnGetUser ? fnGetUser().isJamActive() : false,\r\n    oModel = new JSONModel({\r\n     isShareInJamActive: bIsShareInJamActive\r\n    });\r\n   oModel.setDefaultBindingMode(\"OneWay\");\r\n   return oModel;\r\n  }\r\n };\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/misc/ExternalPurchasing-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * This is a static class which defines all the Hub Scenario operations on the App\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataManager\",\r\n \"sap/ui/model/Filter\"\r\n\r\n], function(Object, EntityConstants, URLGenerator, DataAccess, DataManager, Filter) {\r\n \"use strict\";\r\n\r\n var ExternalPurchasing = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.ExternalPurchasing\");\r\n\r\n ExternalPurchasing.validateMatAndText = function(that) {\r\n  var extmaterial = that.getView().byId(\"idExtMaterial\").getValue();\r\n  var shortText = that.getView().byId(\"idMaterialDescription\").getValue();\r\n  if ((extmaterial.trim() === \"\" || extmaterial === null) && (shortText.trim() === \"\" || shortText === null)) {\r\n   return false;\r\n  } else {\r\n   that.getView().byId(\"idExtMaterial\").setValueState(sap.ui.core.ValueState.None);\r\n   that.getView().byId(\"idMaterialDescription\").setValueState(sap.ui.core.ValueState.None);\r\n   return true;\r\n  }\r\n };\r\n\r\n ExternalPurchasing.getExtMaterialDetails = function(that) {\r\n  var extmaterial = that.getView().byId(\"idExtMaterial\").getValue();\r\n  that.getView().setBusy(true);\r\n  DataManager.getMaterialPrice(that.getServiceCallParameter(function(data) {\r\n   that.getView().byId(\"idMaterialDescription\").setValue(data.PurchaseRequisitionItemText);\r\n   that.getView().setBusy(false);\r\n  }, ExternalPurchasing.serviceFail), extmaterial);\r\n };\r\n\r\n ExternalPurchasing.addSupplier = function(that, event) {\r\n  var supplier = sap.ui.getCore().byId(\"supplier\").getValue();\r\n  if (supplier === \"\" || supplier === null) {\r\n   sap.ui.getCore().byId(\"supplier\").setValueState(sap.ui.core.ValueState.Error);\r\n   sap.ui.getCore().byId(\"supplier\").setValueStateText(that.getResourceBundle().getText(\"invalidSupplier\"));\r\n  } else {\r\n   var preferred = sap.ui.getCore().byId(\"preferred\").getSelected();\r\n   var fixed = sap.ui.getCore().byId(\"fixed\").getSelected();\r\n   if (preferred === true) {\r\n    that.text = \"Preferred\";\r\n    that.ExtDesiredSupplierForPurg = supplier;\r\n    that.ExtFixedSupplierForPurg = \"\";\r\n\r\n   } else {\r\n    that.text = \"Fixed\";\r\n    that.ExtDesiredSupplierForPurg = \"\";\r\n    that.ExtFixedSupplierForPurg = supplier;\r\n\r\n   }\r\n\r\n   if (!that.productList) {\r\n    that.productList = sap.ui.xmlfragment(\"ui.s2p.mm.requisition.maintain.s1.view.AssignedSupplier\", that);\r\n    that.getView().addDependent(that.productList);\r\n   }\r\n\r\n   that.getView().byId(\"sourceOfSupply\").removeAllContent();\r\n   if (that.getSourcePage() === \"ItemDetails\") {\r\n    that.getView().byId(\"addSupplier\").setVisible(false);\r\n   } else {\r\n    that.getView().byId(\"addSupplier1\").setVisible(false);\r\n   }\r\n   that.getView().byId(\"sourceOfSupply\").addContent(that.productList);\r\n\r\n   that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[0].setText(\r\n    supplier);\r\n   that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].setText(\r\n    supplier);\r\n   that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].setText(that\r\n    .text);\r\n   that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[2].setText(\"Assigned\");\r\n   that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[4].setType(\"Reject\");\r\n   event.getSource().getParent().close();\r\n  }\r\n };\r\n\r\n ExternalPurchasing.updateModel = function(that, oData) {\r\n  var text = that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[2].getText();\r\n  var supplier = that.getView().byId(\"sourceOfSupply\").getContent()[0].getItems()[0].getCells()[1].getItems()[0].getAttributes()[1].getText();\r\n  if (text === \"Preferred\") {\r\n   oData.ExtDesiredSupplierForPurg = supplier;\r\n   oData.ExtFixedSupplierForPurg = \"\";\r\n   oData.FixedSupplier = \"\";\r\n   oData.Supplier = \"\";\r\n  } else if (text === \"Fixed\") {\r\n   oData.ExtDesiredSupplierForPurg = \"\";\r\n   oData.ExtFixedSupplierForPurg = supplier;\r\n   oData.FixedSupplier = \"\";\r\n   oData.Supplier = \"\";\r\n  } else if (that.ExtInfoRecord) {\r\n   oData.ExtDesiredSupplierForPurg = \"\";\r\n   oData.ExtFixedSupplierForPurg = \"\";\r\n   oData.FixedSupplier = \"\";\r\n   oData.Supplier = \"\";\r\n   oData.ExtInfoRecordForPurg = that.ExtInfoRecord;\r\n  } else if (that.ExtContract) {\r\n      oData.ExtDesiredSupplierForPurg = \"\";\r\n   oData.ExtFixedSupplierForPurg = \"\";\r\n   oData.FixedSupplier = \"\";\r\n   oData.Supplier = \"\";\r\n   oData.ExtContractForPurg  = that.ExtContract;\r\n   oData.ExtContractItemForPurg  = that.ExtContractItem;\r\n\r\n  } else if (that.ExtContract === \"\" && that.ExtContractItem === \"\" && that.ExtInfoRecord === \"\") {\r\n   oData.ExtContractForPurg  = \"\";\r\n   oData.ExtContractItemForPurg  = \"\";\r\n   oData.ExtInfoRecordForPurg = \"\";\r\n  }\r\n\r\n  return oData;\r\n };\r\n    ExternalPurchasing.updateExtSupplierInfo = function(oEvent, that){\r\n     var supplierInfo = oEvent.getSource().getParent().getCells()[1].getItems()[\"0\"].getAttributes()[3].getText(); \r\n        var supplierInfoNumber = supplierInfo.split(\":\")[1];\r\n        var b = supplierInfoNumber.split(\"/\")[0];\r\n        var c = supplierInfoNumber.split(\"/\")[1];\r\n        var ExtSupplierNumbers = [];\r\n        if(c === undefined || c === \"\" || c === \" \") {\r\n         ExtSupplierNumbers[\"ExtInfoRecord\"] = b;\r\n        } else {\r\n         ExtSupplierNumbers[\"ExtContract\"]  =  b;\r\n         ExtSupplierNumbers[\"ExtContractItem\"] = c;\r\n        }\r\n        return ExtSupplierNumbers;\r\n    };\r\n ExternalPurchasing.assignSupplier = function(that, oData) {\r\n  oData.ExtDesiredSupplierForPurg = that.Supplier1;\r\n  oData.ExtFixedSupplierForPurg = that.Fixedsupplier1;\r\n  // oData.ExtContractForPurg = oData.Purchasingdocument;\r\n  // oData.ExtContractItemForPurg = oData.Purcahnsingdocumentitem;\r\n  // oData.ExtInfoRecordForPurg = oData.Purchasinginforecord;\r\n  // oData.Purchasingdocument = \"\";\r\n  // oData.Purcahnsingdocumentitem = \"\";\r\n  // oData.Purchasinginforecord = \"\";\r\n\r\n  return oData;\r\n\r\n };\r\n\r\n return ExternalPurchasing;\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/fragment/Attachment.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <core:ComponentContainer id=\"attachmentCompContainer\" propagateModel=\"true\"/>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\"\r\n], function(Object) {\r\n \"use strict\";\r\n\r\n var EntityConstants = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.EntityConstants\");\r\n\r\n EntityConstants.DUMMY_PR_KEY = '0000000000';\r\n EntityConstants.DUMMY_ITEM_KEY = '0000';\r\n EntityConstants.getEntityName = function(enityName) {\r\n  var a = 2;\r\n  if (a === 1) {\r\n   return (this.getBopfEntityName(enityName));\r\n  } else {\r\n   return (this.getConsumptionEntityName(enityName));\r\n  }\r\n\r\n };\r\n\r\n EntityConstants.getBopfEntityName = function(enityName) {\r\n  var returnName;\r\n  switch (enityName) {\r\n   case \"headerEntity\":\r\n    returnName = \"I_Purchaserequisition_Wd\";\r\n    break;\r\n   case \"supplierEntity\":\r\n    returnName = \"C_MM_SupplierValueHelp\";\r\n    break;\r\n   case \"itemEntity\":\r\n    returnName = \"I_Purchaserequisitionitem_Wd\";\r\n    break;\r\n   case \"sosEntity\":\r\n    returnName = \"SourceOfSupplySet\";\r\n    break;\r\n   case \"accAssignEntity\":\r\n    returnName = \"I_PurReqnAccAssignment_WD\";\r\n    break;\r\n   case \"notesEntity\":\r\n    returnName = \"I_Purreqnitmtexttypestext\";\r\n    break;\r\n   case \"notesEntityText\":\r\n    returnName = \"I_Purreqnitemtext_Wd\";\r\n    break;\r\n   case \"productEntity\":\r\n    returnName = \"C_Procurementitems\";\r\n    break;\r\n   case \"attributeEntity\":\r\n    returnName = \"C_CtlgSrchAttributes\";\r\n    break;\r\n   case \"reviewEntity\":\r\n    returnName = \"C_Reviews\";\r\n    break;\r\n   case \"FilterEntity\":\r\n    returnName = \"SearchFilterSet\";\r\n    break;\r\n   case \"UserCatalogSet\":\r\n    returnName = \"UserCatalogSet\";\r\n    break;\r\n   case \"respApproverEntity\":\r\n    returnName = \"RespApproverSet\";\r\n    break;\r\n   case \"approverDetails\":\r\n    returnName = \"ApproverDetailsSet\";\r\n    break;\r\n   case \"priceScale\":\r\n    returnName = \"C_Prcscale\";\r\n    break;\r\n   default:\r\n    returnName = \"No entity found\";\r\n  }\r\n  return returnName;\r\n };\r\n EntityConstants.getConsumptionEntityName = function(enityName) {\r\n  var returnName;\r\n  switch (enityName) {\r\n   case \"headerEntity\":\r\n    returnName = \"C_Sspprmaint_Hdr\";\r\n    break;\r\n   case \"itemEntity\":\r\n    returnName = \"C_Sspprmaint_Itm\";\r\n    break;\r\n   case \"sosEntity\":\r\n    returnName = \"SourceOfSupplySet\";\r\n    break;\r\n   case \"materialEntity\":\r\n    returnName = \"I_Material\";\r\n    break;\r\n   case \"materialGroupEntity\":\r\n    returnName = \"I_MaterialGroup\";\r\n    break;\r\n   case \"supplierEntity\":\r\n    returnName = \"C_MM_SupplierValueHelp\";\r\n    break;\r\n   case \"accAssignEntity\":\r\n    returnName = \"C_Sspprmaint_Accassign\";\r\n    break;\r\n   case \"notesEntity\":\r\n    returnName = \"C_Sspprmaint_Itmtexttypes\";\r\n    break;\r\n   case \"notesEntityText\":\r\n    returnName = \"C_Sspprmaint_Itmtext\";\r\n    break;\r\n   case \"productEntity\":\r\n    returnName = \"C_Procurementitems\";\r\n    break;\r\n   case \"attributeEntity\":\r\n    returnName = \"C_CtlgSrchAttributes\";\r\n    break;\r\n   case \"reviewEntity\":\r\n    returnName = \"C_Reviews\";\r\n    break;\r\n   case \"FilterEntity\":\r\n    returnName = \"SearchFilterSet\";\r\n    break;\r\n   case \"UserCatalogSet\":\r\n    returnName = \"UserCatalogSet\";\r\n    break;\r\n   case \"respApproverEntity\":\r\n    returnName = \"RespApproverSet\";\r\n    break;\r\n   case \"priceScale\":\r\n    returnName = \"C_Prcscale\";\r\n    break;\r\n   case \"materialPrice\":\r\n    returnName = \"C_Sspprmaint_ItmCalcprice\";\r\n    break;\r\n   default:\r\n    returnName = \"No entity found\";\r\n  }\r\n  return returnName;\r\n };\r\n\r\n EntityConstants.getServiceName = function(serviceName) {\r\n  var returnName;\r\n  switch (serviceName) {\r\n   case \"purchaseRequisition\":\r\n    returnName = \"/sap/opu/odata/sap/MMPUR_REQ_SSP_MAINTAIN_SRV\";\r\n    break;\r\n   case \"externalCatalog\":\r\n    returnName = \"/sap/opu/odata/sap/ZOCI_SRV\";\r\n    break;\r\n   default:\r\n    returnName = \"No service found\";\r\n  }\r\n  return returnName;\r\n };\r\n\r\n EntityConstants.getEntityNavigationName = function(navigationName) {\r\n  var returnName;\r\n  switch (navigationName) {\r\n   case \"item\":\r\n    returnName = \"to_Purchaserequisitionitem_Wd\";\r\n    break;\r\n   case \"accountAssignment\":\r\n    returnName = \"to_PurReqnAccAssignment_WD\";\r\n    break;\r\n\r\n   case \"itemText\":\r\n    returnName = \"to_Purreqnitemtext_Wd\";\r\n    break;\r\n\r\n   default:\r\n    returnName = \"No navigation found\";\r\n  }\r\n  return returnName;\r\n };\r\n\r\n EntityConstants.getFunctionName = function(funcName) {\r\n  var returnName;\r\n  switch (funcName) {\r\n   case \"orderFunc\":\r\n    returnName = \"I_Purchaserequisition_WdActivation\";\r\n    break;\r\n   case \"editDraft\":\r\n    returnName = \"C_Sspprmaint_HdrEdit\";\r\n    break;\r\n   default:\r\n    returnName = \"No funtion found\";\r\n  }\r\n  return returnName;\r\n };\r\n EntityConstants.getKeys = function(sEntity) {\r\n  var keys = [];\r\n  switch (sEntity) {\r\n   case \"headerEntity\":\r\n    keys.push(\"PurchaseRequisition\");\r\n    keys.push(\"DraftUUID\");\r\n    keys.push(\"IsActiveEntity\");\r\n    break;\r\n   case \"itemEntity\":\r\n    keys.push(\"PurchaseRequisition\");\r\n    keys.push(\"PurchaseRequisitionItem\");\r\n    keys.push(\"DraftUUID\");\r\n    keys.push(\"IsActiveEntity\");\r\n    break;\r\n   case \"accountingEntity\":\r\n    keys.push(\"PurchaseRequisition\");\r\n    keys.push(\"PurchaseRequisitionItem\");\r\n    keys.push(\"DraftUUID\");\r\n    keys.push(\"IsActiveEntity\");\r\n    break;\r\n   case \"sosEntity\":\r\n    keys.push(\"Supplier\");\r\n    keys.push(\"Purchasingdocument\");\r\n    keys.push(\"Purcahnsingdocumentitem\");\r\n    keys.push(\"Purchasinginforecord\");\r\n    break;\r\n   case \"materialEntity\":\r\n    keys.push(\"Material\");\r\n    break;\r\n   case \"materialGroupEntity\":\r\n    keys.push(\"MaterialGroup\");\r\n    break;\r\n   case \"supplierEntity\":\r\n    keys.push(\"Supplier\");\r\n    break;\r\n   case \"accAssignEntity\":\r\n    keys.push(\"PurchaseRequisition\");\r\n    keys.push(\"PurchaseRequisitionItem\");\r\n    keys.push(\"AccountAssignmentNumber\");\r\n    keys.push(\"PurReqnAcctDraftUUID\");\r\n    break;\r\n   case \"notesEntity\":\r\n    keys.push(\"Documenttext\");\r\n    break;\r\n   case \"notesEntityText\":\r\n    keys.push(\"Documenttext\");\r\n    break;\r\n   case \"productEntity\":\r\n    keys.push(\"OpnCtlgItemID\");\r\n    keys.push(\"Language\");\r\n    break;\r\n   case \"attributeEntity\":\r\n    keys.push(\"OpnCtlgItemID\");\r\n    keys.push(\"Language\");\r\n    break;\r\n   case \"reviewEntity\":\r\n    keys.push(\"OpnCtlgItemID\");\r\n    keys.push(\"UserID\");\r\n    break;\r\n   case \"FilterEntity\":\r\n    break; // no keys found for entity\r\n   case \"UserCatalogSet\":\r\n    break; // no keys found for entity\r\n   case \"approverEntity\":\r\n    break; // no keys found for entity\r\n   case \"priceScale\":\r\n    keys.push(\"OpnCtlgItemID\");\r\n    break;\r\n   case \"materialPrice\":\r\n    keys.push(\"Material\");\r\n    keys.push(\"Plant\");\r\n    keys.push(\"Requestor\");\r\n    break;\r\n   default:\r\n    break;\r\n  }\r\n  return keys;\r\n };\r\n\r\n return EntityConstants;\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/misc/URLproperties.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\"],function(O){var U=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.URLproperties\");U.prototype.getFilters=function(s,a){var p=a[0];var r;switch(s){case\"Header_WorkingDraft\":if(!p){r=\"IsActiveEntity eq false and HasActiveEntity eq false \";}else{r=\"IsActiveEntity eq false and PurchaseRequisition eq '\"+p+\"'\";}break;case\"materialPrice\":if(!p){p=\"0000\";}r={\"Material\":p,\"Plant\":\"0000\",\"Requestor\":\"000000000\"};break;case\"searchMain\":if(p){r=\"ProductDescription eq '\"+p+\"'\";}break;case\"FilterMain\":if(p){r=\"ValueDesc eq '\"+p+\"'\";}break;case\"matgrpdesc\":if(p){r=\"MaterialGroup eq '\"+p+\"'\";}break;case\"accAssignVal\":if(p){r=\"AccountAssignmentCategory eq \"+\"'\"+p+\"'\";}break;case\"materialDesc\":if(p){r=\"Material eq \"+\" \"+\"'\"+p+\"'\";}break;case\"supplier\":if(p){r=\"startswith(Supplier,'\"+p+\"')\";}break;case\"supplierCheck\":if(p){r=\"Supplier eq '\"+p+\"'\";}break;case\"costCentre\":if(p){r=\"CostCenter eq \"+\" \"+\"'\"+p+\"'& $top eq 1\";}break;case\"approvalPreview\":if(p){r=\"PrNum eq '\"+a[0]+\"' and PrItmNum eq '\"+a[1]+\"'\";}break;case\"itemsforProductType\":r=\"ProductType eq '\"+p+\"'\";}return r;};U.prototype.getHeaderKeys=function(){return this.headerKeys;};U.prototype.getStatusFilterOptions=function(){return this.headerKeys;};return U;});",
		"ui/s2p/mm/requisition/maintain/s1/fragment/BusinessProcess.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <Dialog afterClose=\"handleClose\" contentHeight=\"10rem\" initialVisiblePanelType=\"sort\" ok=\"handleClose\" reset=\"handleReset\" showReset=\"true\"\r\n  title=\"{i18n>itemStatus}\">\r\n  <content>\r\n\r\n   <Panel class=\"sapUiNoContentPadding\" id=\"idItemStatus\">\r\n       <core:ComponentContainer id=\"BusProcessCompContainerCO\" name=\"sap.s4.cfnd.lib.businessprocessflow.component.freestyle\" propagateModel=\"true\"\r\n        settings=\"\\{&quot;layoutId&quot;:&quot;\\{UIModel&gt;/key\\}&quot;, &quot;docId&quot;:&quot;\\{UIModel&gt;/key2\\}&quot;, &quot;Item&quot;:&quot;\\{UIModel&gt;/Item\\}&quot;, &quot;KeyName&quot;:&quot;\\{UIModel&gt;/KeyName\\}&quot;, &quot;ItemKeyName&quot;:&quot;\\{UIModel&gt;/ItemKeyName\\}&quot;, &quot;FiscalYear&quot;:&quot;\\{UIModel&gt;/FiscalYear\\}&quot;, &quot;CompanyCode&quot;:&quot;\\{UIModel&gt;/CompanyCode\\}&quot;, &quot;FiscalYearKey&quot;:&quot;\\{UIModel&gt;/FiscalYearKey\\}&quot;, &quot;CompanyCodeKey&quot;:&quot;\\{UIModel&gt;/CompanyCodeKey\\}&quot; \\}\"/>\r\n      </Panel>\r\n\r\n </content>\r\n\r\n </Dialog>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/fragment/sFinAccountAssignment.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <core:ComponentContainer id=\"sFinaccAssignmentCompContainer\" propagateModel=\"true\"/>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/fragment/AccountAssignment.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <core:ComponentContainer id=\"accAssignmentCompContainer\"/>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/fragment/StatusInPR.fragment.xml": "<?xml version=\"1.0\"?>\r\n<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:time=\"sap.suite.ui.commons\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\"\r\n xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns=\"sap.m\">\r\n <Popover class=\"\" id=\"itemspopover\" placement=\"Right\" title=\"{i18n>itemStatus}\" afterClose=\"handleClose\">\r\n  <content>\r\n   <Panel>\r\n    <headerToolbar>\r\n     <Toolbar>\r\n      <Button icon=\"sap-icon://zoom-in\" text=\"{i18n>zoomIn}\" press=\"processFlowZoomIn\"/>\r\n      <Button icon=\"sap-icon://zoom-out\" text=\"{i18n>zoomOut}\" press=\"processFlowZoomOut\"/>\r\n     </Toolbar>\r\n    </headerToolbar>\r\n    <!--<Label text=\"Process flow for Status in MY PR\"></Label>-->\r\n    <time:ProcessFlow id=\"processflow\" scrollable=\"true\" foldedCorners=\"true\" nodePress=\"onNodePress\" nodes=\"{pf1>/nodes}\" lanes=\"{pf1>/lanes}\">\r\n     <time:nodes>\r\n      <time:ProcessFlowNode laneId=\"{pf1>lane}\" nodeId=\"{pf1>id}\" title=\"{pf1>title}\" titleAbbreviation=\"{pf1>titleAbbreviation}\"\r\n       children=\"{pf1>children}\" state=\"{pf1>state}\" stateText=\"{pf1>stateText}\" texts=\"{pf1>texts}\" focused=\"{pf1>focused}\"/>\r\n     </time:nodes>\r\n     <time:lanes>\r\n      <time:ProcessFlowLaneHeader laneId=\"{pf1>id}\" iconSrc=\"{pf1>icon}\" text=\"{pf1>label}\" position=\"{pf1>position}\"/>\r\n     </time:lanes>\r\n    </time:ProcessFlow>\r\n   </Panel>\r\n  </content>\r\n </Popover>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\"\r\n], function(Object) {\r\n\r\n var DataAccess = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.DataAccess\");\r\n\r\n DataAccess.prototype.create = function(sUrl, payload, mParameters, model) {\r\n  if (model && payload) {\r\n   model.create(sUrl, payload, {\r\n    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n   });\r\n  } else {\r\n\r\n   var oModel = mParameters.oParentObject.getAppModel();\r\n   if (payload) {\r\n    oModel.create(sUrl, payload, {\r\n     success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n     error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n    });\r\n   } else {\r\n    oModel.createEntry(sUrl, {\r\n     batchGroupId: \"neverSubmit\",\r\n     success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n     error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n    });\r\n   }\r\n  }\r\n\r\n };\r\n DataAccess.prototype.update = function(sUrl, payload, mParameters) {\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  if (payload) {\r\n   oModel.update(sUrl, payload, {\r\n    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n   });\r\n  }\r\n\r\n };\r\n\r\n DataAccess.prototype.read = function(Url, filter, parameters) {\r\n  var oModel = parameters.oParentObject.getAppModel();\r\n\r\n  if (filter && filter.length) {\r\n   if (typeof(filter[0]) === \"string\") {\r\n    if (filter.length === 1) {\r\n\r\n     oModel.read(Url, {\r\n      urlParameters: {\r\n       \"$filter\": filter[0]\r\n      },\r\n      success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n      error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n     });\r\n    }\r\n    if (filter.length === 2) {\r\n     oModel.read(Url, {\r\n      urlParameters: {\r\n       \"$filter\": filter[0],\r\n       \"$expand\": filter[1]\r\n      },\r\n      success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n      error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n     });\r\n    }\r\n   } else if (typeof(filter[0]) === \"object\") {\r\n    oModel.callFunction(Url, {\r\n     urlParameters: filter[0],\r\n     success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n     error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject),\r\n     method: \"POST\"\r\n    });\r\n   }\r\n  }\r\n  if (filter && filter.length === 0) {\r\n   oModel.read(\r\n    Url, {\r\n     success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n     error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n    });\r\n  }\r\n };\r\n\r\n DataAccess.prototype.deleteAndCreateNewDraft = function(UrlDelete, UrlCreate, parameters) {\r\n  var oModel = parameters.oParentObject.getAppModel();\r\n  oModel.setUseBatch(true);\r\n  oModel.remove(\r\n   UrlDelete, {\r\n    batchGroupId: \"test\",\r\n    // changeSetId: 1,\r\n    success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n    error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n   });\r\n  oModel.createEntry(UrlCreate, {\r\n   batchGroupId: \"test\",\r\n   success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n   error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n  });\r\n  // oModel.setDeferredGroups([\"test\"]);\r\n  oModel.submitChanges();\r\n };\r\n\r\n DataAccess.prototype.deleteCurrentDraft = function(Url, parameters) {\r\n  var oModel = parameters.oParentObject.getAppModel();\r\n  oModel.remove(\r\n   Url, {\r\n    batchGroupId: 1,\r\n    changeSetId: 1,\r\n    success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n    error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n   });\r\n\r\n };\r\n\r\n DataAccess.prototype.deleteItemNoteText = function(Url, parameters) {\r\n  var oModel = parameters.oParentObject.getAppModel();\r\n  oModel.remove(\r\n   Url, {\r\n    batchGroupId: 1,\r\n    changeSetId: 1,\r\n    success: jQuery.proxy(parameters.successHandler, parameters.oParentObject),\r\n    error: jQuery.proxy(parameters.errorHandler, parameters.oParentObject)\r\n   });\r\n };\r\n\r\n DataAccess.prototype.bindElement = function(oControl, sURL) {\r\n  oControl.bindElement(sURL);\r\n };\r\n DataAccess.prototype.bindItems = function(oControl, sURL, template) {\r\n  oControl.bindItems({\r\n   path: sURL,\r\n   template: template\r\n\r\n  });\r\n };\r\n\r\n return DataAccess;\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/fragment/AccountingDetails.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\">\r\n <core:ComponentContainer id=\"accountingForm\"/>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/fragment/ZAttachment.fragment.xml": "<core:FragmentDefinition xmlns:caui=\"sap.ca.ui\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\" xmlns:l=\"sap.ui.layout\"\r\n\txmlns:mvc=\"sap.ui.core.mvc\" xmlns=\"sap.m\" controllerName=\"ui.s2p.mm.requisition.maintain.s1.controller.ZAttachment\">\r\n\t<Table noDataText=\"{i18n>AttNoDataText}\" id=\"tbl_attachment\" items=\"{Attachment>/results}\" mode=\"Delete\" delete=\"onAttachDelete\">\r\n\t\t<headerToolbar>\r\n\t\t\t<Toolbar visible=\"{viewModel>/editable}\">\r\n\t\t\t\t<ToolbarSpacer/>\r\n\t\t\t\t<Button icon=\"sap-icon://add-document\" press=\"onNewAttachment\" tooltip=\"{i18n>NewAttachment}\"/>\r\n\t\t\t</Toolbar>\r\n\t\t</headerToolbar>\r\n\t\t<items>\r\n\t\t\t<ColumnListItem type=\"Navigation\" press=\"onAttachPress\">\r\n\t\t\t\t<cells>\r\n\t\t\t\t\t<ObjectIdentifier title=\"{Attachment>AttachName}\"/>\r\n\t\t\t\t\t<Text text=\"{Attachment>AttDescription}\"/>\r\n\t\t\t\t\t<CheckBox selected=\"{Attachment>AttInternal}\" editable=\"false\"/>\r\n\t\t\t\t</cells>\r\n\t\t\t</ColumnListItem>\r\n\t\t</items>\r\n\t\t<columns>\r\n\t\t\t<Column>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<Label text=\"{i18n>AttFileName}\"/>\r\n\t\t\t\t</header>\r\n\t\t\t</Column>\r\n\t\t\t<Column>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<Label text=\"{i18n>AttFileDescr}\"/>\r\n\t\t\t\t</header>\r\n\t\t\t</Column>\r\n\t\t\t<Column>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<Label text=\"{i18n>AttFileInt}\"/>\r\n\t\t\t\t</header>\r\n\t\t\t</Column>\r\n\t\t</columns>\r\n\t</Table>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/misc/DataManager-dbg.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * This is a static class which defines all the method for read and write operations in Purchaserequistion App\r\n */\r\nsap.ui.define([\r\n \"sap/ui/base/Object\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators\",\r\n \"ui/s2p/mm/requisition/maintain/s1/misc/DataAccess\"\r\n], function(Object, EntityConstants, URLGenerator, DataAccess) {\r\n \"use strict\";\r\n\r\n var DataManager = Object.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.DataManager\");\r\n\r\n DataManager._oPopOver = null;\r\n\r\n DataManager.EntityConstants = EntityConstants;\r\n /**\r\n  * Trigger a GET request to get the current draft for user, if the draft is present then\r\n  * a pop-up will ask user create new draft or continue with the same draft\r\n  *\r\n  * @param {oParentObject} : ParentObject which is calling this method, should be a instance of a controller\r\n  * @param {successHandler} : Callback method if the OData service call return success (Status Code : 200)\r\n  * @param {errorHandler} : Callback method if the OData service call return error (Status Code : 400, 500, 503)\r\n  * @param {prNo} : In case of Edit draft scenario, we have to pass the PR no to get the draft guid\r\n  *\r\n  */\r\n //\r\n DataManager.getCurrentDraft = function(mParameters, prNo) {\r\n  var obj = URLGenerator.prototype.getHeaderWorkingDraft(prNo);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n\r\n };\r\n\r\n // get items based on the selected product type(material/service)\r\n DataManager.getItemsforProductType = function(mParameters, prNo, draftKey, activeEntity, ProductType) {\r\n  var obj = URLGenerator.prototype.getItemsforProductType(draftKey,  prNo, activeEntity, ProductType );\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n\r\n // DataManager.getCurrentDraft = function(mParameters, prNo) {\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  if (prNo) {\r\n //   //Editing a already existing PR, read the draft with PR No \r\n //   oModel.read(\"/\" + EntityConstants.getEntityName('headerEntity'), {\r\n //    urlParameters: {\r\n //     \"$filter\": \"HasActiveEntity eq true and PurchaseRequisition eq '\" + prNo + \"'\"\r\n //    },\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n //  } else {\r\n //   //Read the current active draft in case of new draft creation\r\n //   oModel.read(\"/\" + EntityConstants.getEntityName('headerEntity'), {\r\n //    urlParameters: {\r\n //     \"$filter\": \"IsActiveEntity eq false and HasActiveEntity eq false\"\r\n //    },\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n\r\n //   });\r\n //  }\r\n\r\n // };\r\n /**\r\n  * Triggers a DELETE request to delete the current draft\r\n  */\r\n\r\n DataManager.deleteAndCreateNewDraft = function(mParameters, draftKey, prNo) {\r\n  var objDelete = URLGenerator.prototype.deleteWorkingDraft(draftKey, prNo);\r\n  var objCreate = URLGenerator.prototype.createNewDraft();\r\n  DataAccess.prototype.deleteAndCreateNewDraft(objDelete.returnURL, objCreate.returnURL, mParameters);\r\n };\r\n\r\n DataManager.deleteDraft = function(mParameters, draftKey, prNo) {\r\n  var obj = URLGenerator.prototype.deleteWorkingDraft(draftKey, prNo);\r\n\r\n  DataAccess.prototype.deleteCurrentDraft(obj.returnURL, mParameters);\r\n\r\n };\r\n // DataManager.deleteDraft = function(mParameters, draftKey, prNo) {\r\n //  //Parent controller isnot defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n //  //Assert draft key, if undefined throw an error\r\n //  jQuery.sap.assert(draftKey, \"Draft Key is undefined\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.remove(\r\n //   \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" + draftKey + \"')\", {\r\n //    batchGroupId: 1,\r\n //    changeSetId: 1,\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n\r\n // };\r\n /**\r\n  * Creates new header draft\r\n  */\r\n DataManager.createNewDraft = function(mParameters) {\r\n  var obj = URLGenerator.prototype.createNewDraft();\r\n\r\n  DataAccess.prototype.create(obj.returnURL, null, mParameters);\r\n\r\n };\r\n // DataManager.createNewDraft = function(mParameters) {\r\n //  //Parent controller isnot defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n //  //Assert whether view has model or not, throw error if not\r\n //  jQuery.sap.assert(mParameters.oParentObject.getAppModel(), \"No model defined for the controller\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.createEntry(EntityConstants.getEntityName('headerEntity'), {\r\n //   batchGroupId: \"neverSubmit\",\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n /**\r\n  *\r\n  *\r\n  */\r\n DataManager.getItemDetails = function(mParameters, draftKey, draftItemKey, prNo, prItem, activeEntity) {\r\n  var obj = URLGenerator.prototype.getItemDetails(draftKey, draftItemKey, prNo, prItem, activeEntity);\r\n\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n\r\n };\r\n\r\n DataManager.getAccounting = function(mParameters, draftKey, draftItemKey, prNo, prItem, activeEntity) {\r\n  var obj = URLGenerator.prototype.getAccounting(draftKey, draftItemKey, prNo, prItem, activeEntity);\r\n\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n\r\n };\r\n\r\n DataManager.getHeader = function(mParameters, draftKey, prNo, activeEntity) {\r\n  var obj = URLGenerator.prototype.getHeaderData(draftKey, prNo, activeEntity);\r\n\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n\r\n };\r\n // DataManager.getHeader = function(mParameters, draftKey, prNo) {\r\n //  //Parent controller isnot defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n //  //Assert whether view has model or not, throw error if not\r\n //  jQuery.sap.assert(mParameters.oParentObject.getAppModel(), \"No model defined for the controller\");\r\n\r\n //  //Assert draftkey- If draft key is not passed then throw error\r\n //  jQuery.sap.assert(draftKey, \"No model defined for the controller\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(\r\n //   \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" + draftKey + \"')\", {\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n // };\r\n /**\r\n  *\r\n  */\r\n // DataManager.getAccAssignmentValue = function(mParameters, accCategory) {\r\n //  var searchUrl = \"/I_AccAssgnmtCategory\";\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": \"AccountAssignmentCategory eq \" + \"'\" + accCategory + \"'\"\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getAccAssignmentValue = function(mParameters, accCategory) {\r\n  var obj = URLGenerator.prototype.getAccAssignmentValue(accCategory);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n\r\n };\r\n\r\n // DataManager.getSupplierName = function(mParameters, supplierID) {\r\n //  var searchUrl = \"/\" + EntityConstants.getEntityName('supplierEntity');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": \"Supplier eq \" + \" \" + \"'\" + supplierID + \"'\"\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getSupplierName = function(mParameters, supplierID) {\r\n  var obj = URLGenerator.prototype.getSupplierName(supplierID);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n\r\n DataManager.checkSupplierName = function(mParameters, supplierID) {\r\n  var obj = URLGenerator.prototype.checkSupplierName(supplierID);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n // DataManager.getMaterialDescription = function(mParameters, materialID) {\r\n //  var searchUrl = \"/\" + EntityConstants.getEntityName('materialEntity');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": \"Material eq \" + \" \" + \"'\" + materialID + \"'\"\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getMaterialDescription = function(mParameters, materialID) {\r\n  var obj = URLGenerator.prototype.getMaterialDescription(materialID);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n\r\n DataManager.getMaterialGroupDescription = function(mParameters, materialGroupID) {\r\n  var obj = URLGenerator.prototype.getMatGrpDesc(materialGroupID);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n // DataManager.getMaterialGroupDescription = function(mParameters, materialGroupID) {\r\n //  var searchUrl = \"/\" + EntityConstants.getEntityName('materialGroupEntity');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": \"MaterialGroup eq \" + \" \" + \"'\" + materialGroupID + \"'\"\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getGLAccountDescription = function(mParameters, glAccountId, companyCode) {\r\n  var searchUrl = \"/I_GLAccount\" + \"(CompanyCode=\" + \"'\" + companyCode + \"'\" + \",GLAccount=\" + \"'\" + glAccountId + \"'\" + \")\";\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  oModel.read(searchUrl, {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n  });\r\n };\r\n\r\n // DataManager.getCostCentreDescription = function(mParameters, costCentreID) {\r\n //  var searchUrl = \"/I_CostCenter\";\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": \"CostCenter eq \" + \" \" + \"'\" + costCentreID + \"'\",\r\n //    \"$top\": 1\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getCostCentreDescription = function(mParameters, costCentreID) {\r\n  var obj = URLGenerator.prototype.getCostCentreDescription(costCentreID);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n\r\n DataManager.getSupplierDescription = function(mParameters, supplierId) {\r\n  var searchUrl = \"/C_MM_SupplierValueHelp\" + \"('\" + supplierId + \"')\";\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  oModel.read(searchUrl, {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n  });\r\n };\r\n\r\n // DataManager.getCostCentreDescByControllingArea = function(mParameters, controllingArea, costCentreID) {\r\n //  var searchUrl = \"/I_CostCenter\" + \"(ControllingArea=\" + \"'\" + controllingArea + \"'\" + \",CostCenter=\" + \"'\" + costCentreID + \"'\" + \")\";\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getCostCentreDescByControllingArea = function(mParameters, controllingArea, costCentreID) {\r\n  var obj = URLGenerator.prototype.getCostCentreDescByControllingArea(controllingArea, costCentreID);\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n };\r\n\r\n // DataManager.getItems = function(mParameters, draftKey, prNo) {\r\n //  var obj = URLGenerator.prototype.getItems(draftKey, prNo);\r\n //  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n // };\r\n // DataManager.getItems = function(mParameters, draftKey, prNo) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(\r\n //   \"/\" + EntityConstants.getEntityName('headerEntity') +\r\n //   \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" + draftKey + \"')/\" + EntityConstants.getEntityNavigationName('item'), {\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n // };\r\n\r\n DataManager.createNewItem = function(mParameters, draftKey, prNo, oData) {\r\n  var obj = URLGenerator.prototype.createNewItem(draftKey, prNo, false);\r\n  // ERROR: should be create method\r\n  DataAccess.prototype.create(obj.returnURL, oData, mParameters);\r\n\r\n };\r\n // DataManager.createNewItem = function(mParameters, draftKey, prNo, oData) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('headerEntity') +\r\n //   \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" + draftKey + \"')/\" +\r\n //   EntityConstants.getEntityNavigationName('item');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.create(sUrl, oData, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n // DataManager.deleteItem = function(mParameters, itemDraftKey, prNo, prItemNo) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n\r\n //  oModel.remove(\"/\" + EntityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + prNo +\r\n //   \"',PurchaseRequisitionItem='\" + prItemNo + \"',PurReqnItemDraftUUID=guid'\" +\r\n //   itemDraftKey + \"')\", {\r\n //    batchGroupId: 1,\r\n //    changeSetId: 1,\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n\r\n //   });\r\n // };\r\n\r\n DataManager.deleteItem = function(mParameters, itemDraftKey, prNo, prItemNo) {\r\n  var obj = URLGenerator.prototype.deleteItem(prNo, prItemNo, itemDraftKey);\r\n  DataAccess.prototype.deleteCurrentDraft(obj.returnURL, mParameters);\r\n };\r\n\r\n DataManager.activateDocument = function(mParameters, draftKey, prNo) {\r\n  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n  var parameters = {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject),\r\n   urlParameters: {\r\n    PurchaseRequisition: prNo,\r\n    DraftUUID: draftKey,\r\n    IsActiveEntity: false\r\n   },\r\n   method: \"POST\"\r\n  };\r\n\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  oModel.callFunction(\"/\" + EntityConstants.getFunctionName('orderFunc'), parameters);\r\n };\r\n\r\n DataManager.editDocument = function(mParameters, draftKey, prNo) {\r\n  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n  var parameters = {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject),\r\n   urlParameters: {\r\n    PurchaseRequisition: prNo,\r\n    DraftUUID: draftKey,\r\n    IsActiveEntity: true\r\n   },\r\n   method: \"POST\"\r\n  };\r\n\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  oModel.callFunction(\"/\" + EntityConstants.getFunctionName('editDraft'), parameters);\r\n };\r\n DataManager.updateHeader = function(mParameters, draftKey, prNo, oData) {\r\n  var obj = URLGenerator.prototype.updateHeader(draftKey, prNo);\r\n  DataAccess.prototype.update(obj.returnURL, oData, mParameters);\r\n };\r\n // DataManager.updateHeader = function(mParameters, draftKey, prNo, oData) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurReqnDraftUUID=guid'\" +\r\n //   draftKey +\r\n //   \"')\";\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.update(sUrl, oData, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n DataManager.updateItemDetails = function(mParameters, draftItemKey, prNo, oData, prItemNumber) {\r\n  delete oData.HasActiveEntity;\r\n  var obj = URLGenerator.prototype.updateItemDetails(draftItemKey, prNo, prItemNumber, false);\r\n  DataAccess.prototype.update(obj.returnURL, oData, mParameters);\r\n };\r\n // DataManager.updateItemDetails = function(mParameters, draftItemKey, prNo, oData, prItemNumber) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('itemEntity') +\r\n //   \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prItemNumber + \"',PurReqnItemDraftUUID=guid'\" + draftItemKey + \"')\";\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n\r\n //  delete oData.HasActiveEntity;\r\n //  oModel.update(sUrl, oData, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n\r\n //  // oModel.update(sUrl, oData, {\r\n //  //  success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //  //  error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  // });\r\n // };\r\n // DataManager.updateAccountAssignment = function(mParameters, draftAccountID, prNo, oData, prItemNumber, sURL) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var accAssignUrl =\r\n //   \"/\" + EntityConstants.getEntityName('accAssignEntity') +\r\n //   \"(AccountAssignmentNumber='01',PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prItemNumber +\r\n //   \"',PurReqnAcctDraftUUID=guid'\" +\r\n //   draftAccountID + \"')\";\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.update(sURL, oData, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.updateAccountAssignment = function(mParameters, draftAccountID, prNo, oData, prItemNumber, sURL) {\r\n  var obj = URLGenerator.prototype.updateAccountAssignment(sURL);\r\n  DataAccess.prototype.update(obj.returnUrl, oData, mParameters);\r\n };\r\n\r\n // DataManager.getDraftAccountID = function(mParameters, draftItemKey, prNo, prItemNumber) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var sUrl = \"/\" + this.EntityConstants.getEntityName('itemEntity') +\r\n //   \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prItemNumber + \"',PurReqnItemDraftUUID=guid'\" +\r\n //   draftItemKey + \"')/\" + this.EntityConstants.getEntityNavigationName('accountAssignment');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(sUrl, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getDraftAccountID = function(mParameters, draftItemKey, prNo, prItemNumber) {\r\n  var obj = URLGenerator.prototype.getDraftAccountID(prNo, prItemNumber, draftItemKey);\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n };\r\n\r\n // DataManager.getApprovalPreviewSet = function(mParameters, prNo, prItemNumber) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n //  var prNum = prNo;\r\n //  var prItmNum = prItemNumber;\r\n //  // var prNum = 10063380;\r\n //  // var prItmNum = 10;\r\n //  var prExpand = 'toApprover';\r\n //  var filterOne = \"PrNum eq '\" + prNum + \"'\";\r\n //  var filterTwo = \" and PrItmNum eq '\" + prItmNum + \"'\";\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName(\"approverEntity\");\r\n //  oModel.read(sUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": filterOne + filterTwo,\r\n //    \"$expand\": prExpand\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getApprovalPreviewSet = function(mParameters, prNo, prItemNumber) {\r\n  var obj = URLGenerator.prototype.getApprovalPreviewSet(prNo, prItemNumber);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n\r\n // DataManager.getApproverDetails = function(mParameters, sApproverId, prNum, prItmNum) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n //  // Fetch approver details to display business card.\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('approverDetails') +\r\n //   \"(PrNum='\" + prNum + \"', PrItmNum='\" + prItmNum + \"', Username='\" + sApproverId + \"')/\";\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(sUrl, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getApproverDetails = function(mParameters, sApproverId, prNum, prItmNum) {\r\n  var obj = URLGenerator.prototype.getApproverDetails(prNum, prItmNum, sApproverId);\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n };\r\n\r\n DataManager.getNotes = function(mParameters, itemKey, prNo, prNoItem) {\r\n  var obj = URLGenerator.prototype.getNotes(itemKey, prNo, prNoItem);\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n };\r\n\r\n // DataManager.getNotes = function(mParameters, itemKey, prNo, prNoItem) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(\r\n //   \"/\" + EntityConstants.getEntityName('itemEntity') +\r\n //   \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" + prNoItem + \"',PurReqnItemDraftUUID=guid'\" + itemKey + \"')/\" +\r\n //   EntityConstants.getEntityNavigationName('itemText'), {\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n // };\r\n\r\n DataManager.getAttributeDetails = function(mParameters, filterParam, languageParam) {\r\n  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  var sUrl = \"/\" + EntityConstants.getEntityName(\"attributeEntity\");\r\n  oModel.read(sUrl, {\r\n   urlParameters: {\r\n    \"$filter\": filterParam + languageParam\r\n   },\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n  });\r\n };\r\n\r\n DataManager.addToCart = function(mParameters, oData, draftkey) {\r\n  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  var sUrl = \"/\" + EntityConstants.getEntityName('headerEntity') + \"(PurchaseRequisition='',DraftUUID=guid'\" + draftkey + \"'\" +\r\n  \",IsActiveEntity=false\" +\r\n   \")/\" + EntityConstants.getEntityNavigationName('item');\r\n\r\n  oModel.create(sUrl, oData, {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n  });\r\n };\r\n\r\n // DataManager.updateNotes = function(mParameters, oModelNotes, draftItemTextId, prNo, oData, prItemNumber) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = oModelNotes;\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('notesEntityText') + \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" +\r\n //   prItemNumber +\r\n //   \"',PurReqnItemTextDraftUUID=guid'\" + draftItemTextId + \"')\";\r\n\r\n //  if (!oData.HasActiveEntity) {\r\n //   oModel.update(sUrl, oData, {\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n //  } else {\r\n\r\n //   delete oData.HasActiveEntity;\r\n //   oModel.update(sUrl, oData, {\r\n //    success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //    error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //   });\r\n //  }\r\n\r\n // };\r\n\r\n DataManager.updateNotes = function(mParameters, oModelNotes, draftItemTextId, prNo, oData, prItemNumber, documentText) {\r\n  var obj = URLGenerator.prototype.updateNotes(prNo, prItemNumber, draftItemTextId, documentText);\r\n  if (!oData.HasActiveEntity) {\r\n   if(oData.PurReqnItemLongtext !== \"\"){\r\n    DataAccess.prototype.update(obj.returnURL, oData, mParameters);\r\n   }else{\r\n    DataAccess.prototype.deleteItemNoteText(obj.returnURL, mParameters);\r\n   }\r\n  } else {\r\n   delete oData.HasActiveEntity;\r\n   if(oData.PurReqnItemLongtext !== \"\"){\r\n    DataAccess.prototype.update(obj.returnURL, oData, mParameters);\r\n   }else{\r\n    DataAccess.prototype.deleteItemNoteText(obj.returnURL, mParameters);\r\n   }\r\n  }\r\n };\r\n\r\n DataManager.createNotes = function(mParameters, oModelNotes, draftItemId, prNo, oData, prItemNumber) {\r\n  var obj = URLGenerator.prototype.createNotes(draftItemId, prItemNumber, prNo);\r\n\r\n  DataAccess.prototype.create(obj.returnURL, oData, mParameters, oModelNotes);\r\n\r\n };\r\n // DataManager.createNotes = function(mParameters, oModelNotes, draftItemId, prNo, oData, prItemNumber) {\r\n //  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n //  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n //   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n //  var oModel = oModelNotes;\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('itemEntity') + \"(PurchaseRequisition='\" + prNo + \"',PurchaseRequisitionItem='\" +\r\n //   prItemNumber + \"',PurReqnItemDraftUUID=guid'\" + draftItemId + \"')/\" +\r\n //   EntityConstants.getEntityNavigationName('itemText');\r\n\r\n //  oModel.create(sUrl, oData, {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n //  // oModel.create(sUrl, oData, mParameters);\r\n // };\r\n DataManager.catalogBind = function(mParameters, ServiceId, draftKey) {\r\n  var obj = URLGenerator.prototype.getCatalogBindUrl(ServiceId, draftKey);\r\n\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n\r\n };\r\n // DataManager.catalogBind = function(mParameters, ServiceId, draftKey) {\r\n //  var parentKey = draftKey;\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  var sUrl = \"/\" + EntityConstants.getEntityName('UserCatalogSet') + \"(LaunchFrom='PUNCH_OUT',ServiceId='\" + ServiceId + \"',ParentKey='\" +\r\n //   parentKey + \"',ProductId='')\";\r\n //  mParameters = {\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  };\r\n //  oModel.read(sUrl, mParameters);\r\n // };\r\n DataManager.searchResultsBinding = function(mParameters, filterparam) {\r\n  var obj = URLGenerator.prototype.getSearchResultsUrl(filterparam);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n\r\n };\r\n // DataManager.searchResultsBinding = function(mParameters, searchTerm) {\r\n //  var searchUrl = \"/\" + this.EntityConstants.getEntityName(\"productEntity\");\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": searchTerm\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.submitReview = function(mParameters, oData) {\r\n\r\n  //Parent controller is not defined, successHandler is undefined or errorHandler is undefined\r\n  jQuery.sap.assert(mParameters && mParameters.hasOwnProperty('oParentObject') && mParameters.hasOwnProperty('successHandler') &&\r\n   mParameters.hasOwnProperty('errorHandler'), \"Parameters undefined\");\r\n\r\n  var oModel = mParameters.oParentObject.getAppModel();\r\n  var sUrl = \"/\" + EntityConstants.getEntityName('reviewEntity');\r\n  oModel.create(sUrl, oData, {\r\n   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n  });\r\n\r\n };\r\n\r\n DataManager.filterResultsBinding = function(mParameters, filterparam) {\r\n  var obj = URLGenerator.prototype.getfilterResultsUrl(filterparam);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n\r\n };\r\n // DataManager.filterResultsBinding = function(mParameters, filterTerm) {\r\n //  var searchUrl = \"/\" + this.EntityConstants.getEntityName(\"FilterEntity\");\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(searchUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": filterTerm\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.priceScalefind = function(mParameters, filterparam) {\r\n  var obj = URLGenerator.prototype.getPriceScaleUrl(filterparam);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n\r\n };\r\n // DataManager.priceScalefind = function(mParameters, filterparam) {\r\n //  var prcscaleUrl = \"/\" + EntityConstants.getEntityName('priceScale');\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  oModel.read(prcscaleUrl, {\r\n //   urlParameters: {\r\n //    \"$filter\": filterparam\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject)\r\n //  });\r\n // };\r\n\r\n DataManager.getMaterialPrice = function(mParameters, material) {\r\n  var obj = URLGenerator.prototype.getMaterialPrice(material);\r\n  DataAccess.prototype.read(obj.returnURL, obj.urlParameters, mParameters);\r\n };\r\n // DataManager.getMaterialPrice = function(mParameters, material) {\r\n //  var entity = \"/\" + EntityConstants.getEntityName(\"materialPrice\");\r\n //  var oModel = mParameters.oParentObject.getAppModel();\r\n //  if (!material) {\r\n //   material = \"0000\";\r\n //  }\r\n //  oModel.callFunction(entity, {\r\n //   urlParameters: {\r\n //    \"Material\": material,\r\n //    \"Plant\": \"0000\",\r\n //    \"Requestor\": \"000000000\"\r\n //   },\r\n //   success: jQuery.proxy(mParameters.successHandler, mParameters.oParentObject),\r\n //   error: jQuery.proxy(mParameters.errorHandler, mParameters.oParentObject),\r\n //   method: \"POST\"\r\n //  });\r\n // };\r\n DataManager.headerSuccess = function(oControl, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"headersuccess\", values);\r\n  DataAccess.prototype.bindElement(oControl, obj.returnURL);\r\n };\r\n DataManager.updateMiniCartTotal = function(oControl, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"updateMiniCart\", values);\r\n  DataAccess.prototype.bindElement(oControl, obj.returnURL);\r\n };\r\n DataManager.prepareMiniCart = function(oControl, template, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"prepareMiniCart\", values);\r\n  DataAccess.prototype.bindItems(oControl, obj.returnURL, template);\r\n };\r\n DataManager.cartService = function(oControl, template, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"cartService\", values);\r\n  DataAccess.prototype.bindItems(oControl, obj.returnURL, template);\r\n };\r\n DataManager.genInfoCartView = function(oControl, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"genInfoCart\", values);\r\n  DataAccess.prototype.bindElement(oControl, obj.returnURL);\r\n };\r\n DataManager.genInfoCartButton = function(oControl, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"genInfoCart\", values);\r\n  DataAccess.prototype.bindElement(oControl, obj.returnURL);\r\n };\r\n DataManager.updateHeaderSuccess = function(oControl, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"updateHeaderSuccess\", values);\r\n  DataAccess.prototype.bindElement(oControl, obj.returnURL);\r\n };\r\n DataManager.readDummy = function(mParameters, values) {\r\n  var obj = URLGenerator.prototype.getURLForBinding(\"dummyItem\", values);\r\n  DataAccess.prototype.read(obj.returnURL, [], mParameters);\r\n };\r\n\r\n return DataManager;\r\n\r\n});",
		"ui/s2p/mm/requisition/maintain/s1/fragment/ItemStatus.fragment.xml": "<?xml version=\"1.0\"?>\r\n<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:time=\"sap.suite.ui.commons\" xmlns:core=\"sap.ui.core\" xmlns:f=\"sap.ui.layout.form\"\r\n xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns=\"sap.m\">\r\n\r\n <time:ProcessFlow id=\"itemProcessFlow\" scrollable=\"true\" foldedCorners=\"true\" nodePress=\"onNodePress\" nodes=\"{pf3>/nodes}\" lanes=\"{pf3>/lanes}\">\r\n  <time:nodes>\r\n   <time:ProcessFlowNode laneId=\"{pf3>lane}\" nodeId=\"{pf3>id}\" title=\"{pf3>title}\" titleAbbreviation=\"{pf3>titleAbbreviation}\"\r\n    children=\"{pf3>children}\" state=\"{pf3>state}\" stateText=\"{pf3>stateText}\" texts=\"{pf3>texts}\" focused=\"{pf3>focused}\"/>\r\n  </time:nodes>\r\n  <time:lanes>\r\n   <time:ProcessFlowLaneHeader laneId=\"{pf3>id}\" iconSrc=\"{pf3>icon}\" text=\"{pf3>label}\" position=\"{pf3>position}\"/>\r\n  </time:lanes>\r\n </time:ProcessFlow>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/misc/URLGenerators.js": "/*\r\n * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nsap.ui.define([\"sap/ui/base/Object\",\"ui/s2p/mm/requisition/maintain/s1/misc/URLproperties\",\"ui/s2p/mm/requisition/maintain/s1/misc/EntityConstants\"],function(O,U,E){var a=O.extend(\"ui.s2p.mm.requisition.maintain.s1.misc.URLGenerators\");a.prototype.setHeaderKeys=function(h){this.headerkeys=h;};a.prototype.getStatusFilterOptions=function(){return this.headerKeys;};a.prototype.getHeaderURL=function(){return this.headerURL;};a.prototype.updateHeader=function(d,p){var v=[p,\"guid'\"+d+\"'\",false];var u=a.prototype.getURLForBinding(\"headersuccess\",v);return{returnURL:u.returnURL};};a.prototype.updateItemDetails=function(d,p,b){var v=[p,b,\"guid'\"+d+\"'\",false];var u=a.prototype.getURLForBinding(\"item\",v);return{returnURL:u.returnURL};};a.prototype.getMatGrpDesc=function(m){var r=\"/\"+E.getEntityName('materialGroupEntity');var u=[];u.push(U.prototype.getFilters(\"matgrpdesc\",[m]));return{returnURL:r,urlParameters:u};};a.prototype.getHeaderWorkingDraft=function(p){var b=[];b.push(p);var u=[];u.push(U.prototype.getFilters(\"Header_WorkingDraft\",b));var r=\"/\"+E.getEntityName('headerEntity');return{urlParameters:u,returnURL:r};};a.prototype.deleteWorkingDraft=function(d,p){var v=[p,\"guid'\"+d+\"'\",false];var u=a.prototype.getURLForBinding(\"headersuccess\",v);return{returnURL:u.returnURL};};a.prototype.createNewDraft=function(){var r=\"/\"+E.getEntityName('headerEntity');return{returnURL:r};};a.prototype.getAccounting=function(d,b,p,c,e){if(e===undefined){e=false;}var v=[p,c,\"guid'\"+b+\"'\",e];var u=a.prototype.getURLForBinding(\"accounting\",v);return{returnURL:u.returnURL};};a.prototype.getItemDetails=function(d,b,p,c,e){if(e===undefined){e=false;}var v=[p,c,\"guid'\"+b+\"'\",e];var u=a.prototype.getURLForBinding(\"item\",v);return{returnURL:u.returnURL};};a.prototype.getItemsforProductType=function(d,p,b,P){var u=a.prototype.getURLForBinding(\"cartService\",[p,\"guid'\"+d+\"'\",false]);var c=[];c.push(U.prototype.getFilters(\"itemsforProductType\",[P]));return{returnURL:u.returnURL,urlParameters:c};};a.prototype.getHeaderData=function(d,p,b){if(b===undefined){b=false;}var v=[p,\"guid'\"+d+\"'\",b];var u=a.prototype.getURLForBinding(\"headersuccess\",v);return{returnURL:u.returnURL};};a.prototype.createNewItem=function(d,p){var v=[p,\"guid'\"+d+\"'\",false];var u=a.prototype.getURLForBinding(\"cartService\",v);return{returnURL:u.returnURL};};a.prototype.createNotes=function(d,p,b){var v=[b,p,\"guid'\"+d+\"'\",false];var u=a.prototype.getURLForBinding(\"itemText\",v);return{returnURL:u.returnURL};};a.prototype.getPriceScaleUrl=function(f){var r=\"/\"+E.getEntityName('priceScale');var u=[];u.push(f);return{urlParameters:u,returnURL:r};};a.prototype.getSearchResultsUrl=function(f){var r=\"/\"+E.getEntityName('productEntity');var u=[];u.push(f);return{urlParameters:u,returnURL:r};};a.prototype.getfilterResultsUrl=function(f){var r=\"/\"+E.getEntityName('FilterEntity');var u=[];u.push(f);return{urlParameters:u,returnURL:r};};a.prototype.getCatalogBindUrl=function(S,d){var r=\"/\"+E.getEntityName('UserCatalogSet')+\"(LaunchFrom='PUNCH_OUT',ServiceId='\"+S+\"',ParentKey='\"+d+\"',ProductId='')\";return{returnURL:r};};a.prototype.getMaterialPrice=function(m){var r=\"/\"+E.getEntityName('materialPrice');var u=[];u.push(U.prototype.getFilters(\"materialPrice\",[m]));return{returnURL:r,urlParameters:u};};a.prototype.getNotes=function(i,p,b){var v=[p,b,\"guid'\"+i+\"'\",false];var u=a.prototype.getURLForBinding(\"itemText\",v);return{returnURL:u.returnURL};};a.prototype.getAccAssignmentValue=function(b){var r=\"/I_AccAssgnmtCategory\";var u=[];u.push(U.prototype.getFilters(\"accAssignVal\",[b]));return{returnURL:r,urlParameters:u};};a.prototype.getDraftAccountID=function(p,b,d){var r=\"/\"+this.EntityConstants.getEntityName('itemEntity')+\"(PurchaseRequisition='\"+p+\"',PurchaseRequisitionItem='\"+b+\"',DraftUUID=guid'\"+d+\"')/\"+this.EntityConstants.getEntityNavigationName('accountAssignment');return{returnURL:r};};a.prototype.getCostCentreDescByControllingArea=function(p,c,b){var r=\"/I_CostCenter\"+\"(ControllingArea=\"+\"'\"+c+\"'\"+\",CostCenter=\"+\"'\"+b+\"'\"+\")\";return{returnURL:r};};a.prototype.getApproverDetails=function(p,b,A){var r=\"/\"+E.getEntityName('approverDetails')+\"(PrNum='\"+p+\"', PrItmNum='\"+b+\"', Username='\"+A+\"')/\";return{returnURL:r};};a.prototype.getMaterialDescription=function(m){var r=\"/\"+E.getEntityName('materialEntity');var u=[];u.push(U.prototype.getFilters(\"materialDesc\",[m]));return{returnURL:r,urlParameters:u};};a.prototype.getSupplierName=function(s){var r=\"/\"+E.getEntityName('supplierEntity');var u=[];u.push(U.prototype.getFilters(\"supplier\",[s]));return{returnURL:r,urlParameters:u};};a.prototype.checkSupplierName=function(s){var r=\"/\"+E.getEntityName('supplierEntity');var u=[];u.push(U.prototype.getFilters(\"supplierCheck\",[s]));return{returnURL:r,urlParameters:u};};a.prototype.updateAccountAssignment=function(u){return{returnURL:u};};a.prototype.getURLForBinding=function(s,v){var u;var k;var b;switch(s){case\"headersuccess\":case\"updateMiniCart\":case\"genInfoCart\":case\"updateHeaderSuccess\":k=E.getKeys(\"headerEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"headerEntity\")+\"(\"+b+\")\";break;case\"prepareMiniCart\":case\"cartService\":k=E.getKeys(\"headerEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"headerEntity\")+\"(\"+b+\")\";u=u+\"/\"+E.getEntityNavigationName(\"item\");break;case\"item\":k=E.getKeys(\"itemEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"itemEntity\")+\"(\"+b+\")\";break;case\"accounting\":k=E.getKeys(\"itemEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"itemEntity\")+\"(\"+b+\")\"+\"/to_PurReqnAccAssignment_WD\";break;case\"itemText\":k=E.getKeys(\"itemEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"itemEntity\")+\"(\"+b+\")\";u=u+\"/\"+E.getEntityNavigationName(\"itemText\");break;case\"dummyItem\":k=E.getKeys(\"itemEntity\");b=a.prepareURL(k,v);u=\"/\"+E.getEntityName(\"itemEntity\")+\"(\"+b+\")\";}return{returnURL:u};};a.prepareURL=function(k,v){var b={};for(var j=0;j<k.length;j++){b[k[j]]=v[j];}v=b;var u=\"\";u=u+k[0]+\"='\"+v[k[0]]+\"'\";for(var i=1;i<k.length;i++){u=u+\",\";if(typeof v[k[i]]!==\"boolean\"){if(v[k[i]].startsWith(\"guid\")){u=u+k[i]+\"=\"+v[k[i]];}else{if(v[k[i]]===\"false\"){v[k[i]]=false;u=u+k[i]+\"=\"+v[k[i]];}else{u=u+k[i]+\"='\"+v[k[i]]+\"'\";}}}else{u=u+k[i]+\"=\"+v[k[i]];}}return u;};a.prototype.updateNotes=function(p,b,d,c){var r=\"/\"+E.getEntityName('notesEntityText')+\"(PurchaseRequisition='\"+p+\"',PurchaseRequisitionItem='\"+b+\"',DraftUUID=guid'\"+d+\"',DocumentText='\"+c+\"',Language='\"+''+\"',IsActiveEntity=false)\";return{returnURL:r};};a.prototype.deleteItem=function(p,b,i){var r=\"/\"+E.getEntityName('itemEntity')+\"(PurchaseRequisition='\"+p+\"',PurchaseRequisitionItem='\"+b+\"',DraftUUID=guid'\"+i+\"',IsActiveEntity=false)\";return{returnURL:r};};a.prototype.getCostCentreDescription=function(c){var r=\"/I_CostCenter\";var u=[];u.push(U.prototype.getFilters(\"costCentre\",[c]));return{returnURL:r,urlParameters:u};};a.prototype.getApprovalPreviewSet=function(p,b){var r=\"/\"+E.getEntityName(\"respApproverEntity\");var f=U.prototype.getFilters(\"approvalPreview\",[p,b]);var u=[];u.push(f);return{returnURL:r,urlParameters:u};};return a;});",
		"ui/s2p/mm/requisition/maintain/s1/fragment/PRHistory.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns:core=\"sap.ui.core\" xmlns:footerbar=\"sap.ushell.ui.footerbar\" xmlns:l=\"sap.ui.layout\"\r\n xmlns:mvc=\"sap.ui.core.mvc\" xmlns:semantic=\"sap.m.semantic\" xmlns:smartField=\"sap.ui.comp.smartfield\" xmlns=\"sap.m\"\r\n xmlns:time=\"sap.suite.ui.commons\">\r\n <Popover placement=\"Right\" showHeader=\"false\" contentHeight=\"80%\" contentWidth=\"80%\">\r\n  <NavContainer id=\"navCon\">\r\n   <Page id=\"p1\" title=\"{i18n>purchasedItems}\">\r\n    <subHeader>\r\n     <Toolbar>\r\n      <SearchField liveChange=\"onItemSearch\" width=\"100%\"/>\r\n     </Toolbar>\r\n    </subHeader>\r\n    <List id=\"itemsList\" items=\"{pf2>/results}\">\r\n     <items>\r\n      <StandardListItem type=\"Navigation\" title=\"{pf2>PurchaseRequisitionItemText}\" description=\"{pf2>PurchaseRequisitionItem}\" press=\"handleNav\"/>\r\n     </items> \r\n    </List>\r\n   </Page>\r\n   <Page id=\"p2\" title=\"{i18n>itemStatus}\" showNavButton=\"true\" navButtonPress=\"goBack\">\r\n       <Panel class=\"sapUiNoContentPadding\" id=\"idItemStatus\">\r\n       <core:ComponentContainer id=\"BusProcessCompContainerMyPR\" name=\"sap.s4.cfnd.lib.businessprocessflow.component.freestyle\" propagateModel=\"true\"\r\n        settings=\"\\{&quot;layoutId&quot;:&quot;\\{UIModel&gt;/key\\}&quot;, &quot;docId&quot;:&quot;\\{UIModel&gt;/key2\\}&quot;, &quot;Item&quot;:&quot;\\{UIModel&gt;/Item\\}&quot;, &quot;KeyName&quot;:&quot;\\{UIModel&gt;/KeyName\\}&quot;, &quot;ItemKeyName&quot;:&quot;\\{UIModel&gt;/ItemKeyName\\}&quot;, &quot;FiscalYear&quot;:&quot;\\{UIModel&gt;/FiscalYear\\}&quot;, &quot;CompanyCode&quot;:&quot;\\{UIModel&gt;/CompanyCode\\}&quot;, &quot;FiscalYearKey&quot;:&quot;\\{UIModel&gt;/FiscalYearKey\\}&quot;, &quot;CompanyCodeKey&quot;:&quot;\\{UIModel&gt;/CompanyCodeKey\\}&quot;, &quot;serviceField&quot;:&quot;\\{UIModel&gt;/serviceField\\}&quot; \\}\"/>\r\n      </Panel>\r\n    </Page>\r\n  </NavContainer>\r\n </Popover>\r\n</core:FragmentDefinition>",
		"ui/s2p/mm/requisition/maintain/s1/fragment/PopOver.fragment.xml": "<!--\r\n\r\n    Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n\r\n-->\r\n<core:FragmentDefinition xmlns=\"sap.m\" xmlns:core=\"sap.ui.core\">\r\n <Popover showHeader = \"false\"  placement=\"Top\" >\r\n  <footer>\r\n   <Toolbar>\r\n    <ToolbarSpacer/>\r\n    <Button icon = \"sap-icon://email\" id=\"email\" text =\"{i18n>sendEmail}\" press=\"sendEmail\"/>\r\n   </Toolbar>\r\n  </footer>\r\n  <!--<Image src=\"{ProductPicUrl}\" width=\"15em\" densityAware=\"false\"/>-->\r\n </Popover>\r\n</core:FragmentDefinition>"
	}
});