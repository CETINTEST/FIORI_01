/*
 * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","ui/s2p/mm/requisition/maintain/s1/model/models","sap/ui/Device","ui/s2p/mm/requisition/maintain/s1/controller/ErrorHandler","ui/s2p/mm/requisition/maintain/s1/controller/BaseController","ui/s2p/mm/requisition/maintain/s1/localService/mockserver"],function(U,R,m,D,E,B,M){"use strict";return U.extend("ui.s2p.mm.requisition.maintain.s1.Component",{metadata:{manifest:"json",config:{fullWidth:true}},init:function(){try{var p=window.location;U.prototype.init.apply(this,arguments);this._oErrorHandler=new E(this);this.setModel(m.createDeviceModel(),"device");this.setModel(m.createFLPModel(),"FLP");this.getRouter().initialize();this.getComponentData().changingSourcePageAllowed=true;var u=this.getComponentData();if(u.startupParameters["page"]){this.getComponentData().sourcePage=u.startupParameters["page"][0];this.getComponentData().changingSourcePageAllowed=false;}if(u.startupParameters["draftKey"]){this.getComponentData().draftKey=u.startupParameters["draftKey"][0];}if(u.startupParameters["DocumentNo"]){this.getComponentData().purchaseRequisition=u.startupParameters["DocumentNo"][0];}if(u.startupParameters["DocumentItemNo"]){this.getComponentData().purReqnItem=u.startupParameters["DocumentItemNo"][0];}if(u.startupParameters["DocumentItemDraft"]){this.getComponentData().purReqnItemDraft=u.startupParameters["DocumentItemDraft"][0];}if(u.startupParameters["ItemPath"]){this.getComponentData().PRitemPath=u.startupParameters["ItemPath"][0];}if(u.startupParameters["IsExtPurgScenario"]){this.getComponentData().isExtPurgScenario=u.startupParameters["IsExtPurgScenario"][0];}if(M.MockServerMode){this.getRouter().navTo("Search");}else{window.decodeURIComponent(p);p+=" ";if(p.search("searchTerm")<0){if(p.search("CartOverview")>=0){this.getRouter().navTo("CartOverview",{DraftKey:u.draftKey,PurchaseRequisition:u.purchaseRequisition});}else{if(u.startupParameters["mode"]=="create"){if(p.search('Freetext')>0){}else{this.getRouter().navTo("Search");}}else{if(p.search('Freetext')>0){}else{this.getRouter().navTo("PurReqList");}}}}}var b=new sap.m.Button({text:this.getModel("i18n").getResourceBundle().getText("usersettings"),tooltip:this.getModel("i18n").getResourceBundle().getText("usersettings"),press:jQuery.proxy(function(){this.showSettingsDialog({});},this)});b.addStyleClass("sapUshellActionItem");sap.ushell.services.AppConfiguration.addApplicationSettingsButtons([b]);}catch(e){}},showSettingsDialog:function(){var c=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");var a=this.getComponentData().startupParameters["mode"];var i;var s;if(this.getComponentData().startupParameters["page"]){s=this.getComponentData().startupParameters["page"][0];}else{s=this.getComponentData().sourcePage;}if(a[0]==="create"){i="create";}else{i="manageLineItems";}c.toExternal({target:{semanticObject:"UserDefaults",action:"manage"},params:{BusinessObject:["PurchaseRequisition"],Intent:[i],Mode:[a],page:[s],draftKey:[this.getComponentData().draftKey],DocumentNo:[this.getComponentData().purchaseRequisition],DocumentItemNo:[this.getComponentData().purReqnItem],DocumentItemDraft:[this.getComponentData().purReqnItemDraft],ItemPath:[this.getComponentData().PRitemPath],IsExtPurgScenario:[this.getComponentData().isExtPurgScenario]}});},getQueryVariable:function(v){var q=window.location.search.substring(1);var a=q.split("&");for(var i=0;i<a.length;i++){var p=a[i].split("=");if(p[0]===v){return p[1];}}return(false);},createContent:function(){var r=U.prototype.createContent.apply(this,arguments);r.addStyleClass(this.getContentDensityClass());return r;},getContentDensityClass:function(){if(!this._sContentDensityClass){if(D.system.desktop){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="sapUiSizeCozy";}}return this._sContentDensityClass;}});});
